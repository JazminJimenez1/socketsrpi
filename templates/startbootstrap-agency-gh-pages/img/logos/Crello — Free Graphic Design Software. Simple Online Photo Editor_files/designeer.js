(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1072:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1476);t.createProject=r.createProject},1073:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(402),s=n(379),u=n(894),l=n(76),c=n(380),f={type:l.DesignElementType.ImageElement,filters:{brightness:0,contrast:0,saturate:0,tint:0,blur:0,crossProcess:0,vignette:0},cropOpts:{top:0,left:0,width:0,height:0}},h=function(e){function t(t){return e.call(this,o({},f,t))||this}return r(t,e),t.prototype.resize=function(e,t,n){var r=this.resizeState,i=r.initialRect,o=r.maxCropRatio,a=r.initOriginalWidth,s=r.initOriginalHeight,l=r.initialCrop,c=r.controlName,f=r.wasEnlarged;e>o&&(this.resizeState.wasEnlarged=!0);var h=u.resizeAndCropFrame(i,{controlName:c,anchorPoint:t,direction:n,maxCropRatio:o,ratio:e,wasEnlarged:f}),p=h.rect,d=h.crop,g;e/=h.cropRatio,this.props.width=p.width,this.props.height=p.height,this.props.left=p.position.x,this.props.top=p.position.y,this.props.originalImageWidth=a*e,this.props.originalImageHeight=s*e,this.props.cropOpts={left:(l.left+d.x)*e,top:(l.top+d.y)*e,width:p.width,height:p.height}},t.prototype.maxCropRatioForControl=function(e){switch(e){case s.SelectionFrameControlName.N:return 1+this.props.cropOpts.top/this.props.cropOpts.height;case s.SelectionFrameControlName.S:return(this.props.originalImageHeight-this.props.cropOpts.top)/this.props.cropOpts.height;case s.SelectionFrameControlName.W:return 1+this.props.cropOpts.left/this.props.cropOpts.width;case s.SelectionFrameControlName.E:return(this.props.originalImageWidth-this.props.cropOpts.left)/this.props.cropOpts.width}},t.prototype.handleResizeStart=function(e){this.resizeState={initialRect:this.getBoundingRect(),controlName:e,initialCrop:this.props.cropOpts,initOriginalWidth:this.props.originalImageWidth,initOriginalHeight:this.props.originalImageHeight,maxCropRatio:this.maxCropRatioForControl(e),wasEnlarged:!1}},t.prototype.handleResizeChange=function(t,n){var r=e.prototype.handleResizeChange.call(this,t,n);return r.ratio>this.resizeState.maxCropRatio&&(this.resizeState.wasEnlarged=!0),r},t.prototype.tryOn=function(e){this.stashedProps={src:this.props.src,cropOpts:this.props.cropOpts,originalImageWidth:this.props.originalImageWidth,originalImageHeight:this.props.originalImageHeight},this.props.src=e.src;var t={width:e.width,height:e.height},n={width:this.props.width,height:this.props.height};this.props.cropOpts=c.fitImageCropOptions(t,n);var r=c.fitImageDimensions(t,n);this.props.originalImageWidth=r.width,this.props.originalImageHeight=r.height},t.prototype.tryOnCancel=function(){this.props.src=this.stashedProps.src,this.props.cropOpts=this.stashedProps.cropOpts,this.props.originalImageWidth=this.stashedProps.originalImageWidth,this.props.originalImageHeight=this.stashedProps.originalImageHeight,this.stashedProps=null},t.prototype.tryOnFinish=function(){this.stashedProps=null},t.prototype.tryOnAllowed=function(e){return this.state.templateAsset&&e.type===l.DesignElementType.ImageElement},t}(a.SingleElement);t.ImageElement=h},1074:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Preview="Preview",e.Playing="Playing",e.Seeking="Seeking"}(r=t.VideoElementState||(t.VideoElementState={}))},1075:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(893),u=n(91),l=function(e){function t(t){var n=e.call(this,t)||this;return n.elements=[],n}return r(t,e),t.prototype.add=function(e,t){this.elements.push(e)},t.prototype.resize=function(t,n,r){e.prototype.resize.call(this,t,n,r),this.elements.forEach(function(e){e.resize(t,{x:0,y:0},r)})},t.prototype.serialize=function(){return o({},this.props,{elements:this.elements.map(function(e){return e.serialize()})})},t.prototype.handleResizeStart=function(t){e.prototype.handleResizeStart.call(this,t),this.elements.forEach(function(e){e.handleResizeStart()})},t.prototype.find=function(e){var t,n;if(this.props.uuid===e)return this;try{for(var r=a(this.elements),i=r.next();!i.done;i=r.next()){var o,s=i.value.find(e);if(s)return s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.clone=function(){var e,t,n=this.create(o({},u.deepCopy(o({},this.props,{elements:[]})),{uuid:u.generateUuid()}));try{for(var r=a(this.elements),i=r.next();!i.done;i=r.next()){var s=i.value;n.add(s.clone())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},t}(s.DesignElement);t.BaseGroupElement=l},1076:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(509),i=n(1491);function o(e,t){void 0===t&&(t={shallow:!1});var n=new i.MaskElement(e);return e.elements&&e.elements.forEach(function(e){var i=r.createDesignElement(e,t);n.add(i,t.shallow)}),n}t.createMaskElement=o},1077:function(e,t,n){"use strict";function r(e){var t=e.filters,n=e.filtersIntensityEnabled,r=e.filtersPreset,i=e.filtersPresetIntensity,o={};return t&&(o.filters=t),n&&(o.filtersIntensityEnabled=n),r&&(o.filtersPreset=r),i&&(o.filtersPresetIntensity=i),o}Object.defineProperty(t,"__esModule",{value:!0}),t.mapProtoFilterPropsToDomain=r},1078:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};function o(e){var t=e.map(function(e){return e.getBoundingRect()}).reduce(function(e,t){return i(e,t.getVertices())},[]),n=Math.min.apply(Math,i(t.map(function(e){var t;return e.x}))),r=Math.min.apply(Math,i(t.map(function(e){var t;return e.y}))),o,a;return{top:r,left:n,width:Math.max.apply(Math,i(t.map(function(e){var t;return e.x})))-n,height:Math.max.apply(Math,i(t.map(function(e){var t;return e.y})))-r}}Object.defineProperty(t,"__esModule",{value:!0}),t.calcFrameSize=o},1091:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1092),i=n(1596),o=n(1598),a=n(1603),s=n(1605),u=n(1104),l=n(1607),c=n(1609),f=n(1612),h=n(1614),p=n(1616),d=n(76),g=n(743);t.elementView=function(e){return function(t){switch(t.type){case d.DesignElementType.TextElement:return c.textView(e)(t);case d.DesignElementType.ImageElement:return r.imageView(e)(t);case d.DesignElementType.SvgElement:return i.svgView(e)(t);case d.DesignElementType.MaskElement:return o.maskView(e)(t);case d.DesignElementType.ColoredBackground:return a.coloredBackgroundView(e)(t);case d.DesignElementType.IllustrationElement:return s.illustrationView(e)(t);case d.DesignElementType.VideoElement:return u.videoView(e)(t);case d.DesignElementType.GroupElement:return l.persistGroupView(e)(t);case d.DesignElementType.RectElement:return f.rectView(e)(t);case d.DesignElementType.EllipseElement:return h.ellipseView(e)(t);case d.DesignElementType.SimpleLineElement:return p.simpleLineView(e)(t);default:throw new g.ArgumentOutOfRangeError(t.type.toString())}}}},1092:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(91),a=n(1103);t.imageViewPropsSelector=function(e){return function(t){var n=t.filters;return r({filters:n},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e)})}},t.imageView=function(e){return o.compose(t.imageViewPropsSelector(e),a.serializeImageElementToKonva)}},1093:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(76),a=n(1575),s=n(85),u=n(1576),l=n(1578),c=n(91),f=n(1579),h=n(1581);function p(e){var t=e.selectedElement;return t&&t.uuid===s.TEMPORARY_GROUP_UUID}function d(e){var t;return e.selectionFrame.selectedUUIDs.length>0}t.overlaysViewPropsSelector=function(e){return function(){return{hasTemporaryGroup:p(e.selectionFrame),hasSelectionFrame:d(e)}}},t.hasTemporaryGroupSelector=p,t.hasSelectionFrameSelector=d,t.serializeOverlaysToKonva=function(e){return function(t){var n=t.hasSelectionFrame,r=t.hasTemporaryGroup,c=[];if(n){var p=h.selectionFrameView(e);p&&c.push(p)}return{attrs:{key:s.OVERLAYS_KEY},className:o.KonvaTypes.Layer,children:i(r?[f.temporaryGroupView(e)]:[],c,[u.serializeCroppingFrameToKonva(e),a.serializeMultiSelectionFrameToKonva(e),l.serializeGuidesToKonva(e)])}}},t.overlaysView=function(e){return c.compose(t.overlaysViewPropsSelector(e),t.serializeOverlaysToKonva(e))(null)}},1094:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=n(128),a=n(85);function s(e){var t=e.point,n=e.id,o=e.color;return{attrs:r({key:n,id:n,name:n,x:t.x,y:t.y,radius:a.SELECTION_CONTROL_SIZE/2,fill:o,stroke:a.SELECTION_CONTROL_BASE_COLOR,strokeWidth:a.SELECTION_CONTROL_STROKE_WIDTH},a.SELECTION_CONTROL_SHADOW_PARAMS),className:i.KonvaTypes.Circle}}function u(e){var t=e.point,n=e.angle,s=e.id,u=e.color,l=a.SELECTION_CONTROL_SIZE/2,c=t.x-l,f=t.y-l;return{attrs:r({key:s,id:s,name:s,x:c+l,y:f+l,rotation:o.radiansToDegrees(n),offsetX:l,offsetY:l,width:a.SELECTION_CONTROL_SIZE,height:a.SELECTION_CONTROL_SIZE,fill:a.SELECTION_CONTROL_BASE_COLOR,stroke:u,strokeWidth:a.SELECTION_CONTROL_STROKE_WIDTH},a.SELECTION_CONTROL_SHADOW_PARAMS),className:i.KonvaTypes.Rect}}function l(e){var t=e.x,n=e.y,r=e.width,s=e.height,u=e.angle,l=e.color,c=e.id,f=e.name,h;return{attrs:{id:c,key:c,name:void 0===f?"":f,x:t+r/2,y:n+s/2,width:r,height:s,rotation:o.radiansToDegrees(u),offsetX:r/2,offsetY:s/2,stroke:l,strokeWidth:a.SELECTION_FRAME_WIDTH,dash:a.SELECTION_FRAME_DASH,listening:!1},className:i.KonvaTypes.Rect}}function c(e){var t=e.point,n=e.id;return{attrs:r({key:"locked_circle_"+n,id:n,name:n,x:t.x,y:t.y,radius:a.LOCKED_SELECTION_CONTROL_SIZE/2,fill:a.SELECTION_CONTROL_BASE_COLOR,stroke:a.LOCKED_SELECTION_CONTROL_ACCENT_COLOR,strokeWidth:a.LOCKED_SELECTION_CONTROL_STROKE_WIDTH},a.SELECTION_CONTROL_SHADOW_PARAMS),className:i.KonvaTypes.Circle}}function f(e){var t=e.point,n=e.id;return{attrs:{key:"locked_lock_"+n,id:n,name:n,x:t.x-5,y:t.y-7,data:a.LOCKED_SELECTION_CONTROL_LOCK_ICON_PATH,fill:a.LOCKED_SELECTION_CONTROL_LOCK_ICON_FILL,scale:{x:1.4,y:1.4}},className:i.KonvaTypes.Path}}t.serializeCircleControl=s,t.serializeSquareControl=u,t.serializeFrame=l,t.serializeLockedCircleControl=c,t.serializeLockedLockControl=f},1095:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76);function i(e,n){void 0===n&&(n=.5);var i=e.elementX,s=e.elementY,u=e.pageX,l=e.pageY,c,f=1/(e.zoom||1);return{attrs:{key:t.BACKGROUND_LABEL_NAME,name:t.BACKGROUND_LABEL_NAME,x:u-i,y:l-s},className:r.KonvaTypes.Group,children:[o(n,f),a(f)]}}function o(e,t){var n,i,o,a;return void 0===t&&(t=1),{attrs:{key:"backgroundLabelContainer",x:0,y:0,data:"M0,0 H93 V10 C93,10 93,19 84,19 H0 z",fill:"#1B2935",opacity:e,strokeWidth:1,stroke:"#525c6e",scale:{x:t,y:t}},className:r.KonvaTypes.Path}}function a(e){var t,n,i;return void 0===e&&(e=1),{attrs:{key:"backgroundLabelText",fontSize:12,fontFamily:"GeometriaLight",text:"Background",fill:"#e2e2e2",offset:{x:-15,y:-4},scale:{x:e,y:e}},className:r.KonvaTypes.Text}}t.BACKGROUND_LABEL_NAME="backgroundLabel",t.backgroundLabelToKonva=i},1103:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(76),a=n(1595),s=n(321),u=n(128),l=n(299);function c(e){var t=e.uuid,n=e.height,a=e.width,c=e.angle,h=e.visible;return{attrs:r({},i.getKonvaPosition(e),{key:t,height:n,width:a,name:t,rotation:u.radiansToDegrees(c),visible:h},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:o.KonvaTypes.Group,children:l.hasZeroDimensions(e)?[]:[s.serializeHitRegionToKonva(e),s.serializeImageToKonva(e),f(e),s.serializeHighlightToKonva(e),s.serializeSelectionBorderToKonva(e)]}}function f(e){var t=e.width,n=e.height,r=e.uuid,i=e.filters;return{attrs:{name:r,key:"tint",width:t,height:n,fill:a.getTintColor(i),visible:0!==i.tint,listening:!1},className:o.KonvaTypes.Rect}}t.serializeImageElementToKonva=c,t.serializeTintToKonva=f},1104:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1105),a=n(907),s=n(91);t.videoViewPropsSelector=function(e){return function(t){var n=e.timeline;return r({},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e),isPlaying:Number.isInteger(n.currentFrame)&&a.findVideoAnimations(t.animations).length>0})}},t.videoView=function(e){return s.compose(t.videoViewPropsSelector(e),o.serializeVideoElementToKonva)}},1105:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(299),s=n(85),u=n(128),l=n(76);function c(e){var t=e.uuid,n=e.height,s=e.width,c=e.angle;return{attrs:r({},i.getKonvaPosition(e),{key:t,name:t,height:n,width:s,rotation:u.radiansToDegrees(c)},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e),image:null}),className:l.KonvaTypes.Group,children:a.hasZeroDimensions(e)?[]:[o.serializeHitRegionToKonva(e),h(e),f(e),o.serializeHighlightToKonva(e),o.serializeSelectionBorderToKonva(e)]}}function f(e){var t=e.width,n=e.height,r=e.opacity,i=e.visible,o=e.isPlaying;return{attrs:{name:s.VIDEO_NAME,key:"video",height:n,width:t,opacity:r,listening:!1,visible:i&&o,image:null},className:l.KonvaTypes.Image}}function h(e){var t=e.width,n=e.height,r=e.opacity,i=e.isPlaying,o=e.visible;return{attrs:{name:s.IMAGE_NAME,key:"image",height:n,width:t,opacity:r,visible:o&&!i,listening:!1,image:null},className:l.KonvaTypes.Image}}t.serializeVideoElementToKonva=c},1106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMaskContentDimensions=function(e,t){var n=e.top,r,i,o;return{left:e.left/t,top:n/t,width:e.width/t,height:e.height/t}}},1107:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Thumb="thumb",e.Screen="screen",e.Download="download"}(r=t.MediaType||(t.MediaType={}))},1108:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=/\#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/gi,o=/fill: {0,1}\#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/gi,a=/\..*{.*}/gi;function s(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function u(e,t){var n,i,u,l,c=Array.from(e.getElementsByTagName("style"));if(c.length){var f=[];try{for(var h=r(c),p=h.next();!p.done;p=h.next()){var d,g;(p.value.innerHTML.match(a)||[]).forEach(function(n){var i,a;if(o.test(n)){var s=n.split("{")[0].trim();s=s.substr(0,s.length);var u=Array.from(e.querySelectorAll(s));try{for(var l=r(u),c=l.next();!c.done;c=l.next()){var h;c.value.setAttribute("data-color-id",t.id.toString())}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}-1===f.indexOf(s)&&f.push(s)}})}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}f.forEach(function(t){var n=new RegExp(t.substr(1,t.length),"g");e.innerHTML=e.innerHTML.replace(n,s(16).replace(/^\d*/,""))})}var v=Array.from(e.querySelectorAll('[fill="'+t.color+'"]'));try{for(var m=r(v),y=m.next();!y.done;y=m.next()){var E;y.value.setAttribute("data-color-id",t.id.toString())}}catch(e){u={error:e}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}return e.innerHTML}function l(e){var t=new DOMParser,n=e.match(i),r=(n=n||["#000"]).reduce(function(e,t){return e[t]=1,e},{}),o;return Object.keys(r).map(function(n,r){var i={id:r,color:n},o;return u(t.parseFromString(e,"image/svg+xml").querySelector("svg"),i),i}).filter(function(e){return null!==e})}t.indexElementsWithColor=u,t.indexColors=l},1123:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(85),o=n(378),a=n(128),s=n(894);t.getFontInlineStyle=function(e){return e.map(function(e){var t,n,r,i,o;return'<style>\n\t\t\t@font-face {\n\t\t\t\tfont-family: "'+e.family+'";\n\t\t\t\tsrc: url("data:'+e.mimeType+";charset=utf-8;base64,"+e.data+'");\n\t\t\t\tfont-weight: '+(e.bold?"bold":"normal")+";\n\t\t\t\tfont-style: "+(e.italic?"italic":"normal")+";\n\t\t\t}\n\t\t</style>"}).join("\n\n")};var u=function(e,t,n){var r=t.height/e.height,i=t.width/e.width;return Math.abs(1-i)>n&&(e=s.resizeRect(e,e.nw,a.vector(e.ne,e.nw),i,{proportional:!1})),Math.abs(1-r)>n&&(e=s.resizeRect(e,e.nw,a.vector(e.sw,e.nw),r,{proportional:!1})),e};t.resizeTextElement=function(e,t,n){void 0===n&&(n=.003);var i=e.getBoundingRect(),o=u(i,t,n),s=o.position,l=o.width,c=o.height;return s={x:Math.round(s.x),y:Math.round(s.y)},l=Math.round(l),c=Math.round(c),r({},a.pointToPosition(s),{width:l,height:c})},t.isMousePointOnArea=function(e,t,n){var r={x:t.left,y:t.top},i=new o.Rect(r,t.width,t.height,n);return a.isPointInRect(e,i)},t.getDimensionsWithPaddingsFromClientRect=function(e,t){return void 0===t&&(t=i.TEXT_ELEMENT_CLICKABLE_INNER_PADDING),{width:e.width-2*t,height:e.height-2*t,top:e.top+t,left:e.left+t}}},1124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.updatePage=r.userActionCreator("UPDATE_PAGE"),t.deletePage=r.userActionCreator("DELETE_PAGE"),t.copyPage=r.userActionCreator("COPY_PAGE"),t.movePageForward=r.userActionCreator("MOVE_PAGE_FORWARD"),t.movePageBackward=r.userActionCreator("MOVE_PAGE_BACKWARD"),t.addPage=r.userActionCreator("ADD_PAGE"),t.selectPage=r.userActionCreator("SELECT_PAGE")},1134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1700),i=n(85);function o(e){var t;return 2!==e.version&&!e.v2}function a(e){var t;return s(r.mapProtoPropsToDomainProps(e,{v1:!0}))}function s(e){return{project:e,width:0,height:0,containerWidth:0,containerHeight:0,pageMargin:i.PAGE_MARGIN,currentPageID:e.pages.length>0?e.pages[0].uuid:null,selectedUUIDs:[],backgroundColor:void 0,selectionFrame:null,zoom:1,scroll:{x:0,y:0},placeholderImageSrc:null,tryOnElementUuid:null}}t.shouldMigrateData=o,t.migrateData=a,t.convertData=s},1135:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1706),u,l=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.play=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){return this.logger.log("initial -> play"),e.seekVideo(t),e.playVideo(),e.state=new s.PlayingVideoPlayerState,[2]})})},t.prototype.stop=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.logger.log("initial -> stop"),e.currentTime===t?[2]:[4,e.seekVideo(t)];case 1:return n.sent(),e.applyToStage(),[2]}})})},t}(n(1136).VideoPlayerState);t.InitialVideoPlayerState=l},1136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(553),i=function(){function e(){this.logger=new r.Logger("VideoPlayer"),this.logger.enable=!1}return e}();t.VideoPlayerState=i},1137:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),u=n(926),l=n(927),c=n(928),f=n(88),h=function(){function e(e,t,n,r){this.stage=e,this.providers=[t,n,r]}return e.prototype.updateCursor=function(e){var t,n;try{for(var r=a(this.providers),i=r.next();!i.done;i=r.next()){var o;i.value.updateCursor(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e=r([s.injectable(),o(0,s.inject(f.DI_TYPES.IAppStage)),o(1,s.inject(f.DI_TYPES.RotationCursorProvider)),o(2,s.inject(f.DI_TYPES.ResizingCursorProvider)),o(3,s.inject(f.DI_TYPES.MovingCursorProvider)),i("design:paramtypes",[Object,u.RotationCursorProvider,l.ResizingCursorProvider,c.MovingCursorProvider])],e)}();t.CursorManager=h},1138:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(114),o=function(){function e(){}return e.prototype.resizingTemplate=function(e){var t;return'cursor: url("data:image/svg+xml;utf8,'+encodeURIComponent('<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="23px" height="23px" style="enable-background:new 0 0 22.7 22.7;"><g><g transform="rotate('+e+', 11.5, 11.5)"><polygon points="21.7,11.4 17.2,8.2 17.2,10.9 5.5,10.9 5.5,8.2 1,11.4 5.5,14.5 5.5,11.8 17.2,11.8 17.2,14.5"/><path fill="#FFFFFF" d="M5.5,8.2v2.7h11.7V8.2l4.5,3.1l-4.5,3.2v-2.7H5.5v2.7L1,11.4L5.5,8.2 M5.5,7.2c-0.2,0-0.4,0.1-0.6,0.2l-4.5,3.2c-0.5,0.3-0.6,0.9-0.3,1.4c0.1,0.1,0.2,0.2,0.3,0.3l4.5,3.1c0.5,0.3,1.1,0.2,1.4-0.3c0.1-0.2,0.2-0.4,0.2-0.6v-1.7h9.7v1.7c0,0.6,0.4,1,1,1c0.2,0,0.4-0.1,0.6-0.2l4.5-3.1c0.5-0.3,0.6-0.9,0.2-1.4c-0.1-0.1-0.2-0.2-0.2-0.2l-4.5-3.2c-0.5-0.3-1.1-0.2-1.4,0.3c-0.1,0.2-0.2,0.4-0.2,0.6v1.7H6.5V8.2C6.5,7.7,6.1,7.2,5.5,7.2z"/></g></g></svg>')+'") 10 10, auto'},e=r([i.injectable()],e)}();t.CursorTemplatesProvider=o},1147:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(174),o=r(n(1727)),a=n(912),s=n(76),u=n(405),l=n(85),c=n(445),f=n(769),h=n(635),p=n(320),d=n(554),g=n(555),v=n(401),m=n(88),y=n(636),E=n(91),b=function(e){return function(t,n){var r=e.get(m.DI_TYPES.ResourceRepository),s=function(e){return n().find(e)},u=new a.Subject;t.subscribe({complete:function(){return u.complete()}});var f=new o.default(function(e,t){return e.priority-t.priority}),h=0,d=function(e){h-=1,u.next(c.preloadStatusChange({elementUuid:e,status:p.LoadingStatus.Loaded})),g()},g=function(){if(!(0===f.length||h>=l.MAX_CONCURRENT_ASSETS_LOADING)){var e=f.dequeue().elementUuid,t=s(e);u.next(c.preloadStatusChange({elementUuid:e,status:p.LoadingStatus.Loading})),h+=1,r.loadElement(t.serialize()).then(function(){d(e)})}},v;return t.pipe(i.filter(c.preloadElement.match)).subscribe(function(e){var t=e.payload;f.enqueue({elementUuid:t.elementUuid,priority:t.priority}),u.next(c.preloadStatusChange({elementUuid:t.elementUuid,status:p.LoadingStatus.Pending})),g()}),u}},w=function(){return function(e,t){return e.pipe(i.filter(c.preloadPage.match),i.concatMap(function(e){var n=e.payload,r=t().project.elements.find(function(e){return e.props.uuid===n.pageUuid}),i=[];return r.elements.forEach(function(e){i.push(c.preloadElement({elementUuid:e.props.uuid,priority:n.priority}))}),i}))}},_=function(){return function(e,t){return e.pipe(i.filter(d.loadProject.match),i.concatMap(function(e){var n;return e.payload.project.pages.map(function(e){var n=e.uuid,r=t().currentPageID===n?l.PRELOAD_DEFAULT_PRIORITY:l.PRELOAD_CURRENT_PAGE_PRIORITY;return c.preloadPage({pageUuid:n,priority:r})})}))}},P=function(){return function(e,t){var n=function(e){return t().find(e)};return e.pipe(i.filter(f.addElement.match),i.filter(function(e){var t=e.payload;return!!n(t.data.uuid)}),i.map(function(e){var t=e.payload;return c.preloadElement({elementUuid:t.data.uuid,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})}))}},S=function(){return function(e){return e.pipe(i.filter(f.updateElement.match),i.filter(function(e){var t=e.payload;return v.isPartialSourceableElement(t.data)}),i.filter(function(e){var t,n=e.payload.data.src;return E.isInlineImage(n)}),i.map(function(e){var t=e.payload;return c.elementLoadLocally({elementUuid:t.data.uuid})}))}},A=function(e){return function(t,n){var r=new a.Subject,o=t.pipe(i.filter(c.elementLoadLocally.match));return t.subscribe({complete:function(){return r.complete()}}),o.subscribe(function(t){var i=t.payload,o=e.get(m.DI_TYPES.ResourceRepository),a,s=function(e){return n().find(e)}(i.elementUuid).props,u=s.src,l=s.uuid;o.replaceImage(l,u).then(function(){r.next(c.elementLoadedLocally({elementUuid:l}))})}),r}},O=function(){return function(e,t){return e.pipe(i.filter(f.updateElements.match),i.filter(function(e){var t=e.payload;return v.isPartialSourceableElement(t.data)}),i.concatMap(function(){return t().selectionFrameModel.selectedUUIDs.map(function(e){return c.preloadElement({elementUuid:e,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})})}))}},C=function(e){return function(t,n){return t.pipe(i.filter(function(e){return y.undo.match(e)||y.redo.match(e)}),i.concatMap(function(t){var r=function(e){return n().find(e)},i,o;return e.get(m.DI_TYPES.Workspace).getCurrentPage().elements.map(function(e){var t=e.props.uuid,n;return s.LocalImgTypes.includes(e.props.type)&&r(t).props.src?c.elementLoadLocally({elementUuid:t}):c.preloadElement({elementUuid:t,priority:l.PRELOAD_DEFAULT_PRIORITY})})}))}},x=function(){return function(e){return e.pipe(i.filter(h.tryOnTry.match),i.map(function(e){var t=e.payload;return c.preloadElement({elementUuid:t.targetID,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})}))}},T=function(){return function(e){return e.pipe(i.filter(h.tryOnCancel.match),i.map(function(e){var t=e.payload;return c.preloadElement({elementUuid:t.targetID,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})}))}},I=function(){return function(e,t){return e.pipe(i.filter(f.addTemplateElement.match),i.map(function(){return c.preloadPage({pageUuid:t().currentPageID,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})}))}},k=function(){return function(e){return e.pipe(i.filter(g.selectPage.match),i.map(function(e){var t=e.payload;return c.preloadPage({pageUuid:t,priority:l.PRELOAD_CURRENT_PAGE_PRIORITY})}))}};t.preloadEpic=u.combineEpics(b,w,_,S,O,A,C,x,T,P,I,k)},1148:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(348);t.combineEpics=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n,r){return a.merge.apply(void 0,i(e.map(function(e){return e(t)(n,r)})))}}},t.combineMutators=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n,i){var a,s;try{for(var u=o(e),l=u.next();!l.done;l=u.next()){var c=r(l.value,2),f=c[0],h=c[1];if(f.match(n))return h(t)(n,i)}}catch(e){a={error:e}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}return i}}}},1149:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(380);function o(e,t){var n=t.width,r=t.height,o=i.fitImageDimensions(e,t),a=o.width,s=o.height;return{top:(r-s)/2,left:(n-a)/2,width:a,height:s}}function a(e,t,n){return r({},e,t||n)}t.getBackgroundElementDimensions=o,t.getElementDimensions=a},1150:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(405),o=n(174),a=n(764),s=n(751),u=n(752),l=n(348),c=n(912),f=function(){return function(e,t){var n=e.pipe(o.filter(a.startAnimation.match)),i=e.pipe(o.filter(a.stopAnimation.match)),f=new c.Subject,h=n.pipe(o.concatMap(function(e){var n=e.payload,l=n.loop,c=r(n.range,2),h=c[0],p=c[1];return u.generateFramesSequence(h,p,l).pipe(o.takeUntil(i),o.tap(function(e){if(isNaN(e))throw new s.ArgumentError("Animation duration is "+t().project.animationDuration)}),o.finalize(function(){return f.next(a.stopAnimation())}))}));return l.merge(h.pipe(o.map(function(e){return a.seek(e)})),f.pipe(o.filter(function(){return t().timeline.isPlaying})))}},h=function(){return function(e,t){return e.pipe(o.filter(a.playPage.match),o.map(function(e){var n=e.payload,r=t(),i=r.project.findPage(n);return a.startAnimation({loop:!1,range:r.getPageAnimationRange(i.props.uuid)})}))}},p=function(){return function(e,t){return e.pipe(o.filter(a.playProject.match),o.map(function(){var e=t();return a.startAnimation({loop:e.project.props.animationLoop,range:[0,e.project.animationDuration-1]})}))}};t.animationEpic=i.combineEpics(h,p,f)},1151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(554),i=n(255),o=n(1072),a=n(88);t.setProjectMutator=function(e){return function(t,n){var r=t.payload,s=e.get(a.DI_TYPES.HistoryManager),u=i.mapWorkspaceDataToProps(r);return n.setProject(o.createProject(u.project)),n.select(u.selectedUUIDs),n.currentPageID=u.currentPageID||n.project.elements[0].props.uuid,s.reset(i.mapWorkspaceDataToProps(n.serialize())),n}},t.updateProjectMutator=function(){return function(e,t){var n=e.payload;return t.project.setProps(n),t}},t.projectMutator=[[r.loadProject,t.setProjectMutator],[r.updateProject,t.updateProjectMutator]]},1152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),i=n(445),o=n(298);t.preloadMutator=function(e){return function(e,t){var n=e.payload,r=t.project.find(n.elementUuid);return o.traverseElement(r.serialize(),function(e){var r=e.uuid;t.project.find(r).state.loadingStatus=n.status}),t}},t.elementLoadedLocallyMutator=function(e){return function(t,n){var i=t.payload,o=n.project.find(i.elementUuid),a;return e.get(r.DI_TYPES.AssetsDOMReconciler).applyImageToDOM(o.props.uuid),n}},t.preloadMutators=[[i.preloadStatusChange,t.preloadMutator],[i.elementLoadedLocally,t.elementLoadedLocallyMutator]]},1153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(764);t.startAnimationMutator=function(){return function(e,t){return t.timeline.play(),t}},t.stopAnimationMutator=function(){return function(e,t){return t.timeline.stop(),t}},t.seekMutator=function(){return function(e,t){var n=e.payload;return t.timeline.seek(n),t}},t.animationMutators=[[r.startAnimation,t.startAnimationMutator],[r.stopAnimation,t.stopAnimationMutator],[r.seek,t.seekMutator]]},1154:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(1740),l=n(1741),c=n(114),f=n(88),h=n(91),p=n(761),d=function(){function e(e,t,n){this.urlSuffix=e.hostname?e.hostname:"",this.timeout=t.fontLoaderTimeout,this.getFontData=e.getFontData,this.fontMetaLoader=n}return e.prototype.init=function(e,t,n){this.font=e,this.style=t,this.path=n},e.prototype.load=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,this.getFontURL()];case 1:return(e=t.sent())?(this.result||(this.result=this.loadFont(e)),[2,this.result]):[2,Promise.resolve()]}})})},e.prototype.loadFont=function(e){return a(this,void 0,void 0,function(){var t,n,r;return s(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,h.timeout(this.timeout,fetch(e))];case 1:return[4,(t=i.sent()).arrayBuffer()];case 2:return n=i.sent(),[4,l.loadFontToBrowser(this.font,n,{weight:this.isBoldFont()?u.CSSFontWeight.Bold:u.CSSFontWeight.Normal,style:this.isItalicFont()?u.CSSFontStyle.Italic:u.CSSFontStyle.Normal})];case 3:return i.sent(),this.inlineContent=this.createInlineContent(n),[3,5];case 4:return r=i.sent(),console.warn("Font load error:",r),[2,Promise.resolve()];case 5:return[2]}})})},e.prototype.getFontURL=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return this.path?[2,this.urlSuffix?this.urlSuffix+this.path:this.path]:(e=this,[4,this.fontMetaLoader.getMetaFor(this.font)]);case 1:return e.fontMeta=n.sent(),this.fontMeta?(t=this.fontMeta.fontStyles[this.style])?[2,this.urlSuffix+t.path]:(console.warn("Font "+this.font+" with style "+this.style+" not found"),[2]):(console.warn("Font "+this.font+" is not loaded"),[2])}})})},e.prototype.isBoldFont=function(){return this.style===u.FontStyleName.Bold||this.style===u.FontStyleName.BoldItalic},e.prototype.isItalicFont=function(){return this.style===u.FontStyleName.Italic||this.style===u.FontStyleName.BoldItalic},e.prototype.createInlineContent=function(e){return{data:btoa(new Uint8Array(e).reduce(function(e,t){return e+String.fromCharCode(t)},"")),mimeType:"",family:this.font,bold:this.isBoldFont(),italic:this.isItalicFont()}},e=r([c.injectable(),o(0,c.inject(f.DI_TYPES.DesignerProps)),o(1,c.inject(f.DI_TYPES.Config)),o(2,c.inject(f.DI_TYPES.FontMetaLoader)),i("design:paramtypes",[Object,Object,p.FontMetaLoader])],e)}();t.FontLoader=d},1155:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(174),s=n(114),u=n(88),l=n(508),c=n(550),f=function(){function e(e,t,n,r){this.renderer=n;var i=this.renderer.event$.pipe(a.filter(function(){return!r.timeline.isPlaying}));this.event$=t(i,function(){return r})}return e.prototype.init=function(e){this.renderer.init(e)},e.prototype.render=function(e){this.renderer.render(e)},e.prototype.export=function(e){return this.renderer.export(e)},e=r([s.injectable(),o(0,s.inject(u.DI_TYPES.DesignerProps)),o(1,s.inject(u.DI_TYPES.EventHandler)),o(2,s.inject(u.DI_TYPES.Renderer)),o(3,s.inject(u.DI_TYPES.Workspace)),i("design:paramtypes",[Object,Function,c.Renderer,l.Workspace])],e)}();t.DesignerRenderer=f},1156:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(114),s=n(508),u=n(514),l=n(88),c=function(){function e(e){this.data$=new u.BehaviorSubject(e.serialize())}return Object.defineProperty(e.prototype,"update$",{get:function(){return this.data$.asObservable()},enumerable:!0,configurable:!0}),e.prototype.notify=function(e){this.data$.next(e)},e=r([a.injectable(),o(0,a.inject(l.DI_TYPES.Workspace)),i("design:paramtypes",[s.Workspace])],e)}();t.StateUpdateNotifier=c},1157:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85);t.designerConfig={fontLoaderTimeout:r.FONT_LOADING_TIMEOUT}},1158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.highlight=r.userActionCreator("HIGHLIGHT")},1159:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(174),a=n(770),s=n(381),u=n(91),l=n(85),c=n(558),f=function(){return function(e,t){var n=function(e){return t().find(e)};return e.pipe(o.filter(s.clickAction.match),o.filter(function(e){var t=e.payload;return!!n(t.targetID)&&t.targetID!==l.TEMPORARY_GROUP_UUID}),o.map(function(e){var n=e.payload,r=n.evt,o=n.targetID,s=t().selectionFrameModel;return r.shiftKey?a.select(i(s.selectedUUIDs,[o])):a.select([o])}))}},h=function(){return function(e,t){var n=function(e){return t().find(e)};return e.pipe(o.filter(s.clickAction.match),o.filter(function(e){var t=e.payload;return!n(t.targetID)&&!u.matchName(t.targetName,l.SELECTION_FRAME_NAME)}),o.map(function(){return a.select([])}))}};t.selectAllEpic=function(){return function(e,t){return e.pipe(o.filter(a.selectAll.match),o.map(function(){return a.select(t().getCurrentPage().elements.map(function(e){return e.props.uuid}))}))}},t.selectionEventHandler=c.combineEventHandlers(f,h,t.selectAllEpic)},1160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(553),i=n(445);function o(e){return![i.preloadStatusChange,i.preloadElement,i.preloadPage].some(function(t){return t.match(e)})}var a=function(){function e(){this.logs=[],this.logger=new r.Logger("Designer")}return e.prototype.log=function(e){this.logger.log(e),this.logs.push(e)},e.prototype.clear=function(){this.logs=[]},e.prototype.getAllActions=function(){return this.logs},e.prototype.getUserActions=function(){return this.logs.filter(o)},e}();t.ActionLogger=a,t.actionLogger=new a},1161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i="CONVERT_FORMAT";t.convertFormat=r.userActionCreator(i)},128:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(378),a=180;function s(e){return e*a/Math.PI}function u(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function l(e,t){var n=u(t[0],t[1]);if(0===n)return t[1];var r=((e.x-t[0].x)*(t[1].x-t[0].x)+(e.y-t[0].y)*(t[1].y-t[0].y))/(n*n);return r=Math.max(0,Math.min(1,r)),{x:t[0].x+r*(t[1].x-t[0].x),y:t[0].y+r*(t[1].y-t[0].y)}}function c(e,t){return u(e,l(e,t))}function f(e,t){return e[0].x===t[0].x&&e[0].y===t[0].y&&e[1].x===t[1].x&&e[1].y===t[1].y}function h(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function p(e){return e[0].y===e[1].y}function d(e){return e[0].x===e[1].x}function g(e,t,n){void 0===n&&(n={x:0,y:0});var r=e.x-n.x,i=e.y-n.y;return{x:r*Math.cos(t)-i*Math.sin(t)+n.x,y:r*Math.sin(t)+i*Math.cos(t)+n.y}}function v(e,t){return{x:e.x+t.x,y:e.y+t.y}}function m(e,t,n){return void 0===n&&(n=t),{x:e.x*t,y:e.y*n}}function y(e){return{x:e.y,y:-e.x}}function E(e,t){for(var n=[e.nw,e.ne,e.se,e.sw,e.nw],r=[t.nw,t.ne,t.se,t.sw,t.nw],i=0;i<n.length-1;i++){var o;if(b(r,o=y(P(n[i],n[i+1])),n[i+1])>0)return!1}for(var i=0;i<r.length-1;i++){var o;if(b(n,o=y(P(r[i],r[i+1])),r[i+1])>0)return!1}return!0}function b(e,t,n){for(var r=0,i=0,o=0;o<e.length-1;o++){var a=S(t,_(e[o],n));if(a>0)r++;else{if(!(a<0))return 0;i++}if(r&&i)return 0}return r?1:-1}function w(e,t){var n=P(t.nw,t.sw),r=P(t.nw,e),i=P(t.sw,t.se),o=P(t.sw,e);return 0<=S(n,r)&&S(n,r)<=S(n,n)&&0<=S(i,o)&&S(i,o)<=S(i,i)}function _(e,t){return{x:e.x-t.x,y:e.y-t.y}}function P(e,t){return{x:t.x-e.x,y:t.y-e.y}}function S(e,t){return e.x*t.x+e.y*t.y}function A(e){return u({x:0,y:0},e)}function O(e,t){return Math.atan2(S(e,t),e.x*t.y-e.y*t.x)}function C(e,t){var n=P(t[0],t[1]),r,i=S(n,P(t[0],e)),o=n.x*n.x+n.y*n.y;return{x:t[0].x+i*n.x/o,y:t[0].y+i*n.y/o}}function x(e,t){return I(e.getVertices().map(function(e){return C(e,t)}))}function T(e,t){return I(i(e,t))}function I(e){var t,n,r,o;return[{x:Math.min.apply(Math,i(e.map(function(e){var t;return e.x}))),y:Math.min.apply(Math,i(e.map(function(e){var t;return e.y})))},{x:Math.max.apply(Math,i(e.map(function(e){var t;return e.x}))),y:Math.max.apply(Math,i(e.map(function(e){var t;return e.y})))}]}function k(e){var t=e.top,n;return{x:e.left,y:t}}function D(e){var t,n;return{left:e.x,top:e.y}}function R(e){var t=e.width,n=e.height,r=e.angle,i=e.zoom,a=void 0===i?1:i;return new o.Rect(m(k(e),a),t*a,n*a,r)}t.UNIT_VECTOR={x:1,y:0},t.radiansToDegrees=s,t.distance=u,t.closestPointOfSegment=l,t.distanceToSegment=c,t.segmentsEqual=f,t.midpoint=h,t.isHorizontalSegment=p,t.isVerticalSegment=d,t.rotatePoint=g,t.translatePoint=v,t.scalePoint=m,t.normal=y,t.rectIntersects=E,t.isPointInRect=w,t.vectorSub=_,t.vector=P,t.vectorLength=A,t.vectorsAngle=O,t.projectPoint=C,t.projectRect=x,t.joinSegments=T,t.bbox=I,t.positionToPoint=k,t.pointToPosition=D,t.getBoundingRect=R},1472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1473),i=n(1699),o=n(1703),a=function(){function e(e,t,n,a){var s=e,u=o.createShallowContainer(i.createShallowWorkspace(e),{pageWidth:s.pageWidth,pageHeight:s.pageHeight,el:t,pageMargin:0,getMediaUrl:null,getFontData:n,scrollableNode:null,hostname:a||"",placeholderImageSrc:null});this.designer=u.resolve(r.Shallow)}return e.prototype.renderFrame=function(e,t){return this.designer.renderFrame(e,t)},e.prototype.renderByElement=function(e){return this.designer.renderByElement(e)},e.prototype.renderV1=function(){return this.designer.render()},e.prototype.update=function(){return this.designer.render()},e.prototype.export=function(e,t){return this.designer.export(e,t)},e}();t.OldShallow=a},1473:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(76),c=n(508),f=n(550),h=n(114),p=n(88),d=n(764),g=n(174),v=n(554),m=n(401),y=n(298),E=n(921),b=n(555),w=n(91),_=n(766),P=n(757),S=function(){function e(e,t,n,r,i){this.workspaceData=r.serialize(),this.stateManager=t,this.renderer=e,this.renderer.init(n),i.init();var o=this.stateManager.state$.pipe(g.map(function(e){return e.serialize()}));this.loaded$=o.pipe(g.filter(function(e){var t=e.elementState;return Object.values(t).every(m.isLoaded)}))}return e.prototype.renderFrame=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return this.stateManager.dispatch(E.applyPatch(e)),this.stateManager.dispatch(d.seek(t)),[4,w.synchronize(this.loaded$)];case 1:return n.sent(),[2,this.export(l.ExportType.Png,"white")]}})})},e.prototype.export=function(e,t){return a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return n=this.workspaceData.backgroundColor,this.stateManager.dispatch(b.updatePage({backgroundColor:t})),[4,this.renderer.render(this.stateManager.getState().serialize())];case 1:return i.sent(),[4,this.renderer.export({format:e})];case 2:return r=i.sent(),this.stateManager.dispatch(b.updatePage({backgroundColor:n})),[4,this.renderer.render(this.stateManager.getState().serialize())];case 3:return i.sent(),[2,r]}})})},e.prototype.render=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.stateManager.dispatch(v.loadProject(this.workspaceData)),[4,w.synchronize(this.loaded$)];case 1:return e.sent(),this.renderer.render(this.stateManager.getState().serialize()),[2]}})})},e.prototype.renderByElement=function(e){return a(this,void 0,void 0,function(){var t,n,r,i,o,a,c,f,h,p,d,g,v;return s(this,function(s){switch(s.label){case 0:return[4,this.render()];case 1:s.sent(),r=y.flattenProject(this.workspaceData.project),s.label=2;case 2:s.trys.push([2,7,8,9]),i=u(r),o=i.next(),s.label=3;case 3:return o.done?[3,6]:(a=o.value,c=a.uuid,this.stateManager.dispatch(E.showOnly(c)),m.isImageElementFromVideo(a)?[3,5]:[4,this.export(l.ExportType.Png,"transparent")]);case 4:f=s.sent(),h=a.left,p=a.top,d=a.width,g=a.height,e(c,f,{left:h,top:p,width:d,height:g}),s.label=5;case 5:return o=i.next(),[3,3];case 6:return[3,9];case 7:return v=s.sent(),t={error:v},[3,9];case 8:try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}return[7];case 9:return this.stateManager.dispatch(E.showAll(!0)),[4,this.render()];case 10:return s.sent(),[2]}})})},e=r([h.injectable(),o(0,h.inject(p.DI_TYPES.Renderer)),o(1,h.inject(p.DI_TYPES.StateManager)),o(2,h.inject(p.DI_TYPES.MountNode)),o(3,h.inject(p.DI_TYPES.Workspace)),o(4,h.inject(p.DI_TYPES.EditableBlockMediator)),i("design:paramtypes",[f.Renderer,_.StateManager,HTMLElement,c.Workspace,P.EditableBlockMediator])],e)}();t.Shallow=S},1474:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85),a=function(){function e(){this.id=o.SELECTION_CONTROL_KEY,this.selectedUUIDs=[]}return e.prototype.select=function(e){void 0===e&&(e=[]),this.selectedUUIDs=e},e.prototype.serialize=function(){return{selectedUUIDs:i(this.selectedUUIDs),selectedElement:this.selectedElement?this.selectedElement.serialize():null,hoveredRotateControl:this.hoveredRotateControl,rotationControlInUse:this.rotationControlInUse,resizingControlInUse:this.resizingControlInUse,hoveredResizingControl:this.hoveredControl}},e}();t.SelectionFrame=a},1475:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="TimeoutError",n}return r(t,e),t}(Error);t.TimeoutError=o},1476:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1477),o=n(892);function a(e,t){var n,a;void 0===t&&(t={shallow:!1});var s=new i.Project(e);try{for(var u=r(e.pages),l=u.next();!l.done;l=u.next()){var c=l.value;s.add(o.createPage(c,t))}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return s}t.createProject=a},1477:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(85),u=n(378),l=n(128),c=n(76),f=n(298),h=n(91),p=n(892),d=n(320),g={animationLoop:!1},v=function(){function e(e){this.elements=[],this.id=s.PROJECT_ID,this.props=r({},g,e)}return Object.defineProperty(e.prototype,"animationDuration",{get:function(){return this.elements.reduce(function(e,t){return e+t.animationDuration},0)},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.elements.push(e)},e.prototype.getPageBoundingRect=function(){return new u.Rect({x:0,y:0},this.props.pageWidth,this.props.pageHeight)},e.prototype.getElementPage=function(e){return this.find(e.props.uuid)?this.elements.find(function(t){return t.elements.some(function t(n){return n===e||(n.elements||[]).some(t)})}):this.elements[0]},e.prototype.traverse=function(e,t){function n(r,i,o){e(r),t(r)||(r.elements||[]).forEach(function(e){n(e,r,o)})}void 0===t&&(t=function(){return!1}),this.elements.forEach(function(e){e.elements.forEach(function(e){n(e,null,null)})})},e.prototype.getPageGuides=function(){return o(this.getPageBoundingRect().getEdges(),[[{x:0,y:this.props.pageHeight/2},{x:this.props.pageWidth,y:this.props.pageHeight/2}],[{x:this.props.pageWidth/2,y:0},{x:this.props.pageWidth/2,y:this.props.pageHeight}]]).map(function(e){return{segment:e,element:null}})},e.prototype.serialize=function(){var e=this.props,t=e.pageHeight,n,r;return{pageWidth:e.pageWidth,pageHeight:t,animationLoop:e.animationLoop,pages:this.elements.map(function(e){return e.serialize()}),v2:!0}},e.prototype.setProps=function(e){this.props=r({},this.props,e)},e.prototype.isElementOffPage=function(e){return!l.rectIntersects(e.getBoundingRect(),this.getPageBoundingRect())},e.prototype.find=function(e){var t,n;try{for(var r=a(this.elements),i=r.next();!i.done;i=r.next()){var o,s=i.value.find(e);if(s)return s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.getState=function(){var e={};return this.traverse(function(t){e[t.props.uuid]=t.getState()}),e},e.prototype.getPageLoadingStatus=function(){var e={};return this.elements.forEach(function(t){var n=d.LoadingStatus.Loaded;t.traverse(function(e){var t;d.PageLoadingStatusPriority[e.state.loadingStatus]<d.PageLoadingStatusPriority[n]&&e.props.type!==c.DesignElementType.GroupElement&&(n=e.state.loadingStatus)}),e[t.props.uuid]=n}),e},e.prototype.deletePage=function(e){this.elements=this.elements.filter(function(t){return t.props.uuid!==e})},e.prototype.findPage=function(e){return this.elements.find(function(t){return t.props.uuid===e})},e.prototype.findPageBy=function(e){return this.elements.find(e)},e.prototype.clonePage=function(e){var t,n=this.findPage(e).serialize();return n.uuid=h.generateUuid(),f.traversePage(n,function(e){e.uuid=h.generateUuid()}),p.createPage(n)},e.prototype.addAfter=function(e,t){var n=this.elements.indexOf(this.findPage(t));this.elements.splice(n+1,0,e)},e.prototype.movePageForward=function(e){var t=this.elements.indexOf(this.findPage(e));t<this.elements.length-1&&this.swapElements(this.elements[t],this.elements[t+1])},e.prototype.movePageBackward=function(e){var t=this.elements.indexOf(this.findPage(e));t>0&&this.swapElements(this.elements[t],this.elements[t-1])},e.prototype.swapElements=function(e,t){var n=this.elements.indexOf(e),r=this.elements.indexOf(t);this.elements[n]=t,this.elements[r]=e},e}();t.Project=v},1478:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(320),u=n(85),l=n(1479),c=n(76),f=n(91);t.DEFAULT_PROPS={animationDuration:0,animations:[],opacity:1};var h=function(){function e(e){this.elements=[],this.loadingStatus=s.LoadingStatus.Initial,this.props=r({},t.DEFAULT_PROPS,e),this.zIndexManager=new l.ZIndexManager(this)}return e.prototype.add=function(e,t){p(e)?this.setBackground(e):this.addElement(e)},e.prototype.clear=function(){this.elements=[]},e.prototype.remove=function(e){this.elements=this.elements.filter(function(t){var n;return t.props.uuid!==e})},e.prototype.moveElementInStack=function(e,t){var n=this.find(e);this.zIndexManager.canChange(n,t)&&this.zIndexManager.changeIndex(n,t)},e.prototype.duplicateElement=function(e,t){void 0===t&&(t=0);var n=e.clone();return n.props.left+=t*u.COPY_SHIFT,n.props.top+=t*u.COPY_SHIFT,this.addElement(n),n},e.prototype.serialize=function(){var e=this.animationDuration,t=e&&{animationDuration:e};return r({},this.props,{elements:this.elements.map(function(e){return e.serialize()})},t)},e.prototype.find=function(e){var t,n;try{for(var r=i(this.elements),o=r.next();!o.done;o=r.next()){var a,s=o.value.find(e);if(s)return s}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.setProps=function(e){this.props=r({},this.props,e)},Object.defineProperty(e.prototype,"animationDuration",{get:function(){var e=0;return this.traverse(function(t){if(t.props.type===c.DesignElementType.VideoElement||t.props.animations){var n=t.props.animationDuration||0;e=Math.max(n,e)}}),e},enumerable:!0,configurable:!0}),e.prototype.traverse=function(e,t){function n(r,i,o){var a=t?t(r,i,o):null,s;!1!==e(r,a)&&(r.elements||[]).forEach(function(e){n(e,r,o)})}this.elements.forEach(function(e){n(e,null,null)})},e.prototype.setBackground=function(e){this.elements=a([e],this.elements.filter(f.not(p)))},e.prototype.addElement=function(e){this.elements.push(e)},e}();t.Page=h;var p=function(e){return e.props.isBackground}},1479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.page=e}return e.prototype.canChange=function(e,t){var n=this.page.elements.filter(function(t){return t.intersects(e)}),r,i=n.indexOf(e)+t;return!(i<0)&&!(i>n.length-1)},e.prototype.changeIndex=function(e,t){var n=this.page.elements.filter(function(t){return t.intersects(e)}),r=n.indexOf(e),i,o=n[r+t];this.swapElements(e,o)},e.prototype.swapElements=function(e,t){var n=this.page.elements.indexOf(e),r=this.page.elements.indexOf(t);this.page.elements[n]=t,this.page.elements[r]=e},e}();t.ZIndexManager=r},1480:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(n(402).SingleElement);t.IllustrationElement=a},1481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.name="NotImplementedError"}return e}();t.NotImplementedError=r},1482:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(76),s=n(1483),u=n(402);t.TEXT_ELEMENT_DEFAULT_PROPS={type:a.DesignElementType.TextElement,font:"Times New Roman",wordBreak:s.WordBreak.BreakWord,textAlign:s.TextAlign.Left,capitalize:!1,underline:!1,stickedFiltersPreset:!1};var l=function(e){function n(n){var r=this;return n.lineHeight=n.lineHeight||1,n.letterSpacing=n.letterSpacing||0,r=e.call(this,o({},t.TEXT_ELEMENT_DEFAULT_PROPS,n))||this}return r(n,e),n.prototype.handleResizeStart=function(e){this.resizeState={initialRect:this.getBoundingRect(),initialFontSize:this.props.fontSize,initialLetterSpacing:this.props.letterSpacing,fontSize:this.props.fontSize,letterSpacing:this.props.letterSpacing,controlName:e}},n.prototype.allowsNonproportionalResize=function(){return!0},n.prototype.resize=function(t,n,r,i){e.prototype.resize.call(this,t,n,r,i),i&&(this.resizeState.fontSize=Math.round(t*this.resizeState.initialFontSize),this.resizeState.letterSpacing=t*this.resizeState.initialLetterSpacing,this.props.fontSize=this.resizeState.fontSize,this.props.letterSpacing=this.resizeState.letterSpacing)},n.prototype.handleResizeChange=function(t,n){var r=e.prototype.handleResizeChange.call(this,t,n);return r.proportional&&(this.resizeState.fontSize=Math.round(r.ratio*this.resizeState.initialFontSize),this.resizeState.letterSpacing=r.ratio*this.resizeState.initialLetterSpacing),r},n}(u.SingleElement);t.TextElement=l},1483:function(e,t,n){"use strict";var r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Left="left",e.Right="right",e.Center="center"}(r=t.TextAlign||(t.TextAlign={})),function(e){e.BreakWord="breakWord",e.BreakAll="breakAll"}(i=t.WordBreak||(t.WordBreak={})),function(e){e.ColorMap="colorMap",e.BoldMap="boldMap",e.ItalicMap="italicMap"}(o=t.MapName||(t.MapName={})),function(e){e.Color="color",e.Bold="bold",e.Italic="italic",e.Line="line"}(a=t.MapType||(t.MapType={})),function(e){e.Video="video",e.Image="image"}(s=t.StickedImageDataType||(t.StickedImageDataType={}))},1484:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(402),s,u={type:n(76).DesignElementType.SvgElement,colors:[],newColors:[]},l=function(e){function t(t){return e.call(this,o({},u,t))||this}return r(t,e),t.prototype.allowsNonproportionalResize=function(){return this.props.special},t}(a.SingleElement);t.SvgElement=l},1485:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t}(n(402).SingleElement);t.ColoredBackgroundElement=a},1486:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1074),s=n(402),u,l={type:n(76).DesignElementType.VideoElement,loop:!1,currentFrame:0,state:a.VideoElementState.Preview},c=function(e){function t(t){return e.call(this,o({},l,t))||this}return r(t,e),t}(s.SingleElement);t.VideoElement=c},1487:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.allowsNonproportionalResize=function(){return!0},t}(n(402).SingleElement);t.RectElement=a},1488:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.allowsNonproportionalResize=function(){return!0},t}(n(402).SingleElement);t.EllipseElement=a},1489:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o;Object.defineProperty(t,"__esModule",{value:!0});var a=n(402),s=n(379),u=n(85),l=n(128),c=((o={})[s.SelectionFrameControlName.NW]=l.vectorLength(u.SIMPLE_LINE_PADDING),o[s.SelectionFrameControlName.SE]=l.vectorLength(u.SIMPLE_LINE_PADDING),o[s.SelectionFrameControlName.NE]=l.vectorLength(u.SIMPLE_LINE_PADDING),o[s.SelectionFrameControlName.SW]=l.vectorLength(u.SIMPLE_LINE_PADDING),o[s.SelectionFrameControlName.N]=u.SIMPLE_LINE_PADDING.y,o[s.SelectionFrameControlName.S]=u.SIMPLE_LINE_PADDING.y,o[s.SelectionFrameControlName.E]=u.SIMPLE_LINE_PADDING.x,o[s.SelectionFrameControlName.W]=u.SIMPLE_LINE_PADDING.x,o),f=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.getControlPadding=function(e){return c[e]},t.prototype.allowsNonproportionalResize=function(){return!0},t}(a.SingleElement);t.SimpleLineElement=f},1490:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1075),a=n(897),s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e){return a.createPersistGroupElement(e)},t}(o.BaseGroupElement);t.PersistGroupElement=s},1491:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(509),s=n(625),u=n(898),l=n(380),c=n(91),f=n(76),h=n(1075),p=n(1076),d={filters:{brightness:0,contrast:0,saturate:0,tint:0,blur:0,crossProcess:0,vignette:0}},g=function(e){function t(t){var n=e.call(this,o({},d,t))||this;return n.elements=[],n}return r(t,e),t.prototype.tryOn=function(e){this.stashedContentProps=this.elements[0].serialize();var t=l.fitImageDimensions({width:e.width,height:e.height},{width:this.props.width,height:this.props.height}),n=a.createDesignElement(s.mapElementPropsToDomain(o({},e,{uuid:c.generateUuid(),width:t.width,height:t.height,originalImageWidth:t.width,originalImageHeight:t.height,position:{left:(this.props.width-t.width)/2,top:(this.props.height-t.height)/2}}),{textElementDataMapper:u.mapTextElementOldFormatPropsToDomain}));this.elements=[n]},t.prototype.tryOnCancel=function(){var e=a.createDesignElement(this.stashedContentProps);this.elements=[e],this.stashedContentProps=null},t.prototype.tryOnFinish=function(){this.stashedContentProps=null},t.prototype.tryOnAllowed=function(e){return e.type===f.DesignElementType.ImageElement||e.type===f.DesignElementType.VideoElement},t.prototype.create=function(e){return p.createMaskElement(e)},t}(h.BaseGroupElement);t.MaskElement=g},1492:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345),o=n(1077);function a(e){var t=e.src,n=e.originalSrc,a=e.originalImageHeight,s=e.originalImageWidth,u=e.cropOpts,l=e.lowQualitySrc,c=e.previewPath,f=e.isBackground,h=e.isBackground2,p=i.mapElementBasePropsToDomain(e),d=o.mapProtoFilterPropsToDomain(e);return r({},p,d,{src:t,originalSrc:n,originalImageWidth:s,originalImageHeight:a,cropOpts:u||{top:0,left:0,width:0,height:0},lowQualitySrc:l,previewPath:c,isBackground:f||h})}t.mapImageElementPropsToDomain=a},1493:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345),o=n(1077),a=n(76),s=n(85);function u(e,t){var n=e.stickedImageData,r=e.width,i=e.height;return{src:n?n.src:null,type:a.DesignElementType.ImageElement,uuid:t+s.MASK_STICKED_UUID,left:0,top:0,width:r,height:i,opacity:1,angle:0,flipHorizontal:1,flipVertical:1,originalImageWidth:r,originalImageHeight:i,cropOpts:{left:0,top:0,width:r,height:i}}}function l(e){var t=e.stasheeData,n=e.hasBackground,a=e.imagePosition,s=e.maskType,l=e.maskData,c=e.url,f=i.mapElementBasePropsToDomain(e),h=o.mapProtoFilterPropsToDomain(e);return r({},f,h,{stasheeData:t,hasBackground:n,elements:[u(e,f.uuid)],imagePosition:a,maskType:s,maskData:l,src:c})}t.mapMaskElementPropsToDomain=l},1494:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);function o(e){var t=e.url,n=e.special,o=e.stasheeData,a=e.newColors,s=e.colors,u=e.isBackground,l=e.isBackground2,c=i.mapElementBasePropsToDomain(e);return r({},c,{src:t,special:n,stasheeData:o,newColors:a,colors:s||[],isBackground:u||l})}t.mapSvgElementPropsToDomain=o},1495:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);function o(e){var t=e.colors,n=i.mapElementBasePropsToDomain(e);return r({},n,{colors:t,isBackground:e.isBackground2})}t.mapColoredBackgroundElementPropsToDomain=o},1496:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345),o=n(1074);function a(e){var t=e.src,n=e.previewMediaId,a=e.fallback,s=e.previewPath,u=e.animationDuration,l=e.animations,c=e.isBackground,f=e.isBackground2,h=i.mapElementBasePropsToDomain(e);return r({},h,{src:t,previewPath:s,previewMediaId:n,fallback:a,state:o.VideoElementState.Preview,loop:!0,currentFrame:0,animationDuration:u,animations:l,isBackground:c||f})}t.mapVideoElementPropsToDomain=a},1497:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);function o(e){var t=e.blured,n=e.previewPath,o=e.src,a=i.mapElementBasePropsToDomain(e);return r({},a,{src:o,blured:t,previewPath:n})}t.mapIllustrationElementPropsToDomain=o},1498:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345),o=n(625);function a(e,t){var n=e.children,a=i.mapElementBasePropsToDomain(e);return r({},a,{elements:n.map(function(e){return o.mapElementPropsToDomain(e,t)})})}t.mapGroupElementPropsToDomain=a},1499:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);function o(e){var t=e.borderColor,n=e.borderWidth,o=e.color,a=i.mapElementBasePropsToDomain(e);return r({},a,{borderColor:t,borderWidth:n,color:o})}t.mapRectElementPropsToDomain=o},1500:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);function o(e){var t=e.borderColor,n=e.borderWidth,o=e.color,a=i.mapElementBasePropsToDomain(e);return r({},a,{borderColor:t,borderWidth:n,color:o})}t.mapEllipseElementPropsToDomain=o},1501:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345),o=n(76);function a(e){var t=e.color,n=i.mapElementBasePropsToDomain(e);return r({},n,{type:o.DesignElementType.SimpleLineElement,color:t})}t.mapSimpleLineElementPropsToDomain=a},1502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.currentFrame=e.currentFrame,this.isPlaying=e.isPlaying}return e.prototype.serialize=function(){return{currentFrame:this.currentFrame,isPlaying:this.isPlaying}},e.prototype.play=function(){this.isPlaying=!0,this.currentFrame=0},e.prototype.stop=function(){this.isPlaying=!1,this.currentFrame=void 0},e.prototype.seek=function(e){this.currentFrame=e},e}();t.Timeline=r},1503:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(1504),a=n(76),s=n(1078);function u(e,t){var n,u;void 0===t&&(t={});var l=new o.TemporaryGroupElement(r({},s.calcFrameSize(e),t,{type:a.DesignElementType.GroupElement,elements:[]}));try{for(var c=i(e),f=c.next();!f.done;f=c.next()){var h=f.value;l.add(h)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(n)throw n.error}}return l}t.createTempGroupElement=u},1504:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s,u=function(e){function t(t){var n=e.call(this,t)||this;return n.elements=[],n}return r(t,e),t.prototype.add=function(e,t){this.elements.push(e)},t.prototype.handleResizeStart=function(t){e.prototype.handleResizeStart.call(this,t),this.elements.forEach(function(e){e.handleResizeStart()})},t.prototype.find=function(e){var t,n;if(this.props.uuid===e)return this;try{for(var r=a(this.elements),i=r.next();!i.done;i=r.next()){var o,s=i.value.find(e);if(s)return s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},t.prototype.serialize=function(){return o({},this.props,{elements:this.elements.map(function(e){return e.serialize()})})},t.prototype.resize=function(t,n,r){e.prototype.resize.call(this,t,n,r),this.elements.forEach(function(e){e.resize(t,n,r)})},t.prototype.rotate=function(e,t){var n=this;this.props.angle+=e,this.elements.forEach(function(t){t.rotate(e,n.getBoundingRect().getCenter())})},t.prototype.move=function(t,n){var r=t-this.props.left,i=n-this.props.top;e.prototype.move.call(this,t,n),this.elements.forEach(function(e){e.move(e.props.left+r,e.props.top+i)})},t.prototype.clone=function(){throw new Error("Cannot clone TemporaryGroupElement")},t}(n(893).DesignElement);t.TemporaryGroupElement=u},1569:function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length-1;t++)for(var n=t+1;n<e.length;n++)if(e[t]===e[n])return{hasDuplicates:!0,duplicates:[t,n]};return{hasDuplicates:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.findDuplicates=r},1570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91),i=n(1571),o=function(e){return function(){var t=e.backgroundColor,n=e.width,r=e.height,i=e.zoom,o;return{backgroundColor:t,width:n,height:r,pages:e.project.pages,zoom:i}}};t.workspaceView=function(e){return r.compose(o(e),i.serializeWorkspaceToKonva(e))(null)}},1571:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85),a=n(76),s=n(1572),u=n(1093);function l(e){var t=e.width,n=e.height,r=e.backgroundColor;return{attrs:{key:"background",listening:!1},className:a.KonvaTypes.Layer,children:[{attrs:{key:"background",width:t,height:n,listening:!1,fill:r||"transparent",x:0,y:0},className:a.KonvaTypes.Rect}]}}t.serializeWorkspaceToKonva=function(e){return function(t){var n=t.pages,r=t.width,c=t.height;return{attrs:{id:o.PROJECT_ID,key:o.PROJECT_ID,width:r,height:c},className:a.KonvaTypes.Stage,children:i([l(t)],n.map(s.pageView(e)),[u.overlaysView(e)])}}}},1572:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1573),o=n(552),a=n(91),s=n(1574),u=n(752),l=n(85),c=function(e){return function(t){var n=t.uuid,a=t.elements,s=t.backgroundColor,c=e.project,f=c.pageWidth,h=c.pageHeight,p=u.currentFrameRelativeTo(t,e),d=u.propGetterFactory(t,p);return r({uuid:n,enabled:i.pageEnabledSelector(e),visible:i.pageVisibilitySelector(t,e)},o.getPositionOfPage(e,t),{width:f,height:h,zoom:e.zoom,opacity:d("opacity"),backgroundColor:s||l.Color.White,elements:a.map(function(e){return r({},e,{currentFrame:p})})})}};t.pageView=function(e){return a.compose(c(e),s.serializePageToKonva(e))}},1573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(751);function i(e){var t;return!e.multiSelectionProps.isVisible}function o(e){var t=e.timeline,n;return a(e.project.pages,t.currentFrame)}function a(e,t,n){if(void 0===n&&(n=0),0===e.length)throw new r.ArgumentError("pages is empty");var i=e[0],o=n,s=n+i.animationDuration;return o<=t&&t<s?i:a(e.slice(1),t,s)}function s(e,t){var n=t.timeline;return Number.isInteger(n.currentFrame)?e.uuid===o(t).uuid:t.currentPageID===e.uuid}t.pageEnabledSelector=i,t.playingPageSelector=o,t.pageVisibilitySelector=s},1574:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(76),a=n(1091),s=n(85);function u(e,t){var n=e.elements,r=e.top,s=e.left,u=e.width,l=e.height;return{attrs:{key:"group",width:u,height:l,clipX:0,clipY:0,clipHeight:l,clipWidth:u,x:s,y:r,opacity:e.opacity,scale:{x:e.zoom,y:e.zoom}},className:o.KonvaTypes.Group,children:i(n.map(a.elementView(t)))}}function l(e){var t=e.width,n=e.height,r=e.top,i=e.left,a=e.zoom;return{attrs:{key:"frame",width:t*a,height:n*a,stroke:s.SELECTION_CONTROL_ACCENT_COLOR,strokeWidth:s.SELECTION_FRAME_WIDTH,listening:!1,x:i,y:r},className:o.KonvaTypes.Rect}}function c(e){var t=e.width,n=e.height,r=e.top,i=e.left,a=e.zoom,s;return{attrs:{key:"background",width:t*a,height:n*a,fill:e.backgroundColor,listening:!1,x:i,y:r},className:o.KonvaTypes.Rect}}t.serializePageToKonva=function(e){return function(t){return{attrs:{key:t.uuid,listening:t.enabled,visible:t.visible},className:o.KonvaTypes.Layer,children:i([c(t),u(t,e)],e.hasPageShadow?[l(t)]:[])}}}},1575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85),i=n(76);function o(e){var t=e.multiSelectionProps,n=t.top,o=t.left,a=t.width,s=t.height,u=t.isVisible;return{attrs:{key:"multiSelectionFrame",x:o,y:n,width:a,height:s,stroke:r.SELECTION_CONTROL_ACCENT_COLOR,strokeWidth:r.SELECTION_FRAME_WIDTH,dash:r.SELECTION_FRAME_DASH,listening:!1,visible:u},className:i.KonvaTypes.Rect}}t.serializeMultiSelectionFrameToKonva=o},1576:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o;Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),s=n(76),u=n(128),l=n(1094),c=n(379),f=n(1577),h=n(378),p=n(298),d=((o={})[c.CroppingFrameInternalControlName.NW]=a.HALF_CIRCLE,o[c.CroppingFrameInternalControlName.SE]=0,o[c.CroppingFrameInternalControlName.NE]=a.QUARTER_CIRCLE,o[c.CroppingFrameInternalControlName.SW]=3*a.QUARTER_CIRCLE,o);function g(e,t,n){var r=a.CROPPING_CORNER_CONTROL_SIZE,i=a.CROPPING_CORNER_CONTROL_WIDTH;return{attrs:{key:t,id:t,x:e.x,y:e.y,offsetX:r-i,offsetY:i,points:[0,0,r,0,r,r,r-i,r,r-i,i,0,i,0,0],fill:a.CROPPING_CONTROL_BASE_COLOR,stroke:a.CROPPING_CONTROL_ACCENT_COLOR,strokeWidth:1,closed:!0,rotation:u.radiansToDegrees(n-d[t]+a.QUARTER_CIRCLE)},className:s.KonvaTypes.Line}}function v(e,t){return t.map(function(e){return u.distance({x:0,y:0},e)}).reduce(function(e,t,n,r){return t<r[e]?n:e},0)}function m(e,t){var n=[e.nw,e.sw,e.se,e.ne],r=v({x:0,y:0},n),o=i(n,n,[e.nw]),a=[t.nw,t.sw,t.se,t.ne],s=v({x:0,y:0},a),u=i(a,a,[t.nw]);return i(u.slice(s,s+3),o.slice(r,r+3).reverse(),[u[s]],u.slice(s+2,s+2+3),o.slice(r+2,r+2+3).reverse(),[u[s+2]]).reduce(function(e,t){return i(e,[t.x,t.y])},[])}function y(e,t){return{attrs:{key:"pageMask",points:m(e,t),fill:a.CROPPING_PAGE_MASK_COLOR,opacity:a.CROPPING_PAGE_MASK_OPACITY,closed:!0},className:s.KonvaTypes.Line}}function E(e,t){return{attrs:{key:"elementMask",points:m(e,t),fill:a.CROPPING_ELEMENT_MASK_COLOR,opacity:a.CROPPING_ELEMENT_MASK_OPACITY,closed:!0},className:s.KonvaTypes.Line}}function b(e){var t=e.croppingElementUUID,n,r={attrs:{visible:null!=t,key:a.CROPPING_FRAME_KEY},className:s.KonvaTypes.Group,children:[]};if(t){var o=p.findInProject(e.project,function(e){var n;return e.uuid===t}),d=o.left,v=o.top,m=o.width,b=o.height,w=o.angle,_=u.getBoundingRect(o),P=e.project,S=P.pageWidth,A=P.pageHeight,O=o.cropOpts||{left:m/4,top:b/4,width:m/2,height:b/2},C=new h.Rect({x:0,y:0},S,A),x=new h.Rect({x:d,y:v},m,b,w),T=new h.Rect({x:d+O.left,y:v+O.top},O.width,O.height,w);r.children=i([l.serializeFrame({x:d,y:v,width:m,height:b,angle:w,color:a.CROPPING_CONTROL_ACCENT_COLOR,id:a.CROPPING_FRAME_KEY}),y(C,x),E(x,T)],Object.values(c.CroppingFrameExternalControlName).map(function(e){var t=f.rectPointFromCroppingExternalControlName(_,e);return l.serializeCircleControl({point:t,id:e,color:a.CROPPING_CONTROL_ACCENT_COLOR})}),Object.values(c.CroppingFrameInternalControlName).map(function(e){var t=f.rectPointFromCroppingInternalControlName(T,e);return f.isEdgeControl(e)?l.serializeSquareControl({point:t,angle:w,id:e,color:a.CROPPING_CONTROL_ACCENT_COLOR}):g(t,e,w)}))}return r}t.serializeCroppingFrameToKonva=b},1577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(379),i=n(128);function o(e,t){switch(t){case r.CroppingFrameExternalControlName.NW:return e.nw;case r.CroppingFrameExternalControlName.SE:return e.se;case r.CroppingFrameExternalControlName.NE:return e.ne;case r.CroppingFrameExternalControlName.SW:return e.sw}}function a(e,t){switch(t){case r.CroppingFrameInternalControlName.NW:return e.nw;case r.CroppingFrameInternalControlName.SE:return e.se;case r.CroppingFrameInternalControlName.NE:return e.ne;case r.CroppingFrameInternalControlName.SW:return e.sw;case r.CroppingFrameInternalControlName.N:return i.midpoint(e.nw,e.ne);case r.CroppingFrameInternalControlName.S:return i.midpoint(e.se,e.sw);case r.CroppingFrameInternalControlName.E:return i.midpoint(e.ne,e.se);case r.CroppingFrameInternalControlName.W:return i.midpoint(e.nw,e.sw)}}function s(e){return e===r.CroppingFrameInternalControlName.N||e===r.CroppingFrameInternalControlName.S||e===r.CroppingFrameInternalControlName.E||e===r.CroppingFrameInternalControlName.W}t.rectPointFromCroppingExternalControlName=o,t.rectPointFromCroppingInternalControlName=a,t.isEdgeControl=s},1578:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(76),a=n(128),s=n(85),u=n(552),l=n(378);function c(e,t){var n=t.left,r=t.top,i=t.width,o=t.height,s=new l.Rect({x:n,y:r},i,o),u=a.projectRect(s,e);return a.joinSegments(e,u)}function f(e){var t=e.snaps.map(function(e){var t;return e.guide.element}).filter(function(e){return e}).filter(function(e,t,n){return n.findIndex(function(t){return t.uuid===e.uuid})===t}),n=u.getCurrentPagePosition(e),r=n.left,l=n.top,f=e.zoom;return{attrs:{key:"GUIDES"},className:o.KonvaTypes.Group,children:i(t.map(function(e){var t=e.uuid,n=e.left,i=e.top,u=e.width,c=e.height,h=e.angle;return{attrs:{key:t,x:r+(n+u/2)*f,y:l+(i+c/2)*f,width:u*f,height:c*f,dash:s.HIGHLIGHT_DASH,stroke:s.HIGHLIGHT_STROKE_COLOR,strokeWidth:s.HIGHLIGHT_STROKE_WIDTH,listening:!1,rotation:a.radiansToDegrees(h),offsetX:u/2*f,offsetY:c/2*f},className:o.KonvaTypes.Rect}}),e.snaps.map(function(e,t){var n=e.guide,i=e.element,a=c(n.segment,i),u=[r+a[0].x*f,l+a[0].y*f,r+a[1].x*f,l+a[1].y*f];return{attrs:{key:t.toString(),points:u,stroke:s.SNAP_COLOR,strokeWidth:1,strokeOpacity:1},className:o.KonvaTypes.Line}}))}}t.serializeGuidesToKonva=f},1579:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1580),o=n(91),a=n(552);t.tempGroupViewPropsSelector=function(e){var t=e.zoom,n,i=e.selectionFrame.selectedElement,o=i.width,s=i.height,u=i.top,l=i.left,c=i.angle,f=i.opacity,h=i.uuid,p=i.flipVertical,d=i.flipHorizontal,g={top:u*t,left:l*t};return r({width:o*t,height:s*t,angle:c,opacity:f,uuid:h,flipHorizontal:d,flipVertical:p},a.getAbsolutePosition(e,a.getCurrentPage(e),g))},t.temporaryGroupView=o.compose(t.tempGroupViewPropsSelector,i.serializeTemporaryGroupElementToKonva)},1580:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(76),a=n(128);t.serializeTemporaryGroupElementToKonva=function(e){var t=e.uuid,n=e.height,s=e.width,u=e.angle,l=e.opacity;return{attrs:r({id:t,key:t,height:n,width:s,rotation:a.radiansToDegrees(u),opacity:l},i.getKonvaPosition(e),i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:o.KonvaTypes.Rect}}},1581:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1582),o=n(85),a=n(552),s=n(742),u=n(91),l=n(76);function c(e,t){var n=e.width,i=e.height,o=e.left,a=e.top;return r({},e,{top:a-t.y,left:o-t.x,width:n+2*t.x,height:i+2*t.y})}t.selectionFrameViewPropsSelector=function(e){var t=e.selectionFrame,n=e.zoom,r=t.selectedElement,i=t.hoveredRotateControl,u=t.rotationControlInUse,f=r.width,h=r.height,p=r.angle,d=r.type,g=r.left,v=r.top,m=r.visible,y=r.locked,E=r.isBackground,b=a.getCurrentPagePosition(e),w=b.left,_=b.top,P={left:w+g*n,top:_+v*n,width:f*n,height:h*n,angle:p,availableResizeControls:s.resizeControlsForElementProps(r),hoveredRotateControl:i,rotationControlInUse:u,locked:y,isBackground:E,pageX:w,pageY:_};return d===l.DesignElementType.SimpleLineElement?c(P,o.SIMPLE_LINE_PADDING):P},t.addFramePadding=c,t.selectionFrameView=u.compose(t.selectionFrameViewPropsSelector,i.serializeSelectionFrameToKonva)},1582:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),s=n(1094),u=n(623),l=n(1583),c=n(301),f=n(128),h=n(742),p=n(76),d=n(624),g=n(378),v=n(1095);function m(e){var t=e.point,n=e.id,r=e.hoveredRotateControl,i=e.rotationControlInUse,o=e.angle,s,u=n===r,c=0;n===i?c=a.SELECTION_ROTATION_CONTROL_OPACITY/2:u&&(c=a.SELECTION_ROTATION_CONTROL_OPACITY);var d=a.SELECTION_ROTATION_CONTROL_SIZE/2,g={attrs:{id:n,key:n,x:t.x,y:t.y,offsetX:d/a.SELECTION_ROTATION_SCALE,offsetY:d/a.SELECTION_ROTATION_SCALE,rotation:f.radiansToDegrees(o-h.rotationControlAngle[n]-a.QUARTER_CIRCLE),scaleX:a.SELECTION_ROTATION_SCALE,scaleY:a.SELECTION_ROTATION_SCALE},children:[{attrs:{key:"sector",data:a.SELECTION_ROTATION_SEGMENT_PATH,fill:"transparent",opacity:c},className:p.KonvaTypes.Path}],className:p.KonvaTypes.Group};return l.tagNodeWithName(g,n+" "+a.SELECTION_FRAME_ROTATION_CONTROL_NAME),g}function y(e){return null===e?null:e.locked?b(e):E(e)}function E(e){var t=e.height,n=e.width,i=e.top,h=e.left,v=e.angle,y=e.availableResizeControls,E=e.hoveredRotateControl,b=e.rotationControlInUse,_=new g.Rect({x:0,y:0},n,t,0),P={attrs:r({id:a.SELECTION_CONTROL_KEY,key:a.SELECTION_CONTROL_KEY,rotation:f.radiansToDegrees(v)},c.getKonvaPosition({top:i,left:h,width:n,height:t}),{offset:c.getKonvaOffset({width:n,height:t})}),className:p.KonvaTypes.Group,children:o([s.serializeFrame({x:0,y:0,width:n,height:t,angle:0,color:a.SELECTION_CONTROL_ACCENT_COLOR,id:a.SELECTION_FRAME_NAME}),m({point:_.nw,id:d.SelectionFrameRotationControlName.NW,hoveredRotateControl:E,rotationControlInUse:b,angle:0}),m({point:_.ne,id:d.SelectionFrameRotationControlName.NE,hoveredRotateControl:E,rotationControlInUse:b,angle:0}),m({point:_.sw,id:d.SelectionFrameRotationControlName.SW,hoveredRotateControl:E,rotationControlInUse:b,angle:0}),m({point:_.se,id:d.SelectionFrameRotationControlName.SE,hoveredRotateControl:E,rotationControlInUse:b,angle:0})],y.map(function(e){var t=u.rectPointFromControlName(_,e);return u.isEdgeControl(e)?s.serializeSquareControl({point:t,angle:0,id:e,color:a.SELECTION_CONTROL_ACCENT_COLOR}):s.serializeCircleControl({point:t,id:e,color:a.SELECTION_CONTROL_ACCENT_COLOR})}),w(e))};return l.tagNodeWithName(P,a.SELECTION_FRAME_NAME),P}function b(e){var t=e.height,n=e.width,i=e.top,h=e.left,d=e.angle,v=e.availableResizeControls,m=new g.Rect({x:0,y:0},n,t,0),y={attrs:r({id:a.SELECTION_CONTROL_KEY,key:a.SELECTION_CONTROL_KEY,rotation:f.radiansToDegrees(d)},c.getKonvaPosition({top:i,left:h,width:n,height:t}),{offset:c.getKonvaOffset({width:n,height:t})}),className:p.KonvaTypes.Group,children:o([s.serializeFrame({x:0,y:0,width:n,height:t,angle:0,color:a.LOCKED_SELECTION_CONTROL_ACCENT_COLOR,id:a.SELECTION_FRAME_NAME})],v.map(function(e){var t=u.rectPointFromControlName(m,e);return s.serializeLockedCircleControl({point:t,id:e})}),v.map(function(e){var t=u.rectPointFromControlName(m,e);return s.serializeLockedLockControl({point:t,id:e})}),w(e))};return l.tagNodeWithName(y,a.SELECTION_FRAME_NAME),y}function w(e){var t=e.top,n=e.left,r=e.pageY,i,o,a={pageX:e.pageX,pageY:r,elementX:n,elementY:t};return e.isBackground?[v.backgroundLabelToKonva(a)]:[]}t.serializeSelectionFrameToKonva=y},1583:function(e,t,n){"use strict";function r(e,t){e.attrs.name?e.attrs.name+=" "+t:e.attrs.name=t;var n=e;n.children&&n.children.forEach(function(e){r(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.tagNodeWithName=r},1594:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i;Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(746)),a;!function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut",e.BounceEaseIn="BounceEaseIn",e.BounceEaseOut="BounceEaseOut",e.BounceEaseInOut="BounceEaseInOut",e.BackEaseIn="BackEaseIn",e.BackEaseOut="BackEaseOut",e.BackEaseInOut="BackEaseInOut",e.StrongEaseIn="StrongEaseIn",e.StrongEaseOut="StrongEaseOut",e.StrongEaseInOut="StrongEaseInOut"}(a=t.AnimationEasingType||(t.AnimationEasingType={})),t.animationEasings=((i={})[a.Linear]=o.default.Easings.Linear,i[a.EaseIn]=o.default.Easings.EaseIn,i[a.EaseOut]=o.default.Easings.EaseOut,i[a.EaseInOut]=o.default.Easings.EaseInOut,i[a.BounceEaseIn]=o.default.Easings.BounceEaseIn,i[a.BounceEaseOut]=o.default.Easings.BounceEaseOut,i[a.BounceEaseInOut]=o.default.Easings.BounceEaseInOut,i[a.BackEaseIn]=o.default.Easings.BackEaseIn,i[a.BackEaseOut]=o.default.Easings.BackEaseOut,i[a.BackEaseInOut]=o.default.Easings.BackEaseInOut,i[a.StrongEaseIn]=o.default.Easings.StrongEaseIn,i[a.StrongEaseOut]=o.default.Easings.StrongEaseOut,i[a.StrongEaseInOut]=o.default.Easings.StrongEaseInOut,i)},1595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(380),i=n(85);function o(e){var t=r.getTintConfig(e.tint).rgb,n,o,a;return"rgb("+t.r+","+t.g+","+t.b+", "+i.DEFAULT_TINT_INTENSITY+")"}t.getTintColor=o},1596:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1597),a=n(91);t.svgViewPropsSelector=function(e){return function(t){return r({},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e)})}},t.svgView=function(e){return a.compose(t.svgViewPropsSelector(e),o.serializeSvgElementToKonva)}},1597:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(299),s=n(128),u=n(76);t.serializeSvgElementToKonva=function(e){var t=e.uuid,n=e.height,l=e.width,c=e.angle,f=e.visible;return{attrs:r({},i.getKonvaPosition(e),{key:t,name:t,height:n,width:l,visible:f,rotation:s.radiansToDegrees(c)},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:u.KonvaTypes.Group,children:a.hasZeroDimensions(e)?[]:[o.serializeHitRegionToKonva(e),o.serializeImageToKonva(e),o.serializeHighlightToKonva(e),o.serializeSelectionBorderToKonva(e)]}}},1598:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1599),a=n(91);t.maskViewPropsSelector=function(e){return function(t){return r({},i.elementBaseViewPropsSelector(t,e),{pathScale:t.width/t.maskData.dimensions.width},i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e),element:r({},a.first(t.elements),{currentFrame:t.currentFrame})})}},t.maskView=function(e){return a.compose(t.maskViewPropsSelector(e),o.serializeMaskElementToKonva(e))}},1599:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=n(301),a=n(321),s=n(85),u=n(128),l=n(1600);t.serializeMaskElementToKonva=function(e){return function(t){var n=t.uuid,c=t.height,f=t.width,h=t.angle,p=t.pathScale,d=t.element,g=t.visible;return{attrs:r({},o.getKonvaPosition(t),{key:n,height:c,width:f,rotation:u.radiansToDegrees(h)},o.getKonvaFlip(t),{offset:o.getKonvaOffset(t),name:n,id:null,visible:g}),className:i.KonvaTypes.Group,children:[{attrs:{key:"clipGroup",name:s.MASK_CLIP_GROUP_NAME,scale:{x:p,y:p}},className:i.KonvaTypes.Group,children:[l.maskContentView(e)({el:d,scale:p})]},a.serializeHitRegionToKonva(t),a.serializeHighlightToKonva(t),a.serializeSelectionBorderToKonva(t)]}}}},1600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=n(743),o=n(1601),a=n(1602);t.maskContentView=function(e){return function(t){var n=t.el;switch(n.type){case r.DesignElementType.ImageElement:return a.maskImageContentView(e)(t);case r.DesignElementType.VideoElement:return o.maskVideoContentView(e)(t);default:throw new i.ArgumentOutOfRangeError(n.type.toString())}}}},1601:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1104),o=n(91),a=n(1105),s=n(1106);t.videoMaskContentViewSelector=function(e){return function(t){var n=t.el,o=t.scale,a=i.videoViewPropsSelector(e)(n);return r({},a,s.calculateMaskContentDimensions(a,o))}},t.maskVideoContentView=function(e){return o.compose(t.videoMaskContentViewSelector(e),a.serializeVideoElementToKonva)}},1602:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1092),o=n(91),a=n(1103),s=n(1106);t.imageMaskContentViewSelector=function(e){return function(t){var n=t.el,o=t.scale,a=i.imageViewPropsSelector(e)(n);return r({},a,s.calculateMaskContentDimensions(a,o),{hitRegionEnabled:!1})}},t.maskImageContentView=function(e){return o.compose(t.imageMaskContentViewSelector(e),a.serializeImageElementToKonva)}},1603:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1604),a=n(91);t.coloredBackgroundViewPropsSelector=function(e){return function(t){var n=t.colors;return r({color:n[0].color},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e)})}},t.coloredBackgroundView=function(e){return a.compose(t.coloredBackgroundViewPropsSelector(e),o.serializeColoredBackgroundElementToKonva)}},1604:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(299),s=n(76),u=n(128);function l(e){var t=e.uuid,n=e.height,l=e.width,f=e.angle,h=e.visible;return{attrs:r({},i.getKonvaPosition(e),{key:t,height:n,width:l,rotation:u.radiansToDegrees(f),visible:h},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:s.KonvaTypes.Group,children:a.hasZeroDimensions(e)?[]:[o.serializeHitRegionToKonva(e),c(e),o.serializeHighlightToKonva(e),o.serializeSelectionBorderToKonva(e)]}}function c(e){var t=e.height,n=e.width,r,i;return{attrs:{key:"background",fill:e.color,height:t,width:n,opacity:e.opacity,listening:!1},className:s.KonvaTypes.Rect}}t.serializeColoredBackgroundElementToKonva=l},1605:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1606),a=n(91);t.illustrationViewPropsSelector=function(e){return function(t){return r({},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e)})}},t.illustrationView=function(e){return a.compose(t.illustrationViewPropsSelector(e),o.serializeIllustrationElementToKonva)}},1606:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(128),a=n(76);function s(e){var t=e.uuid,n=e.height,s=e.width,u=e.angle,l=e.opacity,c=e.visible;return{attrs:r({id:t,key:t,height:n,width:s,rotation:o.radiansToDegrees(u),opacity:l,visible:c,image:null,offset:i.getKonvaOffset(e)},i.getKonvaPosition(e),i.getKonvaFlip(e)),className:a.KonvaTypes.Image}}t.serializeIllustrationElementToKonva=s},1607:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1608),a=n(299),s=n(91);t.persistGroupViewPropsSelector=function(e){return function(t){var n=t.elements;return r({},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{elements:n.filter(s.not(a.hasZeroDimensions))})}},t.persistGroupView=function(e){return s.compose(t.persistGroupViewPropsSelector(e),o.serializePersistGroupElementToKonva(e))}},1608:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(301),s=n(76),u=n(1091),l=n(321),c=n(128);t.serializePersistGroupElementToKonva=function(e){return function(t){var n=t.uuid,i=t.height,f=t.width,h=t.angle;return{attrs:r({},a.getKonvaPosition(t),{id:n,key:n,height:i,width:f,rotation:c.radiansToDegrees(h)},a.getKonvaFlip(t),{offset:a.getKonvaOffset(t)}),children:o(t.elements.map(u.elementView(e)),[l.serializeHitRegionToKonva(t),l.serializeHighlightToKonva(t)]),className:s.KonvaTypes.Group}}}},1609:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1610),a=n(91),s=n(321);t.textViewPropsSelector=function(e){return function(t){var n=!0;return s.isElementSelected(t,e)&&1===e.selectionFrame.selectedUUIDs.length&&(n=!1),r({},i.elementBaseViewPropsSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e)},i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{isImgVisible:n})}},t.textView=function(e){return a.compose(t.textViewPropsSelector(e),o.serializeTextElementToKonva)}},1610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(321),i=n(299),o=n(76),a=n(1611);function s(e){var t=a.getTextElementKonvaAttrs(e),n=a.getTextElementProps(e),s=a.getTextPositionInTextElement(n);return e.highlightPosition=s,e.selectionBorderPosition=s,e.hitRegionPosition={x:s.x+e.hitRegionPosition.x,y:s.y+e.hitRegionPosition.y},n.visible=e.isImgVisible,!1===e.visible&&(n.visible=e.visible),{attrs:t,className:o.KonvaTypes.Group,children:i.hasZeroDimensions(e)?[]:[r.serializeHitRegionToKonva(e),r.serializeImageToKonva(n),r.serializeHighlightToKonva(e),r.serializeSelectionBorderToKonva(e)]}}t.serializeTextElementToKonva=s},1611:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(128);function a(e){var t=i.getKonvaPosition(e),n=t.x,r=t.y,a=e.uuid,s=e.angle,u=2*e.width,l=2*e.height,c;return{key:a,name:a,x:n,y:r,width:u,height:l,offset:{x:u/2,y:l/2},rotation:o.radiansToDegrees(s)}}function s(e){return r({},e,{width:2*e.width,height:2*e.height})}function u(e){return{y:e.height/4,x:e.width/4}}t.getTextElementKonvaAttrs=a,t.getTextElementProps=s,t.getTextPositionInTextElement=u},1612:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1613),a=n(91);t.rectViewPropsSelector=function(e){return function(t){var n=t.color,o=t.borderWidth,a=t.borderColor,s=t.visible;return r({color:n,borderWidth:o,borderColor:a},i.elementBaseViewPropsSelector(t,e),i.elementHitRegionSelector(t,e),i.elementHighlightedSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e),visible:s})}},t.rectView=function(e){return a.compose(t.rectViewPropsSelector(e),o.serializeRectElementToKonva)}},1613:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(299),s=n(76),u=n(128);function l(e){var t=e.uuid,n=e.height,l=e.width,f=e.angle;return{attrs:r({},i.getKonvaPosition(e),{key:t,height:n,width:l,rotation:u.radiansToDegrees(f)},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:s.KonvaTypes.Group,children:a.hasZeroDimensions(e)?[]:[o.serializeHitRegionToKonva(e),c(e),o.serializeHighlightToKonva(e),o.serializeSelectionBorderToKonva(e)]}}function c(e){var t=e.height,n=e.width,r,i,o,a,u;return{attrs:{key:"background",fill:e.color,height:t,width:n,listening:!1,stroke:e.borderColor,strokeWidth:e.borderWidth,visible:e.visible,opacity:e.opacity},className:s.KonvaTypes.Rect}}t.serializeRectElementToKonva=l},1614:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1615),a=n(91);t.ellipseViewPropsSelector=function(e){return function(t){var n=t.color,o=t.borderWidth,a=t.borderColor,s=t.visible;return r({color:n,borderWidth:o,borderColor:a},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e),visible:s})}},t.ellipseView=function(e){return a.compose(t.ellipseViewPropsSelector(e),o.serializeEllipseElementToKonva)}},1615:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(299),s=n(76),u=n(128);function l(e){var t=e.uuid,n=e.height,l=e.width,f=e.angle,h=e.visible;return{attrs:r({},i.getKonvaPosition(e),{key:t,height:n,width:l,rotation:u.radiansToDegrees(f),visible:h},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e),image:null}),className:s.KonvaTypes.Group,children:a.hasZeroDimensions(e)?[]:[o.serializeHitRegionToKonva(e),c(e),o.serializeHighlightToKonva(e),o.serializeSelectionBorderToKonva(e)]}}function c(e){var t=e.height,n=e.width,r,i,o,a,u;return{attrs:{key:"background",fill:e.color,listening:!1,stroke:e.borderColor,strokeWidth:e.borderWidth,x:n/2,y:t/2,radiusX:n/2,radiusY:t/2,visible:e.visible,opacity:e.opacity},className:s.KonvaTypes.Ellipse}}t.serializeEllipseElementToKonva=l},1616:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(347),o=n(1617),a=n(91);t.ellipseViewPropsSelector=function(e){return function(t){var n=t.color,o=t.visible;return r({color:n},i.elementBaseViewPropsSelector(t,e),i.elementHighlightedSelector(t,e),i.elementHitRegionSelector(t,e),i.elementSelectionBorderSelector(t,e),{inGroupSelected:i.elementInGroupSelectedSelector(t,e),visible:o})}},t.simpleLineView=function(e){return a.compose(t.ellipseViewPropsSelector(e),o.serializeSimpleLineElementToKonva)}},1617:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(301),o=n(321),a=n(85),s=n(299),u=n(128),l=n(76);function c(e){var t=e.uuid,n=e.height,c=e.width,h=e.angle,p=e.visible;return{attrs:r({},i.getKonvaPosition(e),{key:t,height:n,width:c,visible:p,rotation:u.radiansToDegrees(h)},i.getKonvaFlip(e),{offset:i.getKonvaOffset(e)}),className:l.KonvaTypes.Group,children:s.hasZeroDimensions(e)?[]:[o.addKonvaPadding(o.serializeHitRegionToKonva(e),a.SIMPLE_LINE_PADDING),f(e),o.addKonvaPadding(o.serializeHighlightToKonva(e),a.SIMPLE_LINE_PADDING),o.serializeSelectionBorderToKonva(e)]}}function f(e){var t=e.height,n=e.width,r,i,o;return{attrs:{key:"line",fill:e.color,width:n,height:t,listening:!1,visible:e.visible,opacity:e.opacity},className:l.KonvaTypes.Rect}}t.serializeSimpleLineElementToKonva=c},1643:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(762)),o=n(1123),a=n(85),s=function(){function e(){var e=this;this.handleMouseMove=function(t){var n={x:t.pageX,y:t.pageY},r=e.getBoundingRectWithoutRotation(),i=o.getDimensionsWithPaddingsFromClientRect(r),a;o.isMousePointOnArea(n,i,e.elAngle)?e.setPointerEvents():e.removePointerEvents()},this.createContainerElements(),this.addContainerElementToPage(),this.bindKeyDownEvent(),this.throttledMouseMoveHandler=i.default(this.handleMouseMove,50)}return Object.defineProperty(e.prototype,"containerSize",{get:function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t,n){this.elAngle=e.angle;var r=t.top+e.top*n,i=t.left+e.left*n,o=e.width,a=e.height;this.elWrapper.style.setProperty("display","block"),o&&this.elWrapper.style.setProperty("width",o+"px"),this.elWrapper.style.setProperty("top",r+"px"),this.elWrapper.style.setProperty("left",i+"px"),this.elWrapper.style.setProperty("transform","rotate("+e.angle+"rad)"),this.elWrapper.style.setProperty("opacity",String(e.opacity)),this.elWrapper.style.setProperty("transform-origin",o/2*n+"px "+a/2*n+"px"),this.el.style.setProperty("transform","scale("+n+")")},e.prototype.showContainerElement=function(e,t,n){this.update(e,t,n),this.listenMouseEvents()},e.prototype.hideContainerElement=function(){this.stopListenMouseEvents(),this.elWrapper.style.setProperty("top","-100%"),this.elWrapper.style.setProperty("display","none")},e.prototype.listenMouseEvents=function(){this.setPointerEvents(),this.addMouseListener()},e.prototype.stopListenMouseEvents=function(){this.removeMouseListener(),this.removePointerEvents()},e.prototype.createContainerElements=function(){var e=document.createElement("div");e.style.setProperty("position","absolute"),e.style.setProperty("transform-origin","center"),e.style.setProperty("top","-100%"),e.style.setProperty("z-index","2"),e.style.setProperty("pointer-events","none");var t=document.createElement("div");t.className=a.EDITABLE_BLOCK_CLASSNAME,t.style.setProperty("transform-origin","top left"),t.style.setProperty("outline-style","none"),e.appendChild(t);var n=document.createElement("div");n.style.setProperty("display","inline-block"),n.style.setProperty("position","absolute"),n.style.setProperty("top","-100%"),this.elWrapper=e,this.el=t},e.prototype.addContainerElementToPage=function(){var e=document.querySelector(".konvajs-content");if(null===e)throw new Error("Error on editable block addition. Element '.konvajs-content' not found on the page");e.parentElement.appendChild(this.elWrapper)},e.prototype.getBoundingRectWithoutRotation=function(){var e=this.elWrapper.style.transform;this.elWrapper.style.setProperty("transform","none");var t=this.el.getBoundingClientRect();return this.elWrapper.style.setProperty("transform",e),t},e.prototype.removePointerEvents=function(){this.el.style.setProperty("pointer-events","none")},e.prototype.setPointerEvents=function(){this.el.style.setProperty("pointer-events","auto")},e.prototype.addMouseListener=function(){document.addEventListener("mousemove",this.throttledMouseMoveHandler)},e.prototype.removeMouseListener=function(){document.removeEventListener("mousemove",this.throttledMouseMoveHandler)},e.prototype.bindKeyDownEvent=function(){this.el.addEventListener("keydown",function(e){var t=(e.metaKey||e.ctrlKey)&&e.keyCode===a.keycodes.Z,n=(e.metaKey||e.ctrlKey)&&e.keyCode===a.keycodes.Y;t||n||!a.MODE_KEY_CODES.includes(e.keyCode)&&e.stopPropagation&&e.stopPropagation()})},e}();t.EditableBlockDOMContainer=s},1644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85),i=function(){function e(){this.createContainerElements(),this.addContainerElementToPage()}return Object.defineProperty(e.prototype,"containerSize",{get:function(){return{width:this.el.offsetWidth,height:this.el.offsetHeight}},enumerable:!0,configurable:!0}),e.prototype.update=function(e){var t=e.width,n=e.height;this.el.style.setProperty("display","block"),e.width&&this.el.style.setProperty("width",t+"px"),e.height&&this.el.style.setProperty("height",n+"px")},e.prototype.createContainerElements=function(){var e=document.createElement("div");e.style.setProperty("display","inline-block"),e.style.setProperty("position","absolute"),e.style.setProperty("top","-100%"),e.style.setProperty("right","-100%"),e.className=r.EDITABLE_BLOCK_CLASSNAME,this.el=e},e.prototype.addContainerElementToPage=function(){document.body.appendChild(this.el)},e}();t.EditableBlockTmpDOMContainer=i},1645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1124),i=n(88),o=n(892),a=n(255),s=n(91);t.updateCurrentPageMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager),s;return n.getCurrentPage().setProps(r),o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.addPageMutator=function(e){return function(t,n){var r=e.get(i.DI_TYPES.HistoryManager),u=s.generateUuid();return n.project.addAfter(o.createPage({uuid:u,animationDuration:0,animations:[],elements:[],opacity:1}),n.currentPageID),n.currentPageID=u,n.select([]),n.highlightedIDs=[],r.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.deletePageMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager),s=n.project.findPage(r),u=n.project.elements.indexOf(s);return n.project.deletePage(s.props.uuid),n.currentPageID=n.project.elements[Math.max(0,u-1)].props.uuid,n.select([]),n.highlightedIDs=[],o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.copyPageMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager),s=n.project.clonePage(r);return n.project.addAfter(s,r),n.currentPageID=s.props.uuid,n.select([]),n.highlightedIDs=[],o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.movePageForwardMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager);return n.project.movePageForward(r),n.select([]),n.highlightedIDs=[],o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.movePageBackwardMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager);return n.project.movePageBackward(r),n.select([]),n.highlightedIDs=[],o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.selectPageMutator=function(e){return function(t,n){var r=t.payload,o=e.get(i.DI_TYPES.HistoryManager);return n.currentPageID=r,n.select([]),n.highlightedIDs=[],o.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}},t.pageMutator=[[r.updatePage,t.updateCurrentPageMutator],[r.addPage,t.addPageMutator],[r.selectPage,t.selectPageMutator],[r.deletePage,t.deletePageMutator],[r.copyPage,t.copyPageMutator],[r.movePageForward,t.movePageForwardMutator],[r.movePageBackward,t.movePageBackwardMutator]]},1646:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=n(91),a=n(85),s=n(765);function u(e){var t=o.deepCopy(e);return s.SchemaValidator.sanitizeProject(r({},t,{v2:!0,pages:t.pages.map(function(e){return e.elements=e.elements.map(function(e){return l(e,null)}),e.uuid=e.uuid||o.generateUuid(),e})}))}function l(e,t){var n=o.deepCopy(e),r=t;if(n.flipped&&(n.flipHorizontal=n.flipped.horizontal,n.flipVertical=n.flipped.vertical,delete n.flipped),n.position){var s=n.position,u=s.top,c=s.left;n.top=r?u-r.position.top:u,n.left=r?c-r.position.left:c,delete n.position}if(n.children&&(n.elements=n.children.map(function(e){return l(e,n)})),"string"==typeof n.fontSize&&(n.fontSize=Number(n.fontSize)),n.type===i.DesignElementType.MaskElement){var f=n.stickedImageData,h=n.width,p=n.height,d=n.uuid;n.elements=[{type:i.DesignElementType.ImageElement,uuid:d+a.MASK_STICKED_UUID,left:0,top:0,width:h,height:p,opacity:1,flipHorizontal:1,flipVertical:1,originalImageWidth:h,originalImageHeight:p,mediaId:f?f.merge:null,cropOpts:{left:0,top:0,width:h,height:p}}]}return n}t.convertProjectToV2=u,t.convertElementToV2=l},1681:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.project",title:"Project",type:"object",properties:{pages:{type:"array",items:{$ref:"v2.page"},minItems:1},pageWidth:{type:"integer"},pageHeight:{type:"integer"},v2:{type:"boolean"},format:{type:"string"},group:{type:"string"},name:{type:"string"},originalDimensions:{type:"object",properties:{width:{type:"string"},height:{type:"string"},measureUnits:{type:"string"}},additionalProperties:!1},projectType:{type:"string"}},required:["pages","pageWidth","pageHeight"],additionalProperties:!1}},1682:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.page",title:"Project Page",type:"object",properties:{uuid:{type:"string"},templateLikeElements:{type:"array",items:{type:"string"}},template:{type:"string"},elements:{type:"array",items:{if:{properties:{type:{const:"imageElement"}}},then:{$ref:"v2.imageElement"},else:{if:{properties:{type:{const:"illustrationElement"}}},then:{$ref:"v2.illustrationElement"},else:{if:{properties:{type:{const:"svgElement"}}},then:{$ref:"v2.svgElement"},else:{if:{properties:{type:{const:"textElement"}}},then:{$ref:"v2.textElement"},else:{if:{properties:{type:{const:"maskElement"}}},then:{$ref:"v2.maskElement"},else:{if:{properties:{type:{const:"videoElement"}}},then:{$ref:"v2.videoElement"},else:{if:{properties:{type:{const:"persistGroupElement"}}},then:{$ref:"v2.persistGroupElement"},else:{if:{properties:{type:{const:"coloredBackground"}}},then:{$ref:"v2.coloredBackground"},else:!1}}}}}}}}},animationDuration:{type:"number"},animations:{type:"array"}},additionalProperties:!1,required:["uuid"]}},1683:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.designElement",title:"Design Element",type:"object",properties:{uuid:{type:"string"},width:{type:"number"},height:{type:"number"},angle:{type:"number"},left:{type:"number"},top:{type:"number"},opacity:{type:"number"},locked:{type:"boolean"},isFreeItem:{type:"boolean"},animations:{type:"array"},animationDuration:{type:"number"}},required:["uuid","width","height","angle","type","left","top","opacity"],additionalProperties:!1}},1684:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.imageElement",title:"Image Element",type:"object",properties:{type:{const:"imageElement"},cropOpts:{type:"object",properties:{left:{type:"number"},top:{type:"number"},width:{type:"number"},height:{type:"number"}}},originalImageWidth:{type:"number"},originalImageHeight:{type:"number"},mediaId:{type:"string"},dphId:{type:"string"},isBackground:{type:"boolean"}},required:["cropOpts","originalImageWidth","originalImageHeight"]}},1685:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.illustrationElement",title:"Illustration Element",type:"object",properties:{type:{const:"illustrationElement"},mediaId:{type:"string"},dphId:{type:"string"}},required:["mediaId"]}},1686:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.svgElement",title:"SVG Element",type:"object",properties:{type:{const:"svgElement"},colors:{type:"array",items:{type:"object",properties:{id:{type:"integer"},color:{type:"string"}}}},mediaId:{type:"string"},dphId:{type:"string"},isBackground:{type:"boolean"}},required:["colors"]}},1687:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.textElement",title:"Text Element",type:"object",properties:{type:{const:"textElement"},text:{type:"string"},fontSize:{type:"number"},font:{type:"string"},lineHeight:{type:"number"},wordBreak:{enum:["breakWord","breakAll"]},textAlign:{enum:["left","right","center"]},capitalize:{type:"boolean"},underline:{type:"boolean"},letterSpacing:{type:"number"},colorMap:{type:"array",items:{type:"object",properties:{startIndex:{type:"integer"},endIndex:{type:"integer"},value:{type:"string",pattern:"^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"}}}},boldMap:{type:"array",items:{type:"object",properties:{startIndex:{type:"integer"},endIndex:{type:"integer"},value:{type:"boolean"}}}},italicMap:{type:"array",items:{type:"object",properties:{startIndex:{type:"integer"},endIndex:{type:"integer"},value:{type:"boolean"}}}},lineMap:{type:"array",items:{type:"object",properties:{startIndex:{type:"integer"},endIndex:{type:"integer"},value:{type:"string"}}}}},required:["text","fontSize","font","lineHeight","textAlign","capitalize","letterSpacing","colorMap","boldMap","italicMap"]}},1688:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.maskElement",title:"Mask Element",type:"object",properties:{type:{const:"maskElement"},elements:{type:"array",maxItems:1,items:{if:{properties:{type:{const:"imageElement"}}},then:{$ref:"v2.imageElement"},else:{if:{properties:{type:{const:"videoElement"}}},then:{$ref:"v2.videoElement"},else:!1}}},maskData:{type:"object",properties:{dimensions:{left:{type:"number"},top:{type:"number"},width:{type:"number"},height:{type:"number"}}}},mediaId:{type:"string"},dphId:{type:"string"},maskType:{type:"string"}},required:["elements","mediaId","dphId","maskType"]}},1689:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.videoElement",title:"Video Element",type:"object",properties:{type:{const:"videoElement"},mediaId:{type:"string"},previewMediaId:{type:"string"},dphId:{type:"string"},isBackground:{type:"boolean"}},required:[]}},1690:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.persistGroupElement",title:"Group Element",type:"object",properties:{type:{const:"persistGroupElement"},elements:{type:"array",items:{if:{properties:{type:{const:"imageElement"}}},then:{$ref:"v2.imageElement"},else:{if:{properties:{type:{const:"illustrationElement"}}},then:{$ref:"v2.illustrationElement"},else:{if:{properties:{type:{const:"svgElement"}}},then:{$ref:"v2.svgElement"},else:{if:{properties:{type:{const:"textElement"}}},then:{$ref:"v2.textElement"},else:{if:{properties:{type:{const:"maskElement"}}},then:{$ref:"v2.maskElement"},else:{if:{properties:{type:{const:"videoElement"}}},then:{$ref:"v2.videoElement"},else:{if:{properties:{type:{const:"persistGroupElement"}}},then:{$ref:"v2.persistGroupElement"},else:{if:{properties:{type:{const:"coloredBackground"}}},then:{$ref:"v2.coloredBackground"},else:!1}}}}}}}}}},required:["elements"]}},1691:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.coloredBackground",title:"Colored Background Element",type:"object",properties:{type:{const:"coloredBackground"},colors:{type:"array",items:{type:"object",properties:{id:{type:"integer"},color:{type:"string"}}}},isBackground:{type:"boolean"}},required:["colors"]}},1692:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.elementWithFilters",type:"object",properties:{filters:{type:"object",properties:{brightness:{type:"integer",minimum:0,maximum:100},contrast:{type:"integer",minimum:0,maximum:100},saturate:{type:"integer",minimum:0,maximum:100},tint:{type:"integer",minimum:0,maximum:100},blur:{type:"integer",minimum:0,maximum:100},crossProcess:{type:"integer",minimum:0,maximum:100},vignette:{type:"integer",minimum:0,maximum:100}},required:["brightness","contrast","saturate","tint","blur","crossProcess","vignette"],additionalProperties:!1},filtersPreset:{type:"boolean"},filtersPresetIntensity:{type:"number"},filtersIntensityEnabled:{type:"boolean"}},required:["filters"]}},1693:function(e){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"v2.elementWithFilters",type:"object",properties:{flipHorizontal:{enum:[1,-1]},flipVertical:{enum:[1,-1]}},required:["flipHorizontal","flipVertical"]}},1699:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(401),o=n(91),a=n(76),s=n(907),u=n(85),l=n(255),c=n(1134);function f(e){var t=e.top,n=e.left,r=e.width,i=e.height,l=e.angle,c=e.animations,f=e.originalAngle,h=e.id,p=e.innerId,d=e.templateAsset,g=e.mediaAsset,v=e.mediaId,m=e.opacity,y=e.isFreeItem,E=e.flipHorizontal,b=e.flipVertical,w=e.isBackground,_=e.locked,P=e.selected,S=e.isSharedProject,A=e.dphId,O=e.hasPermission,C=e.uuid,x=e.previewPath;return{animations:c?c.filter(o.not(s.isVideoAnimation)):[],top:t,left:n,width:r,height:i,angle:l,originalAngle:f,id:h,innerId:p,templateAsset:d,mediaAsset:g,mediaId:v,opacity:m,isFreeItem:y,flipHorizontal:E,flipVertical:b,isBackground:w,type:a.DesignElementType.ImageElement,originalType:a.DesignElementType.VideoElement,locked:_,selected:P,isSharedProject:S,dphId:A,hasPermission:O,uuid:C,originalImageWidth:r,originalImageHeight:i,src:x||u.FALLBACK_IMG}}function h(e){var n,i;i=c.shouldMigrateData(e)?c.migrateData(e):c.convertData(e);var o=r({},i,{width:i.project.pageWidth,height:i.project.pageHeight,currentPageID:i.currentPageID}),a=l.createWorkspace(t.replaceVideoToImageInWorkspace(o),!0);return a.hasPageShadow=!1,a}t.translateVideoToImage=f,t.replaceVideoToImage=function(e){return i.isVideoElement(e)?f(e):i.isGroupElement(e)?i.mapGroupElements(t.replaceVideoToImage)(e):e},t.createShallowWorkspace=h,t.replaceVideoToImageInWorkspace=i.mapProject(i.mapPage(i.mapDesignElement(t.replaceVideoToImage)))},1700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(898),i=n(1701);function o(e,t){return i.mapProjectPropsToDomain(e,{textElementDataMapper:t.v1?r.mapTextElementOldFormatPropsToDomain:r.mapTextElementPropsToDomain})}t.mapProtoPropsToDomainProps=o},1701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1702);function i(e,t){return{pageHeight:e.pageHeight,pageWidth:e.pageWidth,animationLoop:!1,pages:e.pages.map(function(e){return r.mapPagePropsToDomain(e,t)}),v2:!0}}t.mapProjectPropsToDomain=i},1702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(625);function i(e,t){return{uuid:e.uuid,templateLikeElements:e.templateLikeElements,templateId:e.templateId,innerId:e.innerId,angle:e.angle,animationDuration:100,animations:[],opacity:1,elements:e.elements.map(function(e){return r.mapElementPropsToDomain(e,t)})}}t.mapPagePropsToDomain=i},1703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(88),o=n(630),a=n(1704),s=n(754),u=n(925),l=n(744),c=n(745),f=n(926),h=n(1137),p=n(766),d=n(929),g=n(908),v=n(756),m=n(918),y=n(911),E=n(750),b=n(927),w=n(1138),_=n(749),P=n(910),S=n(909),A=n(919),O=n(930),C=n(928),x=n(1726),T=n(1738),I=n(550),k=n(553),D=n(1154),R=n(761),M=n(757),F=n(763);function L(e,t){var n=new r.Container;return n.bind(i.DI_TYPES.Config).toConstantValue(a.SHALLOW_CONFIG),n.bind(i.DI_TYPES.Workspace).toConstantValue(e),n.bind(i.DI_TYPES.MountNode).toConstantValue(t.el),n.bind(i.DI_TYPES.DesignerProps).toConstantValue(t),n.bind(i.DI_TYPES.RootEpic).toConstantValue(x.rootEpic(n)),n.bind(i.DI_TYPES.RootMutator).toConstantValue(T.rootMutator(n)),n.bind(i.DI_TYPES.HistoryManager).to(d.HistoryManager).inSingletonScope(),n.bind(i.DI_TYPES.ResourceCache).to(A.ResourceCache).inSingletonScope(),n.bind(i.DI_TYPES.DesignElementsComparator).to(F.DesignElementsComparator).inSingletonScope(),n.bind(i.DI_TYPES.ResourceRepository).to(o.ResourceRepository).inSingletonScope(),n.bind(i.DI_TYPES.FontRepository).to(m.FontRepository).inSingletonScope(),n.bind(i.DI_TYPES.FontLoader).to(D.FontLoader),n.bind(i.DI_TYPES.FontMetaLoader).to(R.FontMetaLoader).inSingletonScope(),n.bind(i.DI_TYPES.FontLoaderFactory).toAutoFactory(i.DI_TYPES.FontLoader),n.bind(i.DI_TYPES.ImageRepository).to(g.ImageRepository).inSingletonScope(),n.bind(i.DI_TYPES.TextRepository).to(y.TextRepository).inSingletonScope(),n.bind(i.DI_TYPES.SvgRepository).to(v.SvgRepository).inSingletonScope(),n.bind(i.DI_TYPES.MaskRepository).to(P.MaskRepository).inSingletonScope(),n.bind(i.DI_TYPES.VideoRepository).to(S.VideoRepository).inSingletonScope(),n.bind(i.DI_TYPES.Renderer).to(I.Renderer).inSingletonScope(),n.bind(i.DI_TYPES.IAppStage).to(O.AppStage).inSingletonScope(),n.bind(i.DI_TYPES.Logger).toConstantValue(new k.Logger("Designer")),n.bind(i.DI_TYPES.AfterRenderService).to(l.AfterRenderService),n.bind(i.DI_TYPES.EditableBlockMediator).to(M.EditableBlockMediator).inSingletonScope(),n.bind(i.DI_TYPES.ReconciliationService).to(E.ReconciliationService),n.bind(i.DI_TYPES.AssetsDOMReconciler).to(s.AssetsDOMReconciler),n.bind(i.DI_TYPES.ICursorManager).to(h.CursorManager).inSingletonScope(),n.bind(i.DI_TYPES.RotationCursorProvider).to(f.RotationCursorProvider).inSingletonScope(),n.bind(i.DI_TYPES.ResizingCursorProvider).to(b.ResizingCursorProvider).inSingletonScope(),n.bind(i.DI_TYPES.MovingCursorProvider).to(C.MovingCursorProvider).inSingletonScope(),n.bind(i.DI_TYPES.ICursorTemplatesProvider).to(w.CursorTemplatesProvider).inSingletonScope(),n.bind(i.DI_TYPES.VideoRenderer).to(u.VideoRenderer).inSingletonScope(),n.bind(i.DI_TYPES.FilterService).to(c.FilterService).inSingletonScope(),n.bind(i.DI_TYPES.CropService).to(_.CropService).inSingletonScope(),n.bind(i.DI_TYPES.StateManager).to(p.StateManager).inSingletonScope(),n}t.createShallowContainer=L},1704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85);t.SHALLOW_CONFIG={fontLoaderTimeout:r.FONT_LOADING_TIMEOUT}},1705:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(751),a=n(1135),s=n(1707),u=function(){function e(e,t){if(!e)throw new o.ArgumentError("Video is undefined");this.stateMachine=new s.VideoPlayerStateMachine(e,t,new a.InitialVideoPlayerState)}return e.prototype.play=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.stateMachine.changeStateToPlay(e)];case 1:return t.sent(),[2]}})})},e.prototype.stop=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.stateMachine.changeStateToStop(e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(e.prototype,"videoSrc",{get:function(){return this.stateMachine.videoSrc},enumerable:!0,configurable:!0}),e}();t.VideoPlayer=u},1706:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1135),u,l=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.play=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(e){return this.logger.log("play -> play"),[2]})})},t.prototype.stop=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){return this.logger.log("play -> stop"),e.pauseVideo(),e.currentTime=t,e.state=new s.InitialVideoPlayerState,[2]})})},t}(n(1136).VideoPlayerState);t.PlayingVideoPlayerState=l},1707:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n){this.video=e,this.state=n,this.stage=t}return e.prototype.changeStateToPlay=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.state.play(this,e)];case 1:return t.sent(),[2]}})})},e.prototype.changeStateToStop=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.state.stop(this,e)];case 1:return t.sent(),[2]}})})},e.prototype.seekVideo=function(e){return r(this,void 0,void 0,function(){var t=this;return i(this,function(n){return this.currentTime=e,[2,new Promise(function(n){t.video.onseeked=function(){return n()},t.video.currentTime=e})]})})},e.prototype.playVideo=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.video.play()];case 1:return e.sent(),[2]}})})},e.prototype.pauseVideo=function(){this.video.pause()},e.prototype.applyToStage=function(){this.stage.draw()},Object.defineProperty(e.prototype,"videoSrc",{get:function(){return this.video.src},enumerable:!0,configurable:!0}),e}();t.VideoPlayerStateMachine=o},1708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(767),i=n(1709),o=n(931),a=n(348),s=n(1724),u=n(1725);function l(e){var t=c(e),n=u.combineKonvaEpics(s.clickEpic);return a.merge(t,n(t))}function c(e){var t=new r.Subject;return e.on(i.KonvaEventType.MouseOver,function(n){var r=n.target;t.next(o.mouseOverAction({targetID:r.id(),targetName:r.name(),position:e.getPointerPosition()}))}),e.on(i.KonvaEventType.MouseOut,function(n){var r=n.target;t.next(o.mouseOutAction({targetID:r.id(),targetName:r.name(),position:e.getPointerPosition()}))}),e.on(i.KonvaEventType.MouseDown,function(n){var r=n.target,i=n.evt;t.next(o.mouseDownAction({targetID:r.id(),targetName:r.name(),position:e.getPointerPosition(),evt:i}))}),e.on(i.KonvaEventType.MouseUp,function(n){var r=n.target;t.next(o.mouseUpAction({targetID:r.id(),targetName:r.name(),position:e.getPointerPosition()}))}),e.on(i.KonvaEventType.MouseMove,function(n){var r=n.target;t.next(o.mouseMoveAction({targetID:r.id(),targetName:r.name(),position:e.getPointerPosition()}))}),t.asObservable()}t.createKonvaEventSource=l},1709:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.MouseOver="mouseover",e.MouseOut="mouseout",e.MouseDown="mousedown",e.MouseMove="mousemove",e.MouseUp="mouseup"}(r=t.KonvaEventType||(t.KonvaEventType={}))},1724:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(931),o=n(174);t.clickEpic=function(e){return e.pipe(o.pairwise(),o.filter(function(e){var t=r(e,2),n=t[0],o=t[1];return i.mouseDownAction.match(n)&&i.mouseUpAction.match(o)}),o.map(function(e){var t,n=r(e,1)[0].payload;return i.clickAction({targetID:n.targetID,targetName:n.targetName,position:n.position,evt:n.evt})}))}},1725:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(514);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return o.merge.apply(void 0,i(e.map(function(e){return e(t)})))}}t.combineKonvaEpics=a},1726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1147),i=n(405),o=n(1737),a=n(1150);t.rootEpic=i.combineEpics(r.preloadEpic,o.shallowEpics,a.animationEpic)},1728:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(509),o=n(633),a=n(1729),s=n(255),u=n(1073),l=n(88),c=n(128),f=n(557);t.addElementMutator=function(e){return function(t,n){var r=t.payload,i=r.position,o=r.data,u=e.get(l.DI_TYPES.HistoryManager),f=new a.AddElementFactory(n),h=n.getCurrentPage();if(h){var p=i?n.getRelativePosition(h,i):null;p&&(p={left:p.left/n.zoom,top:p.top/n.zoom});var d=f.create(o,p);if(!c.rectIntersects(d.getBoundingRect(),n.project.getPageBoundingRect()))return n;h.add(d),n.select([d.props.uuid]),u.registerState(s.mapWorkspaceDataToProps(n.serialize()))}return n}},t.addTemplateMutator=function(e){return function(t,n){var o,a,c=t.payload,f=e.get(l.DI_TYPES.HistoryManager),h=n.getCurrentPage();h.clear();try{for(var p=r(c.elements),d=p.next();!d.done;d=p.next()){var g=d.value,v=i.createDesignElement(g);v instanceof u.ImageElement&&(v.state.templateAsset=!0),h.add(v)}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return n.select([]),f.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}},t.updateElementMutator=function(e){return function(t,n){var r=t.payload,i=e.get(l.DI_TYPES.HistoryManager),o=n.project.find(r.data.uuid),a=f.serializeUpdateElementData(r.data,o);return o.setProps(a),r.outOfHistory||i.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}},t.updateElementsMutator=function(e){return function(t,n){var r=t.payload,i=e.get(l.DI_TYPES.HistoryManager);return r.data.elements.map(function(e){var t;n.project.find(e.uuid).setProps(e)}),n.select(n.selectionFrameModel.selectedUUIDs),r.outOfHistory||i.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}},t.cloneElementMutator=function(e){return function(t,n){var i,o,a=e.get(l.DI_TYPES.HistoryManager),u=n.selectionFrameModel;if(!u.selectedElement)return n;var c=n.getCurrentPage(),f=[];try{for(var h=r(u.selectedUUIDs),p=h.next();!p.done;p=h.next()){var d=p.value,g=n.project.find(d);f.push(c.duplicateElement(g,1).props.uuid)}}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return n.select(f),a.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}},t.copyElementMutator=function(e){return function(e,t){var n=t.selectionFrameModel;return n.selectedElement?(t.clipboard.buffer=n.selectedUUIDs,t):t}},t.pasteElementMutator=function(e){return function(t,n){var i,o,a=e.get(l.DI_TYPES.HistoryManager),u=n.clipboard,c=n.getCurrentPage(),f=u.buffer.join("-");if(0===u.buffer.length)return n;if(c.props.uuid in u.pastedCountByPage||(u.pastedCountByPage[c.props.uuid]={}),f in u.pastedCountByPage[c.props.uuid])u.pastedCountByPage[c.props.uuid][f]++;else{var h=n.project.findPageBy(function(e){return!!e.find(u.buffer[0])});u.pastedCountByPage[c.props.uuid][f]=h===c?1:0}var p=u.pastedCountByPage[c.props.uuid][f],d=[];try{for(var g=r(u.buffer),v=g.next();!v.done;v=g.next()){var m=v.value,y=n.project.find(m);d.push(c.duplicateElement(y,p).props.uuid)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}return n.select(d),a.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}},t.elementMutator=new Map([[o.addElement,t.addElementMutator],[o.addTemplateElement,t.addTemplateMutator],[o.updateElement,t.updateElementMutator],[o.updateElements,t.updateElementsMutator],[o.copyElement,t.copyElementMutator],[o.pasteElement,t.pasteElementMutator],[o.cloneElement,t.cloneElementMutator]])},1729:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1730),i=n(76),o=n(1731),a=n(1732),s=n(1733),u=n(509),l=n(1734),c=n(1735),f=n(128),h=n(380),p=n(896),d=n(932),g=.6,v=function(){function e(e){var t;this.propsFactories=((t={})[i.DesignElementType.ColoredBackground]=new o.ColoredBackgroundAddElementPropsFactory(e),t[i.DesignElementType.ImageElement]=new a.ImageAddElementPropsFactory(e),t[i.DesignElementType.TextElement]=new r.TextAddElementPropsFactory(e),t[i.DesignElementType.MaskElement]=new l.MaskAddElementPropsFactory(e),t[i.DesignElementType.SimpleLineElement]=new c.SimpleLineAddElementPropsFactory(e),t[i.DesignElementType.SvgElement]=new d.BackgroundAddElementPropsFactory(e),t[i.DesignElementType.VideoElement]=new d.BackgroundAddElementPropsFactory(e),t),this.defaultPropsFactory=new s.DefaultAddElementPropsFactory(e),this.workspace=e}return e.prototype.create=function(e,t){var n=this.getPropsFactory(e.type),r=u.createDesignElement(n.create(e,t));if(e.type===i.DesignElementType.GroupElement){r.handleResizeStart();var o=this.workspace.project.props,a=o.pageWidth,s=o.pageHeight,l=e.width,c=e.height,d=.6*h.fitImageDimensionsRatio({width:l,height:c},{width:a,height:s},p.FitImageMode.Contain),g=t?f.positionToPoint(t):r.getBoundingBox().getCenter();r.resize(d,g,f.UNIT_VECTOR,!0)}return r},e.prototype.getPropsFactory=function(e){return this.propsFactories[e]||this.defaultPropsFactory},e}();t.AddElementFactory=v},1730:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){return t||(e.hasTrustedDimensions||e.width?t=this.getCenterPosition(e):(e.width=0,e.height=0,t=this.getCenterPosition(e))),o({},e,t)},t}(n(634).AddElementPropsFactory);t.TextAddElementPropsFactory=s},1731:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){var n=this.getFullPageSize();return o({},e,n,this.getCenterPosition(n),{isBackground:!0})},t}(n(932).BackgroundAddElementPropsFactory);t.ColoredBackgroundAddElementPropsFactory=s},1732:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1149),s,u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){var n=this.getFullPageSize(),r=this.getCenterPosition(e),i=e.isBackground?a.getBackgroundElementDimensions(e,n):a.getElementDimensions(e,t,r);return o({},e,i,{originalImageWidth:i.width,originalImageHeight:i.height,cropOpts:{left:0,top:0,width:i.width,height:i.height}})},t}(n(932).BackgroundAddElementPropsFactory);t.ImageAddElementPropsFactory=u},1733:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){return o({},e,t||this.getCenterPosition(e))},t}(n(634).AddElementPropsFactory);t.DefaultAddElementPropsFactory=s},1734:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(634),s=n(380),u=n(85),l=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){var n={width:u.MASK_PLACEHOLDER_IMAGE_WIDTH,height:u.MASK_PLACEHOLDER_IMAGE_HEIGHT},r=s.fitImageDimensions(n,e);return o({},e,t||this.getCenterPosition(e),{elements:[o({},e.elements[0],{left:(e.width-r.width)/2,top:(e.height-r.height)/2,width:r.width,height:r.height,originalImageWidth:r.width,originalImageHeight:r.height,cropOpts:{left:0,top:0,width:r.width,height:r.height}})]})},t}(a.AddElementPropsFactory);t.MaskAddElementPropsFactory=l},1735:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a,s=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){return o({},e,t||this.getCenterPosition(e))},t}(n(634).AddElementPropsFactory);t.SimpleLineAddElementPropsFactory=s},1736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(405),i=n(174),o=n(633),a=n(445),s=n(85),u=function(){return function(e,t){return e.pipe(i.filter(o.cloneElement.match),i.concatMap(function(){return t().selectionFrameModel.selectedUUIDs.map(function(e){return a.preloadElement({elementUuid:e,priority:s.PRELOAD_CURRENT_PAGE_PRIORITY})})}))}},l=function(){return function(e,t){return e.pipe(i.filter(o.pasteElement.match),i.concatMap(function(){return t().selectionFrameModel.selectedUUIDs.map(function(e){return a.preloadElement({elementUuid:e,priority:s.PRELOAD_CURRENT_PAGE_PRIORITY})})}))}};t.elementEpic=r.combineEpics(u,l)},1737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(405),i=n(174),o=n(921),a=n(514),s=n(445),u=n(85),l=function(){return function(e){return e.pipe(i.filter(o.applyPatch.match),i.concatMap(function(e){var t=e.payload;return a.from(Object.keys(t).map(function(e){return s.preloadElement({elementUuid:e,priority:u.PRELOAD_CURRENT_PAGE_PRIORITY})}))}))}};t.shallowEpics=r.combineEpics(l)},1738:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(405),a=n(554),s=n(1151),u=n(555),l=n(1739),c=n(1152),f=n(1153);t.rootMutator=o.combineMutators.apply(void 0,i([[a.loadProject,s.setProjectMutator]],u.pageMutator,l.shallowMutators,c.preloadMutators,f.animationMutators))},1739:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(921),o=n(401);t.showOnlyMutator=function(){return function(e,t){var n=e.payload;return t.project.traverse(function(e){var t=n===e.props.uuid;e.setProps({visible:t})},function(e){return o.isMaskElement(e.props)}),t}},t.showAllMutator=function(){return function(e,t){var n=e.payload;return t.project.traverse(function(e){e.setProps({visible:n})},function(e){return o.isMaskElement(e.props)}),t}},t.applyPatchMutator=function(){return function(e,t){var n,i,o=e.payload;try{for(var a=r(Object.keys(o)),s=a.next();!s.done;s=a.next()){var u=s.value,l;t.project.find(u).setProps({src:o[u]})}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return t}},t.updateWorkspaceMutator=function(){return function(e,t){var n,r=e.payload.backgroundColor,i=void 0===r?t.backgroundColor:r;return t.backgroundColor=i,t}},t.shallowMutators=[[i.showAll,t.showAllMutator],[i.showOnly,t.showOnlyMutator],[i.applyPatch,t.applyPatchMutator],[i.updateWorkspace,t.updateWorkspaceMutator]]},1740:function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Regular="regular",e.Italic="italic",e.Bold="bold",e.BoldItalic="boldItalic"}(r=t.FontStyleName||(t.FontStyleName={})),function(e){e.Normal="normal",e.Bold="bold"}(i=t.CSSFontWeight||(t.CSSFontWeight={})),function(e){e.Normal="normal",e.Italic="italic"}(o=t.CSSFontStyle||(t.CSSFontStyle={}))},1741:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function o(e,t,n){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:r=new FontFace(e,t,n),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.load()];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),console.warn("Error font-face loading:",o.message),[2];case 4:return document.fonts.add(r),[2]}})})}function a(e){var t=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/gim.exec(e)[0];if(!t)throw new Error("Can not find format of font in url "+e);return t.substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadFontToBrowser=o,t.getFontFormatFromURL=a},1742:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(114),l=n(88),c=n(633),f=n(555),h=n(255),p=n(174),d=n(933),g=n(934),v=n(764),m=n(636),y=n(635),E=n(76),b=n(1743),w=n(1744),_=n(773),P=n(554),S=n(445),A=n(774),O=n(625),C=n(1779),x=n(898),T=n(770),I=n(772),k=n(1780),D=n(1782),R=n(1160),M=n(1783),F=n(765),L=n(1161),N=function(){function e(e){var t=this;this.props=e,this.container=w.createDesignerContainer(e),this.previewContainer=k.createPreviewContainer(this.container.get(l.DI_TYPES.ResourceRepository)),this.application=this.container.resolve(b.DesignerApplication),this.logger=R.actionLogger,this.previewGenerator=this.previewContainer.resolve(D.PreviewGenerator),this.editableBlockMediator=this.container.get(l.DI_TYPES.EditableBlockMediator),this.editableBlockMediator.init(),this.scrollManager=new M.ScrollManager,e.scrollableNode&&this.scrollManager.init(e.scrollableNode),this.subscriptions=[this.application.state$.subscribe(function(e){var n=e.scroll;return t.scrollManager.update(n)}),this.scrollManager.scroll$.subscribe(function(e){return t.application.dispatch(A.setScroll({scroll:e}))}),this.application.update$.subscribe(function(e){t.previewGenerator.generate(e)}),this.editableBlockMediator.update$.subscribe(function(e){return t.application.dispatch(c.updateElement({data:e,outOfHistory:!0}))})]}return Object.defineProperty(e.prototype,"update$",{get:function(){return this.application.update$.pipe(p.map(function(e){var t=e.project,n=a(e,["project"]);return h.mapWorkspaceDataToProps(r({project:F.SchemaValidator.sanitizeProject(t)},n))}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectText$",{get:function(){return this.editableBlockMediator.selectText$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewUpdate$",{get:function(){return this.previewGenerator.previewUpdate$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimationPlayingChangeAction$",{get:function(){return this.application.state$.pipe(p.map(function(e){var t;return e.timeline.isPlaying}),p.distinctUntilChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textController",{get:function(){return this.editableBlockMediator.editableBlockAPI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionProperties",{get:function(){return this.editableBlockMediator.selectionProperties},enumerable:!0,configurable:!0}),e.prototype.getState=function(){var e=this.application.getState().serialize(),t=e.project,n=a(e,["project"]);return h.mapWorkspaceDataToProps(r({project:F.SchemaValidator.sanitizeProject(t)},n))},e.prototype.load=function(e){var t=e.zoom,n=void 0===t?1:t,i=e.project,o=i.pageWidth,a=i.pageHeight;this.application.dispatch(P.loadProject(r({},h.mapWorkspacePropsToData(r({},e,{project:h.convertToValidProject(e.project)})),{elementState:{},containerWidth:this.props.el.parentElement.clientWidth,containerHeight:this.props.el.parentElement.clientHeight,pageMargin:this.props.pageMargin},h.calcWorkspaceSize({el:this.props.el,pageMargin:this.props.pageMargin,pageHeight:a,pageWidth:o},n))))},e.prototype.preloadPage=function(e,t){this.application.dispatch(S.preloadPage({pageUuid:e,priority:t}))},e.prototype.addElement=function(e,t){var n=O.mapElementPropsToDomain(e,{textElementDataMapper:x.mapTextElementOldFormatPropsToDomain});return this.addNewFormatElement(n,t)},e.prototype.addNewFormatElement=function(e,t){return e.type===E.DesignElementType.TextElement&&(e=this.editableBlockMediator.getTextElementPayload(e)),this.application.dispatch(c.addElement({data:e,position:t}))},e.prototype.addTemplate=function(e){var t=C.mapTemplateElementPropsToDomain(e,{textElementDataMapper:x.mapTextElementOldFormatPropsToDomain});return this.application.dispatch(c.addTemplateElement(t))},e.prototype.deleteElement=function(){this.application.dispatch(_.deleteElement())},e.prototype.groupElements=function(e){this.application.dispatch(d.groupElements({elementsUuid:e}))},e.prototype.ungroupElement=function(e){this.application.dispatch(d.ungroupElement({elementUuid:e}))},e.prototype.undo=function(){this.application.dispatch(m.undo())},e.prototype.redo=function(){this.application.dispatch(m.redo())},e.prototype.dispose=function(){this.scrollManager.dispose(),this.application.dispose(),this.subscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype.moveToFront=function(){this.application.dispatch(g.moveToFront())},e.prototype.moveToBack=function(){this.application.dispatch(g.moveToBack())},e.prototype.setZoom=function(e){this.application.dispatch(A.setZoom({zoom:e}))},e.prototype.startAnimation=function(){this.application.dispatch(v.playProject())},e.prototype.stopAnimation=function(){this.application.dispatch(v.stopAnimation())},e.prototype.setDraggingItem=function(e){this.application.dispatch(I.setDraggingItem({item:e}))},e.prototype.tryOnTry=function(e,t){this.application.dispatch(y.tryOnTry({targetID:e,data:t}))},e.prototype.tryOnCancel=function(e){this.application.dispatch(y.tryOnCancel({targetID:e}))},e.prototype.tryOnFinish=function(e){this.application.dispatch(y.tryOnFinish({targetID:e}))},e.prototype.getTryOnElementUuidAtPosition=function(e,t){return this.application.getState().getTryOnElementUuidAtPosition(e,t)},e.prototype.updateElement=function(e,t){this.application.dispatch(c.updateElement({data:e,outOfHistory:t}))},e.prototype.updateElements=function(e,t){this.application.dispatch(c.updateElements({data:e,outOfHistory:t}))},e.prototype.updatePageAnimations=function(e){this.application.dispatch(f.updatePage(e))},e.prototype.addPage=function(){this.application.dispatch(f.addPage())},e.prototype.deletePage=function(e){this.application.dispatch(f.deletePage(e))},e.prototype.selectPage=function(e){this.application.dispatch(f.selectPage(e))},e.prototype.selectAll=function(){this.application.dispatch(T.selectAll())},e.prototype.copyPage=function(e){this.application.dispatch(f.copyPage(e))},e.prototype.movePageForward=function(e){this.application.dispatch(f.movePageForward(e))},e.prototype.movePageBackward=function(e){this.application.dispatch(f.movePageBackward(e))},e.prototype.seek=function(e){this.application.dispatch(v.seek(e))},e.prototype.playPage=function(e){this.application.dispatch(v.playPage(e))},e.prototype.cloneElement=function(){this.application.dispatch(c.cloneElement())},e.prototype.copyElementToBuffer=function(){this.application.dispatch(c.copyElement())},e.prototype.pasteElementFromBuffer=function(){this.application.dispatch(c.pasteElement())},e.prototype.reset=function(){this.application.dispatch(P.loadProject(r({},h.createInitialState(this.props).serialize())))},e.prototype.updateProject=function(e){this.application.dispatch(P.updateProject(e))},e.prototype.resizeProject=function(e){this.application.dispatch(L.convertFormat(e))},e.prototype.replay=function(e){var t,n;try{for(var r=s(e),i=r.next();!i.done;i=r.next()){var o=i.value;this.application.dispatch(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e=i([u.injectable(),o("design:paramtypes",[Object])],e)}();t.Designer=N},1743:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(114),s=n(88),u=n(174),l=n(1155),c=n(751),f=n(766),h=n(1156),p=n(929),d=function(){function e(e,t,n,r,i){var o=this;if(this.el=e.el,!e.pageWidth||!e.pageHeight)throw new c.ArgumentError("Please provide pageWidth and pageHeight ["+e.pageHeight+", "+e.pageWidth+"]");this.stateManager=n,this.stateUpdateNotifier=i,this.historyManager=r,this.historyManager.setInitialState(this.stateManager.getRestorableState()),this.renderer=t,this.renderer.init(e.el),this.subscriptions=[this.renderer.event$.subscribe(function(e){o.stateManager.dispatch(e)}),this.stateManager.state$.pipe(u.map(function(e){return e.serialize()})).subscribe(function(e){o.renderer.render(e)})]}return Object.defineProperty(e.prototype,"update$",{get:function(){return this.stateUpdateNotifier.update$},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state$",{get:function(){return this.stateManager.state$.pipe(u.map(function(e){return e.serialize()}))},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(e){this.stateManager.dispatch(e)},e.prototype.dispose=function(){this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.stateManager.dispose()},e.prototype.getState=function(){return this.stateManager.getState()},e=r([a.injectable(),o(0,a.inject(s.DI_TYPES.DesignerProps)),o(1,a.inject(s.DI_TYPES.DesignerRenderer)),o(2,a.inject(s.DI_TYPES.StateManager)),o(3,a.inject(s.DI_TYPES.HistoryManager)),o(4,a.inject(s.DI_TYPES.StateUpdateNotifier)),i("design:paramtypes",[Object,l.DesignerRenderer,f.StateManager,p.HistoryManager,h.StateUpdateNotifier])],e)}();t.DesignerApplication=d},1744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(757),i=n(114),o=n(630),a=n(88),s=n(918),u=n(1157),l=n(255),c=n(1745),f=n(1155),h=n(908),p=n(756),d=n(911),g=n(910),v=n(909),m=n(550),y=n(930),E=n(553),b=n(744),w=n(750),_=n(754),P=n(1137),S=n(926),A=n(927),O=n(928),C=n(1138),x=n(925),T=n(745),I=n(749),k=n(1754),D=n(1761),R=n(929),M=n(766),F=n(1156),L=n(919),N=n(1154),j=n(761),B=n(763);function z(e){var t=new i.Container;return t.bind(a.DI_TYPES.Config).toConstantValue(u.designerConfig),t.bind(a.DI_TYPES.DesignerProps).toConstantValue(e),t.bind(a.DI_TYPES.DesignerRenderer).to(f.DesignerRenderer).inSingletonScope(),t.bind(a.DI_TYPES.Workspace).toConstantValue(l.createInitialState(e)),t.bind(a.DI_TYPES.EditableBlockMediator).to(r.EditableBlockMediator).inSingletonScope(),t.bind(a.DI_TYPES.RootEpic).toConstantValue(k.rootEpic(t)),t.bind(a.DI_TYPES.RootMutator).toConstantValue(D.rootMutator(t)),t.bind(a.DI_TYPES.HistoryManager).to(R.HistoryManager).inSingletonScope(),t.bind(a.DI_TYPES.EventHandler).toConstantValue(c.rootEventHandler(t)),t.bind(a.DI_TYPES.ResourceCache).to(L.ResourceCache).inSingletonScope(),t.bind(a.DI_TYPES.DesignElementsComparator).to(B.DesignElementsComparator).inSingletonScope(),t.bind(a.DI_TYPES.ResourceRepository).to(o.ResourceRepository).inSingletonScope(),t.bind(a.DI_TYPES.FontRepository).to(s.FontRepository).inSingletonScope(),t.bind(a.DI_TYPES.FontLoader).to(N.FontLoader),t.bind(a.DI_TYPES.FontMetaLoader).to(j.FontMetaLoader).inSingletonScope(),t.bind(a.DI_TYPES.FontLoaderFactory).toAutoFactory(a.DI_TYPES.FontLoader),t.bind(a.DI_TYPES.ImageRepository).to(h.ImageRepository).inSingletonScope(),t.bind(a.DI_TYPES.SvgRepository).to(p.SvgRepository).inSingletonScope(),t.bind(a.DI_TYPES.TextRepository).to(d.TextRepository).inSingletonScope(),t.bind(a.DI_TYPES.MaskRepository).to(g.MaskRepository).inSingletonScope(),t.bind(a.DI_TYPES.VideoRepository).to(v.VideoRepository).inSingletonScope(),t.bind(a.DI_TYPES.Renderer).to(m.Renderer).inSingletonScope(),t.bind(a.DI_TYPES.IAppStage).to(y.AppStage).inSingletonScope(),t.bind(a.DI_TYPES.Logger).toConstantValue(new E.Logger("Designer")),t.bind(a.DI_TYPES.AfterRenderService).to(b.AfterRenderService),t.bind(a.DI_TYPES.ReconciliationService).to(w.ReconciliationService),t.bind(a.DI_TYPES.AssetsDOMReconciler).to(_.AssetsDOMReconciler),t.bind(a.DI_TYPES.ICursorManager).to(P.CursorManager).inSingletonScope(),t.bind(a.DI_TYPES.RotationCursorProvider).to(S.RotationCursorProvider).inSingletonScope(),t.bind(a.DI_TYPES.ResizingCursorProvider).to(A.ResizingCursorProvider).inSingletonScope(),t.bind(a.DI_TYPES.MovingCursorProvider).to(O.MovingCursorProvider).inSingletonScope(),t.bind(a.DI_TYPES.ICursorTemplatesProvider).to(C.CursorTemplatesProvider).inSingletonScope(),t.bind(a.DI_TYPES.VideoRenderer).to(x.VideoRenderer).inSingletonScope(),t.bind(a.DI_TYPES.FilterService).to(T.FilterService).inSingletonScope(),t.bind(a.DI_TYPES.CropService).to(I.CropService).inSingletonScope(),t.bind(a.DI_TYPES.StateManager).to(M.StateManager).inSingletonScope(),t.bind(a.DI_TYPES.StateUpdateNotifier).to(F.StateUpdateNotifier).inSingletonScope(),t}t.createDesignerContainer=z},1745:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1746),i=n(1159),o=n(1747),a=n(1748),s=n(1749),u=n(1752),l=n(1753),c=n(558);t.rootEventHandler=c.combineEventHandlers(r.highlightEventHandler,i.selectionEventHandler,o.multiSelectEpic,a.resizeEventHandler,s.rotateEventHandler,u.moveEventHandler,l.hoverEventHandler)},1746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(381),i=n(174),o=n(1158),a=n(319),s=n(558),u=function(){return function(e,t){var n=function(e){return t().find(e)};return e.pipe(i.filter(r.mouseOverAction.match),i.filter(function(){return t().mode===a.WorkspaceMode.Initial}),i.filter(function(e){var t=e.payload;return!!n(t.targetID)}),i.filter(function(e){var n=e.payload;return!t().selectionFrameModel.selectedUUIDs.includes(n.targetID)}),i.map(function(e){var t=e.payload;return o.highlight([t.targetID])}))}},l=function(){return function(e,t){var n=function(e){return t().find(e)};return e.pipe(i.filter(r.mouseOutAction.match),i.filter(function(){return t().mode===a.WorkspaceMode.Initial}),i.filter(function(e){var t=e.payload;return!!n(t.targetID)}),i.filter(function(e){var n=e.payload;return!t().selectionFrameModel.selectedUUIDs.includes(n.targetID)}),i.map(function(e){return o.highlight([])}))}};t.highlightEventHandler=s.combineEventHandlers(u,l)},1747:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(174),o=n(935),a=n(381),s=n(348),u=function(e){var t;return e.start$.pipe(i.map(function(){return o.multiSelectStart()}))};function l(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{top:Math.min(r,o),left:Math.min(n,i),width:Math.abs(i-n),height:Math.abs(o-r)}}t.calcMultiSelectProps=l;var c=function(e){var t=e.start$,n=e.move$,r=e.end$;return t.pipe(i.concatMap(function(e){var t=e.payload.position;return n.pipe(i.takeUntil(r),i.map(function(e){var n=e.payload.position,r=l(t,n);return o.multiSelectMove(r)}))}))},f=function(e){var t=e.start$,n=e.end$;return t.pipe(i.concatMap(function(){return n.pipe(i.first(),i.map(function(){return o.multiSelectEnd()}))}))};function h(e,t){return e.pipe(i.pairwise(),i.filter(function(e){var t=r(e,2),n=t[0],i=t[1];return a.mouseDownAction.match(n)&&a.mouseMoveAction.match(i)}),i.filter(function(e){var n,i;return r(e,1)[0].payload.targetID===t().project.id}),i.map(function(e){var t,n;return r(e,1)[0]}))}t.multiSelectEpic=function(){return function(e,t){var n=h(e,t),r=e.pipe(i.filter(a.mouseMoveAction.match)),o=e.pipe(i.filter(a.mouseUpAction.match));return s.merge(u({start$:n,move$:r,end$:o,getState:t}),c({start$:n,move$:r,end$:o,getState:t}),f({start$:n,move$:r,end$:o,getState:t}))}}},1748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(174),i=n(637),o=n(381),a=n(91),s=n(379),u=n(348),l=n(128),c=n(558),f=n(557),h=function(){return function(e){return e.pipe(r.filter(o.mouseOverAction.match),r.filter(function(e){var t=e.payload.targetID;return a.isInEnum(t,s.SelectionFrameControlName)}),r.map(function(e){var t=e.payload.targetID;return i.resizeControlHover(t)}))}},p=function(){return function(e){return e.pipe(r.filter(o.mouseOutAction.match),r.filter(function(e){var t=e.payload.targetID;return a.isInEnum(t,s.SelectionFrameControlName)}),r.map(function(){return i.resizeControlHover(void 0)}))}};t.resizeMoveEpic=function(){return function(e,t){var n=f.isSelectedElementUnlockedFactory(t()),c=e.pipe(r.filter(o.mouseDownAction.match),r.filter(n),r.filter(function(e){return a.isInEnum(e.payload.targetID,s.SelectionFrameControlName)})),h=e.pipe(r.filter(o.mouseUpAction.match)),p=e.pipe(r.filter(o.mouseMoveAction.match));return u.merge(c.pipe(r.map(function(e){var n=e.payload.targetName.split(" ").find(function(e){return a.isInEnum(e,s.SelectionFrameControlName)});return i.resizeStart({targetID:t().selectionFrameModel.selectedElement.props.uuid,controlName:n})})),c.pipe(r.concatMap(function(e){var n=e.payload,o=t().getCurrentPage();return p.pipe(r.takeUntil(h),r.map(function(e){var n=e.payload.position,r=t(),a=r.selectionFrameModel.selectedElement,s=r.getRelativePosition(o,l.pointToPosition(n)),u={left:s.left/r.zoom,top:s.top/r.zoom};return i.resize(a.handleResizeChange(u,n))}))})),c.pipe(r.concatMap(function(e){return h.pipe(r.first(),r.map(function(){return i.resizeEnd({targetID:t().selectionFrameModel.selectedElement.props.uuid})}))})))}},t.resizeEventHandler=c.combineEventHandlers(h,p,t.resizeMoveEpic)},1749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1750),i=n(1751),o=n(174),a=n(381),s=n(379),u=n(91),l=n(637),c=n(558),f=function(){return function(e){return e.pipe(o.filter(a.mouseOverAction.match),o.filter(function(e){var t=e.payload.targetID;return u.isInEnum(t,s.SelectionFrameControlName)}),o.map(function(e){var t=e.payload.targetID;return l.resizeControlHover(t)}))}},h=function(){return function(e){return e.pipe(o.filter(a.mouseOutAction.match),o.filter(function(e){var t=e.payload.targetID;return u.isInEnum(t,s.SelectionFrameControlName)}),o.map(function(){return l.resizeControlHover(void 0)}))}};t.rotateEventHandler=c.combineEventHandlers(i.rotateControlDragEventHandler,r.rotateControlHoverEventHandler,f,h)},1750:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(174),i=n(381),o=n(91),a=n(624),s=n(85),u=n(319),l=n(638),c=n(558);t.rotateControlsMouseOverEpic=function(){return function(e,t){return e.pipe(r.filter(i.mouseOverAction.match),r.filter(function(){return t().mode===u.WorkspaceMode.Initial}),r.filter(function(e){return o.matchName(e.payload.targetName,s.SELECTION_FRAME_ROTATION_CONTROL_NAME)}),r.map(function(e){var t,n=e.payload.targetName.split(" ").find(function(e){return o.isInEnum(e,a.SelectionFrameRotationControlName)});return l.rotateControlHover({controlName:n,hovered:!0})}))}},t.rotateControlsMouseOutEpic=function(){return function(e){return e.pipe(r.filter(i.mouseOutAction.match),r.filter(function(e){return o.matchName(e.payload.targetName,s.SELECTION_FRAME_ROTATION_CONTROL_NAME)}),r.map(function(e){var t,n=e.payload.targetName.split(" ").find(function(e){return o.isInEnum(e,a.SelectionFrameRotationControlName)});return l.rotateControlHover({controlName:n,hovered:!1})}))}},t.rotateControlHoverEventHandler=c.combineEventHandlers(t.rotateControlsMouseOverEpic,t.rotateControlsMouseOutEpic)},1751:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(638),i=n(128),o=n(174),a=n(348),s=n(91),u=n(381),l=n(624);t.rotateControlDragEventHandler=function(){return function(e,t){var n=e.pipe(o.filter(u.mouseDownAction.match),o.filter(function(e){return s.matchName(e.payload.targetName,"selectionFrameRotationControl")})),c=e.pipe(o.filter(u.mouseUpAction.match)),f=e.pipe(o.filter(u.mouseMoveAction.match));return a.merge(n.pipe(o.map(function(e){var n=e.payload.targetName.split(" ").find(function(e){return s.isInEnum(e,l.SelectionFrameRotationControlName)});return r.rotateStart({targetID:t().selectionFrameModel.selectedUUIDs[0],controlName:n})})),n.pipe(o.concatMap(function(e){var n=e.payload.position,a=t().getCurrentPage(),s=t().selectionFrameModel.selectedElement,u=s.props,l=u.left,h=u.top,p=u.width,d=u.height,g=u.angle,v=t().zoom,m=i.midpoint({x:l*v,y:h*v},{x:(l+p)*v,y:(h+d)*v}),y=t().getRelativePoint(a,n),E=i.vectorsAngle(i.vector(m,i.UNIT_VECTOR),i.vector(m,y));return f.pipe(o.takeUntil(c),o.map(function(e){var n=e.payload.position,o=t().getRelativePoint(a,n),u=i.vectorsAngle(i.vector(m,i.UNIT_VECTOR),i.vector(m,o));return r.rotate({targetID:s.props.uuid,angle:g+E-u})}))})),n.pipe(o.concatMap(function(e){return c.pipe(o.first(),o.map(function(){return r.rotateEnd({targetID:t().selectionFrameModel.selectedUUIDs[0]})}))})))}}},1752:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(174),o=n(381),a=n(771),s=n(348),u=n(557);t.moveEventHandler=function(){return function(e,t){var n=function(e){return t().find(e)},l=function(e){return o.mouseDownAction.match(e)&&!!n(e.payload.targetID)},c=u.isElementUnlockedByActionFactory(t()),f=e.pipe(i.filter(c),i.filter(l)),h=e.pipe(i.filter(o.mouseUpAction.match)),p=e.pipe(i.filter(o.mouseMoveAction.match)),d=e.pipe(i.pairwise(),i.filter(function(e){var t=r(e,2),n=t[0],i=t[1];return c(n)&&l(n)&&o.mouseMoveAction.match(i)}),i.map(function(e){var t,n=r(e,1)[0];return a.moveStart({targetID:n.payload.targetID})}));return s.merge(d,f.pipe(i.concatMap(function(e){var r=n(e.payload.targetID),o=e.payload.position,s=r.props.left,u=r.props.top;return p.pipe(i.takeUntil(h),i.map(function(e){var n=e.payload,i=t().zoom;return a.move({targetID:r.props.uuid,left:s+(n.position.x-o.x)/i,top:u+(n.position.y-o.y)/i,position:n.position})}))})),d.pipe(i.concatMap(function(e){return h.pipe(i.first(),i.map(function(){return a.moveEnd({targetID:e.payload.targetID})}))})))}}},1753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(381),i=n(174),o=n(348),a=n(772),s=n(298);t.hoverEventHandler=function(){return function(e,t){var n=function(){return t().project.serialize()};return o.merge(e.pipe(i.filter(r.mouseOverAction.match),i.filter(function(e){var t=e.payload;return!!s.findInProject(n(),function(e){var n=e.uuid;return t.targetID===n})}),i.map(function(e){var t=e.payload;return a.hover({targetID:t.targetID,hovered:!0})})),e.pipe(i.filter(r.mouseOutAction.match),i.filter(function(e){var t=e.payload;return!!s.findInProject(n(),function(e){var n=e.uuid;return t.targetID===n})}),i.map(function(e){var t=e.payload;return a.hover({targetID:t.targetID,hovered:!1})})))}}},1754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(405),i=n(1150),o=n(1755),a=n(1147),s=n(1159),u=n(1756),l=n(1759),c=n(769),f=n(1760);t.rootEpic=r.combineEpics(f.loggerEpic,i.animationEpic,o.historyEpic,a.preloadEpic,s.selectAllEpic,u.editTextEpic,l.tryOnEpic,c.elementEpic)},1755:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(762)),o=n(320),a=n(405),s=n(174),u=n(638),l=n(771),c=n(637),f=n(633),h=n(554),p=n(933),d=n(934),g=n(773),v=n(770),m=n(935),y=n(555),E=n(636),b=n(635),w=n(445),_=n(774),P=n(88),S=n(85),A=[u.rotateEnd,l.moveEnd,c.resizeEnd,f.addElement,f.updateElement,f.updateElements,y.updatePage,g.deleteElement,f.addTemplateElement,h.updateProject,p.groupElements,p.ungroupElement,d.moveToFront,d.moveToBack,h.loadProject,v.select,m.multiSelectEnd,y.addPage,y.deletePage,y.updatePage,y.copyPage,y.selectPage,y.movePageForward,y.movePageBackward,E.undo,E.redo,b.tryOnFinish,w.preloadStatusChange,_.setZoom];function O(e){var t=A.some(function(t){return t.match(e)});return!!t&&(w.preloadStatusChange.match(e)?[o.LoadingStatus.Loading,o.LoadingStatus.Loaded].includes(e.payload.status):t)}var C=function(e){return function(t,n){var r=e.get(P.DI_TYPES.StateUpdateNotifier);return t.pipe(s.filter(O),s.tap(i.default(function(){r.notify(n().serialize())},S.UPDATE_STATE_INTERVAL)),s.ignoreElements())}};t.historyEpic=a.combineEpics(C)},1756:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(903)),o=n(514),a=n(348),s=n(174),u=n(1757),l=n(445),c=n(85),f=n(769),h=n(773),p=n(1758),d=n(88),g=n(320),v=n(1148),m=n(401);t.editTextMainEpic=function(e){return function(t,n){var r=e.get(d.DI_TYPES.EditableBlockMediator),c=t.pipe(s.map(function(){return n().selectionFrameModel.selectedUUIDs}),s.distinctUntilChanged(i.default)),v=function(e){return n().find(e)},m=function(e){var d=e[0],m=c.pipe(s.filter(function(e){return!p.isSameTextElementSelected(e,d)}),s.take(1)),y=t.pipe(s.takeUntil(m),s.filter(p.shouldActionUpdateEditableBlock)),E=t.pipe(s.takeUntil(m),s.map(function(){return v(d).props.opacity}),s.distinctUntilChanged(),s.skip(1)),b=t.pipe(s.takeUntil(m),s.map(function(){return n().mode}),s.distinctUntilChanged(i.default)),w=t.pipe(s.takeUntil(m),s.filter(function(e){return!!h.deleteElement.match(e)||h.deleteElementByUUID.match(e)&&e.payload.uuid===d}),s.take(1)),_=t.pipe(s.filter(l.preloadStatusChange.match),s.filter(function(e){var t=e.payload;return t.elementUuid===d&&t.status===g.LoadingStatus.Loaded}));return a.merge(o.from([u.editTextStart({uuid:d})]),m.pipe(s.concatMap(function(e){if(!v(d))return o.from([u.editTextStop({uuid:d})]);var t=r.serialize();return t.uuid=d,"\n"===t.text?a.merge(o.from([u.editTextStop({uuid:d})]),o.from([h.deleteElementByUUID({uuid:d})])):a.merge(o.from([f.updateElement({data:t,outOfHistory:!0}),u.editTextStop({uuid:d})]))})),_.pipe(s.takeUntil(m),s.take(1),s.tap(function(){r.onFontLoaded()}),s.ignoreElements()),w.pipe(s.mapTo(u.editTextStop({uuid:d}))),E.pipe(s.mapTo(u.editTextUpdateDimensions({uuid:d}))),b.pipe(s.tap(function(e){r.updateMode(n().mode)}),s.ignoreElements()),y.pipe(s.map(function(){return u.editTextUpdateDimensions({uuid:d})})))};return c.pipe(s.filter(function(e){return p.isTextElementSelected(e,n().project.serialize())}),s.concatMap(m))}};var y=function(e){return function(t,n){var r=e.get(d.DI_TYPES.EditableBlockMediator),i=function(e){return n().find(e)},o=t.pipe(s.filter(u.editTextUpdateDimensions.match),s.tap(function(e){var t=e.payload,o=i(t.uuid);r.updateDimensions(o,n().serialize(),n().mode,o.resizeState)}),s.ignoreElements()),l=t.pipe(s.filter(u.editTextStart.match),s.map(function(e){var t=e.payload;r.startEdit(i(t.uuid),n().serialize());var o=r.serialize();return f.updateElement({data:{uuid:t.uuid,width:o.width,height:o.height},outOfHistory:!0})})),c=t.pipe(s.filter(u.editTextStop.match),s.tap(function(){return r.stopEdit()}),s.filter(function(e){var t=e.payload;return!!i(t.uuid)}),s.map(function(e){var t=e.payload;return f.updateElement({data:{uuid:t.uuid},outOfHistory:!1})}));return a.merge(o,l,c)}},E=function(e){return function(t,n){var r=function(e){return n().find(e)},i=e.get(d.DI_TYPES.FontRepository);return t.pipe(s.filter(f.updateElement.match),s.filter(function(e){var t=e.payload,n=r(t.data.uuid).props;if(!m.isTextElement(n))return!1;var o=t.data.font;return!!o&&!i.has(o)}),s.map(function(e){var t=e.payload;return l.preloadElement({elementUuid:t.data.uuid,priority:c.PRELOAD_DEFAULT_PRIORITY})}))}};t.editTextEpic=v.combineEpics(t.editTextMainEpic,y,E)},1757:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.editTextStart=r.userActionCreator("EDIT_TEXT_START"),t.editTextStop=r.userActionCreator("EDIT_TEXT_STOP"),t.editTextUpdateDimensions=r.userActionCreator("EDIT_TEXT_UPDATE_DIMENSIONS")},1758:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(401),i=n(774),o=n(637),a=n(638),s=n(771),u=n(298),l=n(636);t.isTextElementSelected=function(e,t){var n=function(e){return u.findInProject(t,function(t){var n=t.uuid;return e===n})},i=function(e){return!!u.findInProject(t,function(t){var n=t.uuid;return e===n})};return 1===e.length&&i(e[0])&&r.isTextElement(n(e[0]))},t.isSameTextElementSelected=function(e,t){return 1===e.length&&e[0]===t},t.shouldActionUpdateEditableBlock=function(e){return[o.resize,s.move,a.rotate,i.setZoom,l.undo,l.redo].some(function(t){return t.match(e)})}},1759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(174),i=n(348),o=n(635),a=n(772),s=n(899);t.tryOnEpic=function(){return function(e,t){var n=function(e){return t().find(e)},u=e.pipe(r.filter(a.setDraggingItem.match),r.filter(function(e){var t;return!!e.payload.item})),l=e.pipe(r.filter(a.setDraggingItem.match),r.filter(function(e){var t;return!e.payload.item})),c=e.pipe(r.filter(a.hover.match),r.filter(function(e){var t=e.payload;return t.hovered&&!!n(t.targetID)})),f=e.pipe(r.filter(a.hover.match),r.filter(function(e){var t=e.payload;return!t.hovered&&!!n(t.targetID)}));return i.merge(u.pipe(r.concatMap(function(e){return c.pipe(r.takeUntil(l),r.filter(function(n){var r=n.payload,i=t().project.find(r.targetID);return s.isTryOnElement(i)&&i.tryOnAllowed(e.payload.item)}),r.map(function(t){var n=t.payload;return o.tryOnTry({targetID:n.targetID,data:e.payload.item})}))})),u.pipe(r.concatMap(function(e){return f.pipe(r.takeUntil(l),r.filter(function(n){var r=n.payload,i=t().project.find(r.targetID);return s.isTryOnElement(i)&&i.tryOnAllowed(e.payload.item)}),r.map(function(e){var t=e.payload;return o.tryOnCancel({targetID:t.targetID})}))})))}}},1760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(174),i=n(1160);t.loggerEpic=function(e){return function(e){return e.pipe(r.tap(function(e){i.actionLogger.log(e)}),r.ignoreElements())}}},1761:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(405),a=n(1762),s=n(935),u=n(1158),l=n(1764),c=n(1765),f=n(637),h=n(638),p=n(1766),d=n(1151),g=n(771),v=n(1767),m=n(933),y=n(1768),E=n(1769),b=n(773),w=n(1770),_=n(772),P=n(1771),S=n(1772),A=n(636),O=n(934),C=n(1773),x=n(1774),T=n(635),I=n(1153),k=n(555),D=n(1152),R=n(1775),M=n(774),F=n(769),L=n(1776),N=n(1161),j=n(1778);t.rootMutator=o.combineMutators.apply(void 0,i([[s.multiSelectStart,a.multiSelectStartMutator],[s.multiSelectMove,a.multiSelectMoveMutator],[s.multiSelectEnd,a.multiSelectEndMutator],[u.highlight,l.highlightMutator],[_.hover,P.hoverMutator],[f.resize,c.resizeMutator],[_.setDraggingItem,P.setDraggingItemMutator],[f.resizeStart,c.resizeStartMutator],[f.resizeEnd,c.resizeEndMutator],[h.rotate,p.rotateMutator],[h.rotateControlHover,p.rotateControlHoverMutator],[h.rotateStart,p.rotateStartMutator],[h.rotateEnd,p.rotateEndMutator],[g.move,v.moveMutator],[m.groupElements,y.groupElementsMutator],[m.ungroupElement,E.ungroupElementMutator],[g.moveStart,v.moveStartMutator],[g.move,v.moveMutator],[g.moveEnd,v.moveEndMutator],[b.deleteElement,w.deleteElementMutator],[b.deleteElementByUUID,w.deleteElementByUUIDMutator],[A.undo,S.undoMutator],[A.redo,S.redoMutator],[O.moveToFront,C.moveToFrontMutator],[O.moveToBack,C.moveToBackMutator],[T.tryOnTry,x.tryOnTryMutator],[T.tryOnCancel,x.tryOnCancelMutator],[T.tryOnFinish,x.tryOnFinishMutator],[M.setZoom,R.setZoomMutator],[M.setScroll,R.setScrollMutator],[f.resizeControlHover,c.resizeControlHoverMutator],[N.convertFormat,j.convertFormatMutator]],I.animationMutators,D.preloadMutators,L.selectMutator,F.elementMutator,k.pageMutator,d.projectMutator))},1762:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1763),o=n(88);t.multiSelectStartMutator=function(){return function(e,t){return t.select([]),t.multiSelectionProps=r({},t.multiSelectionProps,{isVisible:!0,top:0,left:0,width:0,height:0}),t}},t.multiSelectMoveMutator=function(){return function(e,t){var n=e.payload;return t.highlightedIDs=i.getCollided(n,t).map(function(e){var t;return e.props.uuid}),t.multiSelectionProps=r({},t.multiSelectionProps,n),t}},t.multiSelectEndMutator=function(e){return function(t,n){var i=e.get(o.DI_TYPES.HistoryManager);return n.select(n.highlightedIDs),n.multiSelectionProps=r({},n.multiSelectionProps,{isVisible:!1}),n.highlightedIDs=[],i.replaceSelectionFrameInCurrentState(n.serialize().selectionFrame),n}}},1763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=n(378);function o(e,t){var n=t.getCurrentPage(),o=t.zoom,a=new i.Rect({x:e.left,y:e.top},e.width,e.height);return n.elements.filter(function(e){if(!e.props.locked){var n=t.getAbsolutePosition(t.getCurrentPage(),e.props),s=n.top,u=n.left,l=new i.Rect({x:u,y:s},e.props.width*o,e.props.height*o,e.props.angle);return r.rectIntersects(a,l)}})}t.getCollided=o},1764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.highlightMutator=function(){return function(e,t){var n=e.payload;return t.highlightedIDs=n,t}}},1765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(319),i=n(741),o=n(255),a=n(88),s=n(128),u=n(557);function l(e,t,n){0===t.length&&e.resize(n.ratio,n.anchorPoint,n.direction,n.proportional)}t.resizeStartMutator=function(){return function(e,t){var n=e.payload,i;return t.selectionFrameModel.selectedElement.handleResizeStart(n.controlName),t.selectionFrameModel.resizingControlInUse=n.controlName,t.mode=r.WorkspaceMode.Resizing,t}},t.resizeEndMutator=function(e){return function(t,n){var i=t.payload,l=e.get(a.DI_TYPES.HistoryManager);n.mode=r.WorkspaceMode.Initial,n.snaps=[];var c=i.targetID,f=n.find(c);u.resetIsBackground(f);var h=n.project.getElementPage(f);if(!s.rectIntersects(f.getBoundingRect(),n.project.getPageBoundingRect())){var p=f.props.uuid;h.remove(p),n.select(n.selectionFrameModel.selectedUUIDs.filter(function(e){return e!==p})),n.selectionFrameModel.hoveredControl=void 0}return l.registerState(o.mapWorkspaceDataToProps(n.serialize())),n}},t.resizeMutator=function(){return function(e,t){var n=e.payload,r=t.find(n.targetID);return t.snaps=i.applyWithSnapping(r,t,n.position,i.snapDistanceProximity,function(e,t){l(e,t,n)}),t}},t.resizeControlHoverMutator=function(){return function(e,t){var n=e.payload;return t.selectionFrameModel.hoveredControl=n,t}}},1766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),i=n(741),o=n(319),a=n(255),s=n(557);t.rotateMutator=function(){return function(e,t){var n=e.payload,r=t.find(n.targetID);return r.rotate(i.snapRotate(n.angle)-r.props.angle),t}},t.rotateControlHoverMutator=function(){return function(e,t){var n=e.payload;return n.hovered?t.selectionFrameModel.hoveredRotateControl=n.controlName:t.selectionFrameModel.hoveredRotateControl=null,t}},t.rotateStartMutator=function(){return function(e,t){var n=e.payload;return t.selectionFrameModel.rotationControlInUse=n.controlName,t.mode=o.WorkspaceMode.Rotating,t}},t.rotateEndMutator=function(e){return function(t,n){var i=t.payload,u=e.get(r.DI_TYPES.HistoryManager);n.selectionFrameModel.rotationControlInUse=null,n.mode=o.WorkspaceMode.Initial;var l=n.find(i.targetID);return s.resetIsBackground(l),u.registerState(a.mapWorkspaceDataToProps(n.serialize())),n}}},1767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=n(85),o=n(319),a=n(741),s=n(255),u=n(88),l=n(557);function c(e,t,n){var i=t.every(function(e){var t=e.guide;return!r.isVerticalSegment(t.segment)}),o=t.every(function(e){var t=e.guide;return!r.isHorizontalSegment(t.segment)});e.move(i?n.left:e.props.left,o?n.top:e.props.top)}t.moveStartMutator=function(){return function(e,t){var n=e.payload,r=t.selectionFrameModel.selectedUUIDs;return 1===r.length&&n.targetID===r[0]||n.targetID===i.TEMPORARY_GROUP_UUID||t.select([]),t.mode=o.WorkspaceMode.Moving,t}},t.moveMutator=function(){return function(e,t){var n=e.payload,r=t.find(n.targetID);return t.snaps=a.applyWithSnapping(r,t,n.position,a.snapAxisProximity,function(e,t){c(e,t,n)}),t}},t.moveEndMutator=function(e){return function(t,n){var a=t.payload,c=e.get(u.DI_TYPES.HistoryManager);n.mode=o.WorkspaceMode.Initial,n.hoveredElementUuid!==a.targetID&&(n.highlightedIDs=[n.hoveredElementUuid]),n.snaps=[];var f=a.targetID===i.TEMPORARY_GROUP_UUID?n.selectionFrameModel.selectedUUIDs:[a.targetID],h=[];return f.forEach(function(e){var t=n.find(e),i=n.project.getElementPage(t);r.rectIntersects(t.getBoundingRect(),n.project.getPageBoundingRect())||(i.remove(t.props.uuid),h.push(t.props.uuid)),l.resetIsBackground(t)}),h.length&&n.select(n.selectionFrameModel.selectedUUIDs.filter(function(e){return!h.includes(e)})),c.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}}},1768:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1078),o=n(91),a=n(76),s=n(255),u=n(897),l=n(88);t.groupElementsMutator=function(e){return function(t,n){var c=t.payload,f=e.get(l.DI_TYPES.HistoryManager),h=c.elementsUuid.map(function(e){return n.project.find(e)}),p=u.createPersistGroupElement(r({},i.calcFrameSize(h),{angle:0,opacity:1,uuid:o.generateUuid(),type:a.DesignElementType.GroupElement})),d=n.project.getElementPage(h[0]);return d.add(p),n.select([p.props.uuid]),h.forEach(function(e){e.move(e.props.left-p.props.left,e.props.top-p.props.top),d.remove(e.props.uuid),p.add(e)}),f.registerState(s.mapWorkspaceDataToProps(n.serialize())),n}}},1769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=n(255),o=n(88);t.ungroupElementMutator=function(e){return function(t,n){var a=t.payload,s=e.get(o.DI_TYPES.HistoryManager),u=n.project.find(a.elementUuid),l=u.getBoundingRect(),c=n.project.getElementPage(u),f=u.elements;return f.forEach(function(e){e.move(e.props.left+u.props.left,e.props.top+u.props.top),e.rotate(u.props.angle,r.midpoint(l.nw,l.se)),c.add(e)}),c.remove(u.props.uuid),n.select(f.map(function(e){return e.props.uuid})),s.registerState(i.mapWorkspaceDataToProps(n.serialize())),n}}},1770:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(255),o=n(88);t.deleteElementMutator=function(e){return function(t,n){var a,s,u=t.payload,l=e.get(o.DI_TYPES.HistoryManager),c=n.getCurrentPage(),f=n.selectionFrameModel.selectedUUIDs.filter(function(e){return n.find(e).props.locked}),h=n.selectionFrameModel.selectedUUIDs.filter(function(e){return!n.find(e).props.locked});try{for(var p=r(h),d=p.next();!d.done;d=p.next()){var g=d.value;c.remove(g)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}return n.select(f),l.registerState(i.mapWorkspaceDataToProps(n.serialize())),n}},t.deleteElementByUUIDMutator=function(e){return function(t,n){var r,a=t.payload.uuid,s;if(n.find(a).props.locked)return n;var u=e.get(o.DI_TYPES.HistoryManager),l;return n.getCurrentPage().remove(a),u.registerState(i.mapWorkspaceDataToProps(n.serialize())),n}}},1771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverMutator=function(){return function(e,t){var n=e.payload;return t.hoveredElementUuid=n.hovered?n.targetID:null,t}},t.setDraggingItemMutator=function(){return function(e,t){var n=e.payload;return t.draggingItem=n.item,t}}},1772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(88);t.undoMutator=function(e){return function(t,n){var i=e.get(r.DI_TYPES.HistoryManager);return i.canUndo()&&n.restoreState(i.undo()),n}},t.redoMutator=function(e){return function(t,n){var i=e.get(r.DI_TYPES.HistoryManager);return i.canRedo()&&n.restoreState(i.redo()),n}}},1773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(255),i=n(88);t.moveToFrontMutator=function(e){return function(t,n){var o=e.get(i.DI_TYPES.HistoryManager),a=n.selectionFrameModel.selectedElement,s;return a.props.locked?n:(n.project.getElementPage(a).moveElementInStack(a.props.uuid,1),o.registerState(r.mapWorkspaceDataToProps(n.serialize())),n)}},t.moveToBackMutator=function(e){return function(t,n){var o=e.get(i.DI_TYPES.HistoryManager),a=n.selectionFrameModel.selectedElement,s;return a.props.locked?n:(n.project.getElementPage(a).moveElementInStack(a.props.uuid,-1),o.registerState(r.mapWorkspaceDataToProps(n.serialize())),n)}}},1774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(899),i=n(255),o=n(88);t.tryOnTryMutator=function(){return function(e,t){var n=e.payload,i=t.project.find(n.targetID);return r.isTryOnElement(i)&&i.tryOn(n.data),t.tryOnElementUuid=n.targetID,t}},t.tryOnCancelMutator=function(){return function(e,t){var n=e.payload,i=t.project.find(n.targetID);return r.isTryOnElement(i)&&i.tryOnCancel(),t.tryOnElementUuid=null,t}},t.tryOnFinishMutator=function(e){return function(t,n){var a=t.payload,s=e.get(o.DI_TYPES.HistoryManager),u=n.project.find(a.targetID);return r.isTryOnElement(u)&&u.tryOnFinish(),n.tryOnElementUuid=null,s.registerState(i.mapWorkspaceDataToProps(n.serialize())),n}}},1775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setZoomMutator=function(){return function(e,t){var n,r=e.payload.zoom,i=t.zoom,o=t.getCurrentPagePosition(),a=t.containerWidth,s=t.containerHeight,u=t.pageMargin,l=t.project.props,c=l.pageWidth,f=l.pageHeight,h=t.scroll,p=h.x,d=h.y,g,v;if(t.zoom=r,t.width=Math.max(a,r*c+2*u),t.height=Math.max(s,r*f+2*u),t.selectionFrameModel.selectedElement){var m=t.selectionFrameModel.selectedElement.getBoundingRect().getCenter(),y,E;g=(y=m.x)*r+u-a/2,v=(E=m.y)*r+u-s/2}else{var b=t.getCurrentPagePosition(),w=b.left,_=b.top,y,E;g=(y=(p-o.left+a/2)/i)*r+w-a/2,v=(E=(d-o.top+s/2)/i)*r+_-s/2}return t.scroll={x:g,y:v},t}},t.setScrollMutator=function(){return function(e,t){var n=e.payload;return t.scroll=n.scroll,t}}},1776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(770),i=n(88),o=n(1777);t.selectionMutator=function(e){return function(t,n){var r=t.payload,a=e.get(i.DI_TYPES.HistoryManager);n.highlightedIDs=[];var s=o.filterSelectionPayload(r,n);return n.select(s),a.replaceSelectionFrameInCurrentState(n.serialize().selectionFrame),n}},t.selectMutator=[[r.select,t.selectionMutator]]},1777:function(e,t,n){"use strict";function r(e,t){if(1===e.length)return e;var n,r=t.selectionFrameModel.selectedUUIDs.find(function(e){return t.find(e).props.locked});if(e.includes(r))return e.filter(function(e){return e!==r});var i=e.find(function(e){return t.find(e).props.locked});return i?[i]:e.filter(function(e){return!t.find(e).props.locked})}Object.defineProperty(t,"__esModule",{value:!0}),t.filterSelectionPayload=r},1778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(380),i=n(896);t.convertFormatMutator=function(){return function(e,t){var n=e.payload,o=t.project.props,a=o.pageWidth,s,u={width:a,height:o.pageHeight},l=n,c=r.fitImageDimensions(u,l,i.FitImageMode.Contain).width/a;return t.project.elements.forEach(function(e){e.elements.forEach(function(e){e.props.left+=(l.width-u.width)/2,e.props.top+=(l.height-u.height)/2,e.handleResizeStart(),e.resize(c,{x:l.width/2,y:l.height/2},{x:l.width/2,y:l.height/2},!0)})}),t.project.props.pageWidth=n.width,t.project.props.pageHeight=n.height,t}}},1779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(625);function i(e,t){var n=e.width,i=e.height,o;return{width:n||0,height:i||0,elements:e.elements.map(function(e){return r.mapElementPropsToDomain(e,t)})}}t.mapTemplateElementPropsToDomain=i},1780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(88),o=n(1157),a=n(930),s=n(553),u=n(744),l=n(750),c=n(754),f=n(1781),h=n(550),p=n(925),d=n(745),g=n(749),v=n(763);function m(e){var t=new r.Container;return t.bind(i.DI_TYPES.ResourceRepository).toConstantValue(e),t.bind(i.DI_TYPES.Config).toConstantValue(o.designerConfig),t.bind(i.DI_TYPES.DesignElementsComparator).to(v.DesignElementsComparator).inSingletonScope(),t.bind(i.DI_TYPES.Renderer).to(h.Renderer).inSingletonScope(),t.bind(i.DI_TYPES.IAppStage).to(a.AppStage).inSingletonScope(),t.bind(i.DI_TYPES.Logger).toConstantValue(new s.Logger("PreviewGenerator")),t.bind(i.DI_TYPES.AfterRenderService).to(u.AfterRenderService),t.bind(i.DI_TYPES.ReconciliationService).to(l.ReconciliationService),t.bind(i.DI_TYPES.AssetsDOMReconciler).to(c.AssetsDOMReconciler),t.bind(i.DI_TYPES.ICursorManager).to(f.EmptyCursorManager).inSingletonScope(),t.bind(i.DI_TYPES.VideoRenderer).to(p.VideoRenderer).inSingletonScope(),t.bind(i.DI_TYPES.FilterService).to(d.FilterService).inSingletonScope(),t.bind(i.DI_TYPES.CropService).to(g.CropService).inSingletonScope(),t}t.createPreviewContainer=m},1781:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(114),o=function(){function e(){}return e.prototype.updateCursor=function(e){},e=r([i.injectable()],e)}();t.EmptyCursorManager=o},1782:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(91),c=n(320),f=n(76),h=n(85),p=n(88),d=n(114),g=n(550),v=n(767),m=function(){function e(e){this.mountNode=document.createElement("div"),this.previews={},this.renderer=e,this.renderer.init(this.mountNode),this.pagePropsCache={},this.pageStatusCache={},this.previewUpdate$=new v.Subject}return e.prototype.generate=function(e){return s(this,void 0,void 0,function(){var t=this;return u(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.project.pages.map(function(n){return s(t,void 0,void 0,function(){var t,i;return u(this,function(o){switch(o.label){case 0:return e.pageLoadingStatus[n.uuid]!==c.LoadingStatus.Loaded?[2]:l.deepEqual(n,this.pagePropsCache[n.uuid])&&e.pageLoadingStatus[n.uuid]===this.pageStatusCache[n.uuid]?[2]:(this.renderer.render(r({},e,{selectionFrame:{selectedUUIDs:[]},currentPageID:n.uuid,pageMargin:0,width:h.PREVIEW_WIDTH,height:h.PREVIEW_HEIGHT,zoom:Math.min(h.PREVIEW_WIDTH/e.project.pageWidth,h.PREVIEW_HEIGHT/e.project.pageHeight),backgroundColor:"transparent",hasPageShadow:!1})),t=this.previews,i=n.uuid,[4,this.renderer.export({format:f.ExportType.Png})]);case 1:return t[i]=o.sent(),this.pagePropsCache[n.uuid]=n,this.pageStatusCache[n.uuid]=e.pageLoadingStatus[n.uuid],[2]}})})}))];case 1:return n.sent(),this.previewUpdate$.next(this.previews),[2]}})})},e=i([d.injectable(),a(0,d.inject(p.DI_TYPES.Renderer)),o("design:paramtypes",[g.Renderer])],e)}();t.PreviewGenerator=m},1783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(514),i=function(){function e(){var e=this;this.scroll$=new r.Subject,this.onScroll=function(){var t=e.scrollContainer,n=t.scrollLeft,r=t.scrollTop;e.scroll$.next({x:n,y:r})}}return e.prototype.init=function(e){this.scrollContainer=e,this.scrollContainer&&this.scrollContainer.addEventListener("scroll",this.onScroll)},e.prototype.update=function(e){var t=e.x,n=e.y;this.scrollContainer&&(this.scrollContainer.scrollLeft=t,this.scrollContainer.scrollTop=n)},e.prototype.dispose=function(){this.scrollContainer&&this.scrollContainer.removeEventListener("scroll",this.onScroll)},e}();t.ScrollManager=i},1785:function(e,t,n){!function t(n,r){e.exports=r()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,n){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},n.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=131)}([function(e,t,n){"use strict";var r=n(2),i=n(1),o=n(14),a=n.n(o),s=n(67),u=n.n(s),l=n(23);function c(e){return p(e)||h(e)||f()}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function d(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={left:e.offsetTop,top:e.offsetTop,width:e.width,height:e.height}}var n=t.top+window.pageYOffset,r=t.left+window.pageXOffset;return{top:n,left:r,right:r+t.width,bottom:n+t.height,width:t.width,height:t.height,center:{x:r+t.width/2,y:n+t.height/2}}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.viewMode=t.viewMode||i.a.VIEW_MODES.screen;var o=n.i(r.a)("authToken"),a=n.i(r.a)("mediaSource"),s=n.i(r.a)("sessionToken"),c;n.i(r.a)("renderMode")===l.a.PREVIEW&&t.viewMode===i.a.VIEW_MODES.download&&(t.viewMode=i.a.VIEW_MODES.screen);var f="".concat(a,"/api/media/").concat(e,"/").concat(t.viewMode),h={token:o,fallback:t.fallbackTo};if(t.session&&(h.sessionToken=s),t.shouldWatermark&&(h.watermark="true"),t.isVideoStaticPreview&&(h.videoStaticPreview="true"),!(h.token||h.fallback||s||h.shouldWatermark))return f;var p=u.a.stringify(h);return"".concat(f,"?").concat(p)}function v(e){var t=n.i(r.a)("mediaSource");return"".concat(t).concat(e.split("?")[0])}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return!(!e&&0!==e||!t&&0!==t)&&Math.abs(e-t)<n}function y(e){var t,n=4;if(4===e.length){var r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=e.replace(r,function(e,t,n,r){return t+t+n+n+r+r})}else t=e.replace("#","");var o=parseInt(t.substring(0,t.length/3),16),a=parseInt(t.substring(t.length/3,2*t.length/3),16),s=parseInt(t.substring(2*t.length/3,3*t.length/3),16);return i.a.LUMA_RED_COEFFICIENT*o+i.a.LUMA_GREEN_COEFFICIENT*a+i.a.LUMA_BLUE_COEFFICIENT*s}function E(e,t){var n=y(e);return t?n>i.a.LUM_POINT_FOR_TOO_LIGHT_COLOR:n>i.a.MIDDLE_POINT_LUMINANCE_RANGE}function b(e){var t=n.i(r.a)("scaleRatio")/100;return{left:e.left*t,top:e.top*t}}function w(e,t){return{left:e.left*t.width,top:e.top*t.height}}function _(e){var t=n.i(r.a)("scaleRatio")/100,i,o,a,s;return{left:e.left*t,top:e.top*t,width:e.width*t,height:e.height*t}}function P(e,t){if(e>1)throw new Error(t||"Relative value ( < 1) is required")}function S(e){var t=n.i(r.a)("scaleRatio")/100,o,a=n.i(r.a)("pageWidth")/t/i.a.A2_WIDTH;return parseInt(e*a)}function A(e){return e*e}function O(e,t){return[t.x-e.x,t.y-e.y]}function C(e,t){var n=O(e,t);return Math.sqrt(A(n[0])+A(n[1]))}function x(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function T(e,t){return e[0]*t[0]+e[1]*t[1]}function I(e,t){var n=e.slice();function r(e,t){return d(e).left-d(t).left}function i(e,t){return d(e).top-d(t).top}n.sort(r);var o=n.slice(0,2);o.sort(i);var a=n.slice(2),s,u,l;return a.sort(i),["nw","sw","ne","se"][o.concat(a).indexOf(t)]}function k(e,t,n,r){var i=8,o=d(r).center,a,s,u,l=D(O(e,{x:e.x+t,y:e.y}),O(e,{x:o.x,y:o.y})),c;o.y<e.y&&(l=2*Math.PI-l);for(var f=[],h=2*Math.PI/8,p=0,g;p<8;p++){var v=p*h+h/2;f.push(v)}for(var m=0;m<f.length;m++){var y=f[m],E=f[m+1];if(!E){g=7;break}if(l>y&&l<E){g=m;break}}return["ldr","vr","rdr","hr","ldr","vr","rdr","hr"][g]}function D(e,t){var n,r,i,o=T(e,t)/(x(e)*x(t)),a;return Math.acos(o)}function R(e,t){var n,r;return{distance:C(e,t),deltaX:Math.abs(t.x-e.x),deltaY:Math.abs(t.y-e.y)}}function M(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function F(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function L(e,t){var n=e.left+e.width/2,r=e.top+e.height/2;return n>t.left&&n<t.right&&r>t.top&&r<t.bottom}function N(e,t){return L({left:e.x,top:e.y,width:1,height:1},t)}function j(e){return e?JSON.parse(JSON.stringify(e)):null}function B(e){return e[e.length-1]}function z(e){return e.length-1}function H(e,t,n){var r=e.x,i=e.y,o=t.x,a=t.y,s=r-o,u=i-a,l=Math.cos(n),c=Math.sin(n),f,h;return{x:o+s*l-u*c,y:a+s*c+u*l}}n.d(t,"D",function(){return be}),n.d(t,"n",function(){return m}),n.d(t,"z",function(){return ke}),n.d(t,"c",function(){return d}),n.d(t,"k",function(){return R}),n.d(t,"e",function(){return H}),n.d(t,"G",function(){return ye}),n.d(t,"j",function(){return Y}),n.d(t,"h",function(){return K}),n.d(t,"d",function(){return V}),n.d(t,"g",function(){return k}),n.d(t,"f",function(){return I}),n.d(t,"S",function(){return Z}),n.d(t,"i",function(){return J}),n.d(t,"_0",function(){return S}),n.d(t,"M",function(){return je}),n.d(t,"b",function(){return fe}),n.d(t,"K",function(){return le}),n.d(t,"J",function(){return ce}),n.d(t,"C",function(){return ve}),n.d(t,"y",function(){return de}),n.d(t,"H",function(){return v}),n.d(t,"P",function(){return w}),n.d(t,"l",function(){return O}),n.d(t,"p",function(){return j}),n.d(t,"x",function(){return B}),n.d(t,"w",function(){return z}),n.d(t,"r",function(){return se}),n.d(t,"N",function(){return oe}),n.d(t,"X",function(){return ue}),n.d(t,"F",function(){return X}),n.d(t,"m",function(){return D}),n.d(t,"O",function(){return _}),n.d(t,"A",function(){return Re}),n.d(t,"R",function(){return F}),n.d(t,"o",function(){return L}),n.d(t,"a",function(){return M}),n.d(t,"q",function(){return Ae}),n.d(t,"U",function(){return he}),n.d(t,"I",function(){return pe}),n.d(t,"t",function(){return E}),n.d(t,"v",function(){return me}),n.d(t,"E",function(){return Ee}),n.d(t,"u",function(){return g}),n.d(t,"Q",function(){return Pe}),n.d(t,"_1",function(){return Se}),n.d(t,"s",function(){return q}),n.d(t,"W",function(){return Oe}),n.d(t,"Y",function(){return Ce}),n.d(t,"Z",function(){return Te}),n.d(t,"_2",function(){return Fe}),n.d(t,"B",function(){return Ie}),n.d(t,"V",function(){return Le}),n.d(t,"L",function(){return Ne}),n.d(t,"T",function(){return ie});var U={nw:"se",ne:"sw",se:"nw",sw:"ne",n:"s",s:"n",e:"w",w:"e"},W={nw:"ne",ne:"nw",sw:"se",se:"sw",w:"e",e:"w"},G={nw:"sw",ne:"se",n:"s",s:"n",se:"ne",sw:"nw"};function V(e,t){var n=e.getBounds(),r,i,o=n.center,a,s;switch(n={left:n.center.x-e.width/2,top:n.center.y-e.height/2,height:e.height,width:e.width},t){case"nw":r={x:n.left,y:n.top},i="0px 0px";break;case"ne":r={x:n.left+n.width,y:n.top},i="".concat(n.width,"px 0px");break;case"se":r={x:n.left+n.width,y:n.top+n.height},i="".concat(n.width,"px ").concat(n.height,"px");break;case"sw":r={x:n.left,y:n.top+n.height},i="0px ".concat(n.height,"px");break;case"w":r={x:n.left,y:n.top+n.height/2},i="0px ".concat(n.height/2,"px");break;case"e":r={x:n.left+n.width,y:n.top+n.height/2},i="".concat(n.width,"px ").concat(n.height/2,"px");break;case"n":r={x:n.left+n.width/2,y:n.top},i="".concat(n.width/2,"px 0px");break;case"s":r={x:n.left+n.width/2,y:n.top+n.height},i="".concat(n.width/2,"px ").concat(n.height,"px");break;default:throw new Error("Unsupported for now!")}return{edge:H(r,o,!0===e.useOriginalAngleForOverlay?e.originalAngle:e.angle),transformOrigin:i,edgeName:t}}function Y(e,t,n){var r;return V(e,U[t],n)}function K(e,t,n){var r,i;return V(e,("X"===n?W:G)[t])}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.additionalPropsToDelete,i=void 0===r?[]:r,o=n.propsToSet,a=void 0===o?{}:o;return t=t.concat(i),Object.assign(e,a),X(e,t)}function X(e,t){var n;return Object.keys(e).filter(function(n){return!t.includes(n)&&void 0!==e[n]}).reduce(function(t,n){return t[n]=e[n],t},{})}function Z(e,t){if(!e)throw new Error("fieldName should be set for comparator");return t=t||"asc",function(n,r){return n[e]=n[e]||0,r[e]=r[e]||0,"asc"===t?n[e]-r[e]:r[e]-n[e]}}function Q(e,t){var n=t.getBounds(),r=n.left-e.left,i=n.top-e.top,o=e.left-r,a=e.top-i;t.setPosition({left:o,top:a},!1)}function J(e,t,n,r){var i,o,a;return T(O(e,t),O(n,r))/C(n,r)}function $(e){return null!=e}function ee(e,t){return t.filter(function(t){return-1!==e.indexOf(t)})}function te(e){for(var t=[],n=e.top;n<e.bottom;n++)t.push(parseInt(n,10));return t}function ne(e,t){var n=te(e),r,i;return t.map(function(e){return te(e)}).map(function(e){return ee(n,e).length})}function re(e,t){return t.map(function(t){return Math.abs(t.center.y-e.center.y)})}function ie(e){for(var t=0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function oe(){return new Promise(function(e){return e()})}function ae(){}function se(e){return Object.keys(e).forEach(function(t){e[t]=1===e[t]?-1:1}),e}function ue(e){return e.reduce(function(e,t){return e+t.height},0)}function le(e,t){var n=new window.XMLHttpRequest,r=new Promise(function(t,r){if(!0===window.jsdom)return t();n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=this.status;if(200===e){var n=this.response,i=URL.createObjectURL(n);t(i)}else e>=400&&r(new Error("Video download status ".concat(e)))},n.onerror=r,n.onabort=function(){return r(new Error("Video download aborted"))},n.send()}).then(t);return{request:n,promise:r}}function ce(e,t){var n=new window.XMLHttpRequest,r=new Promise(function(t,r){if(!0===window.jsdom)return t();n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=this.status;if(200===e){var n=this.response,i=URL.createObjectURL(n);t(i)}else e>=400&&r(new Error("Gif download status ".concat(e)))},n.onerror=r,n.onabort=function(){return r(new Error("Gif download aborted"))},n.send()}).then(t);return{request:n,promise:r}}function fe(e){var t;return"string"==typeof e&&(t=e,e=new window.Image),t||(t=e.getAttribute("src")),ve(t)&&(e.crossOrigin=i.a.CROSS_ORIGIN),new Promise(function(n,r){return e.onload=function(){n(e)},t&&(e.src=t),e.onerror=function(e){return r(e)},!0===window.jsdom?n(e):e.complete&&0!==e.naturalHeight?n(e):e.getAttribute("src")?void setTimeout(function(){return n(e)},3e4):n(e)})}function he(e,t){var n=t.width/e.width>=t.height/e.height?"width":"height",r=t[n]/e[n],i=Object.assign({},e);return i.width*=r,i.height*=r,i.left=t.left-(i.width-t.width)/2,i.top=t.top-(i.height-t.height)/2,i}function pe(e,t){var n=t.width/t.height,r,i,o,a;return i=(r=e.width)/n,r<e.width?i=(r=e.width)/n:i<e.height&&(r=(i=e.height)*n),{width:r,height:i,x:o=-(r-e.width)/2+e.left,y:a=-(i-e.height)/2+e.top}}function de(e){var t="font_".concat(e);return!0===window.jsdom||a.a.exists(t)?Promise.resolve():(a.a.bind(t,!0),new Promise(function(t){var r;n(76).load({custom:{families:[e+":n4,i4,n7,i7"]},timeout:2e4,active:t,inactive:t})}))}function ge(e){if(/^https?:\/\//.test(e)){var t=document.createElement("a");return t.href=e,t.hostname+":"+t.port}return window.location.hostname}function ve(e){return!/^\//.test(e)&&window.location.hostname+":"+window.location.port!==ge(e);var t,n}function me(e){if(/purchases/.test(e))return!0}function ye(e,t){var n=t.x,r=t.y,i=V(e,"e"),o=V(e,"s"),a=e.getBounds().center,s={x:a.x+n,y:a.y+r},u,l;return{x:J(a,s,a,i.edge),y:J(a,s,a,o.edge)}}function Ee(e,t,n){return e.x-=t.x,e.y-=t.y,{x:e.x*Math.cos(-1*n)+e.y*Math.sin(-1*n)+t.x,y:e.x*Math.sin(n)+e.y*Math.cos(n)+t.y}}function be(e,t){var n=parseFloat(e.toFixed(2)),r;return parseFloat(t.toFixed(2))===n}function we(e){var t=n.i(r.a)("preferredFallbacks");if(!t)return!1;var i=t[e.type];return i&&e.fallbacks&&e.fallbacks[i]}function _e(e){var t=n.i(r.a)("preferredFallbacks"),i=e.type,o=e.fallbacks,a=t[i];e.fallbackTo=a;var s=Object.assign({},o[a]);e.dataBeforeFallback={},e.dataBeforeFallback.type=e.type,e.type=s.type}function Pe(e){we(e)&&_e(e)}function Se(e,t){if(t.designerEvent===i.a.DESIGNER_EVENTS.mouseDragEnd){var n=t.eventData,r={x:n.clientX+window.pageXOffset,y:n.clientY+window.pageYOffset};return e.find(function(e){var t=d(e.el);return N(r,t)})}return null}function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e.toFixed(t))}function Oe(e,t){return Math.max(e[0],t[0])<Math.min(e[1],t[1])}function Ce(e){return new Promise(function(t){return setTimeout(t,e)})}function xe(e,t){return e.filter(function(e){return-1===t.indexOf(e)})}function Te(e,t){var n={add:[],remove:[],move:!1};n.remove=xe(e,t),n.add=xe(t,e);var r=xe(e,n.remove),i=xe(t,n.add);return r.forEach(function(e,t){n.move||(n.move=e!==i[t])}),n}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=e.split("");return i.splice(t,n,r),i.join("")}function ke(e){var t=e.maskData&&e.maskData.font?e.maskData.font:e.font,n=[],r,i;t&&Array.from(document.styleSheets).filter(function(e){return e.href&&e.href.includes("fonts")}).forEach(function(e){try{var r,i=Array.from(e.rules||[]).filter(function(e){return e.style.fontFamily.includes(t)});i.length&&n.push.apply(n,c(i.map(function(e){return e.cssText})))}catch(e){console.error(e)}});return n.length&&"<style>".concat(n.join("\n"),"</style>")}function De(e){var t=ke(e);return"\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t".concat(t||"","\n\t\t\t\t<style>\n\t\t\t\t\thtml, body {\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t}\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>").concat(e.el.innerHTML,"</body>\n\t\t</html>\n\t")}function Re(e,t){return'<body style="padding: 0; margin: 0" xmlns="http://www.w3.org/1999/xhtml">'.concat(t.outerHTML,"</body>")}function Me(e,t,n,r){return"\n\t\t<div uuid=".concat(e,">\n\t\t\t<img src='").concat(t,"' style='width:").concat(n,";height:").concat(r,"' rasterized>\n\t\t</div>\n\t")}function Fe(e){var t=i.a.FILTERS_TO_RASTERIZE,n=i.a.RASTERIZE_CANVAS_SCALE_RATIO,r=e.filters&&t.some(function(t){return e.filters[t]});if("maskElement"===e.type||r){var o=document.getElementById("canvas");o||((o=document.createElement("canvas")).id="canvas",o.style.hidden=!0);var a=o.getContext("2d");o.width=e.width*n,o.height=e.height*n;var s="".concat(e.width,"px"),u="".concat(e.height,"px");return o.style.width=s,o.style.height=u,a.scale(n,n),a.imageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,rasterizeHTML.drawHTML(De(e),o).then(function(){var t=o.toDataURL();e.el.innerHTML=Me(e.uuid,t,s,u)})}}function Le(e,t){return Array(e).fill(t)}function Ne(e,t){return e*=1e3,t&&(e>t.cutEnd||e<t.cutStart)}function je(e){return e/1e3}},function(e,t,n){"use strict";t.a={CONCURRENCY:1,SKY_ZINDEX:1e3,OVERLAY_RESIZE_CONTROL_SIZE:12,OVERLAY_ROTATION_CONTROL_SIZE:48,MIN_SIZE:1,MIN_FULL_CONTROLS_SIZE:30,PAGE_ZINDEX:800,SNAP_COLOR:"#FF4AFF",SMALL_IMAGE_WIDTH:320,IMAGE_WIDTH:640,MAX_IMAGE_WIDTH:2048,COPY_SHIFT:10,DEFAULT_INTENSITY:50,BOUNDARY_SHIFT:5,MOVE_OUTER_PADDING:5,MOVE_INNER_PADDING:3,NWSE_CROP_SIZE:8,BORDER_SIZE:2,LOCKED_BORDER_SIZE:.2,LOCKED_CONTROL_SIZE:18,ILLUSTRATION_WIDTH:640,CIRCLE_BORDER_COLOR:"#FFFFFF",PAGE_PADDING:60,WORKSPACE_PADDING:50,A2_WIDTH:1190,BLUE_COLOR:"#3D95FF",WHITE_COLOR:"#FFFFFF",BLACK_COLOR:"#000000",PINK_COLOR:"#ED03EF",HOVER_OVERLAY_COLOR:"#435B58",MAX_SVG_COLORS:4,DEFAULT_IMAGE_WIDTH:360,MAX_IMAGE_WIDTH_FILTERS:2048,SVG_COLOR_DARK:"#0D1C32",SNAP_DISTANCE:.5,SNAP_TRESHOLD:5,SNAP_DUP_TRESHOLD:15,LUMA_RED_COEFFICIENT:.2126,LUMA_GREEN_COEFFICIENT:.7152,LUMA_BLUE_COEFFICIENT:.0722,MIDDLE_POINT_LUMINANCE_RANGE:127,LUM_POINT_FOR_TOO_LIGHT_COLOR:245,MAX_AMOUNT_FILTERED_IMAGES:20,CLASS_NAMES:{overlayBackgroundLabel:"designer-background-label",DEFAULT_PAGE_ACTIVE_CLASS:"active-page",DEFAULT_PAGE_INACTIVE_CLASS:"inactive-page",DEFAULT_PAGE_NOT_READY_CLASS:"not-ready-page",DEFAULT_PAGE_PREFIX_CLASS:"page-status",DUMMY_HOLDER:"dummy-holder",DUMMY_IMAGE_HOLDER:"dummy-image-holder"},MOVE_ACTIONS:["setPositionChange","dragStateful"],ACTIONS_TO_REMOVE_BACKGROUND:["resize","setAngleStateful","setPosition","setPositionChange","dragStateful"],ACTIONS_APPLIED_FOR_LOCKED_TEXT:["setLock","setOpacity"],ACTIONS_APPLIED_FOR_ANIMATED_ELEMENTS:["setPositionChange","setOpacity","setFlip","setLock","setLoop"],ACTIONS_TO_GEOMETRY_MUTATION:["setAngleStateful","resize"],TEXT_ELEMENT:{SELECTION_TIMEOUT:300,WORD_BREAK_MODES:{breakWord:"breakWord",breakAll:"breakAll"}},NON_LOCKABLE_ELEMENTS:["groupElement"],DISALLOWED_OPERATION_ON_LOCK:{setFlip:!0,setPositionChange:!0},CROSS_ORIGIN:"anonymous",OUTER_ASYNC_SUBSCRIBERS:["onReady","onPlayabilityChange"],VIEW_MODES:{thumb:"thumb",screen:"screen",download:"download"},ITEM_LIKE_TEMPLATE_TYPES:["badge","sticker"],SPECIAL_CURSORS:["text"],DESIGNER_EVENTS:{keyboardDragEnd:"keyboardDragEnd",mouseDragEnd:"mouseDragEnd"},PAGE_BASE_MARGIN:100,PAGE_MAX_MARGIN:100,SNAP_DEGREE:15,PAGE_LOAD_STATUS:{initial:"initial",pending:"pending",loading:"loading",ready:"ready",failed:"failed"},PAGE_AFTERLOADING_PRIORITY:{high:100,normal:50},PAGE_VISIBILITY_TIME_BEFORE_AFTERLOADING:400,FILTERS_TO_RASTERIZE:["blur","brightness","contrast","saturate","tint"],WEBGL_FILTERS:["vignette","crossProcess"],RASTERIZE_CANVAS_SCALE_RATIO:2,KEY_MODES:{CMD:"CMD",SHIFT:"SHIFT",ALT:"ALT"},BASE_DRAG_MODE:"BASE_DRAG_MODE",PRE_AXIS_ATTACHED_DRAG_MODE:"PRE_AXIS_ATTACHED_DRAG_MODE",AXIS_ATTACHED_DRAG_MODE:"AXIS_ATTACHED_DRAG_MODE",PAGE_OVERLAY_CHILD_TYPES:{LOGO_LABEL:"LOGO_LABEL",GRID_OVERLAY:"GRID_OVERLAY"},PAGE_OVERLAY_CHILD_MAX_Z_INDEX:1e3,GRID_OVERLAY_COLUMNS:5,GRID_OVERLAY_ROWS:5,MINIFIED_PAGE_WIDTH:256,MAX_STASHEE_LENGHT_TO_DETECT_SHAPE:500,DUMMYABLE_ELEMENT_TYPES:["svgElement","illustrationElement","imageElement","videoElement","gifElement","dummyElement"],TEXT_NORMALIZATION_FORM:"NFKC",NOT_RESIZABLE_INVENTORY_TYPES:["textElement"]}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return a});var r={};function i(e,t){r[e]=t}function o(e){return r[e]}function a(){r={}}},function(e,t,n){"use strict";t.a={ELEMENT_DROP:"el_drop",ELEMENT_DROP_FROM_PAGE:"el_drop_from_page",ELEMENT_ADD:"el_add",ELEMENT_MOUNTED:"el_mounted",ELEMENT_SELECTED:"el_selected",ELEMENT_REMOVE:"el_remove",ELEMENT_DROP_TO_ACTIVE:"el_drop_to_active",ELEMENT_DRAG_START:"el_drag_start",ELEMENT_DRAG_END:"el_drag_end",ELEMENT_CHANGE_STATE:"el_change_state",ELEMENT_COPY:"el_copy",ELEMENT_PULL:"el_pull",ELEMENT_PUSH:"el_push",ELEMENT_LOCK:"el_lock",SAVE_STATE:"save_state",IMAGE_LOADED:"image_loaded",ELEMENT_TEXT_CHANGE:"el_text_change",ELEMENT_MOVE:"el_move",ELEMENT_ATTACH_CROP:"el_attach_crop",ELEMENT_CROP_CHANGE:"el_crop_change",ELEMENT_SET_CROP:"el_set_crop",CREATE_MASK:"create_mask",PAGE_ADDED:"page_added",PAGE_REMOVED:"page_removed",PAGE_INSERTED:"page_inserted",PAGE_COPIED:"page_copied",PAGE_MOVED:"page_moved",PAGE_EDITED:"page_edited",PAGE_REPLACE_ELEMENTS:"page_replace_elements",PAGE_SELECT:"page_select",PAGE_STATUS_CHANGE:"page_status_change",RELEASE_PROXY:"release_proxy",REPLACE_BACKGROUND:"replace_background",MULTISELECT_STARTED:"multiselect_started",MULTISELECT_STOPED:"multiselect_stoped",MULTISELECT_AREA_CHANGED:"multiselect_area_changed",ELEMENT_RESIZE:"el_resize",RESIZE_START:"resize_start",RESIZE_END:"resize_end",CLIPBOARD_PASTE:"clipboard_paste",PERSIST_GROUP_CREATE:"persist_group_create",PERSIST_GROUP_UNGROUP:"persist_group_ungroup",GROUP_ALIGN_ITEMS:"group_align_items",SET_SCALE:"arbiter_set_scale",ON_ERROR:"arbiter_on_error",UNFRAME:"unframe",CHANGE_CMD_MODE:"change_cmd_mode",CHANGE_SHIFT_MODE:"change_shift_mode",CHANGE_ALT_MODE:"change_alt_mode",LOGO_LABEL_CLICK:"logo_label_click",CLEAR_SELECTION:"clear_selection",APP_CHANGE_MOUNTING_STATE:"app_change_mounting_state",USER_VIDEO_ENDED:"user_video_ended"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",function(){return s});var a,s=new(function(){function e(){r(this,e),this.events={}}return o(e,[{key:"dispatch",value:function e(t,n){var r;this.events[t]&&this.events[t].slice().forEach(function(e){e(n)})}},{key:"subscribe",value:function e(t,n){if("function"!=typeof n){var r=JSON.stringify(n,null,"\t");throw new Error("Handler ".concat(r," is not a function"))}return this.events[t]||(this.events[t]=[]),this.events[t].push(n)}},{key:"unsubscribe",value:function e(t,n){var r=this.events[t].indexOf(n);this.events[t].splice(r,1)}},{key:"flush",value:function e(){this.events={}}}]),e}())},function(e,t,n){"use strict";(function(e){function n(){if(window.jsdom)return!1;var e=navigator.userAgent.toLowerCase();return(e.includes("safari/")||e.includes("windows"))&&!e.includes("chrome")}var r=new Function,i={log:r,group:r,groupEnd:r,setDebugMode:function t(r){"production"===r||"test"===e.env.NODE_ENV||!window.console||n()||window.DISABLE_DEBUG||(i.log=console.log,i.groupCollapsed=console.groupCollapsed,i.group=console.group,i.groupEnd=console.groupEnd),"production"!==r&&window&&(window.pageDebug=function(){var e;document.querySelector(".workspace").setAttribute("debug-mode","multipage")})}};t.a=i}).call(t,n(64))},function(e,t,n){"use strict";var r=[],i=0;function o(e,t,n,i){return n?r.filter(function(r){return r.namespace===n&&r.element===e&&r.type===t}):r.filter(function(e){return e.handler.id===i.id})}var a={attachEvent:function e(t,n,i,o,a){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6?arguments[6]:void 0,c,f=(arguments.length>7&&void 0!==arguments[7]?arguments[7]:{}).useCapture||!1;t||(t=document);var h=s(t,n,i,u,o);return t.addEventListener?t.addEventListener(n,h,f):t.attachEvent("on"+n,h),!1!==a&&r.push({handler:i,syntheticHandler:h,element:t,type:n,namespace:l}),h},detachEvent:function e(t,n,i,a){var s,u=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).useCapture||!1,l;i||(i=document),o(i,t,a,n).forEach(function(e){i.removeEventListener?i.removeEventListener(t,e.syntheticHandler,u):i.detachEvent("on"+t,e.syntheticHandler),r.splice(r.indexOf(e),1)})},detachAllEvents:function e(){r.forEach(function(e){a.detachEvent(e.type,e.handler,e.element)})},detachPageEvents:function e(t){var n=t.elements.map(function(e){return e.el}),i;n.push(t.el),r.filter(function(e){return n.includes(e.element)}).forEach(function(e){a.detachEvent(e.type,e.handler,e.element)})},attachElement:function e(t,n){n||(n=document.body),t.style.position="absolute",n.appendChild(t)},removeElement:function e(t){t&&t.parentNode&&t.parentNode.removeChild(t)},generateEventFromEvent:function e(t,n){var r,i,o={bubbles:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],cancelable:"mousemove"!==t,view:window,detail:0,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0};if("function"==typeof document.createEvent)(i=document.createEvent("MouseEvents")).initMouseEvent(t,o.bubbles,o.cancelable,o.view,o.detail,o.screenX,o.screenY,o.clientX,o.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.button,o.relatedTarget);else if(document.createEventObject){i=document.createEventObject();var a=!0,s=!1,u=void 0;try{for(var l=o[Symbol.iterator](),c;!(a=(c=l.next()).done);a=!0){var f=c.value;i[f]=o[f]}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}i.button={0:1,1:4,2:2}[i.button]||i.button}return i},dispatchEvent:function e(t,n){return t.dispatchEvent?t.dispatchEvent(n):t.fireEvent&&t.fireEvent("on"+n.type,n),n},cancelSelection:function e(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},childOfElement:function e(t,n){return"contains"in t?t.contains(n):t.compareDocumentPosition(n)%16},scrollTop:function e(t,n){t.scrollTop=n},scrollLeft:function e(t,n){t.scrollLeft=n}};function s(e,t,n,r,o){return n.id=i++,function(i){return!0!==r&&i.stopPropagation(),o&&a.detachEvent(t,n,e),n(i)}}t.a=a},function(e,t,n){"use strict";var r=n(38),i=n(0),o=n(13),a=n(4),s=n(3),u=n(6),l=n(12),c=n.n(l),f=n(15),h=n(2),p=n(1),d=n(30);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function v(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=S(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var x=function(e){function t(e){var n;return y(this,t),n=w(this,A(t).call(this,e)),e.shouldIgnoreMountingStash||d.a.insert({uuid:n.uuid}),n.hasRotationControls=!0,n.id=e.id,n.innerId=e.innerId,n.type=e.type,n.url=e.url,n.templateAsset=e.templateAsset||!1,n.position=e.position||{left:0,top:0},n.position.left=parseFloat(n.position.left),n.position.top=parseFloat(n.position.top),n.opacity=e.opacity||1,n.selected=e.selected||!1,n.multiSelectActive=!1,n.shallow=e.shallow,n.isSharedProject=e.isSharedProject,e.fallbacks&&e.dataBeforeFallback&&(n.dataBeforeFallback=e.dataBeforeFallback,n.fallbacks=e.fallbacks,n.fallbackTo=e.fallbackTo),n.mediaAsset=e.mediaAsset||!1,n.mediaId=e.mediaId,e.dphId?(n.dphId=e.dphId,n.isFreeItem=!!e.isFreeItem):n.isFreeItem=!0,n.constructor.flippable&&(n.flipped=e.flipped||{horizontal:1,vertical:1}),n.constructor.background&&(n.isBackground=e.isBackground||!1,n.isBackground2=e.isBackground2||!1),n.hasBackgroundLabel=!0,n.hasPermission=e.hasPermission||!1,n.dragHistory=[],n._dragMode=null,n.isSelectable="boolean"!=typeof e.isSelectable||e.isSelectable,"boolean"==typeof e.userUpload&&(n.userUpload=e.userUpload),a.a.subscribe(s.a.MULTISELECT_STARTED,function(){return n.multiSelectActive=!0}),a.a.subscribe(s.a.MULTISELECT_STOPED,function(){return n.multiSelectActive=!1}),n}return O(t,e),b(t,[{key:"getControlsFilter",value:function e(){return[]}},{key:"afterRender",value:function e(){}},{key:"shouldHaveBackgroundLabelAtOverlay",value:function e(){return this.isBackgroundElement()&&this.hasBackgroundLabel}},{key:"isBackgroundElement",value:function e(){return this.isBackground2}},{key:"resolveFramePaddings",value:function e(){return 0}},{key:"getPositioningRectangle",value:function e(){return{x:this.position.left,y:this.position.top,width:this.width,height:this.height}}},{key:"removeBackgroundProperty",value:function e(){this.isBackground=!1,this.isBackground2=!1}},{key:"setInnerId",value:function e(t){this.innerId=t}},{key:"changeDimensions",value:function e(t){var r={height:this.height,width:this.width,position:this.position};return this.setHeight(t.height),this.setWidth(t.width),n.i(o.a)(this),r}},{key:"setFlipInner",value:function e(t,n){var r=this.el.querySelector(n||"canvas, svg, img, video");r&&(r.style.transform="scale(".concat(t.horizontal,", ").concat(t.vertical,")"),t.origin&&(r.style.transformOrigin=t.origin))}},{key:"setFlip",value:function e(t){var n=t.direction;if(!this.el)throw new Error("Cannot set flip without element attached");return this.flipped[n]=-1===this.flipped[n]?1:-1,this.setFlipInner(this.flipped),{direction:n}}},{key:"setOpacity",value:function e(t){if(!this.underlyingEl)throw new Error("Cannot set opacity without element attached");var n=t.opacity;if(isNaN(n)||n<0||n>1)throw new Error("Opacity should be in range from 0 to 1");var r=this.opacity,i;(this.opacity=n,this.underlyingEl.style.opacity=n,this.dummyHolder)&&(this.dummyHolder.querySelector(":scope>div").style.opacity=n);return{opacity:r}}},{key:"setLock",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.notify=!1!==t.notify||t.notify;var r=this.locked;return this.locked=t.locked,this.locked||delete this.locked,this.selected&&t.notify&&a.a.dispatch(s.a.ELEMENT_LOCK,{}),this.overlay&&n.i(o.a)(this),{locked:r}}},{key:"setEl",value:function e(r){var o=this;P(A(t.prototype),"setEl",this).call(this,r),this.el.setAttribute("inventory-id",this.id),this.setCursor(this.cursor),this.position&&this.setPosition(this.position),this.setOpacity({opacity:this.opacity}),this.constructor.flippable&&(this.flipped=n.i(i.r)(this.flipped),["vertical","horizontal"].forEach(function(e){o.setFlip({direction:e},!1)}))}},{key:"setDimension",value:function e(r,i,a,s){P(A(t.prototype),"setDimension",this).call(this,r,i,a,s),this.overlay&&(c.a.setOverlayDimension(r,this,i),n.i(o.a)(this),c.a.setAngle(this,this.angle)),this.cropped&&(this.el.style[r]="".concat(i,"px"))}},{key:"correctOverlayPosition",value:function e(){var t=this.getOverlayPosition();c.a.setOverlayDimension("width",this,this.width),c.a.setOverlayDimension("height",this,this.height),c.a.setPosition(this,t),"select"===this.overlay.getAttribute("data-overlay")&&n.i(o.a)(this)}},{key:"setPosition",value:function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=P(A(t.prototype),"setPosition",this).call(this,n,r);return this.overlay&&this.correctOverlayPosition(),i}},{key:"setPositionChange",value:function e(t){var r=n.i(i.p)(this.position);return this.drag(t,!0),{position:r}}},{key:"dragStateful",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,r=t.y,i=t.checkRestrictions;this.drag({x:n,y:r},i)}},{key:"drag",value:function e(t,r){if(!this.partOfPersistGroup){var o=n.i(i.p)(this.position);return this.setPosition({left:o.left+t.x,top:o.top+t.y},r),{x:-t.x,y:-t.y}}}},{key:"onDragStart",value:function e(){this.isBackgroundElement()&&this.setBackground({isBackground2:!1})}},{key:"bindEvents",value:function e(){var t=this;!0!==this.shallow&&(u.a.attachEvent(this.el,"mouseenter",function(){t.multiSelectActive||t.selected||window.SELECTION_LOCK||t.toggleHighlight(!0,!0)}),u.a.attachEvent(this.el,"mouseleave",function(){t.multiSelectActive||t.selected||window.SELECTION_LOCK||t.toggleHighlight(!1,!0)}))}},{key:"template",value:function e(){return""}},{key:"getClippingData",value:function e(){return{width:this.width,height:this.height}}},{key:"reload",value:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"serialize",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.i(h.a)("scaleRatio")/100,a=P(A(t.prototype),"serialize",this).call(this,r),s={left:n.i(i.q)(this.position.left/o),top:n.i(i.q)(this.position.top/o)},u=Object.assign({},this,a,{position:s},this.dataBeforeFallback),l=["el","coords","resizablePoints","overlay","backgroundLabel","cursor","shallow","useOriginalAngleForOverlay","onRemove","underlyingEl","draggable","highlighted","snaps","_resizing","_pageIndex","_removeMark","inDesigner","sticked","style","stasheeData","hasRotationControls","onSelectEmpty","preload","hasPermission","isCover","isBackground","dataBeforeFallback","__dragging","_dragMode","shouldIgnoreSnaps","dragHistory","ignoredDragAxis","isSelectable","isStorable","_inMount"];return r.stateSave||(l.push("selected"),l.push("multiSelectActive")),n.i(i.s)(u,l,r)}},{key:"export",value:function(){var e=m(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return(t=this.serialize()).left=t.position.left,t.top=t.position.top,n.abrupt("return",t);case 4:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getClipboardData",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({propsToSet:{isBackground:!1,isBackground2:!1},additionalPropsToDelete:["uuid","innerId"]},t),this.serialize(t)}},{key:"canBeMultiselected",value:function e(){return!this.locked&&!this.cropping&&!(this.isAnimatedElement&&this.isBackgroundElement())&&this.isSelectable}},{key:"onResizeStart",value:function e(t,n){var r=n.className;a.a.dispatch(s.a.RESIZE_START,{type:t,direction:r}),this._resizing=!0}},{key:"onResizeMove",value:function e(t,n){var r=n.className;a.a.dispatch(s.a.ELEMENT_RESIZE,{type:t,direction:r,designElement:this}),this._resizing=!0}},{key:"onResizeEnd",value:function e(t,n){var r=n.className;a.a.dispatch(s.a.RESIZE_END,{type:t,direction:r}),this._resizing=!1}},{key:"shouldHideOverlay",value:function e(){return!1}},{key:"change",value:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o,a=n.i(h.a)("features").looseBGDPropertyOnGeometryMutations;if(!this[t])throw new Error("Invalid change handler ".concat(t," for type ").concat(this.type));p.a.ACTIONS_TO_REMOVE_BACKGROUND.includes(t)&&a&&(r.isBackground2=!1);var s=this[t](r,i);return s&&(s.isBackground2=this.setBackground(r)),s}},{key:"setBackground",value:function e(t){t=t||{};var n=this.isBackground2||!1;return this.isBackground2="boolean"==typeof t.isBackground2?t.isBackground2:this.isBackgroundElement(),!0===n&&!1===this.isBackground2&&this.backgroundLabel&&(this.backgroundLabel.remove(),delete this.backgroundLabel),n}},{key:"setAngleStateful",value:function e(t){var n;return{angle:this.setAngle(t.angle)}}},{key:"reconfigure",value:function e(t){this.constructor.call(this,t),this.setEl(this.el)}},{key:"select",value:function e(){this.selected=!0,this.setCursor(this.cursor)}},{key:"blur",value:function e(){this.el&&(this.el.blur(),this.setCursor(this.cursor)),this.selected=!1,this.highlighted=!1,window.getSelection&&window.getSelection().removeAllRanges()}},{key:"toggleHighlight",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(this.partOfPersistGroup||this.cropping||this.highlighted===t||this.__dragging||this.selected)&&this.isSelectable){if(this.highlighted=t,!t&&this.overlay)return this.removeOverlay();this.overlay=f.a.highlight(this,!t,n,r)}}},{key:"isHighlighted",value:function e(){return this.highlighted}},{key:"setCursor",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!this.underlyingEl)throw new Error("Need presented html-element before setting css property");this.cursor=t,this.underlyingEl.style.cursor=t;var n=!p.a.SPECIAL_CURSORS.includes(this.cursor);this.underlyingEl.classList.toggle("cursor-move",n)}},{key:"resizeAsPartOfGroup",value:function e(t){var n=t.position,r=t.ratio;this.setPosition(n,!1),this.setWidth(this.width*r),this.setHeight(this.height*r)}},{key:"shouldScaleBothSides",value:function e(){return!1}},{key:"resize",value:function e(t){var r=this,i=["nw","ne","se","sw"].includes(t.handle),a={afterScaleCoords:this.getBounds(),newWidth:this.width,newHeight:this.height},s=t.afterScaleCoords,u=t.newWidth,l=t.newHeight;this.setWidth(u),this.setHeight(l);var c=this.getBounds(),f=0,p=0,d;!1!==this.proportionalResize?(f=s.left-c.left,p=s.top-c.top,n.i(h.a)("arbiterKeyMode").ALT&&i&&(f=(this.width-a.newWidth)/-2,p=(this.height-a.newHeight)/-2)):(["nw","sw","w"].includes(t.handle)&&(f=a.newWidth-u),["ne","n","nw"].includes(t.handle)&&(p=a.newHeight-l));var g=this.position;return this.setPosition({left:g.left+f,top:g.top+p}),n.i(o.a)(this),a}},{key:"removeOverlay",value:function e(){if(!this.overlay)throw new Error("Cannot remove what i don't have");c.a.removeOverlay(this),this.overlay=null}},{key:"mounted",value:function(){var e=m(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return this._inMount=!0,n.next=3,this.mounting(t);case 3:this.onMountingFinish(),this._inMount=!1,d.a.remove({uuid:this.uuid});case 6:case"end":return n.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"mounting",value:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve());case 1:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onMountingFinish",value:function e(){}},{key:"destroy",value:function e(){P(A(t.prototype),"destroy",this).call(this),d.a.remove({uuid:this.uuid}),this.overlay&&(c.a.removeOverlay(this),this.overlay=null,this.el=null)}}]),t}(r.a);t.a=x},function(e,t,n){"use strict";var r=n(102),i=n(1),o=n(0),a=n(4),s=n(3);t.f=m,n.d(t,"l",function(){return p}),n.d(t,"d",function(){return g}),n.d(t,"k",function(){return b}),n.d(t,"a",function(){return c}),n.d(t,"j",function(){return v}),n.d(t,"c",function(){return d}),n.d(t,"e",function(){return y}),n.d(t,"h",function(){return w}),n.d(t,"i",function(){return E}),n.d(t,"g",function(){return _}),n.d(t,"b",function(){return l});var u={},l=["#ff0000","#ff0800","#ff0f00","#ff1700","#ff1f00","#ff2600","#ff2e00","#ff3600","#ff3d00","#ff4500","#ff4d00","#ff5400","#ff5c00","#ff6300","#ff6b00","#ff7300","#ff7a00","#ff8200","#ff8a00","#ff9100","#ff9900","#ffa100","#ffa800","#ffb000","#ffb800","#ffbf00","#ffc700","#ffcf00","#ffd600","#ffde00","#ffe500","#ffed00","#fff500","#fffc00","#faff00","#f2ff00","#ebff00","#e3ff00","#dbff00","#d4ff00","#ccff00","#c4ff00","#bdff00","#b5ff00","#adff00","#a6ff00","#9eff00","#96ff00","#8fff00","#87ff00","#80ff00","#78ff00","#70ff00","#69ff00","#61ff00","#59ff00","#52ff00","#4aff00","#42ff00","#3bff00","#33ff00","#2bff00","#24ff00","#1cff00","#14ff00","#0dff00","#05ff00","#00ff03","#00ff0a","#00ff12","#00ff19","#00ff21","#00ff29","#00ff30","#00ff38","#00ff40","#00ff47","#00ff4f","#00ff57","#00ff5e","#00ff66","#00ff6e","#00ff75","#00ff7d","#00ff85","#00ff8c","#00ff94","#00ff9c","#00ffa3","#00ffab","#00ffb3","#00ffba","#00ffc2","#00ffc9","#00ffd1","#00ffd9","#00ffe0","#00ffe8","#00fff0","#00fff7","#00ffff","#00f7ff","#00f0ff","#00e8ff","#00e0ff","#00d9ff","#00d1ff","#00c9ff","#00c2ff","#00baff","#00b2ff","#00abff","#00a3ff","#009cff","#0094ff","#008cff","#0085ff","#007dff","#0075ff","#006eff","#0066ff","#005eff","#0057ff","#004fff","#0047ff","#0040ff","#0038ff","#0030ff","#0029ff","#0021ff","#0019ff","#0012ff","#000aff","#0003ff","#0500ff","#0d00ff","#1400ff","#1c00ff","#2400ff","#2b00ff","#3300ff","#3b00ff","#4200ff","#4a00ff","#5200ff","#5900ff","#6100ff","#6900ff","#7000ff","#7800ff","#8000ff","#8700ff","#8f00ff","#9600ff","#9e00ff","#a600ff","#ad00ff","#b500ff","#bd00ff","#c400ff","#cc00ff","#d400ff","#db00ff","#e300ff","#eb00ff","#f200ff","#fa00ff","#ff00fc","#ff00f5","#ff00ed","#ff00e6","#ff00de","#ff00d6","#ff00cf","#ff00c7","#ff00bf","#ff00b8","#ff00b0","#ff00a8","#ff00a1","#ff0099","#ff0091","#ff008a","#ff0082","#ff007a","#ff0073","#ff006b","#ff0063","#ff005c","#ff0054","#ff004d","#ff0045","#ff003d","#ff0036","#ff002e","#ff0026","#ff001f","#ff0017","#ff000f","#ff0008","#ff0008"];function c(e){var t,n=[0,.2,0,-.1,0].map(t=function t(n){return parseFloat((n*e/100).toFixed(2))}),r=[0,.1,0,-.1,0].map(t),t=[.2,0,.2].map(t);return{red:[[0,0],[.3,.3-n[1]],[.7,.7-n[3]],[1,1]],green:[[0,0],[.25,.25-r[1]],[.75,.75-r[3]],[1,1]],blue:[[0,t[0]],[2/3*.5,t[0]+2/3*(.5-t[0])],[1+2/3*-.5,1-t[2]+2/3*(.5-(1-t[2]))],[1,1-t[2]]]}}var f={},h={};function p(e,t,n,i,o,a,s){var u="".concat(i,"?").concat(e);if(t&&(h[u]=!0),!f[u]){f[u]=!0;var l=c(n.crossProcess),p,d=s;d=(p=document.getElementById("canvas")?document.getElementById("canvas"):r.a.canvas()).texture(s),p.id="canvas",p.style.width="".concat(o.width,"px"),p.style.height="".concat(o.height,"px"),p.style.position="absolute",p.style.left="".concat(-a.left,"px"),p.style.top="".concat(-a.top,"px"),p.style.zIndex="-1",p.draw(d),n.crossProcess&&p.curves(l.red,l.green,l.blue),n.vignette&&p.vignette(0,n.vignette/100*.7),p.update();var g=h[u];return f[u]=!1,h[u]=!1,{canvas:p,finalizeFilters:g}}}function d(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}var g={normal:{brightness:0,contrast:0,saturate:0,tint:0,blur:0,crossProcess:0,vignette:0},cali:{brightness:22,contrast:-46,saturate:38,tint:0,blur:0,crossProcess:27,vignette:0},drama:{brightness:-10,contrast:21,saturate:34,tint:60,blur:0,crossProcess:80,vignette:50},edge:{brightness:10,contrast:-24,saturate:26,tint:49,blur:0,crossProcess:29,vignette:0},epic:{brightness:6,contrast:20,saturate:-14,tint:0,blur:1,crossProcess:50,vignette:39},festive:{brightness:10,contrast:21,saturate:24,tint:0,blur:0,crossProcess:40,vignette:0},grayscale:{brightness:15,contrast:-20,saturate:-100,tint:0,blur:0,crossProcess:0,vignette:0},nordic:{brightness:15,contrast:-16,saturate:-50,tint:0,blur:0,crossProcess:0,vignette:0},retro:{brightness:0,contrast:-14,saturate:-18,tint:14,blur:0,crossProcess:69,vignette:40},rosie:{brightness:0,contrast:55,saturate:-28,tint:-73,blur:0,crossProcess:27,vignette:0},selfie:{brightness:10,contrast:-12,saturate:-12,tint:0,blur:0,crossProcess:50,vignette:56},street:{brightness:-7,contrast:21,saturate:-95,tint:0,blur:0,crossProcess:0,vignette:50},summer:{brightness:10,contrast:14,saturate:18,tint:-46,blur:0,crossProcess:30,vignette:25},theBlues:{brightness:63,contrast:-37,saturate:-26,tint:0,blur:0,crossProcess:0,vignette:0},whimsical:{brightness:43,contrast:-15,saturate:-53,tint:-79,blur:0,crossProcess:60,vignette:21}};function v(e,t){return/(_watermark|_thumb|free-assets|uploads)/.test(e)&&(e=y(e,t)),e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u[e])return u[e];function r(){return new Promise(function(r,l){var c=new window.Image;if((n.i(o.C)(e)||t.crossOrigin)&&(c.crossOrigin=i.a.CROSS_ORIGIN),c.onload=function(){return a.a.dispatch(s.a.IMAGE_LOADED,{src:e}),r(c)},c.onerror=function(t){return u[e]=!1,l(t)},!0===window.jsdom)return r(c);c.src=e})}return u[e]=r(),u[e]}function y(e,t){var n=t||i.a.IMAGE_WIDTH,r=(e=e.replace(/\&{0,1}width=[0-9]{1,4}/,"")).split("?"),o="width=".concat(n);if(1===r.length)e="".concat(e,"?").concat(o);else{var a=r[1].split("&").filter(function(e){return e.length});a.push(o),a=a.join("&"),e=[r[0],a].join("?")}return e}function E(e){return e.replace(/\?{0,1}width=[0-9]{1,10}/,"")}function b(e,t){var r=document.createElement("img");n.i(o.C)(e)&&(r.crossOrigin=i.a.CROSS_ORIGIN),r.onload=function(){return t(r)},r.src=e}function w(e){return n.i(o.C)(e)?'crossorigin="'.concat(i.a.CROSS_ORIGIN,'"'):""}function _(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),t.toDataURL("image/png")}},function(e,t,n){"use strict";var r=n(11),i=n(16),o=n(99),a=n(120),s=n(2),u=n(14),l=n.n(u),c=n(13),f=n(0),h=n(17),p=n(45),d=n(1),g=n(30);function v(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)})}}var y={prepareNewPage:function e(t){n.i(i.b)(t)},placePageElements:function(){var e=m(regeneratorRuntime.mark(function e(t){var r,i,o,a=arguments;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:[],i=a.length>2&&void 0!==a[2]?a[2]:{},s.next=4,n.i(p.a)(r,i);case 4:return o=s.sent,!i.shallow&&y.prepareNewPage(t),o.forEach(function(e){t.placeElement(e,!0,!i.shallow)}),s.abrupt("return",o);case 8:case"end":return s.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changePageContent:function(){var e=m(regeneratorRuntime.mark(function e(t){var r,i,o,a,u=arguments;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:[],t.loadStatus=d.a.PAGE_LOAD_STATUS.loading,y.clearPage(t),l.next=5,y.placePageElements(t,r);case 5:return t.calculateInnerId(),i=t.getBounds(),o=n.i(s.a)("scaleRatio"),t.scaleElements(o/100,i),a=t.getElementMountJobs(),l.next=12,Promise.all(a);case 12:t.loadStatus=d.a.PAGE_LOAD_STATUS.ready;case 13:case"end":return l.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),dropElementTo:function e(t,r,o,a,u,l){var c,f=n.i(s.a)("scaleRatio")/100;return r.scale(f),(a||r.selected)&&(window.SELECTION_LOCK=!1),r.isBackgroundElement()?t.addBackground(r,a):c=t.addElement(r,o,a,u,l),!0===r.selected&&n.i(i.c)(r,!0,t),c},clearPage:function e(t){n.i(i.c)(null,!0,t),t.clearElements()},addPageElements:function e(t,n,r){n.forEach(function(e){y.addElementTo(t,e,!r)}),t.calculateInnerId()},setPageElements:function e(t,n,r){y.clearPage(t),y.addPageElements(t,n,r)},recreatePageElements:function e(t){var n=t.map(function(e){return y.createDesignElement(e.type,e)});return Promise.all(n)},addElementTo:function e(t,n,r){n.isBackgroundElement()?t.addBackground(n,r):t.placeElement(n,!0,r)},removeElement:function e(t,n){var r=l.a.get(t),i=l.a.get(n);"groupElement"===i.type&&i.children.forEach(function(e){var t=l.a.get(e.uuid);r.removeElement(t)}),r.removeElement(i)},changeElementState:function e(t,n,r){var i;return l.a.get(n.uuid).change(t,r)},createDesignElement:function e(t,i){return n.i(r.a)(t,i)},recreateElementFrom:function e(t,n,r){var i=l.a.get(r);return y.createDesignElement(t.type,t).then(function(e){return y.dropElementTo(i,e,n,!0),e})},moveElement:function e(t,r,i,o){var a=i.uuid;!r&&t?r=t:!t&&r&&(t=r);var u=l.a.get(t),c=l.a.get(r),h;if(!l.a.exists(a))return y.recreateElementFrom(i,o,r);var p=l.a.get(a);if(!o)return p.destroy(!0),n.i(f.N)();var d=c.getAbsolutePosition(o);if(u.has(p)){if(r===t)p.setPosition(d);else{u.removeElement(p);var g=n.i(s.a)("scaleRatio")/100;p.scale(1/g),y.dropElementTo(c,p,o,p.selected,!1,!0)}return n.i(f.N)()}},pullElement:function e(t){var n=t.pageUuid,r=t.designElementUuid,i=l.a.get(n),o=l.a.get(r),a=i.getElementsIntersection(o,"pull");return i.pullElement(a)},pushElement:function e(t){var n=t.pageUuid,r=t.designElementUuid,i=l.a.get(n),o=l.a.get(r),a=i.getElementsIntersection(o,"push");return i.pushElement(a)},doScaledCrop:function e(t,r,i,o){var a=l.a.get(t.uuid),s=l.a.get(r),u;JSON.stringify(i)===JSON.stringify({left:0,top:0,width:0,height:0})&&(y.startCrop(a,i,!0),a.cancelCrop()),i=n.i(f.O)(i),o=n.i(f.P)(o,s),y.startCrop(a,i,!1),y.setCrop(a,i),a.setPosition(o),n.i(c.a)(a)},performCrop:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];y.startCrop(t,t.cropOpts,r);var i=t.getBounds();return y.setCrop(t),n.i(c.a)(t),i},startCrop:function e(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s;return s="imageElement"===t.type?n.i(o.a)(t,i,r):n.i(a.a)(t),t.startCrop(s),s},setCrop:function e(t,n){return n||(n=t.cropOpts),0!==n.left||0!==n.top||n.width||n.height?(t.setCropPosition(n),t.setCrop()):(t.cropOpts={left:0,top:0,width:0,height:0},void t.cancelCrop())},dropGroupElement:function e(t,r){var i=n.i(s.a)("scaleRatio");t.selected=!0;var o=r.getDropMathPosition(t.position,i);if(t.scale(1/(i/100)),g.a.remove({uuid:t.uuid}),"groupElement"===t.type){var a=r.elements.map(function(e){return e.uuid});t.children=t.children.sort(function(e,t){return a.indexOf(e.uuid)-a.indexOf(t.uuid)})}this.dropElementTo(r,t,o,null),"persistGroupElement"===t.type&&(r.elements=n.i(h.f)(r.elements,t),r.redraw())},ungroupPersist:function e(t,r){r.elements=n.i(h.g)(r.elements,t),r.redraw(),t.children.forEach(function(e){r.placeElement(e,!1,!0)})}};t.a=y},function(e,t,n){"use strict";var r=n(54);function i(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,u,"next",e)}function u(e){i(a,r,o,s,u,"throw",e)}s(void 0)})}}function a(e){return e.reduce(function(e,t){for(var n=t.startIndex;n<=t.endIndex;n++)e[n]=t.value;return e},[])}function s(e,t,n){for(var r=e[0];r<e[1];r++)t[r]=n;return t}function u(e,t){var n=[],r=0;return n.push({startIndex:0,type:t,value:e[0],endIndex:0}),e.forEach(function(e,i){var o=n[r];e!==o.value?(n.push({startIndex:i,value:e,type:t,endIndex:i}),r++):o.endIndex=i}),n}function l(e,t,n){var r=a(e);return s(t,r,n),u(r,e[0].type)}function c(e,t){var n=e.map(a),r=[];return e[0].forEach(function(e){var i;"000000"===e.value&&(e.value="000001"),r.push('<font color="#'.concat(e.value,'">')),u(n[1].slice(e.startIndex,e.endIndex+1)).forEach(function(i){i.value&&r.push("<b>");var o=n[2].slice(e.startIndex,e.endIndex+1),a;u(o=o.slice(i.startIndex,i.endIndex+1)).forEach(function(n){n.value&&r.push("<i>");var o=n.endIndex-n.startIndex+1,a=i.startIndex+e.startIndex+n.startIndex,s=t.substr(a,o);r.push(s),n.value&&r.push("</i>")}),i.value&&r.push("</b>")}),r.push("</font>")}),r}function f(e){var t=[],n=[],r=[];function i(e,o){function a(){t.push(o.color),n.push(o.bold),r.push(o.italic)}var s;(o=o||{},3===e.nodeType&&o.color)&&E(T(e.textContent),a);E(e.childNodes,function(t){var n=e.getAttribute("color");i(t,{bold:o.bold||"B"===e.tagName,italic:o.italic||"I"===e.tagName,color:n?n.substr(1):o.color})})}return i(e),{boldMap:u(n,"bold"),italicMap:u(r,"italic"),colorMap:u(t,"color")}}function h(e,t,n){var r=a(e),i=r.slice(t.startIndex,t.endIndex+1);return i.length||(i=r),t.startIndex-t.endIndex==1?-1===t.endIndex?r[t.startIndex]:r[t.endIndex]:i.every(function(e){return n?e===n:e===i[0]})}function p(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function d(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}function g(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function v(e,t){var n=a(e),r;return t.startIndex-t.endIndex==1?-1===t.endIndex?[n[t.startIndex]]:[n[t.endIndex]]:n.slice(t.startIndex,t.endIndex+1).reduce(function(e,t){return-1===e.indexOf(t)&&e.push(t),e},[])}function m(e,t){var n=0,r=e.getRangeAt(0),i=r.startContainer,o=!1;function a(e){e===i||o?o=!0:(e.innerText||E(e,function(){n++}),Array.from(e.childNodes).forEach(a))}return a(t),n+r.startOffset}function y(e,t,n){var r=0,i=(t.innerText||t.textContent).length,o,a;function s(t){t.innerText||(o=t,E(t,function(i,o){if(r===e&&!a)return n(t,o),a=!0,!1;r++})),E(t.childNodes,s)}s(t),a||r!==i||n(o,o.length)}function E(e,t){for(var n=0;n<e.length;n++){var r;if(!1===t(e[n],n))break}}function b(e,t,n){return t===e.length&&"\n"===n&&"\n"!==e[e.length-1]?e+n+n:[e.slice(0,t),n,e.slice(t)].join("");var r}function w(e,t,n){return t>0?e.substring(0,t+1)+n+e.substring(t+1,e.length):n+e}function _(e,t,n,r){y(e,t,function(e,t){var i=e.parentNode.innerText||e.parentNode.textContent;""!==n&&(e.parentNode.innerText=b(i,t,n)),r&&r(e,t)})}function P(e,t,n,r){if(n||0===n||(n=e,r=t),document.createRange){var i=document.createRange();(++e>=t.length||e===n)&&e--,i.setStart(t,e),i.setEnd(r,n);var o=window.getSelection();return o.removeAllRanges(),o.addRange(i),i.getBoundingClientRect().height}return 0}function S(e,t){var n;return a(e)[t]}function A(e,t){var n=0,r=[];function i(e){r.includes(e)||r.push(e)}var o="forward";"\n"===t[0]&&E(t,function(e,t){if("\n"!==e)return!1;i(t)});for(var a=-1;a<t.length-1;){if(++n>1e3)throw new Error("out of tryouts, content: ".concat(a,", text: ").concat(t.length));e.modify("extend","forward","lineboundary"),i((a=e.getRangeAt(0).toString().length)-1),e.modify("extend","forward","character")}return r}function O(e,t,n){var r=window.getSelection();if(r.modify)return A(r,t,n);var i=[],o=0,a=n,s,u=2;function l(e){e.innerText||(s||(s=e),E(e,function(n,r){var l=P(0,s,r,e),c="\n"===t[o-u];if(l!==a||c){var f=c?-1:0;i.push(o-u+f),a=l}o++})),E(e.childNodes,l)}l(e);var c=t.length-1;return i.includes(c)||i.push(c),i}function C(e,t){if(!window.getSelection&&!document.body.createTextRange)return t();window.setTimeout(function(){var n,r;window.getSelection&&document.createRange?((r=document.createRange()).selectNodeContents(e),(n=window.getSelection()).removeAllRanges(),n.addRange(r)):document.body.createTextRange&&((r=document.body.createTextRange()).moveToElementText(e),r.select()),t&&t()},1)}function x(e){return new Promise(function(t){var n=e.clientHeight,r=10,i=50,o=0,a=setInterval(function(){if(10===++o||e.clientHeight!==n)return clearInterval(a),t()},50)})}function T(){var e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/>/g,"&gt;")}function I(){var e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&gt;/g,">")}function k(e,t){var n=I(t),r=n.slice(0,e.startIndex),i=n.slice(e.startIndex,e.endIndex+1),o=T(r).length,a;return{startIndex:o,endIndex:o+T(i).length-1}}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.replace(/<span>(\s+|.*?)<\/span>/g,function(e,t){return t});var n="<span>";return t.shouldSetInlineStyle&&(n='<span style="word-break: break-all">'),e=e.replace(/[^\S\n][^\S\n]+/g,function(e){return[n," ".repeat(e.length),"</span>"].join("")})}function R(e,t){var n;return a(e).slice(t.startIndex,t.endIndex+1)}function M(e,t,n){return e.boldMap=e.boldMap.map(function(r,i){var o;return r===t.boldMapValue&&e.italicMap[i]===t.italicMapValue?(e.italicMap[i]=n.italicMapValue,n.boldMapValue):r}),e}function F(e,t){var n={regular:{boldMapValue:!1,italicMapValue:!1},bold:{boldMapValue:!0,italicMapValue:!1},italic:{boldMapValue:!1,italicMapValue:!0},boldItalic:{boldMapValue:!0,italicMapValue:!0}},r=Object.keys(n),i=r.filter(function(t){return!e[t]});if(!i.length)return t;var o=r.find(function(t){return e[t]}),s=n[o],l={boldMap:a(t.boldMap),italicMap:a(t.italicMap)};return i.forEach(function(e){var t;M(l,n[e],s)}),{boldMap:u(l.boldMap,"bold"),italicMap:u(l.italicMap,"italic")}}function L(e,t){var n=I(e).substr(0,t-1),r;return T(n).length-n.length}function N(e,t){return T(I(e).substr(0,t)).length}function j(e,t){var n=a(e);return n.splice(t[0],t[1]-t[0]),n.length||(n=[e[0].value]),u(n,e[0].type)}function B(e,t,n){var r=a(e),i=t[1]-t[0],o=new Array(i).fill(n),s=[t[0],0].concat(o);return r.splice.apply(r,s),u(r,e[0].type)}function z(e){return/[\u0591-\u07FF]/.test(e)}function H(e,t){var n=e.replace(t,"");return{count:e.length-n.length,trimmed:n}}function U(e){var t;return H(e,/\s*$/g)}function W(e){var t;return H(e,/^\s*/g)}function G(e){return Array(e+1).join(" ")}function V(e,t){var n;return G(t)+e}function Y(e,t){var n;return e+G(t)}function K(e){return q.apply(this,arguments)}function q(){return(q=o(regeneratorRuntime.mark(function e(t){var n,i,a,s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:for(n=[],i=/"http(s):\/\/.*"/g,s=function e(){var t=a[0].replace(/"/g,"");n.push(new Promise(function(){var e=o(regeneratorRuntime.mark(function e(n){var i,o,a,s;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.a.getBlob(t);case 2:i=u.sent,o=t.split("."),a=o[o.length-1],s=btoa(new Uint8Array(i).reduce(function(e,t){return e+String.fromCharCode(t)},"")),n({string:s,format:a});case 7:case"end":return u.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()))};null!=(a=i.exec(t));)s();return l.next=6,Promise.all(n);case 6:return(u=l.sent).forEach(function(e){t=t.replace(/"http(s):\/\/.*\"\)/,'"data:application/x-font-'.concat(e.format,";charset=utf-8;base64,").concat(e.string,'")'))}),l.abrupt("return",t);case 9:case"end":return l.stop()}},e,this)}))).apply(this,arguments)}n.d(t,"l",function(){return l}),n.d(t,"a",function(){return E}),n.d(t,"m",function(){return m}),n.d(t,"u",function(){return P}),n.d(t,"k",function(){return S}),n.d(t,"y",function(){return C}),n.d(t,"v",function(){return f}),n.d(t,"o",function(){return v}),n.d(t,"i",function(){return c}),n.d(t,"n",function(){return h}),n.d(t,"r",function(){return b}),n.d(t,"p",function(){return w}),n.d(t,"z",function(){return K}),n.d(t,"d",function(){return z}),n.d(t,"C",function(){return O}),n.d(t,"s",function(){return L}),n.d(t,"H",function(){return N}),n.d(t,"x",function(){return x}),n.d(t,"t",function(){return _}),n.d(t,"q",function(){return T}),n.d(t,"g",function(){return I}),n.d(t,"B",function(){return p}),n.d(t,"E",function(){return g}),n.d(t,"D",function(){return d}),n.d(t,"c",function(){return U}),n.d(t,"b",function(){return W}),n.d(t,"f",function(){return V}),n.d(t,"e",function(){return Y}),n.d(t,"j",function(){return k}),n.d(t,"h",function(){return D}),n.d(t,"A",function(){return R}),n.d(t,"w",function(){return F}),n.d(t,"F",function(){return j}),n.d(t,"G",function(){return B})},function(e,t,n){"use strict";var r=n(94),i=n(95),o=n(87),a=n(88),s=n(85),u=n(91),l=n(84),c=n(97),f=n(83),h=n(79),p=n(86),d=n(0),g=n(2),v=n(101);function m(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function y(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)})}}function E(e){var t=document.createElement("div"),n=e.template(),r=document.createElement("div");return t.innerHTML=n||"",t.style.width="100%",t.style.height="100%",t.style.userSelect="none",t.style.position="relative",t.setAttribute("uuid",e.uuid),r.className="rotation-overlay dashed-hoverable cursor-move",r.appendChild(t),r}t.a=P;var b={textElement:i.a,svgElement:r.a,imageElement:o.a,coloredBackground:h.a,maskElement:a.a,illustrationElement:p.a,groupElement:s.a,persistGroupElement:u.a,gifElement:l.a,videoElement:c.a,dummyElement:f.a,templateElement:!0};function w(e,t){return _.apply(this,arguments)}function _(){return(_=y(regeneratorRuntime.mark(function e(t,r){var i,o,a,s=arguments;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(r=n.i(d.p)(r)).shallow=i,r.type=t,n.i(d.Q)(r),u.next=7,n.i(v.a)(r.type,r);case 7:return r=u.sent,o=new b[r.type](r),a=E(o),u.next=12,o.setEl(a);case 12:return r.systemId&&o.el.setAttribute("data-systemId",r.systemId),u.abrupt("return",o);case 14:case"end":return u.stop()}},e,this)}))).apply(this,arguments)}function P(e,t,n,r){return S.apply(this,arguments)}function S(){return(S=y(regeneratorRuntime.mark(function e(t,r,i,o){var a,s,u,l,c;return regeneratorRuntime.wrap(function e(f){for(;;)switch(f.prev=f.next){case 0:if(b[t]){f.next=2;break}throw new Error("Unknown element type: ".concat(t));case 2:if(o&&(r.templateAsset=!0),"templateElement"!==t){f.next=14;break}if(a=n.i(g.a)("scaleRatio")/100,s={width:n.i(g.a)("pageWidth")/a,height:n.i(g.a)("pageHeight")/a},u=s.width/r.width,n.i(d.n)(s.width/r.width,s.height/r.height,.1)||r.allowToIgnoreTemplateScaleRatio){f.next=9;break}throw new Error("Template can't be mounted - ratio is not respected");case 9:return l=r.elements.map(function(e){return delete e.uuid,e.templateAsset=!0,w(e.type,e,!1,i)}),f.next=12,Promise.all(l);case 12:return c=f.sent,f.abrupt("return",{type:"templateElement",id:r.id,elements:c,realPageRatio:u});case 14:return f.abrupt("return",w(t,r,i));case 15:case"end":return f.stop()}},e,this)}))).apply(this,arguments)}},function(e,t,n){"use strict";var r=n(1),i=n(10),o=n(6),a=n(4),s=n(3);function u(e){var t=e.width,n=e.height;return[{left:-r.a.MOVE_OUTER_PADDING,top:-r.a.MOVE_OUTER_PADDING,width:t+2*r.a.MOVE_OUTER_PADDING,height:n+2*r.a.MOVE_OUTER_PADDING,mark:"n"}]}function l(e,t){return e.style.left="".concat(t.left,"px"),e.style.top="".concat(t.top,"px"),e.style.position="absolute",e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.setAttribute("move",!0),e.setAttribute("data-test","move"),e.setAttribute("mark",t.mark),e.style.zIndex=-1,e.classList.add("cursor-move"),e}e.exports={setOverlayDimension:function e(t,r,o){var a=r.overlay.querySelector('[data-overlay="select"]');a||(a=r.overlay),a.style[t]="".concat(o,"px");var s=r.overlay.querySelectorAll("[move]"),c=u(r);n.i(i.a)(s,function(e){var t=e.getAttribute("mark"),n;l(e,c.filter(function(e){return t===e.mark})[0])})},setPosition:function e(t,n){t.overlay.style.left="".concat(n.left,"px"),t.overlay.style.top="".concat(n.top,"px")},setAngle:function e(t,n,r){var i=r;i||(i={x:t.width/2,y:t.height/2}),t.overlay.style.transformOrigin="".concat(i.x,"px ").concat(i.y,"px"),t.overlay.style.transform="rotateZ(".concat(n,"rad)")},removeOverlay:function e(t){o.a.removeElement(t.overlay),t.selected&&a.a.dispatch(s.a.RELEASE_PROXY)},appendPoint:function e(t,n){t.overlay.querySelector('[data-overlay="select"]').appendChild(n)},setStyleFor:l,getMoveElementsPosition:u}},function(e,t,n){"use strict";var r=n(0),i=n(22),o=n(15),a=n(1),s=n(6),u=n(5),l=n(3),c=n(4),f=n(2),h=n(12),p=n.n(h),d=n(18),g=n(127);n.d(t,"a",function(){return x}),n.d(t,"d",function(){return C}),n.d(t,"c",function(){return _}),n.d(t,"b",function(){return S}),n.d(t,"e",function(){return A});var v=a.a.OVERLAY_ROTATION_CONTROL_SIZE/2,m=180,y={render:function e(t,n){var r=n.useOriginalAngleForOverlay?n.originalAngle:n.angle,i=t.getAttribute("direction"),o=a.a.OVERLAY_ROTATION_CONTROL_SIZE,s=o/2,u;switch(i){case"nw":u={left:-s,top:-s};break;case"ne":u={left:o,top:-s};break;case"se":u={left:o,top:o};break;case"sw":u={left:-s,top:o};break;default:throw new Error("Unknown rotate direction")}var l=360,c=Math.round(r*(180/Math.PI));Math.abs(c)>360&&(c%=360),c<0&&(c+=360),c>=360&&(c-=360),t.innerHTML='<div\n\t\t\tclass="designer-anglebox"\n\t\t\tdata-test="anglebox"\n\t\t\tstyle="left: '.concat(u.left,"px; top: ").concat(u.top,"px; transform: rotateZ(").concat(-c,'deg)"\n\t\t>\n\t\t\t').concat(c,"\n\t\t</div>")},hide:function e(t){t.innerHTML=""}},E={getData:function e(t){if(!t.hasRotationControls||t.locked)return[];var n=[],r=a.a.MIN_FULL_CONTROLS_SIZE;return(t.width<r||t.height<r)&&n.push("se"),[{left:0,top:0,type:"ro",test:"rotate",direction:"nw"},{left:t.width-1,top:0,type:"ro",test:"rotate",direction:"ne"},{left:t.width-1,top:t.height-1,type:"ro",test:"rotate",direction:"se"},{left:-1,top:t.height-1,type:"ro",test:"rotate",direction:"sw"}].map(function(e){return n.length&&!n.includes(e.direction)&&(e.hidden=!0),e})},getNodes:function e(t){if(t.overlay)return Array.from(t.overlay.querySelectorAll('[data-control-type="rotation"]'))},mount:function e(t){var n=E.getData(t),r=[];return n.forEach(function(e){var n=o.a.getControlNode(e,{isRotationControl:!0,direction:e.direction},t);n.setAttribute("data-type","control"),n.setAttribute("data-control-type","rotation"),p.a.appendPoint(t,n),r.push(n)}),L(t),r},unMount:function e(t){var n;E.getNodes(t).forEach(function(e){s.a.removeElement(e)})},addEvents:function e(t){var i=E.getNodes(t),o=E.getData(t);i.forEach(function(e,a){s.a.attachEvent(e,"mousedown",function f(h){function p(o){var a=t.getBounds(),s=n.i(r.d)(t,"n").edge,u=n.i(r.d)(t,"nw").edge,l=n.i(r.c)(e);if(t.transformOrigin){var c={x:u.x+t.transformOrigin.x,y:u.y+t.transformOrigin.y},f=n.i(r.e)(c,u,t.originalAngle);a.center=f}var h=F(a,{left:o.pageX,top:o.pageY},l,s,u,t.angle),p=n.i(g.a)(h),d="setAngleStateful";t.change(d,{angle:p}),y.render(e,t),x(t),E.setActualControlArrow(t,i,e,!0)}h.preventDefault();var d=o[a];if(t.locked)u.a.log("designElement locked, wont to anything...");else{e.setAttribute("data-rotating",!0),t.onResizeStart(d.type,e),window.SELECTION_LOCK=!0,u.a.log("Attaching mouse events to halo controls..."),s.a.attachEvent(null,"mousemove",p);var v=function e(){"cropElement"===t.type||t.cropping||(window.SELECTION_LOCK=!1)};s.a.attachEvent(null,"mouseup",function n(){u.a.log("Removing mouse events from halo controls..."),e.removeAttribute("data-rotating"),L(t),y.hide(e),c.a.dispatch(l.a.SAVE_STATE,{type:l.a.ELEMENT_CHANGE_STATE}),t.onResizeEnd(d.type,e),s.a.detachEvent("mousemove",p),s.a.detachEvent("mouseup",n),x(t),setTimeout(v,100)})}},!1,!1)})},setActualControlArrow:function e(t,i,o,a){var s=n.i(r.f)(i,o);if(s!==o.className&&(o.className=s,a))return t.onResizeMove("ro",o)},rearrange:function e(t){if(t.overlay){t.locked&&b.clearArrows(Array.from(t.overlay.querySelectorAll("[kind]")));var r=E.getData(t),i=E.getNodes(t);i.length&&i.forEach(function(e,i){var a=r[i];if(!a)return s.a.removeElement(e);var u=o.a.getControlNodeStyle(a,{isRotationControl:!0},t);n.i(d.a)(e,u),e.style.left="".concat(a.left-v,"px"),e.style.top="".concat(a.top-v,"px")})}}},b={resolveArrows:function e(t,r,o){r.forEach(function(e){var r=o,a=t.angle;t.useOriginalAngleForOverlay&&(a=t.originalAngle);var s=Math.round(a*(180/Math.PI));switch(r||"ro"===(r=e.getAttribute("kind"))&&(r=e.getAttribute("direction")),r){case"n":case"s":s+=90;break;case"ne":case"sw":s-=45;break;case"nw":case"se":s+=45}var u=n.i(i.a)(s);e.style.cursor="url('data:image/svg+xml;utf8,".concat(u,"') 10 10, auto")})},clearArrows:function e(t){t.forEach(function(e){return e.style.removeProperty("cursor")})},getData:function e(t){var n=t.getControlsFilter();if(!n.length)return[];var r=a.a.MIN_FULL_CONTROLS_SIZE;"cropElement"!==t.type&&(t.width<r||t.height<r)&&(n=["se"]);var i=t.height,o=t.width;return[{left:0,top:0,type:"nw",test:"nw-resize",direction:"nw"},{left:o,top:0,type:"ne",test:"ne-resize",direction:"ne"},{left:0,top:i,type:"sw",test:"sw-resize",direction:"sw"},{left:o,top:i,type:"se",test:"se-resize",direction:"se"},{left:o,top:i/2,type:"e",test:"e-resize",direction:"e"},{left:0,top:i/2,type:"w",test:"w-resize",direction:"w"},{left:o/2,top:0,type:"n",test:"n-resize",direction:"n"},{left:o/2,top:i,type:"s",test:"s-resize",direction:"s"}].map(function(e){return n.includes(e.type)&&!t._resizing||(e.hidden=!0,n.includes(e.type)||(e.disabled=!0)),e})},getNodes:function e(t){return Array.from(t.overlay.querySelectorAll('[data-control-type="resize"]'))},mount:function e(t){var i=[],a;return b.getData(t).forEach(function(e){var a=o.a.getControlNode(e,{},t);a.setAttribute("data-type","control"),a.setAttribute("data-control-type","resize"),p.a.appendPoint(t,a);var s="locked";if(!t.locked){var u=t.getBounds();s=n.i(r.g)(u.center,t.width,t.height,a)}a.className=s,i.push(a)}),i},unMount:function e(t){var n;b.getNodes(t).forEach(function(e){s.a.removeElement(e)})},addEvents:function e(t){var i=b.getNodes(t),o=b.getData(t);u.a.log("Resizable: Attaching events for resize controls..."),i.forEach(function(e,i){s.a.attachEvent(e,"mousedown",function a(f){if(f.preventDefault(),t.locked)u.a.log("designElement locked, wont to anything...");else{var h=E.getNodes(t),p=Array.from(t.overlay.querySelectorAll("[move],.cursor-move")),d=h.concat(p);b.resolveArrows(t,d,e.getAttribute("kind"));var g=e.getAttribute("halo")?"data-rotating":"data-resizing";e.setAttribute(g,!0);var v,m=o[i].type;t.onResizeStart(m,e),window.SELECTION_LOCK=!0;var y={x:f.pageX,y:f.pageY};s.a.attachEvent(null,"mousemove",w),s.a.attachEvent(null,"mouseup",function n(){u.a.log("Removing resize mouse events..."),e.removeAttribute("data-resizing"),b.clearArrows(d),c.a.dispatch(l.a.SAVE_STATE,{type:l.a.ELEMENT_CHANGE_STATE}),t.onResizeEnd(m,e),s.a.detachEvent("mousemove",w),s.a.detachEvent("mouseup",n),setTimeout(function(){return x(t)},300),setTimeout(P,100)})}function w(e){_(e,m)}function _(i,o){var a={x:i.pageX,y:i.pageY},s,u,l;if(t.cropping){var c=n.i(r.d)(t,o).edge,f=n.i(r.h)(t,o,"X"),h=n.i(r.i)(c,a,f.edge,c),p;if((t.sticked||[]).find(function(e){return-1!==o.indexOf(e)})&&h<0)return void(y=a)}(t.underlyingEl||t.el).style.transformOrigin=n.i(r.j)(t,o,!1).transformOrigin;var d={ratio:s=!1!==t.proportionalResize?{xRatio:s=I(t,o,a,y),yRatio:s}:(l=R(t,o,a)).ratio,controlType:o,mousePosition:a};d.resizeData=l,k(t,d),t.onResizeMove(o,e),y={x:i.pageX,y:i.pageY},x(t)}function P(){"cropElement"===t.type||t.cropping||"shadowImageElement"===t.type||(u.a.log("Resizable: Unlocking selection..."),window.SELECTION_LOCK=!1)}},!1,!1)})},rearrange:function e(t){var i;if(t.overlay&&t.overlay.querySelector('[data-overlay="select"]')){var a=b.getData(t),s;b.getNodes(t).forEach(function(e,i){var s=a[i],u={},l=o.a.getControlNodeStyle(s,u,t);n.i(d.a)(e,l),Object.keys(u).forEach(function(t){e.setAttribute(t,u[t])});var c="locked";if(!t.locked){var f=t.getBounds();c=n.i(r.g)(f.center,t.width,t.height,e)}e.className=c,s.disabled?(e.style.visibility="hidden",e.style.opacity=0):"ro"===s.type&&s.hidden?e.setAttribute("data-hidden"):(e.style.visibility="visible",e.style.opacity=1,e.removeAttribute("data-hidden"))})}}};function w(e){if(e.overlay){var t=o.a.getOverlayStyle(e),r=e.overlay.childNodes[0],i=a.a.CLASS_NAMES.overlayBackgroundLabel;if(r)if(n.i(d.a)(r,t),e.shouldHaveBackgroundLabelAtOverlay())o.a.addBackgroundLabel(e,r);else{var s=r.querySelector(".".concat(i));s&&r.removeChild(s)}}}function _(e){E.unMount(e),E.mount(e),E.addEvents(e),E.rearrange(e)}function P(e){b.unMount(e),b.mount(e),b.addEvents(e),b.rearrange(e)}function S(e){E.unMount(e)}function A(e){if(!e.overlay)throw new Error("Overlay should be set for Resizable");P(e),_(e),w(e)}function O(e){return b.getData(e)}function C(e){L(e)}function x(e){e.overlay&&(e.shouldHideOverlay()&&!e.overlay.hasAttribute("data-hidden")?e.overlay.setAttribute("data-hidden",!0):e.overlay.hasAttribute("data-hidden")&&!e.shouldHideOverlay()&&e.overlay.removeAttribute("data-hidden"),b.rearrange(e),E.rearrange(e),w(e))}function T(e,t,i){var o=n.i(r.k)(i,t).distance,a=Math.abs(n.i(r.i)(i,e,t,i)),s;return{ratio:a/o,delta:o-a}}function I(e,t,i,o){var a=n.i(r.j)(e,t),s=n.i(r.d)(e,t),u,l=n.i(r.k)(a.edge,o).distance,c,f,h=n.i(r.k)(a.edge,i).distance/l,p;return n.i(r.i)(i,a.edge,s.edge,a.edge)<0?1:h}function k(e,t){var n,r=t.ratio,i=t.controlType;!1!==e.proportionalResize?n=D(e,i,r.xRatio):(r=n=t.resizeData,e.setTransform("scale","".concat(r.xRatio,", ").concat(r.yRatio))),M(e,n,i);var o=e.checkResizeInnerStopPoints(!0);return o&&M(e,o,i),{xRatio:1/r.xRatio,yRatio:1/r.yRatio}}function D(e,t,n){var r=!0,i=!0,o=e.shouldScaleBothSides(t,n);if(["w","e"].includes(t)&&!o)r=!1,e.setTransform("scale","".concat(n,", 1"));else if(["n","s"].includes(t)&&!o){i=!1;var a=1;e.setTransform("scale","".concat(1,", ").concat(n))}else e.setTransform("scale","".concat(n,", ").concat(n));return{setHeight:r,setWidth:i,yRatio:n,xRatio:n}}function R(e,t,i){var o=1,s=1,u=!0,l=!0,c=n.i(f.a)("scaleRatio")/100,h=n.i(r.d)(e,t).edge,p,d,g;if(-1===["w","e"].indexOf(t)){var v,m,y;if(s=T(i,h,n.i(r.h)(e,t,"Y").edge).ratio,e.height*s<a.a.MIN_SIZE*c&&s<1)s=a.a.MIN_SIZE*c/e.height;1===s&&(u=!1)}-1===["n","s"].indexOf(t)&&(o=T(i,h,n.i(r.h)(e,t,"X").edge).ratio,e.width*o<a.a.MIN_SIZE*c&&o<1&&1===(o=a.a.MIN_SIZE*c/e.width)&&(l=!1));return{setHeight:u,setWidth:l,xRatio:o,yRatio:s}}function M(e,t,r){var i=e.getBounds(),o,s,u,l,c,h;o=t.setWidth,s=t.setHeight,u=t.xRatio,l=t.yRatio,c=t.deltaX,h=t.deltaY,e.removeTransform("scale");var d=e.width,g=e.height,v=e.originalImageWidth,m=e.originalImageHeight;o&&(d*=u,v*=u),s&&(g*=l,m*=l);var y=n.i(f.a)("scaleRatio")/100;if(!1!==e.proportionalResize&&u<1&&(d<a.a.MIN_SIZE*y||g<a.a.MIN_SIZE*y&&"textElement"!==e.type))return{};var E={newWidth:d,newHeight:g,afterScaleCoords:i,deltaX:c,newOriginalImageHeight:m,newOriginalImageWidth:v,deltaY:h,handle:r,ratio:u},b="resize";e.change(b,E),e.checkAndResetOverlap(d,g),"cropElement"===e.type&&p.a.setAngle(e,e.originalAngle)}function F(e,t,i,o,a,s){var u=t.left,l=t.top,c={x:e.center.x,y:e.center.y},f=o,h={x:u,y:l},p={x:i.center.x,y:i.center.y},d=n.i(r.l)(c,p),g=n.i(r.l)(c,f),v=n.i(r.l)(c,h),m=n.i(r.m)(d,v),y,E,b;return m=n.i(r.m)(d,g)-n.i(r.m)(v,g),n.i(r.i)(o,h,o,a)<0&&(m=-m),s+=m}function L(e){var t=E.getNodes(e),n=b.getNodes(e);b.resolveArrows(e,n),t.forEach(function(n){E.setActualControlArrow(e,t,n)})}},function(e,t){var n={};e.exports={bind:function e(t,r){if(n[t])throw new Error("Item with this uuid is already bound: ",n[t]);n[t]=r},get:function e(t){if(!n[t])throw new Error("No such item with uuid ".concat(t,". Please check your code"));return n[t]},exists:function e(t){return!!n[t]},remove:function e(t){if(!n[t])throw new Error("Cannot remove item with uuid ".concat(t,". Item does not exist"));delete n[t]},getAll:function e(){return n},clearAll:function e(){n={}}}},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(0),a=n(12),s=n.n(a),u=n(18),l=n(10),c=n(6);function f(e,t){var r=e.getBounds(),i=n.i(o.c)(t),a=e.width,s=e.height,u;return{left:r.center.x-a/2-i.left+t.scrollLeft,top:r.center.y-s/2-i.top+t.scrollTop}}function h(e,t){var n;return f(e,t)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vertical",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=n.i(i.a)("workspace"),c=n.i(o.c)(l),f=document.createElement("div");u.label&&f.setAttribute("data-snap",u.label);var h=t.width,p=t.height,d=l.scrollTop,g=l.scrollLeft,v=t.left-c.left+g,m=t.top-c.top+d,y="solid 1px ".concat(r.a.SNAP_COLOR),E;f.style.left="".concat(v,"px"),f.style.top="".concat(m,"px"),f.style.position="absolute","horizontal"===e?(s.left<t.left?(v=s.left-c.left+g,h=t.right-s.left):h=s.right-t.left,h<t.width&&(h=t.width),f.style.left="".concat(v,"px"),f.style.width="".concat(h-1,"px"),f.style.top="".concat(a.y-c.top+d,"px"),f.style.borderBottom=y):(s.top<t.top?(m=s.top-c.top+d,p=t.bottom-s.top):p=s.bottom-t.top,p<t.height&&(p=t.height),f.style.height="".concat(p-1,"px"),f.style.left="".concat(a.x-c.left+g,"px"),f.style.top="".concat(m,"px"),f.style.borderLeft=y),n.i(i.a)("overlaysNode").appendChild(f),l.scrollTop=d,l.scrollLeft=g}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=r.a.OVERLAY_RESIZE_CONTROL_SIZE,o=r.a.BORDER_SIZE,a=e.left,s=e.top,u="block",l="border-box",c=1,f=r.a.CIRCLE_BORDER_COLOR,h=r.a.BLUE_COLOR,p=0,d=!0,g="visible";if(n.cropping?h=r.a.BLACK_COLOR:n.locked?(i=r.a.LOCKED_CONTROL_SIZE,h=r.a.WHITE_COLOR,f=r.a.PINK_COLOR,o=r.a.LOCKED_BORDER_SIZE):t.isRotationControl&&(i=e.hidden?0:r.a.OVERLAY_ROTATION_CONTROL_SIZE,o=0,h="transparent",c=0),-1===["n","w","s","e"].indexOf(e.type)||n.locked?(p=i/2,("cropElement"===n.type||"maskElement"===n.type&&n.cropping)&&(o=0,p=0,h="transparent",t.cropcontrol=!0,i=r.a.LOCKED_CONTROL_SIZE+4,d=!1)):(f=r.a.BLUE_COLOR,h=r.a.WHITE_COLOR,"cropElement"===n.type&&(f=r.a.BLACK_COLOR,i=r.a.NWSE_CROP_SIZE,h=r.a.WHITE_COLOR,o=1)),d)a=a-i/2-o/2,s=s-i/2-o/2;else{var v=i;a=0===a?-i/4:a-.75*i,s=0===s?-i/4:s-.75*i}return{position:"absolute",zIndex:c,display:"block",border:"".concat(o,"px solid ").concat(f),left:"".concat(a,"px"),top:"".concat(s,"px"),boxSizing:l,borderRadius:"".concat(p,"px"),backgroundColor:h,width:"".concat(i,"px"),height:"".concat(i,"px"),visibility:"visible",pointerEvents:"auto"}}function g(e){var t=r.a.BLUE_COLOR;e.locked?t=r.a.PINK_COLOR:e.cropping&&(t=r.a.BLACK_COLOR),e.shouldHideOverlay()&&(t="rgba(255,255,255, 0)");var n="1px dashed ".concat(t);return"cropElement"===e.type&&(n="none"),{borderColor:t,border:n}}var v={addOverlaysContainer:function e(){var t=n.i(i.a)("workspace"),r=document.createElement("div");r.style.overflow="hidden",r.style.position="absolute",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.left=0,r.style.top=0,r.setAttribute("data-overlays",!0),c.a.attachElement(r,t),n.i(i.b)("overlaysNode",r),v.stretchOverlaysContainer()},stretchOverlaysContainer:function e(){var t=n.i(i.a)("workspace"),r=n.i(i.a)("overlaysNode");r.style.width="0px",r.style.height="0px";var o=t.scrollWidth,a=t.scrollHeight;r.style.width="".concat(o,"px"),r.style.height="".concat(a,"px")},getOverlayPositionWithRotationControls:f,getOverlayPosition:h,getControlNodeStyle:d,getOverlayStyle:g,getSelectionOverlay:function e(t,n){var r=document.createElement("div"),i=document.createElement("div"),o=t.width,a=t.height,u=h(t,n);r.appendChild(i),r.style.position="absolute",r.style.left="".concat(u.left,"px"),r.style.top="".concat(u.top,"px"),r.style.width=0,r.style.height=0,r.style.zIndex=1e3,r.style.boxSizing="padding-box",r.style.pointerEvents="auto",i.style.width="".concat(o,"px"),i.style.height="".concat(a,"px"),i.style.position="absolute";var l=g(t).borderColor;return"cropElement"!==t.type&&(i.style.border="dashed 1px ".concat(l)),"shadowImageElement"===t.type&&r.setAttribute("data-crop-element",!0),"textElement"===t.type&&(i.style.pointerEvents="none"),!1!==t.hasRotationControls&&s.a.getMoveElementsPosition(t).forEach(function(e){var t=document.createElement("a");s.a.setStyleFor(t,e),r.appendChild(t)}),i.classList.add("cursor-move"),i.setAttribute("data-overlay","select"),r.setAttribute("uuid",t.uuid),r},addBackgroundLabel:function e(t,i){var a=r.a.CLASS_NAMES.overlayBackgroundLabel,s=n.i(o.c)(t.el),u=n.i(o.c)(t.el.parentNode),l=i.querySelector(".".concat(a)),c=document.createElement("div"),f={top:u.top-s.top,left:u.left-s.left};c.className=a,Object.keys(f).forEach(function(e){c.style[e]="".concat(f[e],"px")}),null===l?i.appendChild(c):(i.removeChild(l),i.appendChild(c)),t.backgroundLabel=c},clearHighlights:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=document.querySelectorAll('[data-overlay="highlight"]');Array.from(n).forEach(function(e){t.except!==e&&c.a.removeElement(e)})},highlight:function e(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0,u=n.i(i.a)("overlaysNode");if(a&&v.clearHighlights({except:t.overlay}),!o){"textElement"===t.type&&t.checkDimensions(!1,!0);var l=f(t,u),e=document.createElement("div");e.style.border=s?"1px dashed white":"1px dashed lightgray";var c=t.width,h=t.height;e.style.width="".concat(c,"px"),e.style.height="".concat(h,"px"),e.setAttribute("data-overlay","highlight"),e.style.pointerEvents="none",e.style.position="absolute",s&&(e.style.opacity="0.2",e.style.backgroundColor=r.a.HOVER_OVERLAY_COLOR),e.style.transform="rotateZ(".concat(t.angle,"rad)"),e.style.left="".concat(l.left,"px"),e.style.top="".concat(l.top,"px"),t.shouldHaveBackgroundLabelAtOverlay()&&v.addBackgroundLabel(t,e);var p=-(r.a.LOCKED_CONTROL_SIZE+1)/2;return t.locked&&[{left:p,top:p},{right:p,top:p},{right:p,bottom:p},{left:p,bottom:p}].forEach(function(t){var n=document.createElement("div");Object.keys(t).forEach(function(e){n.style[e]="".concat(t[e],"px")}),n.className="locked",n.style.border="0.2px solid ".concat(r.a.BLACK_COLOR),n.style.borderRadius="".concat(r.a.LOCKED_CONTROL_SIZE,"px"),n.style.backgroundColor="".concat(r.a.WHITE_COLOR),n.style.width="".concat(r.a.LOCKED_CONTROL_SIZE,"px"),n.style.height="".concat(r.a.LOCKED_CONTROL_SIZE,"px"),n.style.position="absolute",e.appendChild(n)}),u.appendChild(e),e}var d=t.overlay;d&&(d.parentNode&&d.parentNode.removeChild(d),t.overlay=null)},setBoundingMarker:function e(t,n){if(window&&!0===window.DEBUG){var r=document.querySelector('[marker="'.concat(n,'"]'));r&&r.remove();var i=document.createElement("div"),o;o=t.getBounds?t.getBounds(!1):t,i.setAttribute("marker",n),i.style.position="absolute",i.style.width=o.width,i.style.height=o.height,i.style.left=o.left,i.style.zIndex=0,i.style.pointerEvents="none",i.style.top=o.top,i.style.border="solid 3px ".concat(n),document.body.appendChild(i)}},getControlNode:function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=document.createElement("div");o.setAttribute("kind",t.type);var a=d(t,r,i);return n.i(u.a)(o,a),o.setAttribute("data-test",t.test),r.isRotationControl&&(delete r.isRotationControl,r.halo=!0),Object.keys(r).forEach(function(e){o.setAttribute(e,r[e])}),o.ondragstart=function(){return!1},o},showSnapFor:function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.forEach(function(e){e.x&&p("vertical",t,e,r,i),e.y&&p("horizontal",t,e,r,i)})},clearSnaps:function e(){var t=n.i(i.a)("workspace"),r=n.i(i.a)("overlaysNode"),o=t.querySelectorAll("[data-snap]");n.i(l.a)(o,function(e){r.removeChild(e)})}};t.a=v},function(e,t,n){"use strict";var r=n(4),i=n(3),o=n(15),a=n(6),s=n(5),u=n(2),l=n(48),c=n.n(l),f=n(12),h=n.n(f);n.d(t,"a",function(){return m}),n.d(t,"d",function(){return y}),n.d(t,"e",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return E});var p={};function d(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e||(e=null,c.a.releaseProxy()),r.a.dispatch(i.a.ELEMENT_SELECTED,{designElement:e,checkDrop:t})}function g(e){a.a.attachEvent(e,"mouseup",function(){s.a.log("Deselect everything ever selected...."),window.SELECTION_LOCK?s.a.log("Selection lock active"):d(null)},!1,!0,!0)}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(s.a.log("Selecting element"),window.SELECTION_LOCK||e&&!e.isSelectable)s.a.log("Selection lock active, skipping....");else{if(!e)return d(e);if(!e||"textElement"===e.type&&e.editableBlock===document.activeElement||document.activeElement.blur(),o.a.highlight(e,!0),!e.overlay){s.a.log("Adding selection overlay....");var l=o.a.getSelectionOverlay(e,n.i(u.a)("workspace"));a.a.attachElement(l,n.i(u.a)("overlaysNode")),e.overlay=l;var f=!0===e.useOriginalAngleForOverlay?e.originalAngle:e.angle;h.a.setAngle(e,f),t&&d(e,i),c.a.setProxy(e,r)}e.select()}}function m(e,t,n){if(!0===t)return s.a.log("Clearing selection handlers for element...."),c.a.releaseProxy(e),void a.a.detachEvent("click",p[e.uuid],e.el);s.a.log("Setup selectable for element...."),p[e.uuid]=v.bind(this,e,!0,n),a.a.attachEvent(e.el,"click",p[e.uuid])}function y(e){return m(e,!0)}function E(e){a.a.attachEvent(e.el,"click",function(){r.a.dispatch(i.a.PAGE_SELECT,{page:e})})}},function(e,t,n){"use strict";var r=n(58),i=n.n(r),o=n(0),a=n(2);function s(e){var t=e.width,n=e.height,r=e.position,o=r.left,a=r.top,s=e.angle,u=i()({left:o,top:a,width:t,height:n},s*(180/Math.PI));return u.center={x:u.left+u.width/2,y:u.top+u.height/2},u}n.d(t,"f",function(){return u}),n.d(t,"g",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return d}),t.h=g;var u=function e(t,n){var r=n.children[n.children.length-1],i=t.findIndex(function(e){return e.uuid===r.uuid}),o=t.indexOf(n);t.splice(o,1),t.splice(i,0,n);var a=n.children.map(function(e){return e.uuid});return t.filter(function(e){return!a.includes(e.uuid)}).map(function(e,t){return e.innerId=t,e})},l=function e(t,n){var r=t.indexOf(n);t.splice(r,1);var i=[].concat.apply([r,0],n.children);return[].splice.apply(t,i),t.map(function(e,t){return e.innerId=t,e})},c=function e(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var n=s(t);return["left","top","right","bottom"].forEach(function(t){e[t].push(n[t])}),e},{left:[],top:[],right:[],bottom:[]}),r=Math.min.apply(null,n.left),i=Math.min.apply(null,n.top),o=Math.max.apply(null,n.right)-r,a=Math.max.apply(null,n.bottom)-i,u,l,c;return{left:r,top:i,right:r+o,bottom:i+a,width:o,height:a,center:{x:r+o/2,y:i+a/2}}},f={left:function e(t,n){return{left:t.left-n.left}},top:function e(t,n){return{top:t.top-n.top}},right:function e(t,n){return{left:t.right-n.right}},bottom:function e(t,n){return{top:t.bottom-n.bottom}},hCenter:function e(t,n){return{left:t.center.x-n.center.x}},vCenter:function e(t,n){return{top:t.center.y-n.center.y}}},h=function e(t,n,r){return t.map(function(e){var t=s(e),i={left:0,top:0},o=Object.assign(i,f[r](t,n)),a={};return a.left=e.position.left-o.left,a.top=e.position.top-o.top,a.designElement=e,a})},p=function e(t,n){var r={left:0,top:0};return"groupElement"===t.type&&(r.left=t.position.left,r.top=t.position.top),{left:r.left+t.width*n.relativeChildPosition.left,top:r.top+t.height*n.relativeChildPosition.top}},d=function e(t,r){"number"!=typeof r&&(r=t.angle);var i={x:t.position.left+t.width/2,y:t.position.top+t.height/2};return t.children.map(function(e){var a={x:e.position.left+e.width/2,y:e.position.top+e.height/2};"persistGroupElement"===t.type&&(a.x+=t.position.left,a.y+=t.position.top);var s=n.i(o.E)(a,i,r);return{left:s.x-e.width/2,top:s.y-e.height/2}})};function g(e){var t=e.designElement,r=e.selectedElement,i=e.ignoreKeyMode,o=n.i(a.a)("arbiterKeyMode"),s=t===r,u=o.CMD||o.SHIFT;return r&&r.canBeMultiselected()&&u&&!i&&t&&!s&&t.canBeMultiselected()}},function(e,t,n){"use strict";function r(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(6),i=n(5),o=n(89),a=n(2),s=n(15),u=n(0),l=n(27),c=n.n(l),f=n(1);n.d(t,"b",function(){return g}),n.d(t,"a",function(){return d}),n.d(t,"c",function(){return v});var h=function e(){return!1},p=250;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l;function d(g){i.a.log("Draggable: Mousedown");var v=!1,m=function e(){v||clearTimeout(l)};if(a&&(a.drag_lock||a.locked||a.notMovable)||t.designElement&&(t.designElement.locked||t.designElement.notMovable))return i.a.log("=====Drag lock active, skipping"),void r.a.attachEvent(null,"mouseup",m,!0,!0,!1,"draggable");function y(o){i.a.log("Draggable: Setting mousedown handlers");var l=e,p=window.BLOCK_MOVE||!1;if(!0===t.clone&&((l=e.cloneNode(!0)).style.zIndex=f.a.SKY_ZINDEX),t.shouldWrap){var g=document.createElement("div"),v=document.createElement("div");g.classList.add("draggable-dom-wrapper"),v.classList.add("draggable-dom-holder"),g.appendChild(v),v.appendChild(l),l=g}l.ondragstart=h;var y=w(t),E={x:o.pageX,y:o.pageY},b=_(e);function w(e){var t=e.scrollNode;return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}}function _(e){return a?a.getBounds():n.i(u.c)(e)}function P(e){if(a)c.a.onDragMove(a,{x:e.x,y:e.y});else if(!1!==t.moveElement){var n=parseFloat(l.style.left),r=parseFloat(l.style.top);l.style.left="".concat(n+e.x,"px"),l.style.top="".concat(r+e.y,"px")}var i=_(l),o=function e(t){if(!a||!a.cropping){var n=1,r=t?.2:1;a?a.setOpacity({opacity:r}):l.style.opacity=r}},s=a?a.el:l;t.onDragMove({left:i.left,top:i.top,height:i.height,width:i.width,bottom:i.top+i.height,right:i.left+i.width,center:{x:i.left+i.width/2,y:i.top+i.height/2}},s,o,{deltaX:e.x,deltaY:e.y})}function S(){var e=w(t),n;P({x:e.x-y.x,y:e.y-y.y}),y=e}function A(e){if(!p){window.SELECTION_LOCK=!0;var t=_(l),r=e.pageX-E.x,i=e.pageY-E.y,o=l.getAttribute("data-snapped-x"),s=l.getAttribute("data-snapped-y");a&&a.shouldIgnoreSnaps&&(o=s=null),o&&(o=parseFloat(o),n.i(u.n)(t.left+r,o,f.a.SNAP_TRESHOLD)?r=0:o=null),s&&(s=parseFloat(s),n.i(u.n)(t.top+i,s,f.a.SNAP_TRESHOLD)?i=0:s=null),P({x:r,y:i}),o||(E.x=e.pageX),s||(E.y=e.pageY)}}s.a.setBoundingMarker(b,"yellow"),!1!==t.attach&&(l.style.display="none",r.a.attachElement(l),l.style.width="".concat(b.width,"px"),l.style.height="".concat(b.height,"px"),l.style.left="".concat(b.left,"px"),l.style.top="".concat(b.top,"px"),l.style.display="block",l.style.pointerEvents="none"),t.onDragStart(l,a,E);var O=A;function C(){p||(window.SELECTION_LOCK=!0,S())}r.a.attachEvent(null,"mousemove",O,!1,!0,!1,"draggable"),t.scrollNode&&r.a.attachEvent(t.scrollNode,"scroll",C,!1,!0,!1,"draggable",{useCapture:!0});var x=function e(n){if(!p)if(i.a.log("Draggable: was dragged, removing events"),r.a.detachEvent("mousemove",O),r.a.detachEvent("scroll",C,t.scrollNode,"draggable",{useCapture:!0}),r.a.detachEvent("mouseup",m),r.a.detachEvent("mousedown",d,l),a&&(a.draggable=!1),t.onDragEnd(l,{designerEvent:f.a.DESIGNER_EVENTS.mouseDragEnd,eventData:n}),i.a.log("Draggable: unlocking selection"),a&&!a.cropping||l.getAttribute("data-overlay")){if(l.parentNode&&l.parentNode.getAttribute("data-crop-element"))return;setTimeout(function(){i.a.log("Draggable: Unlocking selection by timeout!"),window.SELECTION_LOCK=!1},100)}else a||(window.SELECTION_LOCK=!1)};r.a.attachEvent(null,"mouseup",x,!0,!0,!1,"draggable")}(t.preventDefault||void 0===t.preventDefault)&&g.preventDefault(),g.button!==o.a.RIGHT&&(a&&a.locked||a&&a.isBackground||(l=setTimeout(function(){v=!0,i.a.log("lock timeout"),y(g)},p),r.a.attachEvent(null,"mouseup",m,!0,!0,!1,"draggable")))}t.onDragStart=t.onDragStart||h,t.onDragEnd=t.onDragEnd||h,t.onDragMove=t.onDragMove||h,r.a.attachEvent(e,"mousedown",d,!1,!0,!1,"draggable"),i.a.log("Draggable: bootstrap"),e.ondragstart=h}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.draggable&&e.isSelectable){t.onDragStart=t.onDragStart||h,t.onDragMove=t.onDragMove||h;var r=e.el,i=function t(n,r){c.a.onDragEnd(e,r)};e.draggable=!0;var o=n.i(a.a)("scrollableNode");d(r,{onDragEnd:function e(t,r){i(t,r),n.i(a.b)("preventPageSelectionViaScroll",!1)},onDragStart:function e(r){n.i(a.b)("preventPageSelectionViaScroll",!0),t.onDragStart(r)},onDragMove:c.a.getDragMoveHandler(t.onDragMove,{type:e.type,src:e.src,id:e.id,dphId:e.dphId,mediaAsset:e.mediaAsset}),inDesigner:!0,attach:!1,preventDefault:t.preventDefault,scrollNode:o},e)}}function v(e){e.draggable=!1,r.a.detachEvent("mousedown",null,e.el,"draggable")}},function(e,t,n){"use strict";function r(e,t){return function(n){n[e]=t||!0}}t.a=r},function(e,t,n){"use strict";var r=n(11),i=n(0),o=n(1),a=n(4),s=n(3);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"groupElement",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"groupElement"===t&&(a.a.dispatch(s.a.CLEAR_SELECTION,{}),e.forEach(function(e){e.shouldBeAPartOfGroup=!0})),n.i(r.a)(t,{id:n.i(i.a)(12),innerId:o.a.SKY_ZINDEX,children:e,templateType:u})}},function(e,t,n){"use strict";var r=n(0),i=n(126),o=n(1);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="23px" height="23px" style="enable-background:new 0 0 22.7 22.7;"><g><g transform="rotate('.concat(e,', 11.5, 11.5)"><polygon points="21.7,11.4 17.2,8.2 17.2,10.9 5.5,10.9 5.5,8.2 1,11.4 5.5,14.5 5.5,11.8 17.2,11.8 17.2,14.5"/><path fill="%23FFFFFF" d="M5.5,8.2v2.7h11.7V8.2l4.5,3.1l-4.5,3.2v-2.7H5.5v2.7L1,11.4L5.5,8.2 M5.5,7.2c-0.2,0-0.4,0.1-0.6,0.2l-4.5,3.2c-0.5,0.3-0.6,0.9-0.3,1.4c0.1,0.1,0.2,0.2,0.3,0.3l4.5,3.1c0.5,0.3,1.1,0.2,1.4-0.3c0.1-0.2,0.2-0.4,0.2-0.6v-1.7h9.7v1.7c0,0.6,0.4,1,1,1c0.2,0,0.4-0.1,0.6-0.2l4.5-3.1c0.5-0.3,0.6-0.9,0.2-1.4c-0.1-0.1-0.2-0.2-0.2-0.2l-4.5-3.2c-0.5-0.3-1.1-0.2-1.4,0.3c-0.1,0.2-0.2,0.4-0.2,0.6v1.7H6.5V8.2C6.5,7.7,6.1,7.2,5.5,7.2z"/></g></g></svg>')}function u(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg",e);if(!t)return r;for(var i in"image"===e&&n&&r.addEventListener("load",n),t)if(t.hasOwnProperty(i)){var o=i.replace(/([a-z])([A-Z])/g,function(e,t,n){return t+"-"+n.toLowerCase()});"xlink:href"===i?r.setAttributeNS("http://www.w3.org/1999/xlink","href",t[i]):r.setAttribute(o,t[i])}return!0===window.jsdom&&n&&setTimeout(n,0),r}function l(e){for(var t=/id="(.*?)"/g,i,o=e;i=t.exec(o);){var a=n.i(r.a)(16);o=o.replace(new RegExp('id="'.concat(i[1],'"')),'id="'.concat(a,'"'));var s=new RegExp("#".concat(i[1]),"g");o=o.replace(s,"#".concat(a))}return o}function c(e){var t=e.getAttribute("viewBox").split(" ");return{left:parseInt(t[0]),top:parseInt(t[1]),width:parseInt(t[2]),height:parseInt(t[3])}}function f(e,t,n,r,i){var o=r+e.x,a=i+e.y;return t.left-o+t.width>n.width?o=t.width-n.width+t.left:o>t.left&&(o=t.left),a>t.top&&(a=t.top),t.top-a+t.height>n.height&&(a=t.top-(n.height-t.height)),{newX:o,newY:a}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=c(e);return n.i(r.b)(t).then(function(n){var r=n.naturalWidth/n.naturalHeight,o=2*i.width,a=o/r,s=(i.width-o)/2,l=(i.height-a)/2,c=u("image",{"xlink:href":t,width:o,height:a,x:i.left+s,y:i.top+l});e.appendChild(c)})}function p(e){if(!0!==window.jsdom){var t=e.querySelector("image");t&&t.parentNode.removeChild(t)}}function d(e,t){return{x:e.x-t.x,y:t.y-t.y,width:e.width-t.width,height:e.height-t.height}}function g(e){var t=Object.keys(e).filter(function(t){return!1!==e[t]}).map(function(t){return a({},t,e[t])});if(!t.length)return{};var n=t[0];if(1===t.length)return n;for(var r=1;r<t.length;r++)t[r].value<n.value&&(n=t[r]);return n}function v(e,t){return{left:e.x-t.left,right:t.width+t.left-(e.x+e.width),top:e.y-t.top,bottom:t.height+t.top-(e.y+e.height)}}function m(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,s={left:!1,top:!1,bottom:!1,right:!1},u;return r>n.left&&(s.left=r-n.left),r+o<n.width+n.left&&(s.right=n.width+n.left-(r+o)),i>n.top&&(s.top=i-n.top),i+a<n.height+n.top&&(s.bottom=n.height+n.top-(i+a)),g(s)}function y(e,t,n,r){var i=e.x,o=e.y,a=e.width,s=e.height,u=a/s,l=m(e,t,n),c;if(l.left)s=(a+=i-n.left)/u,i=n.left,["nw"].includes(r)&&(o=t.y+(t.height-s));else if(l.right)s=(a=n.width+n.left-i)/u,["ne"].includes(r)&&(o=t.y+(t.height-s));else if(l.top){var f;a=(s+=o-n.top)*u,o=n.top,"nw"===r&&(i=t.x+(t.width-a))}else l.bottom&&(a=(s=n.height+n.top-o)*u,"sw"===r&&(i=t.x+(t.width-a)));return{width:a,height:s,x:i,y:o}}function E(e){var t=e.getBBox();return t.center={x:t.x+t.width/2,y:t.y+t.height/2},t}function b(e){if(!e.special&&e.stasheeData&&e.stasheeData.length<o.a.MAX_STASHEE_LENGHT_TO_DETECT_SHAPE){var t=e.el.querySelector("svg");e.special=i.a.isShape(t)}}function w(e,t){var n=e.match(/<(?!\/).*?\sid="(.*?)">/gi);return n&&n.map(function(e){return/id="(.*?)"/.exec(e)[1]}).filter(function(e){return e.length}).forEach(function(n){var r="".concat(n,"_").concat(t);e=e.replace(new RegExp("#".concat(n,"(?![A-Za-z_-d:.])"),"g"),"#".concat(r)).replace(new RegExp('id="'.concat(n,'"'),"g"),'id="'.concat(r,'"'))}),e}n.d(t,"g",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"e",function(){return w}),n.d(t,"i",function(){return f}),n.d(t,"k",function(){return y}),n.d(t,"j",function(){return v}),n.d(t,"d",function(){return h}),n.d(t,"c",function(){return p}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return b}),n.d(t,"b",function(){return c})},function(e,t,n){"use strict";var r=n(2),i=n(1);n.d(t,"a",function(){return o}),t.b=a;var o={FULL:"full",PREVIEW:"preview",WORK:"work"};function a(){var e;switch(n.i(r.a)("renderMode")){case o.FULL:return i.a.MAX_IMAGE_WIDTH;case o.PREVIEW:default:return i.a.IMAGE_WIDTH}}},function(e,t,n){"use strict";function r(e,t,n){var r;return e.forEach(function(e){(e.elements||[]).forEach(function e(i){if(!r){if(!t(i))return n&&i.children?i.children.forEach(e):void 0;r=i}})}),r}var i={some:function e(t,n){var i;return!!r(t,n,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])},find:function e(t,n){var i;return r(t,n,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])},every:function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.every(function(e){return(e.elements||[]).every(function e(t){var i=n(t);return r&&t.children?i&&t.children.every(e):i})})},findAll:function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=[];return t.forEach(function(e){(e.elements||[]).forEach(function e(t){n(t)&&i.push(t),r&&t.children&&t.children.forEach(e)})}),i},getAll:function e(t){return i.findAll(t,function(){return!0})}};t.a=i},function(e,t,n){"use strict";var r=n(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s,u=new(function(){function e(){i(this,e),this.items=[]}return a(e,[{key:"addItem",value:function e(t){var n=this.items.find(function(e){var n=e.id===t.id;return"templateElement"!==t.type||isNaN(t.pageNumber)?n:n&&e.pageNumber===t.pageNumber});if(n){var r=this.items.indexOf(n);this.items[r]=t}else this.items.push(t)}},{key:"addItems",value:function e(t){var n=this;t.forEach(function(e){n.addItem(e)})}},{key:"setItems",value:function e(t){this.items=t.slice()}},{key:"getOne",value:function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.items.find(function(e){return Object.keys(t).every(function(n){return!t[n]&&0!==t[n]||void 0!==e[n]&&e[n].toString()===t[n].toString()})});if(!o&&!i)throw new Error("no Item found ".concat(JSON.stringify(t,null,"\t")));return n.i(r.p)(o)}}]),e}());t.a=u},function(e,t,n){"use strict";var r=n(25),i=n(54),o=n(1),a={},s={},u={};function l(e){return"".concat(e.originalSrc,"?").concat(e.vignette,"?").concat(e.crossProcess)}t.a={loadInventoryItem:function e(t){var n=t.getAttribute("inventory-id"),o=t.getAttribute("data-template-page");if(a[n])return new Promise(function(e){e(a[n])});var s=r.a.getOne({id:n,pageNumber:o});return s.url?i.a.get(s.url).then(function(e){return a[n]=e,e}):void 0},getDataFor:function e(t,n){return new Promise(function(e,r){if(a[t])return e(a[t]);i.a.get(n).then(function(n){return a[t]=n,e(n)}).catch(r)})},checkImageInStashee:function e(t){if(s[t])return!0},getStashedImageData:function e(t){return new Promise(function(e,n){if(s[t])return setTimeout(function(){e(s[t])},0);var r=document.createElement("img");return r.crossOrigin=o.a.CROSS_ORIGIN,r.onload=function(){return e(r)},r.src=t,r.onerror=n,r.complete||void 0===r.complete?(r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",r.src=t,e(r)):void 0})},storeStashedImageData:function e(t,n){s[t]||(s[t]=n)},storeImageFiltered:function e(t,n){var r=l(t);u.order||(u.order=[]),u.order.length>o.a.MAX_AMOUNT_FILTERED_IMAGES&&(delete u[u.order[0]],u.order.shift()),u[r]=n,u.order.push(r),window.stasheedImage=s},modifyPermission:function e(t,n){a[t]&&(a[t].hasPermission=n)},checkImageFiltered:function e(t){var n=l(t);if(u[n])return!0},getImageFiltered:function e(t){var n=l(t);return u[n]},clear:function e(){a={},s={},u={}}}},function(e,t,n){"use strict";var r=n(4),i=n(3),o=n(5),a=n(1),s=n(2);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=a.a.BASE_DRAG_MODE,f=a.a.PRE_AXIS_ATTACHED_DRAG_MODE,h=a.a.AXIS_ATTACHED_DRAG_MODE;function p(e){e._dragMode=c,delete e.shouldIgnoreSnaps,e.ignoredDragAxis=null,e.dragHistory=[]}function d(e){e.shouldIgnoreSnaps=!0,e._dragMode=f,e.oldBounds=e.getBounds()}function g(e){var t=n.i(s.a)("arbiterKeyMode");t.SHIFT&&e._dragMode===c&&d(e),t.SHIFT||e._dragMode===c||p(e)}function v(e,t){g(e),t=u({},t);var n=e._dragMode;if(n===f)return e.dragHistory.push(t),e.dragHistory.length>5&&(e._dragMode=h),{x:0,y:0};if(n===h){if(delete e.shouldIgnoreSnaps,!e.ignoredDragAxis){var r=e.dragHistory.reduce(function(e,t){return e.x+=t.x,e.y+=t.y,e},{x:0,y:0}),i,o=Math.abs(r.x)>=Math.abs(r.y)?"y":"x",a={x:"y",y:"x"}[o];return e.ignoredDragAxis=o,r[o]=0,r[a]+=t[a],r}t[e.ignoredDragAxis]=0}return t}e.exports={onDragEnd:function e(t,a){o.a.log("Draggable: Drop from page to page..."),delete t.__dragging,r.a.dispatch(i.a.ELEMENT_DRAG_END,{designElement:t}),t.onDragEnd&&t.onDragEnd(),p(t),t._dragMode=null,r.a.dispatch(i.a.ELEMENT_DROP_FROM_PAGE,u({},a,{designElement:t})),n.i(s.b)("preventPageSelectionViaScroll",!1)},onDragStart:function e(t){var o;n.i(s.b)("preventPageSelectionViaScroll",!0),t.__dragging=!0,r.a.dispatch(i.a.ELEMENT_DRAG_START,{designElement:t}),t.onDragStart&&t.onDragStart(),t._dragMode=c,n.i(s.a)("arbiterKeyMode").SHIFT&&d(t),!0!==t.selected&&r.a.dispatch(i.a.ELEMENT_SELECTED,{designElement:null})},onDragMove:function e(t,n){var r=u({},n=v(t,n),{checkRestrictions:!1});return t.change("dragStateful",r,!1)},getDragMoveHandler:function e(t,n){return function(e,o,a,s,u){r.a.dispatch(i.a.ELEMENT_MOVE,{coords:e,inventoryData:n,stickyDragCallback:a,element:o,deltas:s,overlay:u}),t&&t(e)}}}},function(e,t,n){"use strict";var r=n(115),i=n(114),o=n(113),a,s;function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=n(1).a.PAGE_OVERLAY_CHILD_TYPES,c=(u(s={},l.LOGO_LABEL,i.a),u(s,l.GRID_OVERLAY,o.a),s);function f(){var e;return u(e={},l.LOGO_LABEL,!1),u(e,l.GRID_OVERLAY,!1),e}var h=f();function p(e,t){if(!c[e])throw new Error("Where is no registered pageOverlayChild for ".concat(e));return new c[e]({uuid:t.uuid})}var d={getActiveChildTypes:function e(){return Object.keys(h).filter(function(e){return h[e]})},addOverlay:function e(t){var n=t.uuid,i=r.a.createPageOverlayWrapperNode(n),o=r.a.createPageOverlayContentNode(n);r.a.appendPageOverlayNode(i,o),t.overlayData={overlayNode:i,contentNode:o,children:[]},d.addActiveChildrenToPageOverlay(t)},removeOverlay:function e(t){var n=t.overlayData,r=n.children,i=n.overlayNode;r.forEach(function(e){d.removeChild(e,t)}),i.remove(),delete t.overlayData},repositionOverlay:function e(t){var n;t.overlayData&&(t.overlayData.children.forEach(function(e){e.update()}),r.a.repositionPageOverlay(t))},pageStateChange:function e(t){var n;t.overlayData&&(t.overlayData.children.forEach(function(e){var n;if(!c[e.type].shouldShowOnPage(t))return d.removeChild(e,t);e.update(t)}),d.addActiveChildrenToPageOverlay(t))},addActiveChildrenToPageOverlay:function e(t){var n;d.getActiveChildTypes().map(function(e){d.addChild(e,t)})},toggleChildActivity:function e(t,n,r){h[t]!==n&&(h[t]=n,n&&d.enableChild(t,r),!n&&d.disableChild(t,r))},enableChild:function e(t,n){n.forEach(function(e){d.addChild(t,e)})},disableChild:function e(t,n){n.forEach(function(e){if(e.overlayData){var n=e.overlayData.children.find(function(e){return e.type===t});n&&d.removeChild(n,e)}})},addChild:function e(t,n){var r=n.overlayData,i;if(h[t]&&!!r&&!r.children.some(function(e){return e.type===t})&&c[t].shouldShowOnPage(n)){var o=p(t,n);o.mount(r.contentNode),r.children.push(o)}},removeChild:function e(t,n){n.overlayData&&(n.overlayData.children=n.overlayData.children.filter(function(e){return e.type!==t.type}),t.destroy())},teardown:function e(){h=f()}};t.a=d},function(e,t){var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=Object.prototype.hasOwnProperty;function i(e,t){return r.call(e,t)}function o(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var t=[];for(var r in e)i(e,r)&&t.push(r);return t}function a(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function s(e){for(var t=0,n=e.length,r;t<n;){if(!((r=e.charCodeAt(t))>=48&&r<=57))return!1;t++}return!0}function u(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c(e,t){var n;for(var r in e)if(i(e,r)){if(e[r]===t)return u(r)+"/";if("object"==typeof e[r]&&""!=(n=c(e[r],t)))return u(r)+"/"+n}return""}function f(e,t){if(e===t)return"/";var n=c(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n}function h(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(h(e[t]))return!0}else if("object"==typeof e)for(var r=o(e),i=r.length,t=0;t<i;t++)if(h(e[r[t]]))return!0;return!1}t.hasOwnProperty=i,t._objectKeys=o,t._deepClone=a,t.isInteger=s,t.escapePathComponent=u,t.unescapePathComponent=l,t._getPathRecursive=c,t.getPath=f,t.hasUndefined=h;var p=function(e){function t(t,n,r,i,o){e.call(this,t),this.message=t,this.name=n,this.index=r,this.operation=i,this.tree=o}return n(t,e),t}(Error);t.PatchError=p},function(e,t,n){"use strict";var r=n(4),i=n(3);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u="ready",l="inMount",c,f=new(function(){function e(){o(this,e),this.setInitialState()}return s(e,[{key:"insert",value:function e(t){var n=t.uuid;this.mounts.push(n),r.a.dispatch(i.a.APP_CHANGE_MOUNTING_STATE,{state:l})}},{key:"remove",value:function e(t){var n=t.uuid,o=this.mounts.findIndex(function(e){return e===n});-1!==o&&(this.mounts.splice(o,1),this.mounts.length||r.a.dispatch(i.a.APP_CHANGE_MOUNTING_STATE,{state:u}))}},{key:"setInitialState",value:function e(){this.mounts=[]}},{key:"tearDown",value:function e(){this.setInitialState()}}]),e}());t.a=f},function(e,t,n){"use strict";var r=n(5),i=n(16),o=n(19),a=n(3),s=n(4),u=n(9),l=n(21),c={makePersistGroup:function e(t,c){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||"groupElement"!==t.type)throw new Error("No correct items to create group");r.a.log("Make persist group from multiselection");var h=t.children;return h.forEach(function(e){e.isBackgroundElement()&&c.removeBackground(e),n.i(i.d)(e),n.i(o.c)(e),e.overlay=null}),s.a.dispatch(a.a.ELEMENT_SELECTED,{ignoreKeyMode:!0,saveTrashed:!0}),n.i(l.a)(h.map(function(e){return e.serialize()}),"persistGroupElement",f.templateType).then(function(e){return u.a.dropGroupElement(e,c),!f.stateless&&s.a.dispatch(a.a.SAVE_STATE,{type:a.a.PERSIST_GROUP_CREATE}),e})},ungroupPersist:function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"persistGroupElement"!==t.type)throw new Error("Nothing to ungroup");if(t.locked)throw new Error("Can not ungroup locked group");r.a.log("Ungroup persist group");var o=t.children;u.a.ungroupPersist(t,n),t.ungroup(),o.forEach(function(e){n.setDraggable(e)}),i&&(s.a.dispatch(a.a.MULTISELECT_STOPED,{elementsList:o}),s.a.dispatch(a.a.SAVE_STATE,{type:a.a.PERSIST_GROUP_UNGROUP}))},releaseMultiselection:function e(t,o){r.a.log("Release multiselection");var a=t.children;t.blur(),a.forEach(function(e){n.i(i.d)(e),e.overlay=null,n.i(i.a)(e,!1,o)}),u.a.removeElement(o.uuid,t.uuid)},alignChildren:function e(t,n){if(!t||!t.isGroup)throw new Error("You can apply align action only to groups");if(t.locked)throw new Error("You cant apply align for locked group");r.a.log("Align groupElement at ".concat(n)),t.alignChildren(n),s.a.dispatch(a.a.SAVE_STATE,{type:a.a.GROUP_ALIGN_ITEMS,meta:{alignType:n}})}};t.a=c},function(e,t,n){"use strict";var r=n(41),i=n(9),o=n(2),a=n(1);function s(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)})}}function l(e){var t=n.i(o.a)("actualPageMargin"),r=e.template().innerHTML||"",i=document.createElement("div");i.innerHTML=r,i.style.overflow="hidden",i.setAttribute("data-page","true"),i.className=e.className,i.style.marginBottom="".concat(t,"px"),i.classList.add(e.pageInactiveClass),e.setEl(i)}function c(e,t){return f.apply(this,arguments)}function f(){return(f=u(regeneratorRuntime.mark(function e(t,n){var o,a,s,u;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:return o=n.fromTemplate,a=n.shallow,s=t.elements,delete t.elements,l(u=new r.a(t)),c.next=7,i.a.placePageElements(u,s,{shallow:a,fromTemplate:o});case 7:return c.abrupt("return",u);case 8:case"end":return c.stop()}},e,this)}))).apply(this,arguments)}function h(e,t){return p.apply(this,arguments)}function p(){return(p=u(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return t.loadStatus=a.a.PAGE_LOAD_STATUS.initial,t.pendingElementsData=t.elements,t.elements=[],r.abrupt("return",c(t,n));case 4:case"end":return r.stop()}},e,this)}))).apply(this,arguments)}function d(e,t){return g.apply(this,arguments)}function g(){return(g=u(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c(t,n);case 2:return(r=i.sent).calculateInnerId(),r.loadStatus=a.a.PAGE_LOAD_STATUS.ready,i.abrupt("return",r);case 6:case"end":return i.stop()}},e,this)}))).apply(this,arguments)}function v(){return(v=u(regeneratorRuntime.mark(function e(){var t,r,i,a,s=arguments;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=s.length>1&&void 0!==s[1]?s[1]:{},i=r.shouldCompletelyLoad,a={elements:t.elements,uuid:t.uuid,innerId:t.innerId,templateId:t.templateId,templateLikeElements:t.templateLikeElements,width:n.i(o.a)("pageWidth"),height:n.i(o.a)("pageHeight"),className:n.i(o.a)("pageClassName"),pageActiveClass:n.i(o.a)("pageActiveClass"),pageInactiveClass:n.i(o.a)("pageInactiveClass"),pageNotReadyClass:n.i(o.a)("pageNotReadyClass"),pagePrefixClass:n.i(o.a)("pagePrefixClass")},!i){u.next=6;break}return u.abrupt("return",d(a,r));case 6:return u.abrupt("return",h(a,r));case 7:case"end":return u.stop()}},e,this)}))).apply(this,arguments)}t.a=function(){return v.apply(this,arguments)}},function(e,t,n){"use strict";var r=n(1),i=n(0),o=n(26),a=n(2);function s(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,u,"next",e)}function u(e){s(o,r,i,a,u,"throw",e)}a(void 0)})}}function l(e){var t;return!!["svgElement","textElement"].includes(e.type)&&("svgElement"===e.type&&e.stasheeData?1===e.colors.length&&n.i(i.t)(e.colors[0].color,!0):"textElement"===e.type&&(1===e.colorMap.length&&n.i(i.t)(e.colorMap[0].value,!0)))}function c(e){var t=e.getBackground();return!t||t.colors&&t.colors.length&&n.i(i.t)(t.colors[0].color)}function f(e){var t=e.page,n=e.designElement;l(n)&&c(t)&&n.setColor({color:r.a.SVG_COLOR_DARK,id:0})}function h(e){return p.apply(this,arguments)}function p(){return(p=u(regeneratorRuntime.mark(function e(t){var s,u,l;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:if(!t.stasheeData){c.next=2;break}return c.abrupt("return",t);case 2:return t.mediaAsset&&(s=n.i(a.a)("shallow"),u=s?r.a.VIEW_MODES.download:r.a.VIEW_MODES.screen,t.url=n.i(i.u)(t.mediaId,{viewMode:u,session:!0})),c.next=5,o.a.getDataFor(t.id,t.url);case 5:return l=c.sent,t.stasheeData=l.data,t.hasPermission=l.hasPermission,c.abrupt("return",t);case 9:case"end":return c.stop()}},e,this)}))).apply(this,arguments)}n.d(t,"b",function(){return l}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return h})},function(e,t,n){var r=Array.prototype.slice,i=n(60),o=n(59),a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:l(e,t,n))};function s(e){return null==e}function u(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}function l(e,t,n){var l,c;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=r.call(e),t=r.call(t),a(e,t,n));if(u(e)){if(!u(t))return!1;if(e.length!==t.length)return!1;for(l=0;l<e.length;l++)if(e[l]!==t[l])return!1;return!0}try{var f=i(e),h=i(t)}catch(e){return!1}if(f.length!=h.length)return!1;for(f.sort(),h.sort(),l=f.length-1;l>=0;l--)if(f[l]!=h[l])return!1;for(l=f.length-1;l>=0;l--)if(c=f[l],!a(e[c],t[c],n))return!1;return typeof e==typeof t}},function(e,t,n){var r={strict:!0},i=n(34),o=function(e,t){return i(e,t,r)},a=n(29);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone;var s={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=l(n,this.path);r&&(r=a._deepClone(r));var i=c(n,{op:"remove",path:this.from}).removed;return c(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=l(n,this.from);return c(n,{op:"add",path:this.path,value:a._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:o(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},u={add:function(e,t,n){return a.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r;return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:s.move,copy:s.copy,test:s.test,_get:s._get};function l(e,t){if(""==t)return e;var n={op:"_get",path:t};return c(e,n),n.value}function c(e,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!0),r&&("function"==typeof r?r(n,0,e,n.path):p(n,0)),""===n.path){var c={newDocument:e};if("add"===n.op)return c.newDocument=n.value,c;if("replace"===n.op)return c.newDocument=n.value,c.removed=e,c;if("move"===n.op||"copy"===n.op)return c.newDocument=l(e,n.from),"move"===n.op&&(c.removed=e),c;if("test"===n.op){if(c.test=o(e,n.value),!1===c.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return c.newDocument=e,c}if("remove"===n.op)return c.removed=e,c.newDocument=null,c;if("_get"===n.op)return n.value=e,c;if(r)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",0,n,e);return c}i||(e=a._deepClone(e));var f,h=(n.path||"").split("/"),d=e,g=1,v=h.length,m=void 0,y=void 0,E=void 0;for(E="function"==typeof r?r:p;;){if(y=h[g],r&&void 0===m&&(void 0===d[y]?m=h.slice(0,g).join("/"):g==v-1&&(m=n.path),void 0!==m&&E(n,0,e,m)),g++,Array.isArray(d)){if("-"===y)y=d.length;else{if(r&&!a.isInteger(y))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",0,n.path,n);a.isInteger(y)&&(y=~~y)}if(g>=v){if(r&&"add"===n.op&&y>d.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",0,n.path,n);var c;if(!1===(c=u[n.op].call(n,d,y,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return c}}else if(y&&-1!=y.indexOf("~")&&(y=a.unescapePathComponent(y)),g>=v){var c;if(!1===(c=s[n.op].call(n,d,y,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return c}d=d[y]}}function f(e,n,r,i){if(void 0===i&&(i=!0),r&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=a._deepClone(e));for(var o=new Array(n.length),s=0,u=n.length;s<u;s++)o[s]=c(e,n[s],r),e=o[s].newDocument;return o.newDocument=e,o}function h(e,n){var r=c(e,n);if(!1===r.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",0,n,e);return r.newDocument}function p(e,n,r,i){if("object"!=typeof e||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,r);if(!s[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,r);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&a.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,r);if(r)if("add"==e.op){var o=e.path.split("/").length,u=i.split("/").length;if(o!==u+1&&o!==u)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==i)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,r)}else if("move"===e.op||"copy"===e.op){var l,c=d([{op:"_get",path:e.from,value:void 0}],r);if(c&&"OPERATION_PATH_UNRESOLVABLE"===c.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,r)}}function d(e,n,r){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)f(a._deepClone(n),a._deepClone(e),r||!0);else{r=r||p;for(var i=0;i<e.length;i++)r(e[i],i,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}t.getValueByPointer=l,t.applyOperation=c,t.applyPatch=f,t.applyReducer=h,t.validator=p,t.validate=d},function(e,t){"use strict";function n(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function r(){if(!(this instanceof r))return new r;this.queue=[],this.cache=null}r.prototype.matrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]?this:(this.cache=null,this.queue.push(e),this)},r.prototype.translate=function(e,t){return 0===e&&0===t||(this.cache=null,this.queue.push([1,0,0,1,e,t])),this},r.prototype.scale=function(e,t){return 1===e&&1===t||(this.cache=null,this.queue.push([e,0,0,t,0,0])),this},r.prototype.rotate=function(e,t,n){var r,i,o;return 0!==e&&(this.translate(t,n),r=e*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-t,-n)),this},r.prototype.skewX=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this},r.prototype.skewY=function(e){return 0!==e&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this},r.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=n(this.cache,this.queue[e]);return this.cache},r.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[e*(r=this.cache)[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]},e.exports=r},function(e,t,n){"use strict";var r=n(7),i=n(4),o=n(3),a=n(1),s=n(2);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e){return h(e)||f(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function v(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=E(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return P});var P=function(e){function t(e){var n;return p(this,t),(n=v(this,b(t).call(this,e))).src=e.src,n.previewPath=e.previewPath,n.isAnimatedElement=!0,n.hasBackgroundLabel=!0,n.preload={request:null,promise:null},n.shouldPreventGeometryMutations()&&(n.hasRotationControls=!1,n.notMovable=!0),n}return w(t,e),g(t,[{key:"shouldPreventGeometryMutations",value:function e(){var t,r=n.i(s.a)("features").denyGeometryMutationsForAnimatedBackground;return this.isBackgroundElement()&&r}},{key:"setEl",value:function e(n){y(b(t.prototype),"setEl",this).call(this,n),this.bindEvents(),i.a.dispatch(o.a.ELEMENT_ADD,{designElement:this})}},{key:"change",value:function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=l(a.a.ACTIONS_APPLIED_FOR_ANIMATED_ELEMENTS);if(this.shouldPreventGeometryMutations()||(o=[].concat(l(o),l(a.a.ACTIONS_TO_GEOMETRY_MUTATION))),this.isBackgroundElement()&&!o.includes(n))throw new Error('Handler "'.concat(n,'" cannot be applied to ').concat(this.type));return y(b(t.prototype),"change",this).call(this,n,r,i)}},{key:"getControlsFilter",value:function e(){return this.shouldPreventGeometryMutations()?[]:["nw","ne","sw","se"]}},{key:"destroy",value:function e(){y(b(t.prototype),"destroy",this).call(this),this.preload.request&&this.preload.request.abort()}}]),t}(r.a);P.flippable=!0,P.background=!0},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(1),a=n(15),s=n(12),u=n.n(s),l=n(14),c=n.n(l);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}n.d(t,"a",function(){return d});var d=function(){function e(t){f(this,e),this.isStorable=!0,this.style=t.style||{},delete this.style.width,delete this.style.height,this.uuid=t.uuid||n.i(r.a)(64),c.a.bind(this.uuid,this),t.el?(this.el=t.el,this.setHeight(t.height),this.setWidth(t.width),this.setStyle(this.style,this.el)):(this.width=t.width,this.height=t.height,this.locked=t.locked||!1),this.angle=t.angle||0,this.originalAngle=t.originalAngle||0}return p(e,[{key:"getEdgeCoords",value:function e(t){return n.i(r.d)(this,t)}},{key:"getEdgesCoords",value:function e(){var t=this;return["nw","ne","s","n","sw","se"].reduce(function(e,n){return e[n]=t.getEdgeCoords(n).edge,e},{})}},{key:"hide",value:function e(){this.el.style.visibility="hidden"}},{key:"getOppositeEdgeCoords",value:function e(t){return n.i(r.j)(this,t)}},{key:"setTransform",value:function e(t,n,r){r||(r=this.underlyingEl||this.el);var i=r.style.transform||"",o=new RegExp("".concat(t,"\\(.*?\\)")),a="".concat(t,"(").concat(n,")");o.test(i)?r.style.transform=i.replace(o,a):r.style.transform=i+" ".concat(a)}},{key:"removeTransform",value:function e(t,n){n||(n=this.underlyingEl||this.el);var r=n.style.transform||"",i=new RegExp("".concat(t,"\\(.*?\\)"));n.style.transform=r.replace(i,"")}},{key:"getTransform",value:function e(t,n){if(n||(n=this.underlyingEl||this.el),n){var r=n.style.transform||"",i,o=new RegExp("".concat(t,"\\(.*?\\)")).exec(r);return o?o[0].replace(new RegExp("(".concat(t,"|\\(|\\))"),"g"),""):null}}},{key:"checkAndResetOverlap",value:function e(){return!1}},{key:"getResizeStopPoints",value:function e(){return!1}},{key:"checkResizeInnerStopPoints",value:function e(){return!1}},{key:"setDefaultAngle",value:function e(){var t;return t=this.angle,isNaN(t)||0===t||this.setAngle(0),t}},{key:"getRelativeCoords",value:function e(){return Object.assign(this.position,{width:this.width,height:this.height})}},{key:"setPosition",value:function e(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=this.el.parentNode,u=JSON.parse(JSON.stringify(this.position));if(s&&null!==s.getAttribute("data-page")){var l=n.i(r.c)(this.el.parentNode);if(a.a.setBoundingMarker(l,"red"),i&&(t.left<0&&Math.abs(t.left)>=this.width-o.a.BOUNDARY_SHIFT||t.top<0&&Math.abs(t.top)>=this.height-o.a.BOUNDARY_SHIFT||t.left+this.width>l.width+this.width-o.a.BOUNDARY_SHIFT||t.top+this.height>l.height+this.height-o.a.BOUNDARY_SHIFT))return u}return this.position=t,"absolute"!==this.el.style.position&&(this.el.style.position="absolute"),this.el.style.top="".concat(t.top,"px"),this.el.style.left="".concat(t.left,"px"),u}},{key:"setAngle",value:function e(t,n){var r=this.angle;if(this.setTransform("rotateZ","".concat(t,"rad"),this.el),this.overlay&&!1!==n){var i=!0===this.useOriginalAngleForOverlay?this.originalAngle:t;u.a.setAngle(this,i)}return this.angle=t,r}},{key:"getBounds",value:function e(t){t=t||this.underlyingEl||this.el;var i=n.i(r.c)(t);return 0===i.left&&0===i.top&&0===i.bottom&&0===i.right&&(i=n.i(r.c)(this.el)),{left:i.left,top:i.top,right:i.left+i.width,bottom:i.top+i.height,width:i.width,height:i.height,center:{x:i.left+i.width/2,y:i.top+i.height/2}}}},{key:"getSnaps",value:function e(){var t=this.getBounds();return this.getSnapsFromCoords(t)}},{key:"getSnapsFromCoords",value:function e(t){return[{x:t.left,type:"left"},{y:t.top,type:"top"},{x:t.right,type:"right"},{y:t.bottom,type:"bottom"},{x:t.center.x,type:"center"},{y:t.center.y,type:"center"}]}},{key:"getOverlayPosition",value:function e(){return this.overlay&&"highlight"===this.overlay.getAttribute("data-overlay")?a.a.getOverlayPositionWithRotationControls(this,n.i(i.a)("workspace")):a.a.getOverlayPosition(this,n.i(i.a)("workspace"))}},{key:"setStyle",value:function e(t,n){n=this.underlyingEl||this.el||n;var r=this.style;return this.style=t,Object.keys(t).forEach(function(e){n.style[e]=t[e]}),r}},{key:"setEl",value:function e(t){this.el=t,this.underlyingEl=this.el.childNodes[0],this.setHeight(this.height),this.setWidth(this.width),this.setAngle(this.angle||0),this.style&&this.setStyle(this.style,t)}},{key:"outOfBoundary",value:function e(){return!1}},{key:"setDimension",value:function e(t,n,r,i){n=parseFloat(n),this[t]=n,i=i||this.underlyingEl||this.el,!1!==r&&(i.style[t]="".concat(n,"px"))}},{key:"setWidth",value:function e(t,n){this.setDimension("width",t,n)}},{key:"setHeight",value:function e(t,n){this.setDimension("height",t,n)}},{key:"scale",value:function e(t){this.setWidth(this.width*t),this.setHeight(this.height*t)}},{key:"scalePosition",value:function e(t){var n=this.position||{},r=n.left,i=n.top;this.setPosition({left:r*t,top:i*t},!1)}},{key:"serialize",value:function e(){var t=n.i(i.a)("scaleRatio")/100;return{width:n.i(r.q)(this.width/t),height:n.i(r.q)(this.height/t)}}},{key:"destroy",value:function e(){c.a.remove(this.uuid),this.el&&this.el.remove?this.el.remove():this.el.parentElement&&this.el&&this.el.parentElement.removeChild(this.el)}}]),e}()},function(e,t,n){"use strict";var r=n(7),i=n(14),o=n.n(i),a=n(17);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=d(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var y=Object.keys(a.a),E=function(e){function t(e){var n;return u(this,t),(n=f(this,g(t).call(this,e))).isGroup=!0,n.children=(e.children||[]).map(function(e){var t=o.a.get(e.uuid);return t.valuesBeforeGroupping={opacity:t.opacity/n.opacity,angle:t.angle},t}),n.calculatePosition(),n}return v(t,e),c(t,[{key:"getControlsFilter",value:function e(){return["nw","ne","sw","se"]}},{key:"drag",value:function e(n,r){return p(g(t.prototype),"drag",this).call(this,n,r)}},{key:"resizeAsPartOfGroup",value:function e(n){p(g(t.prototype),"resizeAsPartOfGroup",this).call(this,n),this.resizeChildren(n.ratio)}},{key:"resize",value:function e(n){p(g(t.prototype),"resize",this).call(this,n),this.resizeChildren(n.ratio)}},{key:"resizeChildren",value:function e(t){var r=this;this.children.forEach(function(e){var i=n.i(a.b)(r,e);e.resizeAsPartOfGroup({ratio:t,position:i})})}},{key:"calculatePosition",value:function e(){var t=n.i(a.c)(this.children),r={position:{top:t.top,left:t.left},width:t.width,height:t.height};Object.assign(this,r)}},{key:"ungroup",value:function e(){this.children.forEach(function(e){delete e.valuesBeforeGroupping,delete e.relativeChildPosition})}},{key:"setOpacity",value:function e(t){this.children.forEach(function(e){var n=Object.assign({},t,{opacity:t.opacity*e.valuesBeforeGroupping.opacity});e.setOpacity(n)});var n=t.opacity,r=this.opacity;return this.opacity=n,{opacity:r}}},{key:"mounting",value:function e(){var n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.groupEdges=this.getEdgesCoords(),r.groupDims={width:this.width,height:this.height},Promise.all(this.children.map(function(e){return e.mounted(r)})).then(function(){return p(g(t.prototype),"mounting",n).call(n,r)})}},{key:"resizeBorders",value:function e(t){this.setWidth(t.width),this.setHeight(t.height),this.setPosition(t.position)}},{key:"alignChildren",value:function e(t){if(!y.includes(t))throw new Error("Unexpected align type");var r=this.children.filter(function(e){return!e.isBackgroundElement()});if(r.length){var i=n.i(a.c)(r);if(["left","right","hCenter"].includes(t)){var o={left:"left",right:"right",hCenter:"center"};this.children.filter(function(e){return"textElement"===e.type}).forEach(function(e){var n;0===e.angle&&e.setTextAlign({align:o[t]})})}return n.i(a.d)(r,i,t)}}}]),t}(r.a);t.a=E},function(e,t,n){"use strict";var r=n(7);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=f(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return g});var g=function(e){function t(e){var n;return o(this,t),(n=u(this,h(t).call(this,e))).type="cropElement",n.hasRotationControls=!1,n.proportionalResize=!1,n.originalImageSrc=e.originalImageSrc,n.parentImageHeight=e.parentImageHeight,n.parentImageWidth=e.parentImageWidth,n.useOriginalAngleForOverlay=!0,n}return p(t,e),s(t,[{key:"getControlsFilter",value:function e(){return["nw","ne","sw","se","n","s","w","e"]}},{key:"setInitialBounds",value:function e(){this.initialBounds=this.getBounds()}},{key:"stabilize",value:function e(t){t||(t={width:this.parentImageWidth,height:this.parentImageHeight}),this.parentImageHeight=t.height,this.parentImageWidth=t.width;var n=this.el.querySelector("img");n.style.width="".concat(t.width,"px"),n.style.height="".concat(t.height,"px");var r=-this.position.left,i=-this.position.top;n.style.left="".concat(r,"px"),n.style.top="".concat(i,"px")}},{key:"checkAndResetOverlap",value:function e(t,n){var r=this.position,i=this.height,o=this.width;if(this.position.left<0)o=t+this.position.left,r.left=0;else if(this.width+this.position.left>this.parentImageWidth){var a;o=t+(this.parentImageWidth-(this.position.left+this.width))}if(this.position.top<0)i=n+this.position.top,r.top=0;else if(this.height+this.position.top>this.parentImageHeight){var s;i=n+(this.parentImageHeight-(this.position.top+this.height))}this.setHeight(i),this.setWidth(o),this.setPosition(r),this.stabilize(),this.setInitialBounds()}},{key:"drag",value:function e(n){c(h(t.prototype),"drag",this).call(this,n,!1)}},{key:"resize",value:function e(n){var r=c(h(t.prototype),"resize",this).call(this,n);return this.onResize({position:this.position,width:this.width,height:this.height}),r}},{key:"setEl",value:function e(n){c(h(t.prototype),"setEl",this).call(this,n),this.el.querySelector("img").draggable=!1,this.el.style.zIndex=10,this.bindEvents()}},{key:"getImage",value:function e(){return this.el.querySelector("img")}},{key:"template",value:function e(){return'<div crop="crop" style="position:relative; user-select: none; overflow: hidden;"><img style="position:absolute; opacity: 1" src="'.concat(this.originalImageSrc,'"/></div>')}}],[{key:"correctOverlap",value:function e(t,n,r){var i=t.left,o=t.top,a=t.height,s=t.width;if(i<0)s+=i,i=0;else if(s+i>n){var u;s+=n-(i+s)}if(o<0)a+=o,o=0;else if(a+o>r){var l;a+=r-(o+a)}return{left:i,top:o,width:s,height:a}}}]),t}(r.a);g.flippable=!0},function(e,t,n){"use strict";var r=n(38),i=n(16),o=n(0),a=n(5),s=n(27),u=n.n(s),l=n(19),c=n(9),f=n(1),h=n(129),p=n(130),d=n(2),g=n(3),v=n(4);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function w(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=S(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return x});var x=function(e){function t(e){var n;return y(this,t),(n=w(this,A(t).call(this,e))).innerId=e.innerId||0,n.elements=e.elements||[],n.pendingElementsData=e.pendingElementsData||[],n.loadStatus=e.loadStatus,n.className=e.className,n.templateId=e.templateId,n.templateLikeElements=e.templateLikeElements||[],n.pageActiveClass=e.pageActiveClass||f.a.CLASS_NAMES.DEFAULT_PAGE_ACTIVE_CLASS,n.pageInactiveClass=e.pageInactiveClass||f.a.CLASS_NAMES.DEFAULT_PAGE_INACTIVE_CLASS,n.pageNotReadyClass=e.pageNotReadyClass||f.a.CLASS_NAMES.DEFAULT_PAGE_NOT_READY_CLASS,n.pagePrefixClass=e.pagePrefixClass||f.a.CLASS_NAMES.DEFAULT_PAGE_PREFIX_CLASS,n}return O(t,e),b(t,[{key:"setEl",value:function e(n){P(A(t.prototype),"setEl",this).call(this,n),this.loadStatus===f.a.PAGE_LOAD_STATUS.initial&&this.el.classList.add(this.pageNotReadyClass),this.el.setAttribute("uuid",this.uuid)}},{key:"isReady",value:function e(){return this.loadStatus===f.a.PAGE_LOAD_STATUS.ready}},{key:"isFailed",value:function e(){return this.loadStatus===f.a.PAGE_LOAD_STATUS.failed}},{key:"findById",value:function e(t){return this.elements.find(function(e){return e.innerId===t})}},{key:"getRelativePosition",value:function e(t){return{left:t.position.left/this.width,top:t.position.top/this.height}}},{key:"addTemplateLikeElement",value:function e(t){this.templateLikeElements.includes(t)||this.templateLikeElements.push(t)}},{key:"getRelativeDropPosition",value:function e(t){return t=this.getDropPosition(t),this.getRelativePosition({position:t})}},{key:"getAbsolutePosition",value:function e(t){return{left:this.width*t.left,top:this.height*t.top}}},{key:"setActive",value:function e(t){this.el.classList.toggle(this.pageInactiveClass,!t),this.el.classList.toggle(this.pageActiveClass,t)}},{key:"getIntersectedDesignElements",value:function e(t){return this.elements.filter(function(e){var r=t.getBounds();return!e.isBackgroundElement()&&n.i(o.R)(e.getBounds(),r)})}},{key:"getElementsIntersection",value:function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i;return{levels:this.getIntersectedDesignElements(t,r).map(function(e){return n.elements.indexOf(e)}).sort(function(e,t){return e-t}),active:this.elements.indexOf(t)}}},{key:"getElementMountJobs",value:function e(){return this.elements.map(function(e){return e.mounted()})}},{key:"getOverlappedElementsByPointCoords",value:function e(t){return this.elements.filter(function(e){return n.i(o.o)({left:t.x,top:t.y,width:1,height:1},e.getBounds())})}},{key:"getIntersectedDesignElementNotInMultiSelection",value:function e(t,n){return this.getOverlappedElementsByPointCoords(t).filter(function(e){return!n.children.includes(e)&&e!==n}).pop()}},{key:"getIntersectedElementByPointCoords",value:function e(t,r){return this.getOverlappedElementsByPointCoords(t).filter(function(e){return e.innerId>r.innerId}).sort(n.i(o.S)("innerId","desc"))[0]}},{key:"getSelfIntersectedBy",value:function e(t,r){var i=n.i(o.d)(r,"nw").edge,a=n.i(o.d)(r,"ne").edge,s=n.i(o.d)(r,"sw").edge,u=r.width,l=r.height,c=n.i(o.i)(i,t,i,a),h=n.i(o.i)(i,t,i,s),p;return c>f.a.MOVE_INNER_PADDING&&c<u-f.a.MOVE_INNER_PADDING&&h>f.a.MOVE_INNER_PADDING&&h<l-f.a.MOVE_INNER_PADDING?r:null}},{key:"getChildIntersectedBy",value:function e(t,n){var r=this;return n.children.filter(function(e){return r.getSelfIntersectedBy(t,e)}).pop()}},{key:"getParentMaskIntersected",value:function e(t,n){var r=this.elements.find(function(e){return e.shadowImage===n}),i;return this.getSelfIntersectedBy(t,r)}},{key:"getControlsIntersected",value:function e(t,r){var i;return!Array.from(r.overlay.querySelectorAll("[kind]")).some(function(e){var r;return n.i(o.o)({left:t.x,top:t.y,width:1,height:1},n.i(o.c)(e))})}},{key:"redraw",value:function e(){var t=this;this.el.innerHtml="",this.elements.forEach(function(e){t.el.appendChild(e.el)})}},{key:"reorderElement",value:function e(t,n){var r=function e(n){return n.uuid===t.uuid};if(n<0||n>this.elements.length-1)throw new Error("Out of levels range, elements reposition is impossible");var i=this.elements.findIndex(r);if(-1===i)throw new Error("No element with such uuid presented on this page");var o=this.elements.find(r);return this.elements.splice(i,1),this.elements.splice(n,0,o),this.redraw(),{from:i,to:n}}},{key:"putCroppedElementOnTop",value:function e(t){var n=this.reorderElement(t,this.elements.length-1);this.croppedElementPosition=n.from}},{key:"putCroppedElementBack",value:function e(t){this.reorderElement(t,this.croppedElementPosition),delete this.croppedElementPosition}},{key:"swap",value:function e(t,r){var i=this.elements[t];return this.elements=n.i(p.a)(n.i(h.a)(this.elements,t,r)),this.redraw(),this.getElementsIntersection(i)}},{key:"pullElement",value:function e(t){var n=t.levels.indexOf(t.active)+1;if(n>t.levels.length-1)throw new Error("Out of levels range, cannot be more than intersected elements length");return this.swap(t.active,t.levels[n],"pull")}},{key:"pushElement",value:function e(t){var n=t.levels.indexOf(t.active)-1;if(n<0)throw new Error("Out of levels range, cannot be below 0");if(this.elements.filter(function(e){return e.isBackground}).length&&n<1)throw new Error("Element cannot be placed under background");return this.swap(t.active,t.levels[n])}},{key:"removeElement",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.locked)throw new Error("Locked element cannot be removed");delete t.innerId;var r=this.elements.indexOf(t);this.elements.splice(r,1),!n.preventDestroy&&t.destroy()}},{key:"clearElements",value:function e(){this.elements.forEach(function(e){e.destroy(!1)}),this.elements=[]}},{key:"onDragStart",value:function e(t){u.a.onDragStart(t,this)}},{key:"getDropPosition",value:function e(t){var r=n.i(o.c)(this.el),i;return{left:(t.left-r.left)/this.width,top:(t.top-r.top)/this.height}}},{key:"getDropMathPosition",value:function e(t,n){var r=n/100;return t.left*=r/(this.width*r),t.top*=r/(this.height*r),t}},{key:"repositionDrop",value:function e(t,n){var r=n.getBounds(),i=t.left-r.left,o=t.top-r.top,a={left:n.position.left+i,top:n.position.top+o};return n.setPosition(a,!1),a}},{key:"__getInnerId",value:function e(){return this.innerId++}},{key:"calculateInnerId",value:function e(){var t=this.elements.map(function(e){return e.innerId});this.innerId=n.i(o.T)(t)+1}},{key:"insertElement",value:function e(t,n){var r;this.elements.find(function(e){return e.uuid===t.uuid})||("append"===n?this.elements.push(t):this.elements.unshift(t))}},{key:"setPosition",value:function e(){}},{key:"scale",value:function e(r){P(A(t.prototype),"scale",this).call(this,r),this.scaleElements(r);var i=n.i(d.a)("actualPageMargin");this.el.style.marginBottom="".concat(i,"px")}},{key:"scaleElements",value:function e(t){this.elements.forEach(function(e){var n=e.locked;e.setLock({locked:!1,notify:!1}),e.scalePosition(t),e.scale(t),e.setLock({locked:n,notify:!["groupElement","textElement"].includes(e.type)})})}},{key:"placeElement",value:function e(t,r,o,s){s=s||"append",!1!==r&&("append"===s?this.el.appendChild(t.el):"prepend"===s&&this.el.insertBefore(t.el,this.el.firstChild)),!1===o||t.shallow||(a.a.log("Page: set selectable for inventory element..."),n.i(i.a)(t,!1,this)),this.insertElement(t,s),t.innerId||0===t.innerId||(t.innerId=this.__getInnerId()),t.setInnerId(t.innerId),t.draggable||t.shallow||this.setDraggable(t),t.onRemove=this.removeElement.bind(this,t)}},{key:"setDraggable",value:function e(t){n.i(l.b)(t,{clone:!1,inDesigner:!0,onDragStart:this.onDragStart.bind(this,t),preventDefault:"textElement"!==this.type})}},{key:"addBackground",value:function e(t,n){if(this.clearBackground(),t){if("coloredBackground"===t.type)t.setWidth(this.width),t.setHeight(this.height),t.setPosition({left:0,top:0});else{var r=this.getBackgroundProportionality(t);t.setPosition(r)}this.placeElement(t,!0,n,"prepend"),this.incrementInnerId()}}},{key:"getBackground",value:function e(){return this.elements.filter(function(e){return e.isBackgroundElement()})[0]}},{key:"addElement",value:function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(!t.pageEl||"textElement"!==t.type);t.el.parentNode===this.el||a||this.el.appendChild(t.el);var s=n,u={left:this.width*s.left,top:this.height*s.top};return t.setPosition(u,o),i&&(s=this.repositionDrop(i,t)),this.placeElement(t,!1,r),s}},{key:"clearBackground",value:function e(){var t=this.elements.filter(function(e){return e.isBackgroundElement()})[0];t&&c.a.removeElement(this.uuid,t.uuid)}},{key:"removeBackground",value:function e(t){var n=t||this.elements.find(function(e){return e.isBackgroundElement()});n&&n.removeBackgroundProperty()}},{key:"highlightElementsIn",value:function e(t){return this.elements.filter(function(e){var r=e.canBeMultiselected()&&n.i(o.R)(e.getBounds(),t);return e.toggleHighlight(r),r})}},{key:"getFitOut",value:function e(t){return n.i(o.U)({width:t.width,height:t.height},{left:0,top:0,width:this.width,height:this.height})}},{key:"getBackgroundProportionality",value:function e(t){var n=this.getFitOut(t);return t.setHeight(n.height,!0,!0),t.setWidth(n.width,!0,!0),n}},{key:"getCoverElements",value:function e(){var t=this;return this.elements.filter(function(e){var n=t.height-e.height,r=t.width-e.width;return e.isBackgroundElement()||r<.2*t.width&&n<.2*t.height&&!["illustrationElement","svgElement","maskElement","persistGroupElement"].includes(e.type)})}},{key:"getRelativeCenterPositions",value:function e(){return this.elements.map(this.getRelativeCenterPosition.bind(this)).reduce(function(e,t){return e[t.designElement.uuid]=t,e},{})}},{key:"getRelativeCenterPosition",value:function e(t){var n=this.getBounds(),r=t.getBounds();return{designElement:t,position:{left:(n.center.x-r.center.x)/this.width,top:(n.center.y-r.center.y)/this.height}}}},{key:"setPositionRelativeToCenter",value:function e(t,n){var r=this.getRelativeCenterPosition(t).position,i=n.left-r.left,o=n.top-r.top,a=t.position,s=a.left,u=a.top;t.setPosition({left:s-i*this.width,top:u-o*this.height})}},{key:"incrementInnerId",value:function e(){this.elements.forEach(function(e){e.isBackgroundElement()?e.setInnerId(0):e.setInnerId(++e.innerId)})}},{key:"ungroupAll",value:function e(){for(var t=this;this.elements.some(function(e){return"persistGroupElement"===e.type});)this.elements.filter(function(e){return"persistGroupElement"===e.type}).forEach(function(e){c.a.ungroupPersist(e,t),e.ungroup()})}},{key:"afterRender",value:function e(){this.elements.forEach(function(e){return e.afterRender()})}},{key:"has",value:function e(t){var n=-1!==this.elements.indexOf(t);return n||this.elements.find(function(e){return e.cropping&&e.cropOverlay===t})}},{key:"serialize",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=P(A(t.prototype),"serialize",this).call(this,r),a=this.loadStatus===f.a.PAGE_LOAD_STATUS.ready,s=this.pendingElementsData;a&&(s=this.elements.filter(function(e){return e.isStorable}).map(function(e){return e.serialize(r)}));var u=Object.assign({},{uuid:this.uuid,innerId:this.innerId,elements:s,templateLikeElements:this.templateLikeElements,angle:this.angle,templateId:this.templateId},i);return n.i(o.s)(u,[],r)}},{key:"destroy",value:function e(){this.elements.forEach(function(e){e.destroy(!1,{shouldDestroyImmediately:"groupElement"===e.type})}),P(A(t.prototype),"destroy",this).call(this)}},{key:"template",value:function e(){return""}},{key:"loadStatus",get:function e(){return this._loadStatus},set:function e(t){var n=this;if(this._loadStatus=t,this.el){var r=f.a.PAGE_LOAD_STATUS,i=t!==r.ready;this.el.classList.toggle(this.pageNotReadyClass,i),Object.keys(r).forEach(function(e){n.el.classList.remove("".concat(n.pagePrefixClass,"-").concat(e))}),this.el.classList.add("".concat(this.pagePrefixClass,"-").concat(t))}v.a.dispatch(g.a.PAGE_STATUS_CHANGE,{page:this,status:t})}}]),t}(r.a)},function(e,t,n){"use strict";t.a={looseBGDPropertyOnGeometryMutations:!0,denyGeometryMutationsForAnimatedBackground:!0}},function(e,t,n){"use strict";var r=n(117),i=n(8),o=n(0);function a(e){Object.assign(e.prototype,{getTintContainer:function e(){return this.el.querySelector("[foreground-rect]")},resetFilters:function e(){this.filters={brightness:0,contrast:0,saturate:0,tint:0,blur:0,crossProcess:0,vignette:0},this.filtersPreset=!1,this.filtersIntensityEnabled=!1,this.filtersPresetIntensity=50,this.regenerate(!0)},resolveFiltersConfiguration:function e(t){t.filters=t.filters||{},this.filters={brightness:t.filters.brightness||0,contrast:t.filters.contrast||0,saturate:t.filters.saturate||0,tint:t.filters.tint||0,blur:t.filters.blur||0,crossProcess:t.filters.crossProcess||0,vignette:t.filters.vignette||0},this.filtersPreset=t.filtersPreset||!1,this.filtersPresetIntensity=t.filtersPresetIntensity||50,this.filtersIntensityEnabled=t.filtersIntensityEnabled||!1,this.filtersStyle={}},setFilters:function e(t){var n=this;Object.assign(this.filters,t);var r=this.filtersPreset&&Object.keys(this.filters).every(function(e){return n.filters[e]===i.d[n.filtersPreset][e]});this.filtersIntensityEnabled=r},setCssFilters:function e(t,n){this.setFilters(t);var i=r.a.getCssFilterStyleString(this.filters),o={filter:i};this.cropping||(o.overflow="hidden",this.filtersStyle.overflow="hidden"),this.setStyle(o,n||!1),this.filtersStyle.filter=i},setTintFilter:function e(t){this.setFilters(t);var n=this.filtersIntensityEnabled?this.filtersPresetIntensity/100*.3:.15,i=r.a.getTintConfig(this.filters),o=r.a.getTintStyleString(i,n);this.filtersStyle.background=o,this.tintElementChange(i,n)},regenerate:function e(t,n){this.setCssFilters(this.filters,n),this.setTintFilter(this.filters,n),this.setCanvasFilters(this.filters,t),n&&n.getImage().setAttribute("src",this.getImage().getAttribute("src"))},getReducedValue:function e(t,n){var r=parseFloat(((t/50).toFixed(2)*n).toFixed(0));return r<100?r:r<-100?-100:100},setFiltersPreset:function e(t){var n=this;if(Object.assign(this,t),!1===t.filtersPreset)this.cleanFilters();else{var r=i.d[t.filtersPreset]||{},o=Object.keys(r),a=t.filtersPresetIntensity||this.filtersPresetIntensity;if(o.length>0){var s=o.reduce(function(e,t){return e[t]="tint"===t?r[t]:n.getReducedValue(r[t],a),e},{});Object.assign(this.filters,s)}this.filtersPreset=t.filtersPreset}this.regenerate(t.finalize),this.filtersIntensityEnabled=!0},cleanFilters:function e(){n.i(o.F)(this.filters,Object.keys(this.filters))}})}t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={REPLACE_LOCKED_BACKGROUND:"REPLACE_LOCKED_BACKGROUND"}},function(e,t,n){"use strict";var r=n(11),i=n(17),o=n(0);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[],s=[];function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.forEach(function(e){if(e.uuid=e.uuid||n.i(o.a)(64),Array.isArray(e.children))return s[t]=(s[t]||[]).concat(e),void u(e.children,t+1);a.push(e)})}u(e),s.reverse();var l=s.slice(),c;return l.unshift(a),l.map(function(e){return e.map(function(e){return function(){return n.i(r.a)(e.type,e,t.shallow,t.fromTemplate)}})}).reduce(function(e,t){return e.then(function(e){return Promise.all(t.map(function(e){return e()})).then(function(t){return e.concat(t)})})},Promise.resolve([])).then(function(e){return e.filter(function(e){return"persistGroupElement"===e.type}).forEach(function(t){e=n.i(i.f)(e,t)}),e})}t.a=a},function(e,t,n){"use strict";var r=n(9),i=n(11),o=n(2),a=n(10);function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)})}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left";return"right"===t?e.getEdgeCoords("e").edge:"center"===t?e.getBounds().center:e.getEdgeCoords("w").edge}function h(e,t,n){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark(function e(t,r,i){var a,s,u,l,c,h,p,d,g,v,m,y;return regeneratorRuntime.wrap(function e(E){for(;;)switch(E.prev=E.next){case 0:a=n.i(o.a)("scaleRatio")/100,"maskElement"===t.type?(s=t.maskData,u=s.heightBias,l=s.lineHeightShift,u&&(c=u*a,l<0&&(c-=l*a),t.setHeight(t.height+c))):(h=r.width,p=t.width,d=h/p,t.setFontSize({size:t.fontSize*d}),t.scale(d)),g=t.textAlign,"textElement"===r.type&&(g=r.textAlign),v=f(t,g),m=i.x-v.x,y=i.y-v.y,t.setPosition({left:t.position.left+m,top:t.position.top+y});case 8:case"end":return E.stop()}},e,this)}))).apply(this,arguments)}function d(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=c(regeneratorRuntime.mark(function e(t,n,i,o){var a,s;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return r.a.dropElementTo(o,n,n.position,!0,i,!1),a=n.textAlign,"textElement"===t.type&&(a=t.textAlign),s=f(t,a),o.removeElement(t),u.next=7,n.mounted({hasTrustedDimensions:!0});case 7:return h(n,t,s),u.abrupt("return",n);case 9:case"end":return u.stop()}},e,this)}))).apply(this,arguments)}var v={createFrameFrom:function(){var e=c(regeneratorRuntime.mark(function e(t,r){var o,a,s,u,l,c,f,h;return regeneratorRuntime.wrap(function e(p){for(;;)switch(p.prev=p.next){case 0:return o=t.serialize(),a=o.height,s=o.position,u=o.angle,l=t.getEditableBlockWidth(),(c={width:l,height:a,position:s,angle:u,opacity:t.opacity,maskType:t.constructor.maskType,maskData:t.getClippingData(),stickedImageData:t.stickedImageData||null,dphId:(t.stickedImageData||{}).dphId,filters:t.stickedImageFilters||null,filtersPreset:t.stickedFiltersPreset||null}).maskData.url&&(c.url=c.maskData.url,c.stasheeData=t.stasheeData,c.id=t.id),f=t.getBounds(),p.next=7,n.i(i.a)("maskElement",c);case 7:return h=p.sent,p.abrupt("return",d(t,h,f,r));case 9:case"end":return p.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),unframe:function(){var e=c(regeneratorRuntime.mark(function e(t,r){var o,u,l;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:return o=s({},t.maskData,{text:n.i(a.q)(t.maskData.text),angle:t.angle,opacity:t.opacity,stickedImageData:t.stickedImageData,stickedImageFilters:t.filters,stickedFiltersPreset:t.filtersPreset,position:t.position}),c.next=3,n.i(i.a)("textElement",o);case 3:return u=c.sent,l=t.getBounds(),c.abrupt("return",d(t,u,l,r));case 6:case"end":return c.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()};t.a=v},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(22),a=n(63),s=n.n(a);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)})}}var h={left:"start",center:"middle",right:"end"};function p(){return{contents:'<rect x="0" y="0" width="100%" height="100%" fill="#00000"></rect>',id:n.i(r.a)(16)}}function d(e){return{contents:e.mappedContent,width:e.dimensions.width,height:e.dimensions.height,left:e.dimensions.left,top:e.dimensions.top,id:n.i(r.a)(16),url:e.url}}function g(e){return v.apply(this,arguments)}function v(){return(v=f(regeneratorRuntime.mark(function e(t){var o,a,l,c,p,d,g,v,m,y,E;return regeneratorRuntime.wrap(function e(b){for(;;)switch(b.prev=b.next){case 0:return o=u({},t,{textAnchor:h[t.textAlign],fontFamily:t.font}),a=o.boldMap,l=o.italicMap,c=o.text,p=o.width,d=o.height,g=o.fontFamily,v=t.lineMap.map(function(e,t){return new Promise(function(){var r=f(regeneratorRuntime.mark(function r(f){var h,p,d,v,m,y,E,b,w,_,P,S,A,O;return regeneratorRuntime.wrap(function r(C){for(;;)switch(C.prev=C.next){case 0:return h=e.startIndex,p=e.endIndex,d=c.slice(h,p+1),v=s.a.getPartOfMap(a,h,p),m=s.a.getPartOfMap(l,h,p),y=u({},o,{boldMap:v,italicMap:m,lineNumber:t+1}),E=n.i(i.b)(d),b=E.count,w=n.i(i.c)(E.trimmed),_=w.count,n.i(i.d)(d)&&0!==y.letterSpacing&&(d=w.trimmed.split(" ").map(function(e){return e.split("").reverse().join("")}).reverse().join(" "),P=-1,S=-1,1===_&&(P=0),1===b&&(S=0),d=n.i(i.e)(d,_+P),d=n.i(i.f)(d,b+S)),A=new s.a(d,y),C.next=13,A.setLineOffset(g);case 13:O=C.sent,o.top=O.viewBoxShift,o.heightBias=O.heightBias,o.lineHeightShift=O.lineHeightShift,f(A.exportLine());case 18:case"end":return C.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}())}),b.next=5,Promise.all(v);case 5:return m=b.sent,y=m.join(""),E=d+o.heightBias,b.abrupt("return",u({},o,{contents:y,height:E,top:-o.heightBias/2,width:p,type:"text",id:n.i(r.a)(16)}));case 9:case"end":return b.stop()}},e,this)}))).apply(this,arguments)}var m={getClippingContents:function(){var e=f(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:i.t0=t,i.next="rect"===i.t0?3:"text"===i.t0?4:"svg"===i.t0?5:6;break;case 3:return i.abrupt("return",p(n));case 4:return i.abrupt("return",g(n,r));case 5:return i.abrupt("return",d(n));case 6:case"end":return i.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}(),extractClippingContentsFromSvg:function e(t){var r=document.createElement("div");r.innerHTML=t;var a=r.querySelector("svg"),s=[];function u(e){["svg","title","clipPath","g"].includes(e.tagName)||e.outerHTML&&s.push(e.outerHTML),e.childNodes.length&&n.i(i.a)(e.childNodes,u)}return u(a),{mappedContent:s.join(""),dimensions:n.i(o.b)(a)}}};t.a=m},function(e,t,n){"use strict";var r=n(19),i=n(27),o=n.n(i),a=n(10),s=n(6),u=n(2),l=n(0),c=n(4),f=n(3),h,p;function d(e,t){if(!t)throw new Error("Page should be for draggable");if(e.overlay){var i=e.overlay.querySelectorAll("[move],[data-overlay]");n.i(a.a)(i,function(i){if(!i.getAttribute("drag-attached")){i.setAttribute("drag-attached",!0);var a=n.i(u.a)("scrollableNode");n.i(r.a)(i,{onDragStart:function n(){o.a.onDragStart(e,t)},onDragMove:function t(n,r,i,a){o.a.onDragMove(e,{x:a.deltaX,y:a.deltaY}),o.a.getDragMoveHandler()(e.getBounds(),e.el,null,a,r)},onDragEnd:function n(r,a){i.removeAttribute("drag-attached"),o.a.onDragEnd(e,a),e.overlay&&d(e,t)},attach:!1,moveElement:!1,designElement:e,scrollNode:a})}})}}function g(e,t){var r=e.overlay.querySelectorAll("[kind]"),i;return Array.from(r).some(function(e){var r;return n.i(l.o)({left:t.x,top:t.y,width:1,height:1},n.i(l.c)(e))&&!e.getAttribute("halo")})}function v(e,t){if(E(),e.overlay){var r=e.overlay.querySelector("[data-overlay]");"cropElement"!==e.type&&"shadowImageElement"!==e.type||(r.style.pointerEvents="none");var i=function i(o){if(!e.cropping&&e.overlay&&"groupElement"!==e.type){var a={x:o.pageX,y:o.pageY},s=e.overlay.querySelector("[move]");if(s||(s=e.overlay.childNodes[0]),s){var u=n.i(l.c)(s);if(n.i(l.o)({left:a.x,top:a.y,width:1,height:1},u)){var i="getIntersectedElementByPointCoords",c;"textElement"===e.type?i="getSelfIntersectedBy":"cropElement"===e.type?i="getControlsIntersected":"shadowImageElement"===e.type&&(i="getParentMaskIntersected"),t&&(c=t[i]({x:o.pageX,y:o.pageY},e));var f=g(e,a);c&&!f?(r.style.pointerEvents="none",s.style.pointerEvents="none"):(r.style.pointerEvents="auto",s.style.pointerEvents="auto")}}}};return s.a.attachEvent(null,"mousemove",i),i}}function m(e){["cropElement","shadowImageElement"].includes(e.type)||e.overlay&&(e.overlay.querySelector("[data-overlay]").ondblclick=function(){if(!e.locked){var t=e.overlay.querySelector("[move]");if(e.cropping)return t&&(t.style.pointerEvents="auto"),void c.a.dispatch(f.a.ELEMENT_SET_CROP,e);c.a.dispatch(f.a.ELEMENT_ATTACH_CROP,e),t.style.pointerEvents="none"}})}function y(e,t){if(e.overlay){var r=e.overlay.querySelector("[data-overlay]");p&&s.a.detachEvent("click",p,r),p=function r(i){var o=n.i(u.a)("arbiterKeyMode"),a;if(o.CMD||o.SHIFT){var s={x:i.pageX,y:i.pageY},l=t.getIntersectedDesignElementNotInMultiSelection(s,e),h=t.getChildIntersectedBy(s,e);if(h&&l&&t.elements.indexOf(h)>t.elements.indexOf(l)&&(l=null),h){var p=e.children.filter(function(e){return e!==h});return 1===p.length?c.a.dispatch(f.a.ELEMENT_SELECTED,{designElement:p[0],skipMultiselectionHandler:!0}):void c.a.dispatch(f.a.MULTISELECT_STOPED,{elementsList:p})}l&&c.a.dispatch(f.a.MULTISELECT_STOPED,{elementsList:[l]})}},s.a.attachEvent(r,"click",p)}}function E(){h&&(s.a.detachEvent("mousemove",h),h=null)}e.exports={setProxy:function e(t,n){!1!==t.constructor.transparable&&(h=v(t,n)),d(t,n),["maskElement","imageElement"].includes(t.type)&&m(t,n),"groupElement"===t.type&&y(t,n),c.a.subscribe(f.a.RELEASE_PROXY,E)},releaseProxy:E}},function(e,t,n){"use strict";var r=n(18);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var s="data-page-overlay-child-type",u=function(){function e(t){i(this,e),this.clickable=!1,this.zIndex=1,this.relatedPageUuid=t.uuid}return a(e,[{key:"getElement",value:function e(){var t=document.createElement("div");t.setAttribute(s,this.type),t.setAttribute("data-related-page",this.relatedPageUuid);var i=this.clickable?"all":"none";return n.i(r.a)(t,{pointerEvents:i,zIndex:this.zIndex}),t}},{key:"mount",value:function e(t){this.el=this.getElement(),t.append(this.el)}},{key:"update",value:function e(t){}},{key:"destroy",value:function e(){this.el.remove()}}],[{key:"shouldShowOnPage",value:function e(t){return!0}}]),e}();t.a=u},function(e,t,n){"use strict";var r=n(24),i=n(1);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t;return r.a.findAll(e,function(e){return"textElement"===e.type}).forEach(function(e){var t=e.text;e.text=t.normalize(i.a.TEXT_NORMALIZATION_FORM),t!==e.text&&delete e.lineMap}),e}t.a={normalizeTextElements:o}},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(8),a=n(11),s=n(1);function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)})}}function h(e){var t=e.width,i=e.height,o=t/i,a=n.i(r.a)("pageWidth"),u=n.i(r.a)("pageHeight");return i>t?(o=i/t,t=(i=u*s.a.PAGE_PADDING/100)/o):a>u&&o<2?t=(i=u*s.a.PAGE_PADDING/100)*o:i=(t=a*s.a.PAGE_PADDING/100)/o,{width:t,height:i}}function p(e){return d.apply(this,arguments)}function d(){return(d=f(regeneratorRuntime.mark(function e(t){var o,s,u,l,c,f,h;return regeneratorRuntime.wrap(function e(p){for(;;)switch(p.prev=p.next){case 0:return o=t.data,s=t.element,o.fontSize=n.i(i._0)(o.fontSize),u=Object.assign({},o,{shouldIgnoreMountingStash:!0}),p.next=5,n.i(a.a)("textElement",u);case 5:(l=p.sent).setWidth(1e4),l.el.setAttribute("data-element-in-mount",!0),document.body.appendChild(l.el),l.checkDimensions(!0),l.checkHeight(),c=n.i(r.a)("scaleRatio")/100,f=l.width*c,h=l.height,s.style.width="".concat(f,"px"),s.style.height="".concat(h,"px"),s.setAttribute("fontSize",l.fontSize),l.destroy(!1);case 18:case"end":return p.stop()}},e,this)}))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=f(regeneratorRuntime.mark(function e(t){var r,a,s,u,l,c,f,h;return regeneratorRuntime.wrap(function e(p){for(;;)switch(p.prev=p.next){case 0:return r=t.data,a=t.element,s=t.mountSize,u=s.width,l=s.height,r.src=n.i(o.j)(r.src),a.setAttribute("data-swapped-src",r.src),a.setAttribute("data-low-quality-src",r.src),a.setAttribute("data-natural-width",u),a.setAttribute("data-natural-height",l),p.next=9,n.i(i.b)(r.src);case 9:c=p.sent,f=c.naturalWidth,h=c.naturalHeight,a.setAttribute("data-natural-width",f),a.setAttribute("data-natural-height",h);case 13:case"end":return p.stop()}},e,this)}))).apply(this,arguments)}function m(e,t){return y.apply(this,arguments)}function y(){return(y=f(regeneratorRuntime.mark(function e(t,r){var o,a,s,u,l,c,f,d=arguments;return regeneratorRuntime.wrap(function e(v){for(;;)switch(v.prev=v.next){case 0:if(o=d.length>2&&void 0!==d[2]?d[2]:{},a=o.shouldPreload,s=o.setFactualSizeAsAttribute,a="boolean"!=typeof a||a,r=n.i(i.p)(r),u=n.i(i.c)(t),l=!!r.width&&!!r.height,c={width:l?r.width:u.width,height:l?r.height:u.height},f=h(c),s?(t.setAttribute("factual-mount-width",f.width),t.setAttribute("factual-mount-height",f.height)):(t.style.width="".concat(f.width,"px"),t.style.height="".concat(f.height,"px")),"textElement"!==r.type){v.next=11;break}return v.abrupt("return",p({data:r,element:t}));case 11:if("imageElement"!==r.type||!a){v.next=13;break}return v.abrupt("return",g({data:r,element:t,mountSize:f}));case 13:case"end":return v.stop()}},e,this)}))).apply(this,arguments)}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n,r=100,i=100*(t=u({},{aspectRatio:1},t)).aspectRatio,o=document.createElement("div");return o.style.width="".concat(100,"px"),o.style.height="".concat(i,"px"),o}t.a={prepareInventoryItem:m,getDraftNode:E}},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return e.right>t.left&&e.left<t.right&&e.top<t.bottom&&e.bottom>t.top}function a(e,t){var n={left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),top:Math.max(e.top,t.top)},i=n.bottom-n.top,o=n.right-n.left,a;return r({height:i,width:o,center:{x:n.left+o/2,y:n.top+i/2}},n)}function s(e,t){return o(e,t)?u(a(e,t)):0;var n}function u(e){return e.width*e.height}t.a={areCoordsIntersected:o,getAreaOfCoordsIntersection:s,getCoordsArea:u,getCoordsIntersection:a}},function(e,t,n){"use strict";var r=n(61),i=n.n(r),o=n(5),a=n(0);t.b=u,t.a=l;var s=["selected","multiSelectActive"];function u(e,t){var r=e.pages.map(function(e){return e.uuid}),i=t.pages.map(function(e){return e.uuid}),o=n.i(a.Z)(r,i),s=o.add,u=o.remove,c=o.move,f,h=[],p;s.length||u.length||c||(h=l(e,t).map(function(e){return t.pages[e].uuid}));return{addedPagesUuids:s,removedPagesUuids:u,editedPagesUuids:h,arePagesMoved:c}}function l(e,t){var i,a=n.i(r.compare)(e,t).filter(function(e){var t=e.path,n=!0,r=t.split("/");return s.forEach(function(e){r.includes(e)&&(n=!1)}),n}),u=a.map(function(e){var t=e.path;return parseInt(t.split("/")[2],10)}).filter(function(e,t,n){return n.indexOf(e)===t});return o.a.log("|---- State compare results: ".concat(u.join(", "))),o.a.log(a),u}},function(e,t,n){"use strict";t.a={get:function e(t){return new Promise(function(e,n){var r=new window.XMLHttpRequest;r.open("GET",t,!0),r.send(),r.onload=function(){if(r.statusCode>302)return n(new Error(r.statusCode));var t,i=r.getAllResponseHeaders().split("\r\n").some(function(e){return"x-has-permission: true"===e.toLowerCase()});e({data:r.responseText,hasPermission:i})}})},getBlob:function e(t){return new Promise(function(e,n){var r=new window.XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(this.status<302){var r=this.response;e(r)}else n(new Error("Fetch error for :",t))},r.send()})}}},function(e,t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",l="object"==typeof e,c=t.regeneratorRuntime;if(c)l&&(e.exports=c);else{(c=t.regeneratorRuntime=l?e.exports:{}).wrap=b;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",g={},v={};v[a]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(D([])));y&&y!==n&&r.call(y,a)&&(v=y);var E=S.prototype=_.prototype=Object.create(v);P.prototype=E.constructor=S,S.constructor=P,S[u]=P.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===P||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(E),e},c.awrap=function(e){return{__await:e}},A(O.prototype),O.prototype[s]=function(){return this},c.AsyncIterator=O,c.async=function(e,t,n,r){var i=new O(b(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},A(E),E[u]="Generator",E[a]=function(){return this},E.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=D,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=i)},stop:function(){this.done=!0;var e,t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=i),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=i),g}}}function b(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),a=new k(r||[]);return o._invoke=C(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function _(){}function P(){}function S(){}function A(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function O(e){function t(n,i,o,a){var s=w(e[n],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},function(e){return t("throw",e,o,a)})}a(s.arg)}var n;function i(e,r){function i(){return new Promise(function(n,i){t(e,r,n,i)})}return n=n?n.then(i,i):i()}this._invoke=i}function C(e,t,n){var r=f;return function i(o,a){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw a;return R()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=x(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=w(e,t,n);if("normal"===l.type){if(r=n.done?d:h,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=d,n.method="throw",n.arg=l.arg)}}}function x(e,t){var n=e.iterator[t.method];if(n===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=i,x(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=w(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=i),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function D(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=i,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:i,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){"use strict";var r=n(78),i=n(41),o=n(19),a=n(82),s=n(4),u=n(93),l=n(0);n.d(t,"compareBy",function(){return l.S}),n.d(t,"Arbiter",function(){return r.a}),n.d(t,"Draggable",function(){return o.b}),n.d(t,"DraggableInventory",function(){return a.a}),n.d(t,"Shallow",function(){return u.a}),n.d(t,"DraggableDom",function(){return o.a}),n.d(t,"Dispatcher",function(){return s.a}),n.d(t,"centerInArea",function(){return l.o}),n.d(t,"Page",function(){return i.a})},function(e,t){var n={1:o,2:a,3:s,4:u};function r(e,t){return i(e.length)(e,t)}function i(e){if(!(e=0|+e))throw new Error("Cannot create a interpolator with no elements");if(n[e])return n[e];for(var t=["var ut = 1 - t",""],r=e;r--;){for(var i=0;i<r;i+=1)r+1===e?t.push("var p"+i+" = arr["+i+"] * ut + arr["+(i+1)+"] * t"):r>1?t.push("p"+i+" = p"+i+" * ut + p"+(i+1)+" * t"):t.push("return p"+i+" * ut + p"+(i+1)+" * t");r>1&&t.push("")}return t=["return function bezier"+e+"(arr, t) {",t.map(function(e){return"  "+e}).join("\n"),"}"].join("\n"),Function(t)()}function o(e){return e[0]}function a(e,t){return e[0]+(e[1]-e[0])*t}function s(e,t){var n=1-t;return(e[0]*n+e[1]*t)*n+(e[1]*n+e[2]*t)*t}function u(e,t){var n=1-t,r=e[1]*n+e[2]*t;return((e[0]*n+e[1]*t)*n+r*t)*n+(r*n+(e[2]*n+e[3]*t)*t)*t}e.exports=r,e.exports.prepare=i},function(e,t){function n(e,t,n){var r=n*(Math.PI/180);return e.x-=t.x,e.y-=t.y,{x:e.x*Math.cos(-1*r)+e.y*Math.sin(-1*r)+t.x,y:e.x*Math.sin(r)+e.y*Math.cos(r)+t.y}}e.exports=function(e,t,r){var i;if(["width","height","top","left"].forEach(function(t){if(!e.hasOwnProperty(t))throw new Error("Area is missing property ",t)}),!t||180===t)return e.bottom=e.top+e.height,e.right=e.left+e.width,e;void 0===r&&(r={x:e.left+e.width/2,y:e.top+e.height/2});var o=n({x:e.left,y:e.top},r,t),a=n({x:e.left,y:e.top+e.height},r,t),s=n({x:e.left+e.width,y:e.top},r,t),u=n({x:e.left+e.width,y:e.top+e.height},r,t),l=Math.min(o.x,a.x,s.x,u.x),c=Math.max(o.x,a.x,s.x,u.x),f=Math.min(o.y,a.y,s.y,u.y),h=Math.max(o.y,a.y,s.y,u.y);return{top:f,bottom:h,height:h-f,left:l,right:c,width:c-l}}},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(t=e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(e,t,n){var r={strict:!0},i=n(34),o=function(e,t){return i(e,t,r)},a=n(29),s=n(35),u=n(35);t.applyOperation=u.applyOperation,t.applyPatch=u.applyPatch,t.applyReducer=u.applyReducer,t.getValueByPointer=u.getValueByPointer,t.validate=u.validate,t.validator=u.validator;var l=n(29);t.JsonPatchError=l.PatchError,t.deepClone=l._deepClone,t.escapePathComponent=l.escapePathComponent,t.unescapePathComponent=l.unescapePathComponent;var c=new WeakMap,f=function(){function e(e){this.observers=new Map,this.obj=e}return e}(),h=function(){function e(e,t){this.callback=e,this.observer=t}return e}();function p(e){return c.get(e)}function d(e,t){return e.observers.get(t)}function g(e,t){e.observers.delete(t.callback)}function v(e,t){t.unobserve()}function m(e,t){var n=[],r,i=p(e);if(i){var o=d(i,t);r=o&&o.observer}else i=new f(e),c.set(e,i);if(r)return r;if(r={},i.value=a._deepClone(e),t){r.callback=t,r.next=null;var s=function(){y(r)},u=function(){clearTimeout(r.next),r.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u)):(document.documentElement.attachEvent("onmouseup",u),document.documentElement.attachEvent("onkeyup",u),document.documentElement.attachEvent("onmousedown",u),document.documentElement.attachEvent("onkeydown",u),document.documentElement.attachEvent("onchange",u)))}return r.patches=n,r.object=e,r.unobserve=function(){y(r),clearTimeout(r.next),g(i,r),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u)):(document.documentElement.detachEvent("onmouseup",u),document.documentElement.detachEvent("onkeyup",u),document.documentElement.detachEvent("onmousedown",u),document.documentElement.detachEvent("onkeydown",u)))},i.observers.set(t,new h(t,r)),r}function y(e){var t=c.get(e.object);E(t.value,e.object,e.patches,""),e.patches.length&&s.applyPatch(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function E(e,t,n,r){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=a._objectKeys(t),o=a._objectKeys(e),s=!1,u=!1,l=o.length-1;l>=0;l--){var c,f=e[c=o[l]];if(!a.hasOwnProperty(t,c)||void 0===t[c]&&void 0!==f&&!1===Array.isArray(t))n.push({op:"remove",path:r+"/"+a.escapePathComponent(c)}),u=!0;else{var h=t[c];"object"==typeof f&&null!=f&&"object"==typeof h&&null!=h?E(f,h,n,r+"/"+a.escapePathComponent(c)):f!==h&&(s=!0,n.push({op:"replace",path:r+"/"+a.escapePathComponent(c),value:a._deepClone(h)}))}}if(u||i.length!=o.length)for(var l=0;l<i.length;l++){var c=i[l];a.hasOwnProperty(e,c)||void 0===t[c]||n.push({op:"add",path:r+"/"+a.escapePathComponent(c),value:a._deepClone(t[c])})}}}function b(e,t){var n=[];return E(e,t,n,""),n}t.unobserve=v,t.observe=m,t.generate=y,t.compare=b},function(e,t,n){!function t(n,r){var i,o;e.exports=r()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){var r=n(2);function i(e){return e&&"VirtualNode"===e.type&&e.version===r}e.exports=i},function(e,t){function n(e){return e&&"Widget"===e.type}e.exports=n},function(e,t){e.exports="2"},function(e,t,n){var r=n(2);function i(e){return e&&"VirtualText"===e.type&&e.version===r}e.exports=i},function(e,t){function n(e){return e&&"Thunk"===e.type}e.exports=n},function(e,t){function n(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i,o=s(n(14)),a=n(24);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(27),f=n(43),h=function(){function e(t,n){l(this,e),this.text=t.replace(/\n/,""),this.options=Object.assign({},{boldMap:(0,a.defaultMap)(t),italicMap:(0,a.defaultMap)(t),colorMap:(0,a.defaultMap)(t,"#000000"),fontSize:24,letterSpacing:1,fontFamily:"Times New Roman",lineHeight:1,textAnchor:"start",lineNumber:1,offsetY:0,offsetX:0,capitalize:!1,underline:!1,fontsPath:["https://crello.com/style/fonts.css"]},n),this.options.capitalize&&(this.text=this.text.toUpperCase())}return r(e,[{key:"createPlayground",value:function e(){var t=(0,a.createSvgNode)("svg",{},{position:"absolute",left:"-9999px",top:"-9999px"});document.body.appendChild(t),this.lineNode=t}},{key:"removePlayground",value:function e(){document.body.removeChild(this.lineNode)}},{key:"setLineOffset",value:function(){var e=u(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:return n=this.options.fontSize,i.next=3,(0,a.calculateFirstLineOffset)(t,n,this.options.lineHeight,this.text);case 3:return r=i.sent,this.options.offsetY=-r.offset,i.abrupt("return",r);case 6:case"end":return i.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"exportSvg",value:function e(){this.renderText();var t=this.lineNode.innerHTML;return this.removePlayground(),t}},{key:"exportLine",value:function e(){return(0,o.default)(this.getVirtualTree())}},{key:"renderText",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.text,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options;this.text=t,this.options=n;var r=this.getVirtualTree(),i=f(r);this.lineNode.innerHTML="",this.lineNode.appendChild(i);var o=parseInt(this.lineNode.querySelector("text").getComputedTextLength(),10);return this.actualWidth=o,this.dimensions=this.lineNode.getBBox(),{text:t,options:n}}},{key:"resolveAnchorPoint",value:function e(){var t=this.options,n=t.textAnchor,r=t.offsetX,i=t.width,o=void 0;switch(n){case"start":o=r;break;case"end":o=i;break;case"middle":o=r+i/2}return o}},{key:"getVirtualTree",value:function e(){var t=this.text,n=this.options,r=(0,a.decomposePropertyMap)(n.boldMap),i=(0,a.decomposePropertyMap)(n.italicMap),o=[];n.colorMap.forEach(function(e){var n=[],s=(0,a.getChildSlice)(r,[e]),u;(0,a.reducePropertyMap)(s).forEach(function(r){var o=[],s=(0,a.getChildSlice)(i,[r,e]),u;(0,a.reducePropertyMap)(s).forEach(function(n){var i=(0,a.getChildSlice)(t.split(""),[n,r,e]),s=!0===n.value;o.push(c("tspan",{"font-style":s?"italic":"normal","xml:space":"preserve"},[i.join("")]))});var l=!0===r.value;n.push(c("tspan",{"font-weight":l?"bold":"normal"},o))}),o.push(c("tspan",{fill:e.value},n))});var s=n.lineHeight*n.fontSize,u=n.fontSize,l=n.fontFamily,f=n.textAnchor,h=n.offsetY,p=n.offsetX,d=n.lineNumber,g=n.letterSpacing,v=this.resolveAnchorPoint();return c("text",{"font-size":u+"px","font-family":l,"text-anchor":f,"xml:space":"preserve","letter-spacing":g+"px","text-decoration":n.underline?"underline":"none",height:s+"px",y:h+s*d,x:p+v},o)}}],[{key:"getPartOfMap",value:function e(t,n,r){return(0,a.sliceMap)(t,n,r)}}]),e}();t.default=h},function(e,t,n){"use strict";var r=/["'&<>]/;function i(e){var t=""+e,n=r.exec(t),i;if(!n)return t;var o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=i}return s!==a?o+t.substring(s,a):o}e.exports=i},function(e,t){e.exports=r;var n=Object.prototype.hasOwnProperty;function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.value=e}e.exports=r,r.prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);this.namespace=e,this.value=t}e.exports=r,r.prototype.hook=function(e,t,n){n&&"AttributeHook"===n.type&&n.value===this.value&&n.namespace===this.namespace||e.setAttributeNS(this.namespace,t,this.value)},r.prototype.unhook=function(e,t,n){if(!n||"AttributeHook"!==n.type||n.namespace!==this.namespace){var r=t.indexOf(":"),i=r>-1?t.substr(r+1):t;e.removeAttributeNS(this.namespace,i)}},r.prototype.type="AttributeHook"},function(e,t){var n=Array.isArray,r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}e.exports=n||i},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n(6),e.exports=n(6)},function(e,t,n){var r=n(7),i=n(8),o=n(0),a=n(3),s=n(4),u=n(1),l=n(9),c=n(10),f=n(15),h=n(21),p=n(23);function d(e,t){return e?(s(e)&&(e=e.render()),u(e)&&e.render&&(e=e.render()),o(e)?g(e)+v(e)+m(e):a(e)?!t||"script"!==t.tagName.toLowerCase()&&"style"!==t.tagName.toLowerCase()?r(String(e.text)):String(e.text):""):""}function g(e){var t=e.properties,n="<"+e.tagName.toLowerCase();for(var r in t){var o=t[r];if(null!=o)if("attributes"!=r)if("dataset"!=r){if("style"==r){var a="";for(var s in o=i({},o))a+=f(s)+": "+o[s]+"; ";o=a.trim()}if(o instanceof l||o instanceof c)n+=" "+h(r,o.value,!0);else{var u=h(r,o);u&&(n+=" "+u)}}else for(var p in o=i({},o))n+=" "+h("data-"+f(p),o[p],!0);else for(var d in o=i({},o))n+=" "+h(d,o[d],!0)}return n+">"}function v(e){var t=e.properties.innerHTML;if(null!=t)return t;var n="";if(e.children&&e.children.length)for(var r=0,i=e.children.length;r<i;r++){var o;n+=d(e.children[r],e)}return n}function m(e){var t=e.tagName.toLowerCase();return p[t]?"":"</"+t+">"}e.exports=d},function(e,t,n){var r=n(16);e.exports=function(e,t){return r(e,t,"-")}},function(e,t,n){var r=n(17),i=n(18),o=n(19),a=n(20);e.exports=function(e,t,n){if(null==e)return"";function s(e,t,r){return 0===t||t===r.length-e.length?"":n}return n=n||" ",e=String(e).replace(o,"$1 $2").replace(a,"$1 $2").replace(i,s),r(e,t)}},function(e,t){var n={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{"":"i",I:"","I":"i"}},az:{regexp:/[\u0130]/g,map:{"":"i",I:"","I":"i"}},lt:{regexp:/[\u0049\u004A\u012E\u00CC\u00CD\u0128]/g,map:{I:"i",J:"j","":"","":"i","":"i","":"i"}}};e.exports=function(e,t){var r=n[t];return e=null==e?"":String(e),r&&(e=e.replace(r.regexp,function(e){return r.map[e]})),e.toLowerCase()}},function(e,t){e.exports=/[^\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]+/g},function(e,t){e.exports=/([\u0061-\u007A\u00B5\u00DF-\u00F6\u00F8-\u00FF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0561-\u0587\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7FA\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A])([\u0041-\u005A\u00C0-\u00D6\u00D8-\u00DE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA\uFF21-\uFF3A\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g},function(e,t){e.exports=/([\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])([^\u0030-\u0039\u00B2\u00B3\u00B9\u00BC-\u00BE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19])/g},function(e,t,n){var r=n(7),i=n(22),o=i.attributeTypes,a=i.properties,s=i.attributeNames,u=f(function(e){return r(e)+'="'});function l(e,t,n){if(a.hasOwnProperty(e)){if(c(e,t))return"";e=(s[e]||e).toLowerCase();var i=a[e];return i===o.BOOLEAN||i===o.OVERLOADED_BOOLEAN&&!0===t?r(e):u(e)+r(t)+'"'}return n?null==t?"":u(e)+r(t)+'"':null}function c(e,t){var n=a[e];return null==t||n===o.BOOLEAN&&!t||n===o.OVERLOADED_BOOLEAN&&!1===t}function f(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}e.exports=l},function(e,t){var n={BOOLEAN:1,OVERLOADED_BOOLEAN:2},r={accept:!0,acceptCharset:!0,accessKey:!0,action:!0,allowFullScreen:n.BOOLEAN,allowTransparency:!0,alt:!0,async:n.BOOLEAN,autocomplete:!0,autofocus:n.BOOLEAN,autoplay:n.BOOLEAN,cellPadding:!0,cellSpacing:!0,charset:!0,checked:n.BOOLEAN,classID:!0,className:!0,cols:!0,colSpan:!0,content:!0,contentEditable:!0,contextMenu:!0,controls:n.BOOLEAN,coords:!0,crossOrigin:!0,data:!0,dateTime:!0,defer:n.BOOLEAN,dir:!0,disabled:n.BOOLEAN,download:n.OVERLOADED_BOOLEAN,draggable:!0,enctype:!0,form:!0,formAction:!0,formEncType:!0,formMethod:!0,formNoValidate:n.BOOLEAN,formTarget:!0,frameBorder:!0,headers:!0,height:!0,hidden:n.BOOLEAN,href:!0,hreflang:!0,htmlFor:!0,httpEquiv:!0,icon:!0,id:!0,label:!0,lang:!0,list:!0,loop:n.BOOLEAN,manifest:!0,marginHeight:!0,marginWidth:!0,max:!0,maxLength:!0,media:!0,mediaGroup:!0,method:!0,min:!0,multiple:n.BOOLEAN,muted:n.BOOLEAN,name:!0,noValidate:n.BOOLEAN,open:!0,pattern:!0,placeholder:!0,poster:!0,preload:!0,radiogroup:!0,readOnly:n.BOOLEAN,rel:!0,required:n.BOOLEAN,role:!0,rows:!0,rowSpan:!0,sandbox:!0,scope:!0,scrolling:!0,seamless:n.BOOLEAN,selected:n.BOOLEAN,shape:!0,size:!0,sizes:!0,span:!0,spellcheck:!0,src:!0,srcdoc:!0,srcset:!0,start:!0,step:!0,style:!0,tabIndex:!0,target:!0,title:!0,type:!0,useMap:!0,value:!0,width:!0,wmode:!0,autocapitalize:!0,autocorrect:!0,itemProp:!0,itemScope:n.BOOLEAN,itemType:!0,property:!0},i={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"};e.exports={attributeTypes:n,properties:r,attributeNames:i}},function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateFirstLineOffset=void 0;var r=t.calculateFirstLineOffset=(i=u(regeneratorRuntime.mark(function e(t,n,r){var i,o,s,u,l,c,f;return regeneratorRuntime.wrap(function e(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,a.default.getFontProps(t);case 2:if(i=h.sent,o=void 0,o=r<1?-(1-r)*n:(r*n-n)/2,i){h.next=7;break}return h.abrupt("return",{offset:0,heightBias:n/2,lineHeightShift:o});case 7:return s=i.ascender,u=i.unitsPerEm/n,l=Math.ceil((i.unitsPerEm-s+Math.abs(i.descender))/u),c=0,f=-2*i.descender/u,i.ascender>i.unitsPerEm&&i.unitsPerEm-i.ascender<i.descender&&(f=2*(i.ascender-i.unitsPerEm)/u),h.abrupt("return",{offset:l/2+o,viewBoxShift:0,heightBias:f,lineHeightShift:o});case 14:case"end":return h.stop()}},e,this)})),function e(t,n,r){return i.apply(this,arguments)}),i;t.decomposePropertyMap=l,t.reducePropertyMap=c,t.createSvgNode=f,t.getChildSlice=h,t.sliceMap=p,t.breakWordStrategy=d,t.wordWrapStrategy=g,t.defaultMap=v;var o,a=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function l(e){return e.reduce(function(e,t){for(var n=t.startIndex;n<=t.endIndex;n++)e[n]=t.value;return e},[])}function c(e){var t=[],n=0;return t.push({startIndex:0,value:e[0],endIndex:0}),e.forEach(function(e,r){var i=t[n];e!==i.value?(t.push({startIndex:r,value:e,endIndex:r}),n++):i.endIndex=r}),t}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="http://www.w3.org/2000/svg",i=document.createElementNS(r,e);return Object.keys(t).forEach(function(e){i.setAttribute(e,t[e])}),Object.keys(n).forEach(function(e){i.style[e]=n[e]}),i}function h(e,t){var n=t.reduce(function(e,t){return e+t.startIndex},0),r=n+(t[0].endIndex-t[0].startIndex);return e.slice(n,r+1)}function p(e,t,n){var r;return c(l(e).slice(t,n+1))}function d(e,t,n){var r=e/t.length,i=Math.ceil((e-n)/r),o;return t.length-i}function g(){}function v(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[{startIndex:0,endIndex:e.length-1,value:t}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i,o=a(n(26));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l="https://crello.com",c=function(){function e(){u(this,e),this.fontsCache={},this.fontsData=null}return r(e,[{key:"getFontProps",value:function(){var e=s(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:if(!0!==window.jsdom){i.next=2;break}return i.abrupt("return",{unitsPerEm:1024,ascender:1024,descender:0});case 2:if(i.prev=2,!this.fontsCache[t]){i.next=5;break}return i.abrupt("return",this.fontsCache[t]);case 5:return i.next=7,o.default.get(l+"/api/fonts/meta?fontFamily="+t);case 7:return n=i.sent,r=JSON.parse(n.data).regular,this.fontsCache[t]=r,i.abrupt("return",r);case 13:return i.prev=13,i.t0=i.catch(2),console.error(i.t0),i.abrupt("return",null);case 17:case"end":return i.stop()}},e,this,[[2,13]])}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function e(t){return new Promise(function(e,n){var r=new window.XMLHttpRequest;r.open("GET",t,!0),r.send(),r.onload=function(){if(r.statusCode>302)return n(new Error(r.statusCode));var t,i=r.getAllResponseHeaders().split("\r\n").some(function(e){return"x-has-permission: true"===e.toLowerCase()});return e({data:r.responseText,hasPermission:i})}})}}},function(e,t,n){var r="http://www.w3.org/2000/svg",i=n(28),o=n(39),a=n(42),s=n(8);e.exports=function(e,t,n){return"SVG"!==e.toUpperCase()||o(t,"xmlns")?i(e,t,n):("string"==typeof t?(n=[t],t={}):a(t)&&(n=t,t={}),i(e,s({xmlns:r},t),n))}},function(e,t,n){"use strict";var r=n(11),i=n(29),o=n(38),a=n(10),s="http://www.w3.org/2000/svg";function u(e,t,n){!n&&l(t)&&(n=t,t={}),(t=t||{}).namespace=s;var r=t.attributes||(t.attributes={});for(var u in t)if(t.hasOwnProperty(u)){var c=o(u);if(void 0!==c){var f=t[u];"string"!=typeof f&&"number"!=typeof f&&"boolean"!=typeof f||(null===c?(r[u]=f,t[u]=void 0):t[u]=a(c,f))}}return i(e,t,n)}function l(e){return"string"==typeof e||r(e)}e.exports=u},function(e,t,n){"use strict";var r=n(11),i=n(30),o=n(31),a=n(0),s=n(3),u=n(1),l=n(5),c=n(4),f=n(32),h=n(9),p=n(34);function d(e,t,n){var r=[],o,a,s,u;return!n&&y(t)&&(n=t,a={}),o=f(e,a=a||t||{}),a.hasOwnProperty("key")&&(s=a.key,a.key=void 0),a.hasOwnProperty("namespace")&&(u=a.namespace,a.namespace=void 0),"INPUT"!==o||u||!a.hasOwnProperty("value")||void 0===a.value||l(a.value)||(a.value=h(a.value)),v(a),null!=n&&g(n,r,o,a),new i(o,a,r,s,u)}function g(e,t,n,i){if("string"==typeof e)t.push(new o(e));else if("number"==typeof e)t.push(new o(String(e)));else if(m(e))t.push(e);else{if(!r(e)){if(null==e)return;throw E({foreignObject:e,parentVnode:{tagName:n,properties:i}})}for(var a=0;a<e.length;a++)g(e[a],t,n,i)}}function v(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(l(n))continue;"ev-"===t.substr(0,3)&&(e[t]=p(n))}}function m(e){return a(e)||s(e)||u(e)||c(e)}function y(e){return"string"==typeof e||r(e)||m(e)}function E(e){var t=new Error;return t.type="virtual-hyperscript.unexpected.virtual-element",t.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+b(e.foreignObject)+".\nThe parent vnode is:\n"+b(e.parentVnode),t.foreignObject=e.foreignObject,t.parentVnode=e.parentVnode,t}function b(e){try{return JSON.stringify(e,null,"    ")}catch(t){return String(e)}}e.exports=d},function(e,t,n){var r=n(2),i=n(0),o=n(1),a=n(4),s=n(5);e.exports=c;var u={},l=[];function c(e,t,n,r,c){this.tagName=e,this.properties=t||u,this.children=n||l,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof c?c:null;var f=n&&n.length||0,h=0,p=!1,d=!1,g=!1,v;for(var m in t)if(t.hasOwnProperty(m)){var y=t[m];s(y)&&y.unhook&&(v||(v={}),v[m]=y)}for(var E=0;E<f;E++){var b=n[E];i(b)?(h+=b.count||0,!p&&b.hasWidgets&&(p=!0),!d&&b.hasThunks&&(d=!0),g||!b.hooks&&!b.descendantHooks||(g=!0)):!p&&o(b)?"function"==typeof b.destroy&&(p=!0):!d&&a(b)&&(d=!0)}this.count=f+h,this.hasWidgets=p,this.hasThunks=d,this.hooks=v,this.descendantHooks=g}c.prototype.version=r,c.prototype.type="VirtualNode"},function(e,t,n){var r=n(2);function i(e){this.text=String(e)}e.exports=i,i.prototype.version=r,i.prototype.type="VirtualText"},function(e,t,n){"use strict";var r=n(33),i=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,o=/^\.|#/;function a(e,t){if(!e)return"DIV";var n=!t.hasOwnProperty("id"),a=r(e,i),s=null,u,l,c,f;for(o.test(a[1])&&(s="DIV"),f=0;f<a.length;f++)(l=a[f])&&(c=l.charAt(0),s?"."===c?(u=u||[]).push(l.substring(1,l.length)):"#"===c&&n&&(t.id=l.substring(1,l.length)):s=l);return u&&(t.className&&u.push(t.className),t.className=u.join(" ")),t.namespace?s:s.toUpperCase()}e.exports=a},function(e,t){e.exports=function e(t){var n=String.prototype.split,r=/()??/.exec("")[1]===t,i;return i=function(e,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return n.call(e,i,o);var a=[],s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),u=0,i=new RegExp(i.source,s+"g"),l,c,f,h;for(e+="",r||(l=new RegExp("^"+i.source+"$(?!\\s)",s)),o=o===t?-1>>>0:o>>>0;(c=i.exec(e))&&!((f=c.index+c[0].length)>u&&(a.push(e.slice(u,c.index)),!r&&c.length>1&&c[0].replace(l,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(c[e]=t)}),c.length>1&&c.index<e.length&&Array.prototype.push.apply(a,c.slice(1)),h=c[0].length,u=f,a.length>=o));)i.lastIndex===c.index&&i.lastIndex++;return u===e.length?!h&&i.test("")||a.push(""):a.push(e.slice(u)),a.length>o?a.slice(0,o):a}}()},function(e,t,n){"use strict";var r=n(35);function i(e){if(!(this instanceof i))return new i(e);this.value=e}e.exports=i,i.prototype.hook=function(e,t){var n,i;r(e)[t.substr(3)]=this.value},i.prototype.unhook=function(e,t){var n,i;r(e)[t.substr(3)]=void 0}},function(e,t,n){"use strict";var r,i="7";n(36)("ev-store","7");var o="__EV_STORE_KEY@7";function a(e){var t=e[o];return t||(t=e[o]={}),t}e.exports=a},function(e,t,n){"use strict";var r=n(37);function i(e,t,n){var i="__INDIVIDUAL_ONE_VERSION_"+e,o,a=r(i+"_ENFORCE_SINGLETON",t);if(a!==t)throw new Error("Can only have one copy of "+e+".\nYou already have version "+a+" installed.\nThis means you cannot install version "+t);return r(i,n)}e.exports=i},function(e,t,n){"use strict";(function(t){var n="undefined"!=typeof window?window:void 0!==t?t:{};function r(e,t){return e in n?n[e]:(n[e]=t,t)}e.exports=r}).call(t,n(12))},function(e,t,n){"use strict";var r=null,i,o="http://www.w3.org/1999/xlink",a="http://www.w3.org/XML/1998/namespace",s={about:null,"accent-height":null,accumulate:null,additive:null,"alignment-baseline":null,alphabetic:null,amplitude:null,"arabic-form":null,ascent:null,attributeName:null,attributeType:null,azimuth:null,bandwidth:null,baseFrequency:null,baseProfile:null,"baseline-shift":null,bbox:null,begin:null,bias:null,by:null,calcMode:null,"cap-height":null,class:null,clip:null,"clip-path":null,"clip-rule":null,clipPathUnits:null,color:null,"color-interpolation":null,"color-interpolation-filters":null,"color-profile":null,"color-rendering":null,content:null,contentScriptType:null,contentStyleType:null,cursor:null,cx:null,cy:null,d:null,datatype:null,defaultAction:null,descent:null,diffuseConstant:null,direction:null,display:null,divisor:null,"dominant-baseline":null,dur:null,dx:null,dy:null,edgeMode:null,editable:null,elevation:null,"enable-background":null,end:null,"ev:event":"http://www.w3.org/2001/xml-events",event:null,exponent:null,externalResourcesRequired:null,fill:null,"fill-opacity":null,"fill-rule":null,filter:null,filterRes:null,filterUnits:null,"flood-color":null,"flood-opacity":null,focusHighlight:null,focusable:null,"font-family":null,"font-size":null,"font-size-adjust":null,"font-stretch":null,"font-style":null,"font-variant":null,"font-weight":null,format:null,from:null,fx:null,fy:null,g1:null,g2:null,"glyph-name":null,"glyph-orientation-horizontal":null,"glyph-orientation-vertical":null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:null,height:null,"horiz-adv-x":null,"horiz-origin-x":null,"horiz-origin-y":null,id:null,ideographic:null,"image-rendering":null,in:null,in2:null,initialVisibility:null,intercept:null,k:null,k1:null,k2:null,k3:null,k4:null,kernelMatrix:null,kernelUnitLength:null,kerning:null,keyPoints:null,keySplines:null,keyTimes:null,lang:null,lengthAdjust:null,"letter-spacing":null,"lighting-color":null,limitingConeAngle:null,local:null,"marker-end":null,"marker-mid":null,"marker-start":null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:null,mediaTime:null,method:null,min:null,mode:null,name:null,"nav-down":null,"nav-down-left":null,"nav-down-right":null,"nav-left":null,"nav-next":null,"nav-prev":null,"nav-right":null,"nav-up":null,"nav-up-left":null,"nav-up-right":null,numOctaves:null,observer:null,offset:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,"overline-position":null,"overline-thickness":null,"panose-1":null,path:null,pathLength:null,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,playbackOrder:null,"pointer-events":null,points:null,pointsAtX:null,pointsAtY:null,pointsAtZ:null,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:null,r:null,radius:null,refX:null,refY:null,rel:null,"rendering-intent":null,repeatCount:null,repeatDur:null,requiredExtensions:null,requiredFeatures:null,requiredFonts:null,requiredFormats:null,resource:null,restart:null,result:null,rev:null,role:null,rotate:null,rx:null,ry:null,scale:null,seed:null,"shape-rendering":null,slope:null,snapshotTime:null,spacing:null,specularConstant:null,specularExponent:null,spreadMethod:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,"stop-color":null,"stop-opacity":null,"strikethrough-position":null,"strikethrough-thickness":null,string:null,stroke:null,"stroke-dasharray":null,"stroke-dashoffset":null,"stroke-linecap":null,"stroke-linejoin":null,"stroke-miterlimit":null,"stroke-opacity":null,"stroke-width":null,surfaceScale:null,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:null,tableValues:null,target:null,targetX:null,targetY:null,"text-anchor":null,"text-decoration":null,"text-rendering":null,textLength:null,timelineBegin:null,title:null,to:null,transform:null,transformBehavior:null,type:null,typeof:null,u1:null,u2:null,"underline-position":null,"underline-thickness":null,unicode:null,"unicode-bidi":null,"unicode-range":null,"units-per-em":null,"v-alphabetic":null,"v-hanging":null,"v-ideographic":null,"v-mathematical":null,values:null,version:null,"vert-adv-y":null,"vert-origin-x":null,"vert-origin-y":null,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,"word-spacing":null,"writing-mode":null,x:null,"x-height":null,x1:null,x2:null,xChannelSelector:null,"xlink:actuate":o,"xlink:arcrole":o,"xlink:href":o,"xlink:role":o,"xlink:show":o,"xlink:title":o,"xlink:type":o,"xml:base":a,"xml:id":a,"xml:lang":a,"xml:space":a,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null};function u(e){if(s.hasOwnProperty(e))return s[e]}e.exports=u},function(e,t,n){var r=n(40);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(41);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var r="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,o=Object.prototype.toString,a="[object Function]";e.exports=function e(t){var n=this;if("function"!=typeof n||o.call(n)!==a)throw new TypeError(r+n);for(var s=i.call(arguments,1),u,l=function(){if(this instanceof u){var e=n.apply(this,s.concat(i.call(arguments)));return Object(e)===e?e:this}return n.apply(t,s.concat(i.call(arguments)))},c=Math.max(0,n.length-s.length),f=[],h=0;h<c;h++)f.push("$"+h);if(u=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(l),n.prototype){var p=function e(){};p.prototype=n.prototype,u.prototype=new p,p.prototype=null}return u}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){var r=n(44);e.exports=r},function(e,t,n){var r=n(45),i=n(47),o=n(0),a=n(3),s=n(1),u=n(49);function l(e,t){var n=t&&t.document||r,c=t?t.warn:null;if(e=u(e).a,s(e))return e.init();if(a(e))return n.createTextNode(e.text);if(!o(e))return c&&c("Item is not a valid virtual dom node",e),null;var f=null===e.namespace?n.createElement(e.tagName):n.createElementNS(e.namespace,e.tagName),h=e.properties;i(f,h);for(var p=e.children,d=0;d<p.length;d++){var g=l(p[d],t);g&&f.appendChild(g)}return f}e.exports=l},function(e,t,n){(function(t){var r=void 0!==t?t:"undefined"!=typeof window?window:{},i=n(46),o;"undefined"!=typeof document?o=document:(o=r["__GLOBAL_DOCUMENT_CACHE@4"])||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}).call(t,n(12))},function(e,t){},function(e,t,n){var r=n(48),i=n(5);function o(e,t,n){for(var o in t){var u=t[o];void 0===u?a(e,o,u,n):i(u)?(a(e,o,u,n),u.hook&&u.hook(e,o,n?n[o]:void 0)):r(u)?s(e,t,n,o,u):e[o]=u}}function a(e,t,n,r){if(r){var o=r[t];if(i(o))o.unhook&&o.unhook(e,t,n);else if("attributes"===t)for(var a in o)e.removeAttribute(a);else if("style"===t)for(var s in o)e.style[s]="";else e[t]="string"==typeof o?"":null}}function s(e,t,n,i,o){var a=n?n[i]:void 0;if("attributes"!==i)if(a&&r(a)&&u(a)!==u(o))e[i]=o;else{r(e[i])||(e[i]={});var s="style"===i?"":void 0;for(var l in o){var c=o[l];e[i][l]=void 0===c?s:c}}else for(var f in o){var h=o[f];void 0===h?e.removeAttribute(f):e.setAttribute(f,h)}}function u(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}e.exports=o},function(e,t,n){"use strict";e.exports=function e(t){return"object"==typeof t&&null!==t}},function(e,t,n){var r=n(0),i=n(3),o=n(1),a=n(4);function s(e,t){var n=e,r=t;return a(t)&&(r=u(t,e)),a(e)&&(n=u(e,null)),{a:n,b:r}}function u(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(r(n)||i(n)||o(n)))throw new Error("thunk did not return a valid node");return n}e.exports=s}])})},function(e,t,n){e.exports=n(62)},function(e,t){var n=e.exports={},r,i;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l=[],c=!1,f,h=-1;function p(){c&&f&&(c=!1,f.length?l=f.concat(l):h=-1,l.length&&d())}function d(){if(!c){var e=s(p);c=!0;for(var t=l.length;t;){for(f=l,l=[];++h<t;)f&&f[h].run();h=-1,t=l.length}f=null,c=!1,u(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new g(e,t)),1!==l.length||c||s(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var l=e.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f=e[c].replace(s,"%20"),h=f.indexOf(i),p,d,g,v;h>=0?(p=f.substr(0,h),d=f.substr(h+1)):(p=f,d=""),g=decodeURIComponent(p),v=decodeURIComponent(d),n(a,g)?r(a[g])?a[g].push(v):a[g]=[a[g],v]:a[g]=v}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,s){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),function(o){var s=encodeURIComponent(n(o))+a;return r(e[o])?i(e[o],function(e){return s+encodeURIComponent(n(e))}).join(t):s+encodeURIComponent(n(e[o]))}).join(t):s?encodeURIComponent(n(s))+a+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";t.decode=t.parse=n(65),t.encode=t.stringify=n(66)},function(e,t,n){var r=n(69).parse;function i(e){var t,n={x:0,y:0},r={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return e.forEach(function(e){for(var i in"moveto"===e.command&&(t=e),e.x0=n.x,e.y0=n.y,r)i in e&&(e[i]+=e.relative?e[r[i]]:0);"x"in e||(e.x=n.x),"y"in e||(e.y=n.y),e.relative=!1,e.code=e.code.toUpperCase(),"closepath"==e.command&&(e.x=t.x,e.y=t.y),n=e}),e}r.parseSVG=r,r.makeAbsolute=i,e.exports=r},function(e,t){"use strict";function n(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function r(e,t,n,i){this.message=e,this.expected=t,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}function i(e,t){t=void 0!==t?t:{};var n={},i={svg_path:Ae},o=Ae,a=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t=t.concat.apply(t,e[n]);var r=t[0];return r&&"m"==r.code&&(delete r.relative,r.code="M"),t},s=function(e,t){return ut(e,t)},u=/^[Mm]/,l=ve(["M","m"],!1,!1),c=function(e,t,n){var r=ft(e,[t]);return n&&(r=r.concat(ft("M"==e?"L":"l",n[1]))),r},f=/^[Zz]/,h=ve(["Z","z"],!1,!1),p=function(){return ft("Z")},d=/^[Ll]/,g=ve(["L","l"],!1,!1),v=function(e,t){return ft(e,t)},m=/^[Hh]/,y=ve(["H","h"],!1,!1),E=function(e,t){return ft(e,t.map(function(e){return{x:e}}))},b=/^[Vv]/,w=ve(["V","v"],!1,!1),_=function(e,t){return ft(e,t.map(function(e){return{y:e}}))},P=/^[Cc]/,S=ve(["C","c"],!1,!1),A=function(e,t,n){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y,x:n.x,y:n.y}},O=/^[Ss]/,C=ve(["S","s"],!1,!1),x=function(e,t){return{x2:e.x,y2:e.y,x:t.x,y:t.y}},T=/^[Qq]/,I=ve(["Q","q"],!1,!1),k=function(e,t){return{x1:e.x,y1:e.y,x:t.x,y:t.y}},D=/^[Tt]/,R=ve(["T","t"],!1,!1),M=/^[Aa]/,F=ve(["A","a"],!1,!1),L=function(e,t,n,r,i,o){return{rx:e,ry:t,xAxisRotation:n,largeArc:r,sweep:i,x:o.x,y:o.y}},N=function(e,t){return{x:e,y:t}},j=function(e){return 1*e},B=function(e){return 1*e.join("")},z=/^[01]/,H=ve(["0","1"],!1,!1),U=function(e){return"1"==e},W=function(){return""},G=",",V=ge(",",!1),Y=function(e){return e.join("")},K=".",q=ge(".",!1),X=/^[eE]/,Z=ve(["e","E"],!1,!1),Q=/^[+\-]/,J=ve(["+","-"],!1,!1),$=/^[0-9]/,ee=ve([["0","9"]],!1,!1),te=function(e){return e.join("")},ne=/^[ \t\n\r]/,re=ve([" ","\t","\n","\r"],!1,!1),ie=0,oe=0,ae=[{line:1,column:1}],se=0,ue=[],le=0,ce;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');o=i[t.startRule]}function fe(){return e.substring(oe,ie)}function he(){return we(oe,ie)}function pe(t,n){throw n=void 0!==n?n:we(oe,ie),Se([Ee(t)],e.substring(oe,ie),n)}function de(e,t){throw Pe(e,t=void 0!==t?t:we(oe,ie))}function ge(e,t){return{type:"literal",text:e,ignoreCase:t}}function ve(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function me(){return{type:"any"}}function ye(){return{type:"end"}}function Ee(e){return{type:"other",description:e}}function be(t){var n=ae[t],r;if(n)return n;for(r=t-1;!ae[r];)r--;for(n={line:(n=ae[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ae[t]=n,n}function we(e,t){var n=be(e),r=be(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function _e(e){ie<se||(ie>se&&(se=ie,ue=[]),ue.push(e))}function Pe(e,t){return new r(e,null,null,t)}function Se(e,t,n){return new r(r.buildMessage(e,t),e,t,n)}function Ae(){var e,t,r,i,o;for(e=ie,t=[],r=st();r!==n;)t.push(r),r=st();if(t!==n)if((r=Oe())===n&&(r=null),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n?(oe=e,e=t=a(r)):(ie=e,e=n)}else ie=e,e=n;else ie=e,e=n;return e}function Oe(){var e,t,r,i,o,a;if(e=ie,(t=Ce())!==n){for(r=[],i=ie,o=[],a=st();a!==n;)o.push(a),a=st();for(o!==n&&(a=Ce())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;){for(r.push(i),i=ie,o=[],a=st();a!==n;)o.push(a),a=st();o!==n&&(a=Ce())!==n?i=o=[o,a]:(ie=i,i=n)}r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Ce(){var e,t,r,i,o,a;if(e=ie,(t=Te())!==n){for(r=[],i=ie,o=[],a=st();a!==n;)o.push(a),a=st();for(o!==n&&(a=xe())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;){for(r.push(i),i=ie,o=[],a=st();a!==n;)o.push(a),a=st();o!==n&&(a=xe())!==n?i=o=[o,a]:(ie=i,i=n)}r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function xe(){var e;return(e=Ie())===n&&(e=ke())===n&&(e=Re())===n&&(e=Fe())===n&&(e=Le())===n&&(e=Be())===n&&(e=Ue())===n&&(e=Ve())===n&&(e=Ke()),e}function Te(){var t,r,i,o,a,s,f;if(t=ie,u.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(l)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=Ze())!==n?(a=ie,(s=et())===n&&(s=null),s!==n&&(f=De())!==n?a=s=[s,f]:(ie=a,a=n),a===n&&(a=null),a!==n?(oe=t,t=r=c(r,o,a)):(ie=t,t=n)):(ie=t,t=n)}else ie=t,t=n;return t}function Ie(){var t,r;return t=ie,f.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(h)),r!==n&&(oe=t,r=p()),t=r}function ke(){var t,r,i,o;if(t=ie,d.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(g)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=De())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function De(){var e,t,r,i,o,a;if(e=ie,(t=Ze())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ze())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ze())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Re(){var t,r,i,o;if(t=ie,m.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(y)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=Me())!==n?(oe=t,t=r=E(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function Me(){var e,t,r,i,o,a;if(e=ie,(t=Je())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=Je())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=Je())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Fe(){var t,r,i,o;if(t=ie,b.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(w)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=Me())!==n?(oe=t,t=r=_(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function Le(){var t,r,i,o;if(t=ie,P.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(S)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=Ne())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function Ne(){var e,t,r,i,o,a;if(e=ie,(t=je())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=je())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=je())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function je(){var e,t,r,i,o,a;return e=ie,(t=Ze())!==n?((r=et())===n&&(r=null),r!==n&&(i=Ze())!==n?((o=et())===n&&(o=null),o!==n&&(a=Ze())!==n?(oe=e,e=t=A(t,i,a)):(ie=e,e=n)):(ie=e,e=n)):(ie=e,e=n),e}function Be(){var t,r,i,o;if(t=ie,O.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(C)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=ze())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function ze(){var e,t,r,i,o,a;if(e=ie,(t=He())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=He())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=He())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function He(){var e,t,r,i;return e=ie,(t=Ze())!==n?((r=et())===n&&(r=null),r!==n&&(i=Ze())!==n?(oe=e,e=t=x(t,i)):(ie=e,e=n)):(ie=e,e=n),e}function Ue(){var t,r,i,o;if(t=ie,T.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(I)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=We())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function We(){var e,t,r,i,o,a;if(e=ie,(t=Ge())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ge())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ge())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Ge(){var e,t,r,i;return e=ie,(t=Ze())!==n?((r=et())===n&&(r=null),r!==n&&(i=Ze())!==n?(oe=e,e=t=k(t,i)):(ie=e,e=n)):(ie=e,e=n),e}function Ve(){var t,r,i,o;if(t=ie,D.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(R)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=Ye())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function Ye(){var e,t,r,i,o,a;if(e=ie,(t=Ze())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ze())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=Ze())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Ke(){var t,r,i,o;if(t=ie,M.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(F)),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n&&(o=qe())!==n?(oe=t,t=r=v(r,o)):(ie=t,t=n)}else ie=t,t=n;return t}function qe(){var e,t,r,i,o,a;if(e=ie,(t=Xe())!==n){for(r=[],i=ie,(o=et())===n&&(o=null),o!==n&&(a=Xe())!==n?i=o=[o,a]:(ie=i,i=n);i!==n;)r.push(i),i=ie,(o=et())===n&&(o=null),o!==n&&(a=Xe())!==n?i=o=[o,a]:(ie=i,i=n);r!==n?(oe=e,e=t=s(t,r)):(ie=e,e=n)}else ie=e,e=n;return e}function Xe(){var e,t,r,i,o,a,s,u,l,c,f,h;return e=ie,(t=Qe())!==n?((r=et())===n&&(r=null),r!==n&&(i=Qe())!==n?((o=et())===n&&(o=null),o!==n&&(a=Je())!==n&&(s=et())!==n&&(u=$e())!==n?((l=et())===n&&(l=null),l!==n&&(c=$e())!==n?((f=et())===n&&(f=null),f!==n&&(h=Ze())!==n?(oe=e,e=t=L(t,i,a,u,c,h)):(ie=e,e=n)):(ie=e,e=n)):(ie=e,e=n)):(ie=e,e=n)):(ie=e,e=n),e}function Ze(){var e,t,r,i;return e=ie,(t=Je())!==n?((r=et())===n&&(r=null),r!==n&&(i=Je())!==n?(oe=e,e=t=N(t,i)):(ie=e,e=n)):(ie=e,e=n),e}function Qe(){var e,t;return e=ie,(t=nt())===n&&(t=at()),t!==n&&(oe=e,t=j(t)),e=t}function Je(){var e,t,r,i;return e=ie,t=ie,(r=ot())===n&&(r=null),r!==n&&(i=nt())!==n?t=r=[r,i]:(ie=t,t=n),t===n&&(t=ie,(r=ot())===n&&(r=null),r!==n&&(i=at())!==n?t=r=[r,i]:(ie=t,t=n)),t!==n&&(oe=e,t=B(t)),e=t}function $e(){var t,r;return t=ie,z.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(H)),r!==n&&(oe=t,r=U(r)),t=r}function et(){var e,t,r,i,o;if(e=ie,t=[],(r=st())!==n)for(;r!==n;)t.push(r),r=st();else t=n;if(t!==n)if((r=tt())===n&&(r=null),r!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n?e=t=[t,r,i]:(ie=e,e=n)}else ie=e,e=n;else ie=e,e=n;if(e===n){if(e=ie,t=ie,(r=tt())!==n){for(i=[],o=st();o!==n;)i.push(o),o=st();i!==n?t=r=[r,i]:(ie=t,t=n)}else ie=t,t=n;t!==n&&(oe=e,t=W()),e=t}return e}function tt(){var t;return 44===e.charCodeAt(ie)?(t=G,ie++):(t=n,0===le&&_e(V)),t}function nt(){var e,t,r,i;return e=ie,t=ie,(r=rt())!==n?((i=it())===n&&(i=null),i!==n?t=r=[r,i]:(ie=t,t=n)):(ie=t,t=n),t===n&&(t=ie,(r=at())!==n&&(i=it())!==n?t=r=[r,i]:(ie=t,t=n)),t!==n&&(oe=e,t=Y(t)),e=t}function rt(){var t,r,i,o,a;return t=ie,r=ie,(i=at())===n&&(i=null),i!==n?(46===e.charCodeAt(ie)?(o=K,ie++):(o=n,0===le&&_e(q)),o!==n&&(a=at())!==n?r=i=[i,o,a]:(ie=r,r=n)):(ie=r,r=n),r===n&&(r=ie,(i=at())!==n?(46===e.charCodeAt(ie)?(o=K,ie++):(o=n,0===le&&_e(q)),o!==n?r=i=[i,o]:(ie=r,r=n)):(ie=r,r=n)),r!==n&&(oe=t,r=Y(r)),t=r}function it(){var t,r,i,o,a;return t=ie,r=ie,X.test(e.charAt(ie))?(i=e.charAt(ie),ie++):(i=n,0===le&&_e(Z)),i!==n?((o=ot())===n&&(o=null),o!==n&&(a=at())!==n?r=i=[i,o,a]:(ie=r,r=n)):(ie=r,r=n),r!==n&&(oe=t,r=Y(r)),t=r}function ot(){var t;return Q.test(e.charAt(ie))?(t=e.charAt(ie),ie++):(t=n,0===le&&_e(J)),t}function at(){var t,r,i;if(t=ie,r=[],$.test(e.charAt(ie))?(i=e.charAt(ie),ie++):(i=n,0===le&&_e(ee)),i!==n)for(;i!==n;)r.push(i),$.test(e.charAt(ie))?(i=e.charAt(ie),ie++):(i=n,0===le&&_e(ee));else r=n;return r!==n&&(oe=t,r=te(r)),t=r}function st(){var t,r;return t=ie,ne.test(e.charAt(ie))?(r=e.charAt(ie),ie++):(r=n,0===le&&_e(re)),r!==n&&(oe=t,r=W()),t=r}function ut(e,t){if(!t)return[e];for(var n=[e],r=0,i=t.length;r<i;r++)n[r+1]=t[r][1];return n}var lt={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var ct in lt)lt[ct.toUpperCase()]=lt[ct];function ft(e,t){t||(t=[{}]);for(var n=t.length;n--;){var r={code:e,command:lt[e]};for(var i in e==e.toLowerCase()&&(r.relative=!0),t[n])r[i]=t[n][i];t[n]=r}return t}if((ce=o())!==n&&ie===e.length)return ce;throw ce!==n&&ie<e.length&&_e({type:"end"}),Se(ue,se<e.length?e.charAt(se):null,se<e.length?we(se,se+1):we(se,se))}n(r,Error),r.buildMessage=function(e,t){var n={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t="",n;for(n=0;n<e.parts.length;n++)t+=e.parts[n]instanceof Array?o(e.parts[n][0])+"-"+o(e.parts[n][1]):o(e.parts[n]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function o(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function a(e){return n[e.type](e)}function s(e){var t=new Array(e.length),n,r;for(n=0;n<e.length;n++)t[n]=a(e[n]);if(t.sort(),t.length>0){for(n=1,r=1;n<t.length;n++)t[n-1]!==t[n]&&(t[r]=t[n],r++);t.length=r}switch(t.length){case 1:return t[0];case 2:return t[0]+" or "+t[1];default:return t.slice(0,-1).join(", ")+", or "+t[t.length-1]}}function u(e){return e?'"'+i(e)+'"':"end of input"}return"Expected "+s(e)+" but "+u(t)+" found."},e.exports={SyntaxError:r,parse:i}},function(e,t,n){"use strict";e.exports=n(74)},function(e,t){"use strict";var n=2*Math.PI;function r(e,t,n,r){var i=e*r-t*n<0?-1:1,o,a,s,u=(e*n+t*r)/(Math.sqrt(e*e+t*t)*Math.sqrt(e*e+t*t));return u>1&&(u=1),u<-1&&(u=-1),i*Math.acos(u)}function i(e,t,i,o,a,s,u,l,c,f){var h=f*(e-i)/2+c*(t-o)/2,p=-c*(e-i)/2+f*(t-o)/2,d=u*u,g=l*l,v=h*h,m=p*p,y=d*g-d*m-g*v;y<0&&(y=0),y/=d*m+g*v;var E=(y=Math.sqrt(y)*(a===s?-1:1))*u/l*p,b=y*-l/u*h,w=f*E-c*b+(e+i)/2,_=c*E+f*b+(t+o)/2,P=(h-E)/u,S=(p-b)/l,A=(-h-E)/u,O=(-p-b)/l,C=r(1,0,P,S),x=r(P,S,A,O);return 0===s&&x>0&&(x-=n),1===s&&x<0&&(x+=n),[w,_,C,x]}function o(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}e.exports=function e(t,r,a,s,u,l,c,f,h){var p=Math.sin(h*n/360),d=Math.cos(h*n/360),g=d*(t-a)/2+p*(r-s)/2,v=-p*(t-a)/2+d*(r-s)/2;if(0===g&&0===v)return[];if(0===c||0===f)return[];c=Math.abs(c),f=Math.abs(f);var m=g*g/(c*c)+v*v/(f*f);m>1&&(c*=Math.sqrt(m),f*=Math.sqrt(m));var y=i(t,r,a,s,u,l,c,f,p,d),E=[],b=y[2],w=y[3],_=Math.max(Math.ceil(Math.abs(w)/(n/4)),1);w/=_;for(var P=0;P<_;P++)E.push(o(b,w)),b+=w;return E.map(function(e){for(var t=0;t<e.length;t+=2){var n=e[t+0],r=e[t+1],i=d*(n*=c)-p*(r*=f),o=p*n+d*r;e[t+0]=i+y[0],e[t+1]=o+y[1]}return e})}},function(e,t){"use strict";var n=1e-10,r=Math.PI/180;function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);this.rx=e,this.ry=t,this.ax=n}i.prototype.transform=function(e){var t=Math.cos(this.ax*r),n=Math.sin(this.ax*r),i=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],o=i[0]*i[0]+i[2]*i[2],a=i[1]*i[1]+i[3]*i[3],s=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),u=(o+a)/2;if(s<1e-10*u)return this.rx=this.ry=Math.sqrt(u),this.ax=0,this;var l=i[0]*i[1]+i[2]*i[3],c=u+(s=Math.sqrt(s))/2,f=u-s/2;return this.ax=Math.abs(l)<1e-10&&Math.abs(c-a)<1e-10?90:180*Math.atan(Math.abs(l)>Math.abs(c-a)?(c-o)/l:l/(c-a))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(c)),this},i.prototype.isDegenerate=function(){return this.rx<1e-10*this.ry||this.ry<1e-10*this.rx},e.exports=i},function(e,t){"use strict";var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function i(e){return 10===e||13===e||8232===e||8233===e||32===e||9===e||11===e||12===e||160===e||e>=5760&&r.indexOf(e)>=0}function o(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function a(e){return e>=48&&e<=57}function s(e){return e>=48&&e<=57||43===e||45===e||46===e}function u(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(e){for(;e.index<e.max&&i(e.path.charCodeAt(e.index));)e.index++}function c(e){var t=e.index,n=t,r=e.max,i=!1,o=!1,s=!1,u=!1,l;if(n>=r)e.err="SvgPath: missed param (at pos "+n+")";else if(43!==(l=e.path.charCodeAt(n))&&45!==l||(l=++n<r?e.path.charCodeAt(n):0),a(l)||46===l){if(46!==l){if(i=48===l,l=++n<r?e.path.charCodeAt(n):0,i&&n<r&&l&&a(l))return void(e.err="SvgPath: numbers started with `0` such as `09` are ilegal (at pos "+t+")");for(;n<r&&a(e.path.charCodeAt(n));)n++,o=!0;l=n<r?e.path.charCodeAt(n):0}if(46===l){for(u=!0,n++;a(e.path.charCodeAt(n));)n++,s=!0;l=n<r?e.path.charCodeAt(n):0}if(101===l||69===l){if(u&&!o&&!s)return void(e.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(l=++n<r?e.path.charCodeAt(n):0)&&45!==l||n++,!(n<r&&a(e.path.charCodeAt(n))))return void(e.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<r&&a(e.path.charCodeAt(n));)n++}e.index=n,e.param=parseFloat(e.path.slice(t,n))+0}else e.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function f(e){var t,r;r=(t=e.path[e.segmentStart]).toLowerCase();var i=e.data;if("m"===r&&i.length>2&&(e.result.push([t,i[0],i[1]]),i=i.slice(2),r="l",t="m"===t?"l":"L"),"r"===r)e.result.push([t].concat(i));else for(;i.length>=n[r]&&(e.result.push([t].concat(i.splice(0,n[r]))),n[r]););}function h(e){var t=e.max,r,i,a,u;if(e.segmentStart=e.index,o(r=e.path.charCodeAt(e.index)))if(a=n[e.path[e.index].toLowerCase()],e.index++,l(e),e.data=[],a){for(i=!1;;){for(u=a;u>0;u--){if(c(e),e.err.length)return;e.data.push(e.param),l(e),i=!1,e.index<t&&44===e.path.charCodeAt(e.index)&&(e.index++,l(e),i=!0)}if(!i){if(e.index>=e.max)break;if(!s(e.path.charCodeAt(e.index)))break}}f(e)}else f(e);else e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")"}e.exports=function e(t){var n=new u(t),r=n.max;for(l(n);n.index<r&&!n.err.length;)h(n);return n.err.length?n.result=[]:n.result.length&&("mM".indexOf(n.result[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.result=[]):n.result[0][0]="M"),{err:n.err,segments:n.result}}},function(e,t,n){"use strict";var r=n(73),i=n(75),o=n(36),a=n(71),s=n(72);function u(e){if(!(this instanceof u))return new u(e);var t=r(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}u.prototype.__matrix=function(e){var t=this,n;e.queue.length&&this.iterate(function(r,i,o,a){var u,l,c,f;switch(r[0]){case"v":l=0===(u=e.calc(0,r[1],!0))[0]?["v",u[1]]:["l",u[0],u[1]];break;case"V":l=(u=e.calc(o,r[1],!1))[0]===e.calc(o,a,!1)[0]?["V",u[1]]:["L",u[0],u[1]];break;case"h":l=0===(u=e.calc(r[1],0,!0))[1]?["h",u[0]]:["l",u[0],u[1]];break;case"H":l=(u=e.calc(r[1],a,!1))[1]===e.calc(o,a,!1)[1]?["H",u[0]]:["L",u[0],u[1]];break;case"a":case"A":var h=e.toArray(),p=s(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),u=e.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===o&&r[7]===a||"a"===r[0]&&0===r[6]&&0===r[7]){l=["a"===r[0]?"l":"L",u[0],u[1]];break}l=p.isDegenerate()?["a"===r[0]?"l":"L",u[0],u[1]]:[r[0],p.rx,p.ry,p.ax,r[4],r[5],u[0],u[1]];break;case"m":f=i>0,l=["m",(u=e.calc(r[1],r[2],f))[0],u[1]];break;default:for(l=[c=r[0]],f=c.toLowerCase()===c,n=1;n<r.length;n+=2)u=e.calc(r[n],r[n+1],f),l.push(u[0],u[1])}t.segments[i]=l},!0)},u.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(e=o(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}},u.prototype.toString=function(){var e=[],t,n;this.__evaluateStack();for(var r=0;r<this.segments.length;r++)n=this.segments[r][0],t=r>0&&"m"!==n&&"M"!==n&&n===this.segments[r-1][0],e=e.concat(t?this.segments[r].slice(1):this.segments[r]);return e.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")},u.prototype.translate=function(e,t){return this.__stack.push(o().translate(e,t||0)),this},u.prototype.scale=function(e,t){return this.__stack.push(o().scale(e,t||0===t?t:e)),this},u.prototype.rotate=function(e,t,n){return this.__stack.push(o().rotate(e,t||0,n||0)),this},u.prototype.skewX=function(e){return this.__stack.push(o().skewX(e)),this},u.prototype.skewY=function(e){return this.__stack.push(o().skewY(e)),this},u.prototype.matrix=function(e){return this.__stack.push(o().matrix(e)),this},u.prototype.transform=function(e){return e.trim()?(this.__stack.push(i(e)),this):this},u.prototype.round=function(e){var t=0,n=0,r=0,i=0,o;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(a){var s=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":return s&&(a[1]+=r),r=a[1]-a[1].toFixed(e),void(a[1]=+a[1].toFixed(e));case"V":case"v":return s&&(a[1]+=i),i=a[1]-a[1].toFixed(e),void(a[1]=+a[1].toFixed(e));case"Z":case"z":return r=t,void(i=n);case"M":case"m":return s&&(a[1]+=r,a[2]+=i),r=a[1]-a[1].toFixed(e),i=a[2]-a[2].toFixed(e),t=r,n=i,a[1]=+a[1].toFixed(e),void(a[2]=+a[2].toFixed(e));case"A":case"a":return s&&(a[6]+=r,a[7]+=i),r=a[6]-a[6].toFixed(e),i=a[7]-a[7].toFixed(e),a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e),a[3]=+a[3].toFixed(e+2),a[6]=+a[6].toFixed(e),void(a[7]=+a[7].toFixed(e));default:return o=a.length,s&&(a[o-2]+=r,a[o-1]+=i),r=a[o-2]-a[o-2].toFixed(e),i=a[o-1]-a[o-1].toFixed(e),void a.forEach(function(t,n){n&&(a[n]=+a[n].toFixed(e))})}}),this},u.prototype.iterate=function(e,t){var n=this.segments,r={},i=!1,o=0,a=0,s=0,u=0,l,c,f;if(t||this.__evaluateStack(),n.forEach(function(t,n){var l=e(t,n,o,a);Array.isArray(l)&&(r[n]=l,i=!0);var c=t[0]===t[0].toLowerCase();switch(t[0]){case"m":case"M":return o=t[1]+(c?o:0),a=t[2]+(c?a:0),s=o,void(u=a);case"h":case"H":return void(o=t[1]+(c?o:0));case"v":case"V":return void(a=t[1]+(c?a:0));case"z":case"Z":return o=s,void(a=u);default:o=t[t.length-2]+(c?o:0),a=t[t.length-1]+(c?a:0)}}),!i)return this;for(f=[],l=0;l<n.length;l++)if(void 0!==r[l])for(c=0;c<r[l].length;c++)f.push(r[l][c]);else f.push(n[l]);return this.segments=f,this},u.prototype.abs=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toUpperCase(),a;if(i!==o)switch(e[0]=o,i){case"v":return void(e[1]+=r);case"a":return e[6]+=n,void(e[7]+=r);default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}},!0),this},u.prototype.rel=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toLowerCase(),a;if(i!==o&&(0!==t||"M"!==i))switch(e[0]=o,i){case"V":return void(e[1]-=r);case"A":return e[6]-=n,void(e[7]-=r);default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}},!0),this},u.prototype.unarc=function(){return this.iterate(function(e,t,n,r){var i,o,s,u=[],l=e[0];return"A"!==l&&"a"!==l?null:("a"===l?(o=n+e[6],s=r+e[7]):(o=e[6],s=e[7]),0===(i=a(n,r,o,s,e[4],e[5],e[1],e[2],e[3])).length?[["a"===e[0]?"l":"L",e[6],e[7]]]:(i.forEach(function(e){u.push(["C",e[2],e[3],e[4],e[5],e[6],e[7]])}),u))}),this},u.prototype.unshort=function(){var e=this.segments,t,n,r,i,o;return this.iterate(function(a,s,u,l){var c=a[0],f=c.toUpperCase(),h;s&&("T"===f?(h="t"===c,"Q"===(r=e[s-1])[0]?(t=r[1]-u,n=r[2]-l):"q"===r[0]?(t=r[1]-r[3],n=r[2]-r[4]):(t=0,n=0),i=-t,o=-n,h||(i+=u,o+=l),e[s]=[h?"q":"Q",i,o,a[1],a[2]]):"S"===f&&(h="s"===c,"C"===(r=e[s-1])[0]?(t=r[3]-u,n=r[4]-l):"c"===r[0]?(t=r[3]-r[5],n=r[4]-r[6]):(t=0,n=0),i=-t,o=-n,h||(i+=u,o+=l),e[s]=[h?"c":"C",i,o,a[1],a[2],a[3],a[4]]))}),this},e.exports=u},function(e,t,n){"use strict";var r=n(36),i={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},o=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,a=/[\s,]+/;e.exports=function e(t){var n=new r,s,u;return t.split(o).forEach(function(e){if(e.length)if(void 0===i[e])switch(u=e.split(a).map(function(e){return+e||0}),s){case"matrix":return void(6===u.length&&n.matrix(u));case"scale":return void(1===u.length?n.scale(u[0],u[0]):2===u.length&&n.scale(u[0],u[1]));case"rotate":return void(1===u.length?n.rotate(u[0],0,0):3===u.length&&n.rotate(u[0],u[1],u[2]));case"translate":return void(1===u.length?n.translate(u[0],0):2===u.length&&n.translate(u[0],u[1]));case"skewX":return void(1===u.length&&n.skewX(u[0]));case"skewY":return void(1===u.length&&n.skewY(u[0]))}else s=e}),n}},function(e,t,n){var r;!function(){function i(e,t,n){return e.call.apply(e.bind,arguments)}function o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function a(e,t,n){return(a=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:o).apply(null,arguments)}var s=Date.now||function(){return+new Date};function u(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var l=!!window.FontFace;function c(e,t,n,r){if(t=e.c.createElement(t),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return r&&t.appendChild(e.c.createTextNode(r)),t}function f(e,t,n){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e,t,n){t=t||[],n=n||[];for(var r=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var o=!1,a=0;a<r.length;a+=1)if(t[i]===r[a]){o=!0;break}o||r.push(t[i])}for(t=[],i=0;i<r.length;i+=1){for(o=!1,a=0;a<n.length;a+=1)if(r[i]===n[a]){o=!0;break}o||t.push(r[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(e,t){for(var n=e.className.split(/\s+/),r=0,i=n.length;r<i;r++)if(n[r]==t)return!0;return!1}function g(e){return e.o.location.hostname||e.a.location.hostname}function v(e,t,n){function r(){s&&i&&o&&(s(a),s=null)}t=c(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,o=!0,a=null,s=n||null;l?(t.onload=function(){i=!0,r()},t.onerror=function(){i=!0,a=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),f(e,"head",t)}function m(e,t,n,r){var i=e.c.getElementsByTagName("head")[0];if(i){var o=c(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&i.removeChild(o))},i.appendChild(o),setTimeout(function(){a||(a=!0,n&&n(Error("Script load timeout")))},r||5e3),o}return null}function y(){this.a=0,this.c=null}function E(e){return e.a++,function(){e.a--,w(e)}}function b(e,t){e.c=t,w(e)}function w(e){0==e.a&&e.c&&(e.c(),e.c=null)}function _(e){this.a=e||"-"}function P(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function S(e){return C(e)+" "+e.f+"00 300px "+A(e.c)}function A(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var r=e[n].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?t.push("'"+r+"'"):t.push(r)}return t.join(",")}function O(e){return e.a+e.f}function C(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function x(e){var t=4,n="n",r=null;return e&&((r=e.match(/(normal|oblique|italic)/i))&&r[1]&&(n=r[1].substr(0,1).toLowerCase()),(r=e.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?t=7:/[1-9]00/.test(r[1])&&(t=parseInt(r[1].substr(0,1),10)))),n+t}function T(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new _("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function I(e){e.g&&p(e.f,[e.a.c("wf","loading")]),D(e,"loading")}function k(e){if(e.g){var t=d(e.f,e.a.c("wf","active")),n=[],r=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),p(e.f,n,r)}D(e,"inactive")}function D(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,O(n)):e.h[t]())}function R(){this.c={}}function M(e,t,n){var r=[],i;for(i in t)if(t.hasOwnProperty(i)){var o=e.c[i];o&&r.push(o(t[i],n))}return r}function F(e,t){this.c=e,this.f=t,this.a=c(this.c,"span",{"aria-hidden":"true"},this.f)}function L(e){f(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+A(e.c)+";font-style:"+C(e)+";font-weight:"+e.f+"00;"}function j(e,t,n,r,i,o){this.g=e,this.j=t,this.a=r,this.c=n,this.f=i||3e3,this.h=o||void 0}function B(e,t,n,r,i,o,a){this.v=e,this.B=t,this.c=n,this.a=r,this.s=a||"BESbswy",this.f={},this.w=i||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new F(this.c,this.s),this.h=new F(this.c,this.s),this.j=new F(this.c,this.s),this.m=new F(this.c,this.s),e=N(e=new P(this.a.c+",serif",O(this.a))),this.g.a.style.cssText=e,e=N(e=new P(this.a.c+",sans-serif",O(this.a))),this.h.a.style.cssText=e,e=N(e=new P("serif",O(this.a))),this.j.a.style.cssText=e,e=N(e=new P("sans-serif",O(this.a))),this.m.a.style.cssText=e,L(this.g),L(this.h),L(this.j),L(this.m)}_.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},j.prototype.start=function(){var e=this.c.o.document,t=this,n=s(),r=new Promise(function(r,i){function o(){s()-n>=t.f?i():e.fonts.load(S(t.a),t.h).then(function(e){1<=e.length?r():setTimeout(o,25)},function(){i()})}o()}),i=null,o=new Promise(function(e,n){i=setTimeout(n,t.f)});Promise.race([o,r]).then(function(){i&&(clearTimeout(i),i=null),t.g(t.a)},function(){t.j(t.a)})};var z={D:"serif",C:"sans-serif"},H=null;function U(){if(null===H){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);H=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return H}function W(e,t,n){for(var r in z)if(z.hasOwnProperty(r)&&t===e.f[z[r]]&&n===e.f[z[r]])return!0;return!1}function G(e){var t=e.g.a.offsetWidth,n=e.h.a.offsetWidth,r;(r=t===e.f.serif&&n===e.f["sans-serif"])||(r=U()&&W(e,t,n)),r?s()-e.A>=e.w?U()&&W(e,t,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?Y(e,e.v):Y(e,e.B):V(e):Y(e,e.v)}function V(e){setTimeout(a(function(){G(this)},e),50)}function Y(e,t){setTimeout(a(function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),t(this.a)},e),0)}function K(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}B.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),G(this)};var q=null;function X(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&p(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),D(e,"active")):k(e.a))}function Z(e){this.j=e,this.a=new R,this.h=0,this.f=this.g=!0}function Q(e,t,n,r,i){var o=0==--e.h;(e.f||e.g)&&setTimeout(function(){var e=i||null,s=r||{};if(0===n.length&&o)k(t.a);else{t.f+=n.length,o&&(t.j=o);var u,l=[];for(u=0;u<n.length;u++){var c=n[u],f=s[c.c],h=t.a,d=c;if(h.g&&p(h.f,[h.a.c("wf",d.c,O(d).toString(),"loading")]),D(h,"fontloading",d),h=null,null===q)if(window.FontFace){var d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);q=d?42<parseInt(d[1],10):!g}else q=!1;h=q?new j(a(t.g,t),a(t.h,t),t.c,c,t.s,f):new B(a(t.g,t),a(t.h,t),t.c,c,t.s,e,f),l.push(h)}for(u=0;u<l.length;u++)l[u].start()}},0)}function J(e,t,n){var r=[],i=n.timeout;I(t);var r=M(e.a,n,e.c),o=new K(e.c,t,i);for(e.h=r.length,t=0,n=r.length;t<n;t++)r[t].load(function(t,n,r){Q(e,o,t,n,r)})}function $(e,t){this.c=e,this.a=t}function ee(e,t){this.c=e,this.a=t}function te(e,t){this.c=e||ne,this.a=[],this.f=[],this.g=t||""}K.prototype.g=function(e){var t=this.a;t.g&&p(t.f,[t.a.c("wf",e.c,O(e).toString(),"active")],[t.a.c("wf",e.c,O(e).toString(),"loading"),t.a.c("wf",e.c,O(e).toString(),"inactive")]),D(t,"fontactive",e),this.m=!0,X(this)},K.prototype.h=function(e){var t=this.a;if(t.g){var n=d(t.f,t.a.c("wf",e.c,O(e).toString(),"active")),r=[],i=[t.a.c("wf",e.c,O(e).toString(),"loading")];n||r.push(t.a.c("wf",e.c,O(e).toString(),"inactive")),p(t.f,r,i)}D(t,"fontinactive",e),X(this)},Z.prototype.load=function(e){this.c=new u(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,J(this,new T(this.c,e),e)},$.prototype.load=function(e){function t(){if(o["__mti_fntLst"+r]){var n=o["__mti_fntLst"+r](),i=[],a;if(n)for(var s=0;s<n.length;s++){var u=n[s].fontfamily;null!=n[s].fontStyle&&null!=n[s].fontWeight?(a=n[s].fontStyle+n[s].fontWeight,i.push(new P(u,a))):i.push(new P(u))}e(i)}else setTimeout(function(){t()},50)}var n=this,r=n.a.projectId,i=n.a.version;if(r){var o=n.c.o;m(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(i?"?v="+i:""),function(i){i?e([]):(o["__MonotypeConfiguration__"+r]=function(){return n.a},t())}).id="__MonotypeAPIScript__"+r}else e([])},ee.prototype.load=function(e){var t,n,r=this.a.urls||[],i=this.a.families||[],o=this.a.testStrings||{},a=new y;for(t=0,n=r.length;t<n;t++)v(this.c,r[t],E(a));var s=[];for(t=0,n=i.length;t<n;t++)if((r=i[t].split(":"))[1])for(var u=r[1].split(","),l=0;l<u.length;l+=1)s.push(new P(r[0],u[l]));else s.push(new P(r[0]));b(a,function(){e(s,o)})};var ne="https://fonts.googleapis.com/css";function re(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r].split(":");3==i.length&&e.f.push(i.pop());var o="";2==i.length&&""!=i[1]&&(o=":"),e.a.push(i.join(o))}}function ie(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],r=0;r<t;r++)n.push(e.a[r].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}function oe(e){this.f=e,this.a=[],this.c={}}var ae={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},se={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ue={i:"i",italic:"i",n:"n",normal:"n"},le=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ce(e){for(var t=e.f.length,n=0;n<t;n++){var r=e.f[n].split(":"),i=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var a,s;if(a=[],s=r[1])for(var s,u=(s=s.split(",")).length,l=0;l<u;l++){var c,f;if((c=s[l]).match(/^[\w-]+$/))if(null==(f=le.exec(c.toLowerCase())))c="";else{if(c=null==(c=f[2])||""==c?"n":ue[c],null==(f=f[1])||""==f)f="4";else var h=se[f],f=h||(isNaN(f)?"4":f.substr(0,1));c=[c,f].join("")}else c="";c&&a.push(c)}0<a.length&&(o=a),3==r.length&&(a=[],0<(r=(r=r[2])?r.split(","):a).length&&(r=ae[r[0]])&&(e.c[i]=r))}for(e.c[i]||(r=ae[i])&&(e.c[i]=r),r=0;r<o.length;r+=1)e.a.push(new P(i,o[r]))}}function fe(e,t){this.c=e,this.a=t}var he={Arimo:!0,Cousine:!0,Tinos:!0};function pe(e,t){this.c=e,this.a=t}function de(e,t){this.c=e,this.f=t,this.a=[]}fe.prototype.load=function(e){var t=new y,n=this.c,r=new te(this.a.api,this.a.text),i=this.a.families;re(r,i);var o=new oe(i);ce(o),v(n,ie(r),E(t)),b(t,function(){e(o.a,o.c,he)})},pe.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var r=[],i=0;i<t.length;i+=2)for(var o=t[i],a=t[i+1],s=0;s<a.length;s++)r.push(new P(o,a[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(r)}},2e3):e([])},de.prototype.load=function(e){var t=this.f.id,n=this.c.o,r=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var i=0,o=n.fonts.length;i<o;++i){var a=n.fonts[i];r.a.push(new P(a.name,x("font-weight:"+a.weight+";font-style:"+a.style)))}e(r.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+g(this.c)+"/"+t+".js",function(t){t&&e([])})):e([])};var ge=new Z(window);ge.a.c.custom=function(e,t){return new ee(t,e)},ge.a.c.fontdeck=function(e,t){return new de(t,e)},ge.a.c.monotype=function(e,t){return new $(t,e)},ge.a.c.typekit=function(e,t){return new pe(t,e)},ge.a.c.google=function(e,t){return new fe(t,e)};var ve={load:a(ge.load,ge)};void 0===(r=function(){return ve}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";var r=n(98),i=n(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=h(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var v=function(e){function t(){return a(this,t),l(this,p(t).apply(this,arguments))}return d(t,e),u(t,[{key:"push",value:function e(n,r,o){var a=o.uuid,s=this.items.find(function(e){return e.uuid===a});s?s.priority=Math.max(s.priority,r):(o.loadStatus=i.a.PAGE_LOAD_STATUS.pending,f(p(t.prototype),"push",this).call(this,n,r,{uuid:a}))}}]),t}(r.a);t.a=v},function(e,t,n){"use strict";var r=n(4),i=n(0),o=n(13),a=n(16),s=n(90),u=n(3),l=n(1),c=n(25),f=n(5),h=n(6),p=n(21),d=n(15),g=n(80),v=n(96),m=n(9),y=n(32),E=n(2),b=n(48),w=n.n(b),_=n(14),P=n.n(_),S=n(44),A=n(121),O=n(31),C=n(17),x=n(110),T=n(109),I=n(103),k=n(107),D=n(104),R=n(105),M=n(106),F=n(108),L=n(119),N=n(118),j=n(112),B=n(51),z=n(53),H=n(77),U=n(42),W=n(28),G=n(50),V=n(30),Y;function K(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){K(o,r,i,a,s,"next",e)}function s(e){K(o,r,i,a,s,"throw",e)}a(void 0)})}}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Z(e,t,n[t])})}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function ee(){return new Promise(function(e){setTimeout(e,0)})}function te(){}function ne(e){throw Error(e.stack)}n.d(t,"a",function(){return re});var re=n.i(I.a)(Y=n.i(T.a)(Y=n.i(D.a)(Y=n.i(x.a)(Y=n.i(k.a)(Y=n.i(R.a)(Y=n.i(F.a)(Y=n.i(M.a)(Y=function(){function e(t){var r=this;Q(this,e),!t.shouldDisableLogs&&f.a.setDebugMode(t.mode),t.inventory&&c.a.setItems(t.inventory),window.Tracker=v.a;var o=X({},U.a,t.features||{});n.i(E.b)("features",o),this.el=t.el;var a=this.el.parentNode,s=a.parentNode;n.i(E.b)("workspace",t.workspace||a),n.i(E.b)("scrollableNode",t.scrollableNode||s),n.i(E.b)("logoLabelClassName",t.logoLabelClass||"logo-label"),n.i(E.b)("logoLabelsSize",1),n.i(E.b)("adminMode",t.adminMode||!1),n.i(E.b)("arbiterElement",this.el),n.i(E.b)("authToken",t.token),n.i(E.b)("sessionToken",n.i(i.a)(64)),this.selectionPage=void 0,this.pages=[],this.basePageMargin=t.pageMargin||l.a.PAGE_BASE_MARGIN,this.pixelPerfectMasks=t.pixelPerfectMasks||[],this.pixelPerfectMaskElements=[],this.showPixelPerfectMasks=t.showPixelPerfectMasks||!1,this.onError=t.onError||ne,this.onSelectElement=t.onSelectElement||te,this.onUserVideoEnded=t.onUserVideoEnded||te,this.onStartCrop=t.onStartCrop||te,this.onElementMove=t.onElementMove||te,this.onElementMoveEnd=t.onElementMoveEnd||te,this.onCancelCrop=t.onCancelCrop||te,this.onSetCropCallback=t.onSetCrop||te,this.onSelectPage=t.onSelectPage||te,this.onReady=t.onReady||te,this.onCompletelyReady=t.onCompletelyReady||te,this.onPageStatusChange=t.onPageStatusChange||te,this.onPlayabilityChange=t.onPlayabilityChange||te,this.onMountingStateChange=t.onMountingStateChange||te,this.onLogoLabelClick=t.onLogoLabelClick||te,this.onLogoLabelVisibilityChange=t.onLogoLabelVisibilityChange||te,this.onChange=t.onChange||te,this.onResizeStart=t.onResizeStart||te,this.onResizeMove=t.onResizeMove||te,this.onResizeEnd=t.onResizeEnd||te,this.onNotify=t.onNotify||te,this.onFilterRangesChange=t.onFilterRangesChange||te,this.onScaleChange=t.onScaleChange||te,this.bindEvents(),this.renderMode=t.renderMode||!1,this.setPageWidth(t.pageWidth),this.setPageHeight(t.pageHeight),this.ratio=t.ratio||100,this.tracker=v.a,this.bindings=P.a,this.clipboard=new g.a,this.setBaseKeyMode(),this.setActualPageMargin(),d.a.addOverlaysContainer(),this.afterloadingQueue=new H.a,this.shouldMountElement=t.shouldMountElement||function(){return Promise.resolve(!0)},n.i(E.b)("pageClassName",t.pageClassName),n.i(E.b)("pageActiveClass",t.pageActiveClass),n.i(E.b)("pageInactiveClass",t.pageInactiveClass),n.i(E.b)("pageNotReadyClass",t.pageNotReadyClass),n.i(E.b)("pagePrefixClass",t.pagePrefixClass),n.i(E.b)("shouldShowLogoLabel",!!t.shouldShowLogoLabel),n.i(E.b)("dummyHolderClassName",t.dummyHolderClassName||l.a.CLASS_NAMES.DUMMY_HOLDER),n.i(E.b)("dummyImageHolderClassName",t.dummyImageHolderClassName||l.a.CLASS_NAMES.DUMMY_IMAGE_HOLDER);var u=t.shouldCompletelyLoad||!1;this.shouldCompletelyLoad=u,this.load(t,{shouldCompletelyLoad:u}).then(function(){r.onReady(),r.adjustContentPosition(0,0),window.Arbiter=r,v.a.zeroPoint(r.save())}),n.i(E.b)("arbiterElement",this.el),n.i(E.b)("watermarkPath",t.watermarkPath),n.i(E.b)("defaultMaskImagePath",t.defaultMaskImagePath),n.i(E.b)("mode",t.mode),n.i(E.b)("mediaSource",t.mediaSource||""),n.i(E.b)("preferredFallbacks",t.preferredFallbacks),this.mountingStash=V.a,this.addEventListeners()}return $(e,[{key:"setBaseKeyMode",value:function e(){var t,r=Object.keys(l.a.KEY_MODES).reduce(function(e,t){return e[t]=!1,e},{});n.i(E.b)("arbiterKeyMode",r)}},{key:"setKeyMode",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.i(E.a)("arbiterKeyMode"),o;Object.keys(l.a.KEY_MODES).forEach(function(e){var n=t[e],o;i[e]!==n&&(r.a.dispatch(u.a["CHANGE_".concat(e,"_MODE")],n),f.a.log("arbiterKeyMode ".concat(e," changed to: ").concat(n)))}),n.i(E.b)("arbiterKeyMode",t),this.mountingStash=V.a}},{key:"onShiftModeChange",value:function e(){d.a.clearSnaps()}},{key:"findSelectedElement",value:function e(){var t;return this.pages.find(function(e){var n=e.elements.find(function(e){return!0===e.selected});return t=n,n}),t}},{key:"load",value:function(){var e=q(regeneratorRuntime.mark(function e(t){var r,o,s=arguments;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},G.a.normalizeTextElements(t.pages),window.LOCK_UNDO=!0,this.clearSelected(),this.pages.length&&(this.pages.forEach(function(e){e.destroy()}),this.pages=[]),this.setPageWidth(t.pageWidth),this.setPageHeight(t.pageHeight),this.groupElement=t.groupElement,this.groupPageIndex=t.groupPageIndex,this.onPlayabilityChange(!1),u.prev=10,u.next=13,this.renderPages(t,r);case 13:u.next=20;break;case 15:if(u.prev=15,u.t0=u.catch(10),!this.onError){u.next=19;break}return u.abrupt("return",this.onError(u.t0));case 19:throw Error(u.t0.stack);case 20:window.LOCK_UNDO=!1,this.adjustOverlayLayerToWorkspace(),this.prevState=n.i(i.p)(this.save({stateSave:!0})),r.maintainSelect&&(o=function e(){var t=this.findSelectedElement();this.selectElement({designElement:t}),t&&n.i(a.c)(t,!0,this.getParentPage(t))},this.selectPageWithoutScroll(this.pages[0]),o.call(this));case 24:case"end":return u.stop()}},e,this,[[10,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"bindEvents",value:function e(){r.a.subscribe(u.a.ELEMENT_DROP,this.arrangeInventoryElement.bind(this)),r.a.subscribe(u.a.ELEMENT_DROP_FROM_PAGE,this.arrangeDesignElement.bind(this)),r.a.subscribe(u.a.ELEMENT_DRAG_END,this.onDragEnd.bind(this)),r.a.subscribe(u.a.ELEMENT_SELECTED,this.selectElement.bind(this)),r.a.subscribe(u.a.ELEMENT_REMOVE,this.clearSelected.bind(this)),r.a.subscribe(u.a.ELEMENT_LOCK,this.reselectElement.bind(this)),r.a.subscribe(u.a.ELEMENT_MOVE,this.onElementDragMove.bind(this)),r.a.subscribe(u.a.ELEMENT_ATTACH_CROP,this.attachCrop.bind(this)),r.a.subscribe(u.a.ELEMENT_SET_CROP,this.onSetCrop.bind(this)),r.a.subscribe(u.a.PAGE_SELECT,this.selectPage.bind(this)),r.a.subscribe(u.a.ELEMENT_DROP_TO_ACTIVE,this.dropInventoryItem.bind(this)),r.a.subscribe(u.a.MULTISELECT_AREA_CHANGED,this.checkMultiSelection.bind(this)),r.a.subscribe(u.a.MULTISELECT_STOPED,this.multiSelectionStop.bind(this)),r.a.subscribe(u.a.MULTISELECT_STARTED,this.clearSelected.bind(this)),r.a.subscribe(u.a.CLEAR_SELECTION,this.clearSelected.bind(this)),r.a.subscribe(u.a.SAVE_STATE,this.saveState.bind(this)),r.a.subscribe(u.a.RESIZE_START,this.resizeStart.bind(this)),r.a.subscribe(u.a.RESIZE_END,this.resizeEnd.bind(this)),r.a.subscribe(u.a.ELEMENT_RESIZE,this.resizeMove.bind(this)),r.a.subscribe(u.a.ELEMENT_ADD,this.onElementAdd.bind(this)),r.a.subscribe(u.a.SET_SCALE,this.setScale.bind(this)),r.a.subscribe(u.a.ON_ERROR,this.onError.bind(this)),r.a.subscribe(u.a.PAGE_STATUS_CHANGE,this.emitOnPageStatusChange.bind(this)),r.a.subscribe(u.a.CHANGE_SHIFT_MODE,this.onShiftModeChange.bind(this)),r.a.subscribe(u.a.LOGO_LABEL_CLICK,this.emitLogoLabelClick.bind(this)),r.a.subscribe(u.a.APP_CHANGE_MOUNTING_STATE,this.emitMountingStateChange.bind(this)),r.a.subscribe(u.a.USER_VIDEO_ENDED,this.emitUserVideoEnded.bind(this)),h.a.attachEvent(window,"resize",this.repositionOverlays.bind(this)),h.a.attachEvent(n.i(E.a)("scrollableNode"),"scroll",this.onWorkspaceScroll.bind(this)),n.i(a.e)(window),n.i(s.a)(n.i(E.a)("workspace"))}},{key:"onWorkspaceScroll",value:function e(){this.initPagesAfterloading(),this.selectPageOnScroll()}},{key:"emitUserVideoEnded",value:function e(){this.onUserVideoEnded()}},{key:"repositionOverlays",value:function e(){if(this.selectedElement){"textElement"===this.selectedElement.type&&this.selectedElement.returnToPage(),this.selectedElement.setPosition(this.selectedElement.position);var t=this.selectedElement.cropOverlay;t&&t.setPosition(t.position)}this.showHidePixelPerfectMasks(!this.showPixelPerfectMasks),this.adjustWidth((this.pages[0]||{}).width||0),this.handlePagesOverlays(),d.a.stretchOverlaysContainer()}},{key:"resizeStart",value:function e(t){this.el.parentNode.classList.add("cursor-".concat(t.direction)),this.onResizeStart()}},{key:"resizeMove",value:function e(t){this.el.parentNode.classList[1]!=="cursor-".concat(t.direction)&&"ro"===t.type&&(this.el.parentNode.classList.remove(this.el.parentNode.classList[1]),this.el.parentNode.classList.add("cursor-".concat(t.direction)));var n=t.designElement,r=this.getParentPage(t.designElement);if(!r)throw new Error("Something wrong. onresize move called on element not fit to page");var i=n.getBounds();A.a.resolveSnap(r,i,n.el,n.overlay),this.onResizeMove()}},{key:"resizeEnd",value:function e(t){this.el.parentNode.classList.remove("cursor-".concat(t.direction)),this.el.parentNode.classList[1]!=="cursor-".concat(t.direction)&&this.el.parentNode.classList.remove(this.el.parentNode.classList[1]),d.a.clearSnaps(),this.onResizeEnd()}},{key:"recenter",value:function e(t,r){var o;n.i(i.c)(this.el).height&&this.adjustContentPosition(t,r),this.repositionOverlays()}},{key:"resizeProject",value:function(){var e=q(regeneratorRuntime.mark(function e(t){var r,o,a,s,u,l;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:return r=n.i(i.X)(this.pages),o=(this.pages[0]||{}).width||0,this.clearSelected(),a=n.i(E.a)("scaleRatio")/100,s=t.width*a,u=t.height*a,this.setPageWidth(s),this.setPageHeight(u),l={width:s,height:u},c.next=11,L.a.resizeProject(this.pages,l);case 11:this.recenter(r,o),v.a.zeroPoint(this.save());case 13:case"end":return c.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDropToActivePosition",value:function e(t){var n=this.selectedPage.getBounds(),r;return{left:n.center.x-t.width/2,top:n.center.y-t.height/2}}},{key:"mountItem",value:function(){var e=q(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:return t=n.i(i.p)(t),c.a.addItem(t),t.draftNode=B.a.getDraftNode(t,r),o.next=5,n.i(i.Y)(0);case 5:return o.next=7,this.dropInventoryItem(t);case 7:case"end":return o.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"dropInventoryItem",value:function(){var e=q(regeneratorRuntime.mark(function e(t){var r,o;return regeneratorRuntime.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:if(this.selectedPage.isReady()){a.next=2;break}return a.abrupt("return");case 2:return(r=t.draftNode).style.visibility="hidden",h.a.attachElement(r),a.next=7,B.a.prepareInventoryItem(r,t,{shouldPreload:!1});case 7:return o=this.getDropToActivePosition(n.i(i.c)(r)),r.style.left="".concat(o.left,"px"),r.style.top="".concat(o.top,"px"),a.abrupt("return",this.arrangeInventoryElement({el:r,inventoryId:t.id,type:t.type,pageNumber:t.pageNumber,itemData:t}));case 11:case"end":return a.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkMultiSelection",value:function e(t){var n=this,r=this.pages.filter(function(e){return n.inBounds(t,e)&&e.isReady()});void 0===this.selectionPage?this.selectionPage=r.find(function(e){return!!e.highlightElementsIn(t).length}):this.selectionPage.highlightElementsIn(t)}},{key:"removeOverlay",value:function e(t){h.a.removeElement(t.overlay,n.i(E.a)("overlaysNode")),t.overlay=null}},{key:"getNewSelectionList",value:function e(t){var n=this.selectedElement,r,i="groupElement"===n.type?this.selectedElement.children.slice():[this.selectedElement];return this.getParentPage(n)!==this.getParentPage(t)?i:(i.includes(t)||i.push(t),i.filter(function(e){var t;return"groupElement"!==e.type}))}},{key:"multiSelectionChange",value:function e(t){if(!window.MULTISELECTION_LOCK){var n=this.getNewSelectionList(t);t&&n.length&&(f.a.log("Manually add items to selection"),this.removeOverlay(t),this.clearSelected({ignoreKeyMode:!0}),this.multiSelectionStop(null,n))}}},{key:"multiSelectionStop",value:function e(t,r){var i=this;function o(){var e;return(this.selectionPage?this.selectionPage.elements:[]).filter(function(e){return e.isHighlighted()})}r=(t||{}).elementsList?t.elementsList:r||o.bind(this)();var a=this.selectionPage||this.getParentPage(r[0]);delete this.selectionPage,r.length&&(1!==r.length?n.i(p.a)(r.map(function(e){return e.serialize()})).then(function(e){f.a.log("Arbiter: Multiselect element created"),i.selectPageWithoutScroll(a),m.a.dropGroupElement(e,a);var t=i.pages.findIndex(function(e){return e===i.selectedPage});e&&(i.groupElement=e.serialize(),i.groupPageIndex=t)}):this.selectElement({designElement:r[0]}))}},{key:"setInventory",value:function e(t){f.a.log("Arbiter: setting inventory"),c.a.setItems(t)}},{key:"addInventory",value:function e(t){f.a.log("Arbiter: adding inventory"),c.a.addItems(t)}},{key:"onSetCrop",value:function e(t){if(t.locked)throw new Error("Locked element cannot be cropped");t.setCrop();var n=this.getParentPage(t);n.putCroppedElementBack(t),window.SELECTION_LOCK=!1,this.reselectElement(!1,{saveTrashed:!0}),this.saveState({type:u.a.ELEMENT_CROP_CHANGE,meta:t.serialize(),pageUuid:n.uuid}),this.onSetCropCallback()}},{key:"renderPages",value:function(){var e=q(regeneratorRuntime.mark(function e(t,r){var i=this,o,a,s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return o={fromTemplate:t.fromTemplate||!1},a=t.pages.map(function(e){return n.i(y.a)(e,o)}),l.next=4,Promise.all(a);case 4:if(this.pages=l.sent,!this.destroyed){l.next=7;break}return l.abrupt("return");case 7:if(s=this.ratio,this.ratio=100,this.setScale(s),this.pages.forEach(function(e){i.el.appendChild(e.el),W.a.addOverlay(e)}),this.selectPageWithoutScroll(this.pages[0],!1),!r.shouldCompletelyLoad){l.next=17;break}return u=this.pages.reduce(function(e,t){return e.concat(m.a.changePageContent(t,t.pendingElementsData))},[]),l.next=16,Promise.all(u);case 16:this.handleAnimationState();case 17:this.initPagesAfterloading(),this.setPixelPerfect();case 19:case"end":return l.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"attachCrop",value:function e(t){if(!["imageElement","maskElement"].includes(t.type))throw new Error("Not a image type to crop");if(t.locked)throw new Error("Locked element cannot be cropped");if(t.cropping)throw new Error("Crop overlay is set, will not set it again");if(t.isBackgroundElement())throw new Error("Can't crop element with background properties");var r="maskElement"===t.type&&!t.hasStickedImage();if(!t._inMount&&!r){this.isCropping()&&t!==this.selectedElement&&this.cancelCrop(),this.selectElement({designElement:t,saveTrashed:!0});var i=this.getParentPage(t);i.putCroppedElementOnTop(t),this.initialCroppingElementPosition=i.getRelativePosition(t),n.i(b.releaseProxy)();var s=m.a.startCrop(t);n.i(a.c)(s,!1,i),n.i(o.e)(s),window.SELECTION_LOCK=!0,W.a.pageStateChange(this.selectedPage),this.onStartCrop(t)}}},{key:"startCrop",value:function e(){this.attachCrop(this.selectedElement)}},{key:"cancelCrop",value:function e(){var t=this.selectedElement;t.cancelCrop(),this.getParentPage(t).putCroppedElementBack(t),window.SELECTION_LOCK=!1,this.reselectElement(),W.a.pageStateChange(this.selectedPage),this.onCancelCrop()}},{key:"setCrop",value:function e(){this.onSetCrop(this.selectedElement)}},{key:"checkActiveDropPage",value:function e(t){var r=this.pages.filter(function(e){return n.i(i.o)(t.coords,e.getBounds())})[0];r&&this.selectPageWithoutScroll(r)}},{key:"onElementDragMove",value:function e(t){this.onElementMove();var r=this.getDropPage(t.coords);if(r){A.a.resolveSnap(r,t.coords,t.element,t.overlay);var o=n.i(E.a)("adminMode"),a=t.element.parentNode.hasAttribute("data-page");if(t.inventoryData&&"imageElement"===t.inventoryData.type&&!t.inventoryData.isBackground&&(!a||o)){var s=[];r.elements.forEach(function e(t){t.children&&t.children.forEach(e),s.push(t)});var u=s.filter(function(e){return e.el!==t.element&&(("maskElement"===e.type||"imageElement"===e.type&&!0===e.sticky)&&n.i(i.o)(t.coords,e.getBounds()))}).map(function(e){var t=r.elements.indexOf(e);return e._pageIndex=t,e}).sort(n.i(i.S)("_pageIndex","desc"))[0],l=u&&this.getDropPage(u.getBounds());(t.element.getAttribute("data-natural-width")||o)&&(l||(u=null),a?(t.inventoryData.naturalDimensions={width:t.element.querySelector("img").naturalWidth,height:t.element.querySelector("img").naturalHeight},t.inventoryData.src=t.element.querySelector("img").getAttribute("src")):(t.inventoryData.naturalDimensions={width:parseInt(t.element.getAttribute("data-natural-width")),height:parseInt(t.element.getAttribute("data-natural-height"))},t.inventoryData.src=t.element.getAttribute("data-swapped-src")),t.stickyDragCallback(!!u),this.stickToMask(u,t.inventoryData))}}}},{key:"unmask",value:function e(){var t;if(!n.i(E.a)("adminMode")||!this.selectedElement||"maskElement"!==this.selectedElement.type)throw new Error("You're doing something nasty");var r=this.selectedElement.serialize(),i=this.selectedElement.getBounds(),o=this.selectedElement.getImageBounds();m.a.removeElement(this.getParentPage(this.selectedElement).uuid,r.uuid);var a={id:r.stickedImageData.mediaId||r.stickedImageData.id||r.dphId,src:r.stickedImageData.src,dphId:r.dphId,mediaAsset:r.stickedImageData.mediaAsset,mediaId:r.stickedImageData.mediaId,type:"imageElement"};c.a.addItem(a);var s=o.width/o.height,u=this.pageWidth/2;o.width=u,o.height=u/s;var l={width:o.width,height:o.height},f=this.getDropPage(i);return j.a.dropElement({inventoryId:a.id,dimensions:l,position:i,page:f})}},{key:"stickToMask",value:function e(t,n){t?t!==this.stickedMask&&(this.stickedMask&&this.stickedMask.unsetTemporaryData(),t.stick(n,!1)):this.stickedMask&&this.stickedMask.unsetTemporaryData(),this.stickedMask=t}},{key:"inBounds",value:function e(t,r){var o=r.getBounds(),a=t;return n.i(i.R)(a,o)}},{key:"clearSelection",value:function e(){this.selectedElement=null,this.onSelectElement(null)}},{key:"clearSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selectElement(X({},{ignoreKeyMode:!0},t,{designElement:null}))}},{key:"changeElementState",value:function e(t,n,r,i){if(!this.selectedElement)throw new Error("No element selected to affect state changing");if(this.selectedElement&&this.selectedElement.locked&&l.a.DISALLOWED_OPERATION_ON_LOCK[t])throw new Error("Locked element cannot be changed");this.selectedElement&&this.selectedElement.notMovable&&l.a.MOVE_ACTIONS.includes(t)?f.a.log("====Element not movable, prevent action"):this.changeAnyElementState(this.selectedElement,t,n,r,i)}},{key:"changeAnyElementState",value:function e(t,n,i,o,a){var s=t.change(n,i,a);if(a)return"setPositionChange"===n?r.a.dispatch(u.a.ELEMENT_DROP_FROM_PAGE,{designElement:t,designerEvent:l.a.DESIGNER_EVENTS.keyboardDragEnd}):void this.saveState({type:u.a.ELEMENT_CHANGE_STATE,meta:{changeData:i,uuid:t.uuid,initialState:s}})}},{key:"setElementColor",value:function e(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(f.a.log("Arbiter: set Element color"),!this.selectedElement||!this.selectedElement.setColor)throw new Error("No element selected to change color or not colorizable");n=n.toUpperCase();var o="setColor",a={color:"#".concat(n),id:t};this.changeElementState(o,a,i,r)}},{key:"setElementLoop",value:function e(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];f.a.log("Arbiter: set Element loop");var o="setLoop";if(!this.selectedElement||!this.selectedElement.setLoop)throw new Error("No element selected to change loop or not loopable");this.changeElementState(o,n,i,r)}},{key:"alignChildren",value:function e(t){O.a.alignChildren(this.selectedElement,t)}},{key:"onElementAdd",value:function e(){var t;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).designElement.isAnimatedElement&&this.onPlayabilityChange(!1)}},{key:"emitMountingStateChange",value:function e(t){t.state!==this.prevMountingState&&(this.onMountingStateChange(t),this.prevMountingState=t.state)}},{key:"selectElements",value:function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.elements.filter(function(e){return"groupElement"!==e.type});if(i.length>1&&(i=i.filter(function(e){return e.canBeMultiselected()})),delete r.elements,this.clearSelected(Object.assign({},r,{ignoreKeyMode:!0})),!i.length)throw new Error("No one element, that can be selected");if(1===i.length)return this.selectElement({designElement:i[0]}),void(this.selectAllFlag=!0);var o=this.selectedPage;return n.i(p.a)(i.map(function(e){return e.serialize()})).then(function(e){return m.a.dropGroupElement(e,o),t.selectAllFlag=!0,e})}},{key:"ungroupPersist",value:function e(){O.a.ungroupPersist(this.selectedElement,this.getParentPage(this.selectedElement))}},{key:"makePersistGroup",value:function e(){return O.a.makePersistGroup(this.selectedElement,this.getParentPage(this.selectedElement))}},{key:"selectAll",value:function e(){if(this.selectAllFlag)throw new Error("You can't reselect elements twice");if(this.selectedElement&&this.selectedElement.cropping)throw new Error("You can't emit selectAll, while cropping");this.selectElements({elements:this.selectedPage.elements})}},{key:"selectElement",value:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t.designElement||t.designElement.isSelectable)if(this.selectAllFlag=!1,t.skipMultiselectionHandler||!n.i(C.h)(X({},t,{selectedElement:this.selectedElement}))){if(f.a.log("Select element"),this.selectedElement){if(f.a.log("Removing overlay"),this.selectedElement.cropping&&this.cancelCrop(),this.selectedElement.select({preventFocus:!0}),this.removeOverlay(this.selectedElement),f.a.log("Clearing selection"),n.i(b.releaseProxy)(this.selectedElement),"groupElement"===this.selectedElement.type){var i=this.getParentPage(this.selectedElement);O.a.releaseMultiselection(this.selectedElement,i)}else this.selectedElement.blur();var s;if(!t.saveTrashed&&!n.i(E.a)("rescaling"))this.removeTrashedElements().length&&this.replaceHistoryState()}if(this.selectedElement=t.designElement,this.selectedElement){var u=this.getParentPage(this.selectedElement);this.selectPageWithoutScroll(u),n.i(a.c)(this.selectedElement,!1,u),this.selectedElement.select({single:!0}),n.i(o.e)(this.selectedElement)}r&&this.onSelectElement(this.selectedElement),window&&(window.SE=this.selectedElement)}else this.multiSelectionChange(t.designElement)}},{key:"isCropping",value:function e(){return this.selectedElement&&this.selectedElement.cropping}},{key:"isTextSelected",value:function e(){return this.selectedElement&&"textElement"===this.selectedElement.type&&this.selectedElement.caretInElement()}},{key:"copyToClipboard",value:function e(){var t=this.getParentPage(this.selectedElement);this.clipboard.copy({designElement:this.selectedElement,page:t})}},{key:"pasteFromClipboard",value:function e(){var t=this;!this.isCropping()&&this.selectedPage.isReady()&&(this.clearSelected({ignoreKeyMode:!0}),this.clipboard.paste(this.selectedPage).then(function(){t.saveState({type:u.a.CLIPBOARD_PASTE,meta:{}})}).catch(function(e){throw e}))}},{key:"getDropPage",value:function e(t){return this.pages.filter(function(e){return this.inBounds(t,e)&&e.isReady()}.bind(this))[0]}},{key:"getElementLayers",value:function e(){var t=this.selectedElement,n;return this.getParentPage(t).getElementsIntersection(t)}},{key:"getParentPage",value:function e(t){if(!t||"groupElement"===t.type)return this.selectedPage;var n=this.pages.find(function(e){return e.has(t)});return n||(n=this.getDropPage(t.getBounds())),n}},{key:"reselectElement",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).saveTrashed,o=this.selectedElement;this.selectElement({designElement:null,saveTrashed:i},!1);var s=this.getParentPage(o);n.i(a.c)(o,!0,s,t)}},{key:"checkSticked",value:function e(){this.stickedMask&&(this.changeAnyElementState(this.stickedMask,"stick",this.stickedMask.stickedImageData,null,!0),this.stickedMask=null)}},{key:"onDragEnd",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.a.clearHighlights({except:t.designElement.overlay})}},{key:"arrangeDesignElement",value:function e(t){d.a.clearSnaps();var r=t.designElement,o=this.getParentPage(r),a=!this.isCropping()&&n.i(i._1)(this.pages,t)||o,s=o===a;return this.stickedMask?(this.checkSticked(),void m.a.removeElement(o.uuid,r.uuid)):(this.stickedMask=null,s||this.arrangeDesignElementToNextPage({prevPage:o,nextPage:a,designElement:r},t),a.setDraggable(r),this.onElementMoveEnd(),r.cropping||["shadowImageElement","cropElement"].includes(r.type)?a:(this.saveState({type:u.a.ELEMENT_DROP_FROM_PAGE,meta:r.serialize(),pageUuid:a?a.uuid:null}),a))}},{key:"arrangeDesignElementToNextPage",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.prevPage,a=t.nextPage,s=t.designElement;if("groupElement"===s.type)return this.arrangeMultiselectionToNextPage(t,r);var u=n.i(i.c)(s.el),l=a.getRelativeDropPosition(u);s.scale(1/(this.ratio/100)),a.isReady()?(o.removeElement(s,{preventDestroy:!0}),m.a.dropElementTo(a,s,l,r.setSelect||!1,u),"textElement"===s.type&&this.selectedElement===s&&(s.pageEl=a.el,delete s.sibling),this.selectPageWithoutScroll(a)):o.removeElement(s,{preventDestroy:!1})}},{key:"arrangeMultiselectionToNextPage",value:function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.prevPage,o=n.nextPage,a,s=n.designElement.children;return this.selectElement({designElement:null,saveTrashed:!0}),s.forEach(function(e){t.arrangeDesignElementToNextPage({prevPage:i,nextPage:o,designElement:e},r)}),this.selectElements({elements:s})}},{key:"arrangeInventoryElement",value:function(){var e=q(regeneratorRuntime.mark(function e(t){var o,s,l,c,h,p,g;return regeneratorRuntime.wrap(function e(v){for(;;)switch(v.prev=v.next){case 0:if(f.a.log("Arbiter: arranging inventory element"),this.clearSelected(),d.a.clearSnaps(),o=n.i(E.a)("arbiterKeyMode"),this.setBaseKeyMode(),s=t.el,l=n.i(i.c)(s),c={width:parseFloat(s.style.width),height:parseFloat(s.style.height),fontSize:s.getAttribute("fontSize"),lowQualitySrc:s.getAttribute("data-low-quality-src")},document.body.removeChild(s),(h=this.getDropPage(l))&&!this.stickedMask){v.next=13;break}return this.checkSticked(),v.abrupt("return");case 13:return v.next=15,this.shouldMountElement(t);case 15:if(p=v.sent){v.next=18;break}return v.abrupt("return");case 18:return this.stickedMask=null,v.prev=19,v.next=22,j.a.dropElement({inventoryId:t.inventoryId,dimensions:c,position:l,page:h,pageNumber:t.pageNumber});case 22:g=v.sent,v.next=33;break;case 25:if(v.prev=25,v.t0=v.catch(19),v.t0.message!==S.a.REPLACE_LOCKED_BACKGROUND){v.next=32;break}this.onNotify(S.a.REPLACE_LOCKED_BACKGROUND),f.a.log("can`t replace locked background"),v.next=33;break;case 32:throw v.t0;case 33:if(g){v.next=35;break}return v.abrupt("return",this.clearSelected());case 35:return"textElement"!==g.type?n.i(a.c)(g,!0,h):g.selected=!0,v.next=38,g.mounted();case 38:r.a.dispatch(u.a.ELEMENT_MOUNTED,{designElement:g}),this.saveState({type:u.a.ELEMENT_DROP,meta:g.serialize(),pageUuid:h.uuid}),"textElement"===g.type&&n.i(a.c)(g,!0,h),n.i(E.b)("arbiterKeyMode",o);case 42:case"end":return v.stop()}},e,this,[[19,25]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"rollback",value:function(){var e=q(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:if(window.SELECTION_LOCK=!1,t=v.a.rollback()){n.next=5;break}return f.a.log("No action to rollback"),n.abrupt("return",ee());case 5:return n.abrupt("return",this.applyTrackerState(t,!0));case 6:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"perform",value:function(){var e=q(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:if(window.SELECTION_LOCK=!1,t=v.a.perform()){n.next=5;break}return f.a.log("No action to perform"),n.abrupt("return",ee());case 5:return n.abrupt("return",this.applyTrackerState(t,!1));case 6:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"applyTrackerState",value:function(){var e=q(regeneratorRuntime.mark(function e(t,r){var o,a,s;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return window.LOCK_UNDO=!0,this.saveScrollState(),o=n.i(i.p)(this.save()),a=N.a.getInstruction(t,o,r),u.next=6,this.partialRender(a);case 6:this.restoreScrollState(),window.LOCK_UNDO=!1,s=n.i(i.p)(this.save({stateSave:!0})),this.emitOnChange(s);case 10:case"end":return u.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"partialRender",value:function(){var e=q(regeneratorRuntime.mark(function e(t){var n=this,r,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if(f.a.log("Partitial render..."),this.clearSelected({saveTrashed:!0}),t.type!==u.a.PAGE_MOVED){o.next=5;break}return f.a.log("...just move one page"),o.abrupt("return",this.movePage(t.from,t.to));case 5:if(t.type!==u.a.PAGE_INSERTED){o.next=8;break}return f.a.log("...just create one page"),o.abrupt("return",this.insertPage(t.pageData,t.index));case 8:if(t.type!==u.a.PAGE_REMOVED){o.next=11;break}return f.a.log("...just remove one page"),o.abrupt("return",this.removePage(t.index));case 11:if(t.type!==u.a.PAGE_EDITED){o.next=19;break}return f.a.log("...just revert next pages state:"),f.a.log(t.pages.map(function(e){return e.index}).join(", ")),r=t.pages.map(function(e){return q(regeneratorRuntime.mark(function t(){var r,i,o,a,s;return regeneratorRuntime.wrap(function t(u){for(;;)switch(u.prev=u.next){case 0:return r=n.pages[e.index],i=e.pageData,o=i.templateId,a=i.templateLikeElements,s=i.elements,r.templateId=o,r.templateLikeElements=a,u.next=6,m.a.changePageContent(r,s);case 6:case"end":return u.stop()}},t,this)}))()}),o.next=17,Promise.all(r);case 17:i=this.findSelectedElement(),this.selectElement({designElement:i});case 19:case"end":return o.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTrackerState",value:function e(){return v.a.getState()}},{key:"setScale",value:function e(t){var r=this;if(isNaN(t))throw new Error("Scale ratio is not a number");if(t<10||t>4500)throw new Error("Scale ratio should be a valid number between 10 and 4500");var o=this.selectedElement;o&&o.cropping&&this.cancelCrop(),n.i(E.b)("rescaling",!0),o&&"textElement"===o.type&&o.returnToPage();var a=this.ratio;this.ratio=t,t/=a,this.setPageWidth(this.pageWidth*t),this.setPageHeight(this.pageHeight*t),this.setActualPageMargin(),n.i(E.b)("scaleRatio",this.ratio);var s=n.i(i.X)(this.pages),u=(this.pages[0]||{}).width||0;this.pages.forEach(function(e){return e.scale(t)}),this.recenter(s,u),this.setPixelPerfect(),o&&"textElement"===o.type&&setTimeout(function(){r.reselectElement()},0),n.i(E.b)("rescaling",!1),this.selectedPage&&this.centerOnSelected(),this.onScaleChange&&this.onScaleChange()}},{key:"setActualPageMargin",value:function e(){var t=this.basePageMargin*this.ratio/100;t>l.a.PAGE_MAX_MARGIN&&(t=l.a.PAGE_MAX_MARGIN),this.actualPageMargin=t,n.i(E.b)("actualPageMargin",t)}},{key:"adjustContentPosition",value:function e(t,n){this.renderMode?this.el.style.padding="0px":(this.adjustHeight(t),void 0!==n&&this.adjustWidth(n),d.a.stretchOverlaysContainer(),this.handlePagesOverlays())}},{key:"adjustHeight",value:function e(t){var r=n.i(i.X)(this.pages)+this.actualPageMargin*this.pages.length,o=this.el.parentNode.clientHeight,a=l.a.WORKSPACE_PADDING;r<o-2*l.a.WORKSPACE_PADDING?a=(o-r)/2:this.el.parentNode.scrollTop=this.el.parentNode.scrollTop+(r-t)/2,this.el.style.paddingTop="".concat(a,"px"),this.el.style.paddingBottom="".concat(a,"px")}},{key:"adjustWidth",value:function e(t){if(this.pages.length&&!0!==this.renderMode){var n=this.el.parentNode.clientWidth,r=this.pages[0].width,i=l.a.WORKSPACE_PADDING;r<n-2*l.a.WORKSPACE_PADDING?i=(n-r)/2:this.el.parentNode.scrollLeft=this.el.parentNode.scrollLeft+(r-t)/2,this.el.style.paddingLeft="".concat(i,"px"),this.el.style.paddingRight="".concat(i,"px")}}},{key:"saveScrollState",value:function e(){var t=n.i(E.a)("scrollableNode"),r=n.i(i.c)(this.selectedPage.el);this.arbiterScrollState={selectedPageUuid:this.selectedPage.uuid,selectedPagePrevTop:r.top,prevScrollTop:t.scrollTop}}},{key:"restoreScrollState",value:function e(){if(!this.arbiterScrollState)throw new Error("Cant restore scrollState before it saving");var t=this.arbiterScrollState,r=t.selectedPageUuid,o=t.selectedPagePrevTop,a=t.prevScrollTop,s=n.i(E.a)("scrollableNode"),u=this.pages.find(function(e){return e.uuid===r});if(u){var l;u!==this.selectedPage&&this.selectPageWithoutScroll(u);var c,f=n.i(i.c)(this.selectedPage.el).top-o;if(0!==f){var p=s.scrollTop+f;h.a.scrollTop(s,p)}}else h.a.scrollTop(s,a)}},{key:"save",value:function e(t){var n=this.ratio/100,r={pages:[],pageWidth:parseInt(Math.round(this.pageWidth/n)),pageHeight:parseInt(Math.round(this.pageHeight/n))};return this.pages.reduce(function(e,n){var r=n.serialize(t);return r.width=parseInt(Math.round(r.width)),r.height=parseInt(Math.round(r.height)),e.pages.push(r),e},r)}},{key:"removeTrashedElements",value:function e(){if(this._copyInProgress)return[];var t=[],r=[];return this.selectedElement&&"groupElement"===this.selectedElement.type&&(t=t.concat(this.selectedElement.children.map(function(e){return e.uuid}))),this.pages.forEach(function(e){e.elements.forEach(function(o){var a=!n.i(i.R)(o.getBounds(),e.getBounds()),s=t.indexOf(o.uuid)>-1;!a||s||o.selected||r.push({page:e,designElement:o}),o._removeMark&&r.push({page:e,designElement:o})})}),r.forEach(function(e){m.a.removeElement(e.page.uuid,e.designElement.uuid)}),r}},{key:"replaceHistoryState",value:function e(){var t=n.i(i.p)(this.save({stateSave:!0}));v.a.replaceHistoryState(t),this.handleAnimationState(),this.emitOnChange(t)}},{key:"saveState",value:function e(t){var r=this;setTimeout(function(){r.removeTrashedElements();var e=n.i(i.p)(r.save({stateSave:!0}));v.a.track(t,e),r.handlePagesOverlays(),r.emitOnChange(e),r.handleAnimationState()},0)}},{key:"emitOnChange",value:function e(t){this.handlePagesOverlays();var r=n.i(z.b)(this.prevState,t);f.a.group("onChange"),f.a.log(JSON.stringify(r,null,3)),f.a.groupEnd("onChange"),this.prevState=t,this.onChange(r)}},{key:"emitLogoLabelClick",value:function e(t){this.onLogoLabelClick(t)}},{key:"handlePagesOverlays",value:function e(){this.pages.forEach(function(e){W.a.repositionOverlay(e),W.a.pageStateChange(e)})}},{key:"addEventListeners",value:function e(){var t=n.i(E.a)("scrollableNode");h.a.attachEvent(t,"mouseenter",function(){n.i(E.b)("isMouseInWorkspace",!0)},!1,!0,!0,null,{useCapture:!0}),h.a.attachEvent(t,"mouseleave",function(){n.i(E.b)("isMouseInWorkspace",!1)},!1,!0,!0,null,{useCapture:!0})}},{key:"destroy",value:function e(t){var i=this;this.clipboard.destroy(),this.afterloadingQueue.clean(),delete this.clipboard,this.destroyed=!0,this.pixelPerfectMaskElements.forEach(function(e){e.parentNode.removeChild(e)}),h.a.detachAllEvents(),r.a.flush(),this.pages.forEach(function(e){W.a.removeOverlay(e),e.destroy()}),v.a.destroy(),t||(this.el.innerHTML="",(n.i(E.a)("overlaysNode")||{}).innerHTML="",h.a.detachEvent("resize",this.repositionOverlays.bind(this),window),h.a.detachEvent("scroll",this.onWorkspaceScroll.bind(this),n.i(E.a)("scrollableNode"))),l.a.OUTER_ASYNC_SUBSCRIBERS.forEach(function(e){i[e]=te}),n.i(b.releaseProxy)(),P.a.clearAll(),W.a.teardown(),V.a.tearDown(),delete window.Arbiter}},{key:"setPageWidth",value:function e(t){this.pageWidth=t,n.i(E.b)("pageWidth",t)}},{key:"setPageHeight",value:function e(t){this.pageHeight=t,n.i(E.b)("pageHeight",t)}},{key:"setAuthToken",value:function e(t){n.i(E.b)("authToken",t)}}]),e}())||Y)||Y)||Y)||Y)||Y)||Y)||Y)||Y},function(e,t,n){"use strict";var r=n(7),i=n(0),o=n(1),a=n(20),s,u;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=v(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return b});var b=(s=n.i(a.a)("nonProportional"))(u=function(e){function t(e){var n;return c(this,t),(n=p(this,m(t).call(this,e))).colors=e.colors||[{id:0,color:"#".concat(e.backgroundColor)||!1}],n}return y(t,e),h(t,[{key:"getControlsFilter",value:function e(){return["nw","ne","sw","se"]}},{key:"setEl",value:function e(n){g(m(t.prototype),"setEl",this).call(this,n),this.setStyle({backgroundColor:this.colors[0].color},this.el),this.bindEvents()}},{key:"setColor",value:function e(t){var r=n.i(i.p)({color:this.colors[0].color,id:0});return this.colors=[{id:0,color:t.color}],this.setStyle({backgroundColor:t.color},this.el),r}},{key:"template",value:function e(){return'<img style="width: 100%; height: 100%; />'}}]),t}(r.a))||u;b.background=!0},function(e,t,n){"use strict";var r=n(2),i=n(45),o=n(21),a=n(5),s=n(9),u=n(1),l=n(4),c=n(3);function f(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,s,"next",e)}function s(e){f(o,r,i,a,s,"throw",e)}a(void 0)})}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function m(e){return!e.cropping}function y(e,t,i){var o=n.i(r.a)("scaleRatio");e.scalePosition(o/100),e.position.left+=u.a.COPY_SHIFT*i,e.position.top+=u.a.COPY_SHIFT*i;var a=t.getRelativePosition(e);s.a.dropElementTo(t,e,a,!0)}var E=function(){function e(){d(this,e),this.buffer=null}return v(e,[{key:"clear",value:function e(){a.a.log("Clipboard: clear buffer"),this.buffer=null}},{key:"copy",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t.designElement)throw new Error("Clipboard: try to copy, but no element selected");if(!m(t.designElement))throw new Error("Clipboard: cannot copy element, because its no copiable");return a.a.log("Clipboard: copy element to buffer"),t.designElement=t.designElement.getClipboardData(),t.pastedTimes=p({},t.page.uuid,1),n.dontUseBuffer||(this.buffer=t),t}},{key:"paste",value:function(){var e=h(regeneratorRuntime.mark(function e(t,r){var u,f,h,p,d,g,v,m;return regeneratorRuntime.wrap(function e(E){for(;;)switch(E.prev=E.next){case 0:if(a.a.log("Clipboard: paste element from buffer"),u=r||this.buffer){E.next=4;break}throw new Error("Clipboard: try to get data from buffer, but buffer is empty");case 4:return u.pastedTimes[t.uuid]=u.pastedTimes[t.uuid]||0,f=u.designElement,h=u.pastedTimes,p=JSON.parse(JSON.stringify({designElement:f,pastedTimes:h})),d="groupElement"===p.designElement.type,g=d?p.designElement.children:[p.designElement],E.next=11,n.i(i.a)(g);case 11:if((v=E.sent).forEach(function(e){y(e,t,p.pastedTimes[t.uuid])}),!(d&&v.length>1)){E.next=20;break}return E.next=16,n.i(o.a)(v);case 16:m=E.sent,s.a.dropGroupElement(m,t),E.next=21;break;case 20:l.a.dispatch(c.a.ELEMENT_SELECTED,{designElement:v[0],ignoreKeyMode:!0});case 21:return E.next=23,Promise.all(v.map(function(e){return e.mounted()}));case 23:return u.pastedTimes[t.uuid]++,E.abrupt("return",v);case 25:case"end":return E.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"destroy",value:function e(){this.clear()}}]),e}();t.a=E},function(e,t,n){"use strict";var r=n(13),i=n(0),o=n(10),a=n(6);t.a=function(e){return Object.assign(e,{isCropped:function e(){return!(0===this.cropOpts.width&&0===this.cropOpts.height&&0===this.cropOpts.left&&0===this.cropOpts.top||n.i(i.D)(this.cropOpts.width,this.originalImageWidth)&&n.i(i.D)(this.cropOpts.height,this.originalImageHeight))},setDefaultCropOpts:function e(){this.cropOpts={left:0,top:0,width:0,height:0}},resetImagePosition:function e(){var t=this.getImage();t.style.left=0,this.setImageSrc(this.originalSrc||this.src),t.style.top=0;var n=this.el.querySelector("canvas");n&&(n.style.left=0,n.style.top=0)},resetImageBounds:function e(){var t=this.getImage();t.style.width="".concat(this.originalImageWidth,"px"),t.style.height="".concat(this.originalImageHeight,"px")},resetOriginalDimensions:function e(){this.setWidth(this.originalImageWidth),this.setHeight(this.originalImageHeight)},adjustPositionWithCrop:function e(){this.setPosition({left:this.position.left-this.cropOpts.left,top:this.position.top-this.cropOpts.top})},resetCropDimensions:function e(){this.cropOverlay.setWidth(this.cropOpts.width),this.cropOverlay.setHeight(this.cropOpts.height)},setDimensionsAsCropped:function e(){this.setWidth(this.cropOverlay.width),this.setHeight(this.cropOverlay.height)},resetElementCenterPositionRelativeToCrop:function e(t){var n=this.cropOverlay.getBounds().center,r=n.x-t.x,i=n.y-t.y;this.setPosition({left:this.position.left-r,top:this.position.top-i})},onCropOverlayResize:function e(t){this.cropOpts={left:t.position.left,top:t.position.top,width:t.width,height:t.height},this.cropOverlay.stabilize(),this.checkResizeInnerStopPoints(!1)},startCrop:function e(t){this.overlay&&n.i(r.b)(this),this.blurArea(),this.cropOverlay=t,a.a.attachElement(t.el,this.underlyingEl),this.overlay&&this.overlay.setAttribute("data-crop-element",!0),this.cropOverlay.stabilize(),this.cropping=!0;var i=this.getBounds().center;this.resetOriginalDimensions(),this.adjustPositionWithCrop(),this.isCropped()&&(this.resetCropDimensions(),this.resetImagePosition(),this.resetElementCenterPositionRelativeToCrop(i)),this.overlay&&n.i(r.a)(this),this.cropOverlay.stabilize({width:this.width,height:this.height}),this.cropOverlay.onResize=this.onCropOverlayResize.bind(this),this.cropOverlay.setInitialBounds(),this.regenerate(!0,this.cropOverlay)},destroyCropOverlay:function e(){this.cropOverlay.destroy(),this.cropOverlay=null,this.cropping=!1,this.overlay&&this.overlay.removeAttribute("data-crop-element")},cancelCrop:function e(){this.destroyCropOverlay(),this.resetImagePosition(),this.brightArea(),this.setDefaultCropOpts()},setCrop:function e(){if(!this.cropping)throw new Error("You are trying to set crop without cropping overlay attached. Please dont");this.overlay&&this.overlay.querySelector('[data-overlay="select"]')&&n.i(r.c)(this);var t=this.cropOverlay.getBounds().center,o=this.position,a=n.i(i.p)(this.cropOverlay.position),s=n.i(i.p)(this.initialCropOpts);this.setDimensionsAsCropped();var u=this.getBounds().center;this.setPosition({left:o.left+(t.x-u.x),top:o.top+(t.y-u.y)},!1);var l={left:a.left,top:a.top,width:this.cropOverlay.width,height:this.cropOverlay.height};return this.destroyCropOverlay(),this.setCropPosition(l),this.overlay&&n.i(r.a)(this),s},setCropPosition:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cropOpts=t,r&&(this.initialCropOpts=t);var i=this.el.querySelectorAll("canvas, [image]");n.i(o.a)(i,function(e){e.style.left="".concat(-t.left,"px"),e.style.top="".concat(-t.top,"px"),e.style.width="".concat(this.originalImageWidth,"px"),e.style.height="".concat(this.originalImageHeight,"px")}.bind(this)),this.brightArea()}})}},function(e,t,n){"use strict";var r=n(19),i=n(6),o=n(4),a=n(3),s=n(2),u=n(26),l=n(25),c=n(123),f=n(27),h=n.n(f),p=n(51),d=n(5),g=n(0),v=n(1);n.d(t,"a",function(){return E});var m=function e(){return!1},y={isResizablePreview:function e(t){return!v.a.NOT_RESIZABLE_INVENTORY_TYPES.includes(t.type)},onDragMove:function e(t){var r=t.element,i=t.data,o=t.baseSize;if(y.isResizablePreview(i)){var a,u=r.getAttribute("factual-mount-width")/o.width,l=r.querySelector(":scope > div"),c=n.i(s.a)("isMouseInWorkspace")?u:1;l.style.transform="scale(".concat(c,")")}},onDragEnd:function e(t){var r=t.element,i=t.data,o=t.baseSize;if(y.isResizablePreview(i)){var a=n.i(g.c)(r),s={width:parseInt(r.getAttribute("factual-mount-width")),height:parseInt(r.getAttribute("factual-mount-height"))},u=(s.width-o.width)/2,l=(s.height-o.height)/2;r.style.left="".concat(a.left-u,"px"),r.style.top="".concat(a.top-l,"px"),r.style.width="".concat(s.width,"px"),r.style.height="".concat(s.height,"px")}}};function E(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=n.i(g.p)(t);var f={},v,E=null!==e.getAttribute("inventory-id");if("templateElement"!==t.type||isNaN(t.pageNumber)||(E=E&&e.getAttribute("data-template-page")===t.pageNumber.toString()),!E){s.onDragStart=s.onDragStart||m,s.onDragEnd=s.onDragEnd||m,e.setAttribute("inventory-id",t.id),"templateElement"!==t.type||isNaN(t.pageNumber)||e.setAttribute("data-template-page",t.pageNumber),l.a.addItem(t,s);var b=function e(n){d.a.log("Draggable: Drop from inventory..."),o.a.dispatch(a.a.ELEMENT_DROP,{el:n,inventoryId:t.id,type:t.type,pageNumber:t.pageNumber,itemData:t})};if(!s.disableDrag){var w=h.a.getDragMoveHandler(null,{id:t.id,type:t.type,src:t.src,mediaAsset:t.mediaAsset,mediaId:t.mediaId,dphId:t.dphId,isFreeItem:t.isFreeItem,isBackground:t.isBackground||t.isBackground2});n.i(r.a)(e,{clone:!0,shouldWrap:!0,onDragStart:function e(r){f.width=r.clientWidth,f.height=r.clientHeight,s.onDragStart(t),u.a.loadInventoryItem(r),"imageElement"===t.type&&n.i(c.a)(t),v=r.querySelector(":scope > div > *"),p.a.prepareInventoryItem(r,t,{drag:!0,setFactualSizeAsAttribute:!0})},onDragMove:function e(r,i,o,a,s){var u=n.i(g.c)(v);w(u,i,o,a,s),y.onDragMove({element:i,baseSize:f,data:t})},onDragEnd:function e(n,r){y.onDragEnd({element:n,data:t,baseSize:f}),s.onDragEnd(r),b(n)}})}i.a.attachEvent(e,"click",function(){var n=e.cloneNode(!0);t.draftNode=n,o.a.dispatch(a.a.ELEMENT_DROP_TO_ACTIVE,t)},!1,!1)}}},function(e,t,n){"use strict";var r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var p=function(e){function t(e){var n;return o(this,t),(n=u(this,c(t).call(this,e))).type="dummyElement",n.isSelectable=!1,n.isStorable=!1,n}return f(t,e),s(t,[{key:"toggleHighlight",value:function e(){}},{key:"mounting",value:function e(){return new Promise(function(e){return!1})}},{key:"template",value:function e(){return""}},{key:"serialize",value:function e(){throw new Error("DummyElement must be filtered before saving. Check your code")}}]),t}(n(7).a);t.a=p},function(e,t,n){"use strict";var r=n(37),i=n(0),o=n(8),a=n(2),s=n(23);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=g(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return E});var E=function(e){function t(e){var r;return l(this,t),r=h(this,v(t).call(this,e)),e.previewMediaId&&(r.previewPath=n.i(i.u)(e.previewMediaId,{isVideoStaticPreview:!0})),r.viewPath=r.previewPath,r.mediaId&&(r.src=n.i(i.u)(r.mediaId,{fallbackTo:r.fallbackTo})),r.isInPreviewMode=n.i(a.a)("renderMode")===s.a.PREVIEW,r}return m(t,e),f(t,[{key:"getImage",value:function e(){return this.el.querySelector("img")}},{key:"mounting",value:function e(){var r=this;return n.i(o.f)(this.previewPath).then(function(){return r.isInPreviewMode||(r.preload=n.i(i.J)(r.src,function(e){window.jsdom||(r.viewPath=e)})),!r.shallow||r.isInPreviewMode?d(v(t.prototype),"mounting",r).call(r):r.preload.promise})}},{key:"play",value:function e(){this.isInPreviewMode||(this.getImage().src=this.viewPath)}},{key:"stop",value:function e(){var t;this.getImage().src=this.previewPath}},{key:"template",value:function e(){return'<div holder style="position: relative; width: 100%; height: 100%">\n\t\t\t\t\t\t\t<img image="true" src="'.concat(this.viewPath,'" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute; user-select:none;" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t')}},{key:"serialize",value:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=d(v(t.prototype),"serialize",this).call(this,n);return delete r.viewPath,r}}]),t}(r.a)},function(e,t,n){"use strict";var r=n(39),i=n(17),o=n(13),a=n(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=d(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var y=function(e){function t(e){var n;return u(this,t),(n=f(this,g(t).call(this,e))).setRelativeChildrenPositions(),n.isStorable=!1,n}return v(t,e),c(t,[{key:"setEl",value:function e(n){p(g(t.prototype),"setEl",this).call(this,n),this.children.forEach(function(e){delete e.shouldBeAPartOfGroup,e.el.setAttribute("data-part-of-multiselection","true")})}},{key:"select",value:function e(){p(g(t.prototype),"select",this).call(this),this.overlay&&this.overlay.setAttribute("data-type","multiselection")}},{key:"change",value:function e(n,r,i){if(a.a.ACTIONS_TO_REMOVE_BACKGROUND.includes(n)){var o=this.children.find(function(e){return e.isBackgroundElement()});o&&o.setBackground({isBackground2:!1})}return p(g(t.prototype),"change",this).call(this,n,r,i)}},{key:"drag",value:function e(n,r){var i=Object.assign({},this.position),o=p(g(t.prototype),"drag",this).call(this,n,r),a=JSON.stringify(i)!==JSON.stringify(this.position);return r&&!a?o:(this.children.forEach(function(e){e.drag(n,!1)}),o)}},{key:"setSelfAngle",value:function e(n,r){return p(g(t.prototype),"setAngle",this).call(this,n,r)}},{key:"setAngle",value:function e(r,o){var a=this,s=p(g(t.prototype),"setAngle",this).call(this,r,o),u=r-s,l=n.i(i.e)(this,u);return this.children.forEach(function(e,t){var n=l[t];e.setPosition(n,!1),e.setAngle(e.valuesBeforeGroupping.angle+a.angle)}),s}},{key:"resize",value:function e(r){p(g(t.prototype),"resize",this).call(this,r);var o=n.i(i.e)(this,this.angle);this.children.forEach(function(e,t){var n=o[t];e.setPosition(n,!1)})}},{key:"blur",value:function e(){this.children.forEach(function(e){e.el.removeAttribute("data-part-of-multiselection"),e.highlighted=!1,e.selected=!1}),this.ungroup(),p(g(t.prototype),"blur",this).call(this),this.children=[]}},{key:"alignChildren",value:function e(r){var a;p(g(t.prototype),"alignChildren",this).call(this,r).forEach(function(e){var t=e.designElement,n=e.left,r=e.top;t.setPosition({left:n,top:r})});var s=n.i(i.c)(this.children);this.setSelfAngle(0,!0),this.resizeBorders({width:s.width,height:s.height,position:{left:s.left,top:s.top}}),this.children.forEach(function(e){e.valuesBeforeGroupping.angle=e.angle}),this.overlay&&n.i(o.d)(this),this.setRelativeChildrenPositions()}},{key:"serialize",value:function e(n){var r=this.children.map(function(e){return e.serialize(n)}),i=p(g(t.prototype),"serialize",this).call(this,n);return i.children=r,i}},{key:"setRelativeChildrenPositions",value:function e(){var t=this;this.children.forEach(function(e){e.relativeChildPosition={left:(e.position.left-t.position.left)/t.width,top:(e.position.top-t.position.top)/t.height}})}}]),t}(r.a);t.a=y},function(e,t,n){"use strict";var r=n(7),i=n(0),o=n(8),a=n(1);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=v(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return b});var b=function(e){function t(e){var n;return c(this,t),(n=p(this,m(t).call(this,e))).previewPath=e.previewPath,n._blured=!0,!1===e._blured&&(n._blured=!1),n.mediaAsset&&n.definePreviewPath(),n}return y(t,e),h(t,[{key:"definePreviewPath",value:function e(){var t=this.shallow?a.a.VIEW_MODES.download:a.a.VIEW_MODES.screen;this.previewPath=n.i(i.u)(this.mediaId,{viewMode:t,session:!0})}},{key:"getImage",value:function e(){return this.el.querySelector("img")}},{key:"getControlsFilter",value:function e(){return["nw","ne","sw","se"]}},{key:"setEl",value:function e(n){g(m(t.prototype),"setEl",this).call(this,n),this.bindEvents()}},{key:"mounting",value:function e(){var t=this;return this.renderMode||this.mediaAsset||(this.src=n.i(o.e)(this.previewPath,a.a.ILLUSTRATION_WIDTH)),n.i(i.b)(this.previewPath).then(function(){t.blured=!1})}},{key:"serialize",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=g(m(t.prototype),"serialize",this).call(this,r);return r.stateSave||(i.previewPath=n.i(o.i)(i.previewPath),delete i._blured,delete i.src),i}},{key:"export",value:function(){var e=l(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g(m(t.prototype),"export",this).call(this);case 2:return(n=r.sent).src=this.src,r.abrupt("return",n);case 5:case"end":return r.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},{key:"reload",value:function(){var e=l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:this.definePreviewPath(),this.src=this.previewPath;case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"template",value:function e(){return'<div holder style="position: relative; width: 100%; height: 100%">\n\t\t\t\t\t\t\t<img image="true" src="'.concat(this.src,'" style="width: 100%; height: 100%; position: absolute; user-select:none; filter: ').concat(this.blured,'" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t')}},{key:"blured",get:function e(){return this._blured?"blur(5px)":""},set:function e(t){this._blured=t,this.el&&(this.getImage().style.filter=this.blured)}},{key:"src",set:function e(t){this.el&&this.getImage().setAttribute("src",t),this.previewPath=t},get:function e(){return this.previewPath}}]),t}(r.a);b.flippable=!0},function(e,t,n){"use strict";var r=n(7),i=n(4),o=n(3),a=n(1),s=n(0),u=n(8),l=n(23),c=n(81),f=n(40),h=n(9),p=n(2),d=n(26),g=n(12),v=n.n(g),m=n(20),y=n(43),E,b,w,_;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function S(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){S(o,r,i,a,s,"next",e)}function s(e){S(o,r,i,a,s,"throw",e)}a(void 0)})}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?F(e):t}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=k(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function R(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return L});var L=(E=n.i(m.a)("maskType","rect"))(_=(b=n.i(m.a)("imageEffects"))(_=(w=n.i(m.a)("frameable"))(_=n.i(y.a)(_=function(e){function t(e){var r;return O(this,t),(r=T(this,D(t).call(this,e))).presetPic=e.presetPic||!1,r.resolveFiltersConfiguration(e),e.src=r.defineSrc(e.src),e.lowQualitySrc=e.lowQualitySrc?n.i(u.e)(e.lowQualitySrc,a.a.DEFAULT_IMAGE_WIDTH):null,r.type="imageElement",r.src=e.src||e.url,r.previewPath=e.previewPath,r.style.backgroundImage=null,r.originalImageWidth=e.originalImageWidth||e.width,r.originalImageHeight=e.originalImageHeight||e.height,r.cropOpts=e.cropOpts||{left:0,top:0,width:0,height:0},r.cropOpts.width=r.cropOpts.width||0,r.cropOpts.height=r.cropOpts.height||0,r.initialCropOpts=n.i(s.p)(r.cropOpts),r.sticky=e.sticky||r.templateAsset,r.lowQualitySrc=e.lowQualitySrc,n.i(c.a)(F(F(r))),r.originalSrc=e.src,r.renderMode=e.renderMode||!1,r}return R(t,e),x(t,[{key:"getImage",value:function e(){return this.el.querySelector("img")}},{key:"blur",value:function e(){I(D(t.prototype),"blur",this).call(this)}},{key:"defineSrc",value:function e(t){var r=this;if(this.mediaAsset){var i=this.mediaId||this.id||this.dphId,o,c;return this.presetPic?o=a.a.VIEW_MODES.thumb:this.shallow?o=a.a.VIEW_MODES.download:(o=a.a.VIEW_MODES.screen,c=!0),n.i(s.u)(i,{viewMode:o,session:c})}return this.presetPic&&t?n.i(u.e)(t,a.a.SMALL_IMAGE_WIDTH):this.shallow&&t?!/uploads/.test(t)||this.filters&&a.a.WEBGL_FILTERS.some(function(e){return r.filters[e]})?n.i(u.e)(t,n.i(l.b)()):n.i(u.i)(t):t?n.i(u.j)(t):void 0}},{key:"getControlsFilter",value:function e(){var t=["nw","ne","sw","se","n","s","w","e"];return this.cropping&&(t=t.filter(function(e){return-1===["n","s","w","e"].indexOf(e)})),t}},{key:"setPositionChange",value:function e(n){if(!this.cropping)return I(D(t.prototype),"setPositionChange",this).call(this,n)}},{key:"blurArea",value:function e(){this.underlyingEl.setAttribute("crop-blured",!0),this.el.setAttribute("element-under-crop",!0),this.underlyingEl.style.overflow="visible",this.el.style.overflow="visible",this.shallow||n.i(p.a)("workspace").setAttribute("crop-blured",!0)}},{key:"brightArea",value:function e(){this.underlyingEl.setAttribute("crop-blured",!1),this.el.removeAttribute("element-under-crop"),this.underlyingEl.style.overflow="hidden",this.el.style.overflow="hidden",this.shallow||n.i(p.a)("workspace").setAttribute("crop-blured",!1)}},{key:"setWidth",value:function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];I(D(t.prototype),"setWidth",this).call(this,n,r),i&&(this.originalImageWidth=n,this.getImage().style.width="".concat(n,"px"))}},{key:"setHeight",value:function e(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];I(D(t.prototype),"setHeight",this).call(this,n,r),i&&(this.originalImageHeight=n,this.getImage().style.height="".concat(n,"px"))}},{key:"scale",value:function e(n){I(D(t.prototype),"scale",this).call(this,n);var r=this.cropOpts,i=r.left,o=r.top,a=r.width,s=r.height,u=this.initialCropOpts,l=u.ileft,c=u.itop,f=u.iwidth,h=u.iheight;if(this.originalImageHeight=this.originalImageHeight*n,this.originalImageWidth=this.originalImageWidth*n,this.cropping)return this.cropOverlay.scale(n),this.cropOverlay.scalePosition(n),this.cropOverlay.stabilize({width:this.width,height:this.height}),void this.resetImageBounds();this.cropOpts={left:i*n,top:o*n,width:a*n,height:s*n},this.initialCropOpts={left:l*n,top:c*n,width:f*n,height:h*n},this.setCropPosition(this.cropOpts)}},{key:"swap",value:function e(t){this.cropOpts=t.cropOpts,this.dphId=t.dphId,this.id=t.id,this.isFreeItem=t.isFreeItem,this.mediaId=t.mediaId,this.mediaAsset=t.mediaAsset,this.templateAsset=t.templateAsset,this.originalSrc=this.defineSrc(t.src);var n=this.getImage();n.removeAttribute("src"),n.setAttribute("src",this.originalSrc),this.originalImageHeight=t.originalImageHeight,this.originalImageWidth=t.originalImageWidth,n.style.width="".concat(this.originalImageWidth,"px"),n.style.height="".concat(this.originalImageHeight,"px"),this.setCropPosition(this.cropOpts),this.performInitialCrop(!0,!1)}},{key:"unsetBackground",value:function e(){if(this.temporaryData){var t=this.temporaryData,n=t.src,r=t.cropOpts,i=t.originalImageHeight,o=t.originalImageWidth,a=t.dphId,s=t.mediaId,u=t.mediaAsset,l=t.templateAsset;this.swap({src:n,cropOpts:r,originalImageHeight:i,originalImageWidth:o,dphId:a,mediaId:s,mediaAsset:u,templateAsset:l}),this.temporaryData=null}}},{key:"stick",value:function e(t,r){if(r)return this.isBackground2=!1,void(this.temporaryData=null);this.temporaryData={cropOpts:n.i(s.p)(this.cropOpts),src:this.originalSrc,dphId:this.dphId,id:this.id,originalImageWidth:this.originalImageWidth,originalImageHeight:this.originalImageHeight,mediaId:this.mediaId,mediaAsset:this.mediaAsset,templateAsset:!0};var i={width:t.naturalDimensions.width,height:t.naturalDimensions.height},o=i.width/i.height,a,u;i.width<this.width&&i.height<this.height&&(i.width=this.width*Math.round(this.width/i.width),i.height=i.width*o);var l=t.cropOpts,c,f;(l||(l={width:this.width,height:this.height}),this.width>i.width&&(a=(u=this.width)/o),a>this.height)?l={left:0,top:(a-this.height)/2,height:this.height,width:this.width}:l={left:((u=(a=this.height)*o)-this.width)/2,height:this.height,width:this.width};u<this.width?a=(u=this.width)/o:a<this.height&&(u=(a=this.height)*o),t.dimensions&&(u=t.dimensions.width,a=t.dimensions.height),u=u||i.width,a=a||i.height,l.top=(a-this.height)/2,l.left=(u-this.width)/2,this.swap({originalImageHeight:a,originalImageWidth:u,src:t.src,cropOpts:l,id:t.id,isFreeItem:t.isFreeItem,mediaAsset:t.mediaAsset,mediaId:t.mediaId,dphId:t.dphId}),r&&this.setPosition(this.position)}},{key:"unsetTemporaryData",value:function e(){var t=n.i(s.p)(this.temporaryData);if(null===t)return this.unsetBackground();this.swap(t),this.temporaryData=null}},{key:"setLock",value:function e(n){if(this.cropping)throw new Error("Cannot set lock while crop");return I(D(t.prototype),"setLock",this).call(this,n)}},{key:"bindEvents",value:function e(){I(D(t.prototype),"bindEvents",this).call(this);var n=this;this.el.ondblclick=function(){n.locked||(n.cropping?i.a.dispatch(o.a.ELEMENT_SET_CROP,n):i.a.dispatch(o.a.ELEMENT_ATTACH_CROP,n))}}},{key:"setEl",value:function e(r){var i=this;I(D(t.prototype),"setEl",this).call(this,r);var o=function e(){i.el&&(i.regenerate(!0),i.el.style.backgroundImage=null,i.bindEvents(),i.image=i.el.querySelector("image"),i.isCropped()&&i.performInitialCrop())};if(this.filtersPreset){var a=this;return this.finalize=!0,void this.setFiltersPreset(this)}this.lowQualitySrc&&this.lowQualitySrc!==this.src?n.i(u.k)(this.src,function(){o()}):o()}},{key:"performInitialCrop",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.position,i=h.a.performCrop(this,n);return t&&this.setPosition(r),i}},{key:"drag",value:function e(r,i,o){var a=this.getBounds().center;if(I(D(t.prototype),"drag",this).call(this,r,i),!0!==o){if(this.cropping){var u=n.i(s.d)(this,"n").edge,l=n.i(s.d)(this,"w").edge,c=this.getBounds().center,f=n.i(s.i)(a,l,c,l),h=n.i(s.i)(a,u,c,u),p=n.i(s.k)(c,u).distance,d=n.i(s.k)(c,l).distance,g=this.cropOverlay.width,v=this.cropOverlay.height,m=f-d,y=h-p;this.cropOverlay.drag({x:m,y:y});var E=this.cropOverlay.getBounds();if(y=0,m=0,this.cropOverlay.position.top<=0?y=-this.cropOverlay.position.top:this.cropOverlay.position.top+v>=this.height&&(y=-(this.cropOverlay.position.top+(v-this.height))),this.cropOverlay.position.left<=0?m=-this.cropOverlay.position.left:this.cropOverlay.position.left+g>=this.width&&(m=-this.cropOverlay.position.left+this.width-g),m||y){this.cropOverlay.drag({x:m,y:y});var b=this.cropOverlay.getBounds(),w=E.top-b.top,_=E.left-b.left;this.drag({x:_,y:w},i,!0)}this.cropOverlay.stabilize({width:this.width,height:this.height})}}else this.cropOverlay.setPosition(this.cropOverlay.position,!1)}},{key:"checkResizeInnerStopPoints",value:function e(t){var n,r=!0,i=!0;if(!this.cropping)return!1;function o(e,t){-1===e.indexOf(t)&&e.push(t)}var a=[],s,u,l=this.cropOverlay;return s=l.width,u=l.height,this.cropOverlay.position.top<0&&this.cropOverlay.position.top<this.cropOverlay.position.left?(n=(Math.abs(this.cropOverlay.position.top)+this.height)/this.height,o(a,"n")):this.cropOverlay.position.left<0&&this.cropOverlay.position.left<this.cropOverlay.position.top?(n=(Math.abs(this.cropOverlay.position.left)+this.width)/this.width,o(a,"w")):this.cropOverlay.position.top+u>this.height?(o(a,"s"),n=(this.cropOverlay.position.top+u)/this.height):this.cropOverlay.position.left+s>this.width&&(n=(this.cropOverlay.position.left+s)/this.width,o(a,"e")),this.sticked=a,!(!n||!1===t)&&(this.setTransform("scale","".concat(n,", ").concat(n)),{setHeight:!0,setWidth:!0,xRatio:n,yRatio:n,ratio:n})}},{key:"resizeAsPartOfGroup",value:function e(n){I(D(t.prototype),"resizeAsPartOfGroup",this).call(this,n),this.resizeRestCropZone(n)}},{key:"isCroppedSide",value:function e(t){if(!this.isCropped())return!1;switch(t){case"n":return this.cropOpts.top>0;case"s":return this.cropOpts.top+this.cropOpts.height<this.originalImageHeight;case"e":return this.cropOpts.left+this.cropOpts.width<this.originalImageWidth;case"w":return this.cropOpts.left>0;default:return!1}}},{key:"shouldScaleBothSides",value:function e(t,n){return!!this.__preferResize||n>1&&(["n","s"].includes(t)&&!this.isCroppedSide(t)||["e","w"].includes(t)&&!this.isCroppedSide(t))}},{key:"resize",value:function e(r){var i=["n","w","e","s"].includes(r.handle),o=this.shouldScaleBothSides(r.handle,r.ratio),a,u;if(i&&!o){if(this.cropping)throw new Error("You are cropping right now, and crop handle activated. Crop handles should not be visible during crop");var l=n.i(s.p)(this.cropOpts);this.isCropped()||(l.width=this.width,l.height=this.height);var c={afterScaleCoords:this.getBounds(),newWidth:this.width,newHeight:this.height,handle:r.handle,initialPosition:this.position};switch(r.handle){case"e":l.width=r.newWidth,l.height=this.height;break;case"n":l.top+=this.height-r.newHeight,l.width=this.width,l.height=r.newHeight;break;case"w":l.left+=this.width-r.newWidth,l.width=r.newWidth,l.height=this.height;break;case"s":l.width=this.width,l.height=r.newHeight}var h=n.i(s.p)(l),p;l=f.a.correctOverlap(l,this.originalImageWidth,this.originalImageHeight);var d=h.left<0||h.top<0||h.width!==l.width||h.height!==l.height;d&&(p=n.i(s.j)(this,r.handle).edge),this.setCropPosition(l),this.performInitialCrop(!1,!1);var g=this.getBounds(),v=0,m=0;if(v=r.afterScaleCoords.left-g.left,m=r.afterScaleCoords.top-g.top,d){var y=n.i(s.j)(this,r.handle).edge;v=-(y.x-p.x),m=-(y.y-p.y)}return this.setPosition({left:this.position.left+v,top:this.position.top+m},!1),c.newOriginalImageWidth=this.originalImageWidth,c.newOriginalImageHeight=this.originalImageHeight,c}o&&(this.__preferResize=!0);var E=this.width,b=this.height,w=this.originalImageHeight,_=this.originalImageWidth;this.cropping&&(a=this.cropOverlay.position,u=this.cropOverlay.getBounds());var P=I(D(t.prototype),"resize",this).call(this,r);if(this.resizeRestCropZone(r),this.cropping){var S=0,A=0;-1!==["nw","sw"].indexOf(r.handle)&&(S=this.width-E),-1!==["nw","ne"].indexOf(r.handle)&&(A=this.height-b);var O={left:a.left+S,top:a.top+A};this.cropOverlay.setPosition(O),this.cropOverlay.stabilize({width:this.width,height:this.height});var C=this.cropOverlay.getBounds(),x=C.left-u.left,T=C.top-u.top;this.drag({x:-x,y:-T},!1,!0)}return P.newOriginalImageWidth=_,P.newOriginalImageHeight=w,P}},{key:"reload",value:function(){var e=A(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return this.originalSrc=this.defineSrc(this.originalSrc),t.abrupt("return",this.mounted());case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onResizeEnd",value:function e(n,r){I(D(t.prototype),"onResizeEnd",this).call(this,n,r),this.__preferResize=!1}},{key:"resizeRestCropZone",value:function e(t){this.isCropped()&&!this.cropping?(this.setCropPosition({left:this.cropOpts.left*t.ratio,top:this.cropOpts.top*t.ratio,width:this.width,height:this.height}),this.originalImageHeight*=t.ratio,this.originalImageWidth*=t.ratio):(this.originalImageHeight=this.height,this.originalImageWidth=this.width),this.resetImageBounds()}},{key:"mounting",value:function e(){var t=this;return new Promise(function(e){if(!0===window.jsdom||!t.el)return e();if(t.filters.vignette||t.filters.crossProcess)return n.i(u.f)(t.originalSrc).then(function(n){var r=t.canvasFilters(t.uuid,!0,t.filters,t.originalSrc,{width:t.originalImageWidth,height:t.originalImageHeight},t.cropOpts,n);t.setImageSrc(r.canvas.toDataURL()),e()});var r=t.getImage();if(r.complete)return e();var i=function t(){r.removeEventListener("load",t),e()};r.addEventListener("load",i)})}},{key:"tintElementChange",value:function e(){var t=this.getTintContainer(),n=this.getImage();if(!this.filters.tint||0===this.filters.tint)return t.style.background=null;var r=this.filtersStyle.background;n.style.zIndex="-1",t.style.background=r}},{key:"setAngle",value:function e(n,r){var i=I(D(t.prototype),"setAngle",this).call(this,n,r);return this.cropOverlay&&(this.cropOverlay.originalAngle=n,this.cropOverlay.overlay&&v.a.setAngle(this.cropOverlay,n)),i}},{key:"setCanvasFilters",value:function e(t,r){var i=this,o=this;if(!this.presetPic){(t.crossProcess||0===t.crossProcess)&&(this.filters.crossProcess=t.crossProcess),(t.vignette||0===t.vignette)&&(this.filters.vignette=t.vignette),this.filtersIntensityEnabled=!(!this.filtersPreset||JSON.stringify(u.d[this.filtersPreset])!==JSON.stringify(this.filters));var a=this.getImage(),s=this.el.querySelector("canvas"),l={vignette:this.filters.vignette,crossProcess:this.filters.crossProcess,originalSrc:this.originalSrc};if(this.filters.crossProcess||this.filters.vignette){if(!r||!d.a.checkImageFiltered(l))return n.i(u.f)(this.originalSrc).then(function(e){var t=i.canvasFilters(i.uuid,r,i.filters,i.originalSrc,{width:i.originalImageWidth,height:i.originalImageHeight},i.cropOpts,e);if(t){if(!0===t.finalizeFilters){var n=i.el.querySelector("canvas"),o=t.canvas.toDataURL();d.a.storeImageFiltered(l,o),f(o,n)}else a.style.display="none",a.parentNode.appendChild(t.canvas);i.setFlipInner(i.flipped,"canvas")}});var c;f(d.a.getImageFiltered(l),s)}else f(this.originalSrc,s)}function f(e,t){if(t&&a.removeAttribute("crossorigin"),a.src=e,a.style.display="block",t&&!o.shallow){var n=t.getContext("webgl");n&&n.getExtension("WEBGL_lose_context").loseContext()}a&&t&&a.parentNode.removeChild(t)}}},{key:"canvasFilters",value:function e(t,r,i,o,a,s,l){return n.i(u.l)(t,r,i,o,a,s,l)}},{key:"setImageSrc",value:function e(t){var n;this.getImage().src=t}},{key:"setFlip",value:function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=I(D(t.prototype),"setFlip",this).call(this,n);if(this.isCropped()&&r){var o=this.cropOpts,a=o.left,s=o.top,u=o.width,l=o.height;"horizontal"===n.direction?a=this.originalImageWidth-a-u:"vertical"===n.direction&&(s=this.originalImageHeight-s-l),this.cropOpts={left:a,top:s,width:this.cropOpts.width,height:this.cropOpts.height},this.setCropPosition(this.cropOpts),this.performInitialCrop(!0,!1)}return i}},{key:"template",value:function e(){return'<div crop style="position: relative; width: 100%; height: 100%">\n\t\t\t\t\t\t\t<img '.concat(n.i(u.h)(this.src),' image="true" src=').concat(this.lowQualitySrc||this.src,' style="width: ').concat(this.originalImageWidth,"px;height: ").concat(this.originalImageHeight,'px;position: absolute; user-select:none"/>\n\t\t\t\t\t\t\t<div foreground-rect style="position: absolute; width: 100%; height: 100%; left: 0; top: 0"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t')}},{key:"destroy",value:function e(n){I(D(t.prototype),"destroy",this).call(this,n),this.cropping&&this.cropOverlay.destroy(!1)}},{key:"export",value:function(){var e=A(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I(D(t.prototype),"export",this).call(this);case 2:return(n=r.sent).src=this.getImage().src,r.abrupt("return",n);case 5:case"end":return r.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},{key:"serialize",value:function e(r){this.src=this.originalSrc;var i=I(D(t.prototype),"serialize",this).call(this,r),o=n.i(p.a)("scaleRatio")/100;i.originalImageWidth=n.i(s.q)(i.originalImageWidth/o),i.originalImageHeight=n.i(s.q)(i.originalImageHeight/o);var a=i.cropOpts,u=a.left,l=a.top,c=a.width,f=a.height;return i.cropOpts={left:n.i(s.q)(u/o),top:n.i(s.q)(l/o),width:n.i(s.q)(c/o),height:n.i(s.q)(f/o)},this.filtersPreset&&!this.filtersIntensityEnabled&&(this.filtersPreset=!1),delete i.image,delete i.presetPic,delete i.renderMode,delete i.filtersStyle,delete i.lowQualitySrc,delete i.url,delete i.initialCropOpts,delete i.beforeStickData,delete i.__preferResize,delete i.temporaryData,this.mediaAsset&&(delete i.src,delete i.previewPath,delete i.originalSrc),Object.keys(i).forEach(function(e){"function"==typeof i[e]&&delete i[e]}),i}}]),t}(r.a))||_)||_)||_)||_;L.flippable=!0,L.background=!0},function(e,t,n){"use strict";var r=n(7),i=n(3),o=n(4),a=n(1),s=n(6),u=n(0),l=n(10),c=n(22),f=n(128),h=n(8),p=n(116),d=n(13),g=n(12),v=n.n(g),m=n(47),y=n(2),E=n(43),b=n(20),w,_;function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function S(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){S(o,r,i,a,s,"next",e)}function s(e){S(o,r,i,a,s,"throw",e)}a(void 0)})}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=D(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var L=(w=n.i(b.a)("imageEffects"),n.i(E.a)(_=w(_=function(e){function t(e){var r;return O(this,t),(r=T(this,R(t).call(this,e))).stasheeData=e.stasheeData,r.hasBackground=e.hasBackground||!1,r.stickedImageData=e.stickedImageData||{src:n.i(y.a)("defaultMaskImagePath"),default:!0},r.imagePosition=e.imagePosition||null,r.maskType=e.maskType,r.maskData=e.maskData,r.sticked=[],r.presetPic=e.presetPic||!1,r.resolveFiltersConfiguration(e),r}return M(t,e),x(t,[{key:"getControlsFilter",value:function e(){return["nw","ne","sw","se","ro"]}},{key:"maskTemplate",value:function e(t){var n=t.width||this.width,r=t.height||this.height,i=0,o=0;"text"===t.type&&t.top&&(o=t.top);var a="userSpaceOnUse";return'<svg version="1.1" style="width: 100%; height: 100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="'.concat(0," ").concat(o," ").concat(n," ").concat(r,'">\n\t\t\t<defs>\n\t\t\t\t<clipPath id="').concat(t.id,'" clipPathUnits="').concat(a,'">\n\t\t\t\t').concat(t.contents,"\n\t\t\t\t</clipPath>\n\t\t\t</defs>\n\t\t\t<g clip-path=\"url('#").concat(t.id,"')\"></g>\n\t\t</svg>")}},{key:"setEl",value:function(){var e=A(regeneratorRuntime.mark(function e(r){var i,o,a,s;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:if(!this.maskData){u.next=9;break}return"svg"===this.maskType&&(o=m.a.extractClippingContentsFromSvg(this.stasheeData),this.maskData.mappedContent=o.mappedContent,this.maskData.dimensions=o.dimensions),u.next=4,m.a.getClippingContents(this.maskType,this.maskData);case 4:a=u.sent,i=this.maskTemplate(a),this.maskData.heightBias=a.heightBias,this.maskData.viewBoxShift=a.viewBoxShift,this.maskData.lineHeightShift=a.lineHeightShift;case 9:k(R(t.prototype),"setEl",this).call(this,r),i&&(this.underlyingEl.innerHTML=i),this.el.style.backgroundImage=null,this.underlyingEl.style.backgroundColor=null,(s=this.el.querySelector("svg").parentNode).innerHTML=n.i(c.h)(s.innerHTML),this.compose(),this.bindEvents();case 17:case"end":return u.stop()}},e,this)}));function r(t){return e.apply(this,arguments)}return r}()},{key:"mounting",value:function(){var e=A(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:if(!this.shallow||this.hasStickedImage()){i.next=3;break}return this.el.style.display="none",i.abrupt("return");case 3:if(!(t="text"===this.maskType&&this.maskData&&this.maskData.font)){i.next=7;break}return i.next=7,n.i(u.y)(t);case 7:return this.adjustNonProportionalSvg(),i.next=10,this.setMaskedImage();case 10:if(this.regenerate(!0),this.setFlip(this.flipped),!this.filtersPreset){i.next=17;break}return(r=this).finalize=!0,this.setFiltersPreset(r),i.abrupt("return");case 17:case"end":return i.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"adjustNonProportionalSvg",value:function e(){if((this.maskData||{}).special){var t=this.getClipPath().getBoundingClientRect(),r=t.width,i=t.height,o=this.maskData.modifiers;if(!o){var a=this.width,s=this.height,u,l;o={x:a/r,y:s/i},this.maskData.modifiers=o}var c=this.getContainerPositionRect();this.getSvg().setAttribute("viewBox","".concat(c.left," ").concat(c.top," ").concat(c.width*o.x," ").concat(c.height*o.y));var h=this.getClipPath();Array.from(h.childNodes).forEach(function(e){if(e.getBBox){var t=n.i(f.a)(e,o);t!==e&&h.replaceChild(t,e)}})}}},{key:"hasStickedImage",value:function e(){return this.stickedImageData&&(!this.stickedImageData.default||this.stickedImageData.src!==n.i(y.a)("defaultMaskImagePath"))}},{key:"setFlip",value:function e(n){k(R(t.prototype),"setFlip",this).call(this,n),this.shadowImage&&this.shadowImage.setFlip(n)}},{key:"exportSvg",value:function e(){return this.getSvg().cloneNode(!0)}},{key:"setFlipInner",value:function e(t){if(!0!==window.jsdom){var r=t.horizontal,i=t.vertical;if(this.clipModifiers){var o=this.clipModifiers,a=o.x,s=o.y;r=-1===r?-a:a,i=-1===i?-s:s}var u=this.resolveClippingElements().filter(function(e){return e}),l=this.getSvg();u.forEach(function(e){if(e.getBBox){e.style||(e.style={});var t=n.i(c.b)(l),o="".concat(t.width/2,"px  ").concat(t.height/2+t.top,"px 0");e.setAttribute("transform-origin",o),e.style.transform="scale(".concat(r,", ").concat(i,")")}})}}},{key:"resolveClippingElements",value:function e(){var t=this.el.querySelector("clipPath>use");if(t){var n=t.getAttribute("xlink:href").replace("#","");return[t=this.el.querySelector('[id="'.concat(n,'"]'))]}var r=this.getClipPath();return r?Array.from(r.childNodes):[]}},{key:"hasClippingElement",value:function e(){return!!this.getClipPath()}},{key:"drag",value:function e(n,r){if(!this.cropping)return k(R(t.prototype),"drag",this).call(this,n,r);this.shadowImage.drag(n)}},{key:"onDrag",value:function e(t){var r=this.imagePosition,i=r.x,o=r.y,a=this.getContainerPositionRect(),s=this.getImagePositionRect(),l=a.width/this.width,f={x:t.x*l,y:t.y*l},h=n.i(u.G)(this,f),p=n.i(c.i)(h,a,s,i,o),d=p.newX,g=p.newY;return this.setImagePosition({x:d,y:g,width:this.imagePosition.width,height:this.imagePosition.height}),{x:(d-i)/l,y:(g-o)/l}}},{key:"simpleResize",value:function e(t){var r=t.ratio*this.width,i=t.ratio*this.height,o=this.shadowImage.position.left,a=this.shadowImage.position.top;["nw","sw"].includes(t.handle)&&(o=this.shadowImage.position.left+(r-this.width)),["nw","ne"].includes(t.handle)&&(a=this.shadowImage.position.top+(i-this.height));var s=n.i(p.a)(this.shadowImage.getPositioningRectangle(),{x:o,y:a,width:r,height:i},t),u=this.getOppositeEdgeCoords(t.handle).edge,l=s.width,c=s.height;this.setWidth(l),this.setHeight(c);var f=this.getOppositeEdgeCoords(t.handle).edge;this.setPosition({left:this.position.left-(f.x-u.x),top:this.position.top-(f.y-u.y)})}},{key:"resize",value:function e(n){var r={width:this.width,height:this.height};if(this.cropping){this.simpleResize(n);var i={x:0,y:0};["nw","sw"].includes(n.handle)&&(i.x=this.width-r.width),["nw","ne"].includes(n.handle)&&(i.y=this.height-r.height),this.shadowImage.shift(i),this.setMaskedImagePositionAfterResize(r,n.handle)}else k(R(t.prototype),"resize",this).call(this,n)}},{key:"setMaskedImagePositionAfterResize",value:function e(t,n){var r=this.getRatio(),i=this.getContainerPositionRect(),o=this.imagePosition;o.width=this.shadowImage.width*r,o.height=this.shadowImage.height*r;var a={x:0,y:0};["nw","sw"].includes(n)&&(a.x=(this.width-t.width)*r),["nw","ne"].includes(n)&&(a.y=(this.height-t.height)*r),o.x=(o.x-i.left)*(t.width/this.width)+a.x+i.left,o.y=(o.y-i.top)*(t.height/this.height)+a.y+i.top,this.setImagePosition(o)}},{key:"cancelCrop",value:function e(){var t=this.initialCropState;t||(t={imagePosition:this.imagePosition,position:this.position,width:this.width,height:this.height}),this.setCrop(),this.cropping=!1,this.setPosition(t.position),this.setWidth(t.width),this.setHeight(t.height),this.setImagePosition(t.imagePosition)}},{key:"bindEvents",value:function e(){k(R(t.prototype),"bindEvents",this).call(this);var n=this;this.el.ondblclick=function(){if(!n.locked)return n.cropping?void o.a.dispatch(i.a.ELEMENT_SET_CROP,n):o.a.dispatch(i.a.ELEMENT_ATTACH_CROP,n)}}},{key:"startCrop",value:function e(t){this.cropping=!0,this.hasRotationControls=!1,this.initialCropState={imagePosition:n.i(u.p)(this.imagePosition),position:n.i(u.p)(this.position),width:this.width,height:this.height},this.el.insertBefore(t.el,this.el.firstChild),t.setPosition(t.position,!1),this.shadowImage=t,this.shadowImage.onResize=this.onShadowImageResize.bind(this),this.shadowImage.onDrag=this.onDrag.bind(this),this.shadowImage.onSetCrop=this.onShadowSetCrop.bind(this),this.shadowImage.onSetAngle=this.onShadowSetAngle.bind(this),this.overlay&&(this.overlay.setAttribute("data-crop-element",!0),this.overlay.style.pointerEvents="auto"),n.i(d.a)(this),this.shadowImage.underlyingEl.setAttribute("crop-blured",!0),this.el.setAttribute("element-under-crop",!0),n.i(y.a)("workspace").setAttribute("crop-blured",!0)}},{key:"setCrop",value:function e(){if(!this.cropping)throw new Error("Not cropping!");this.cropping=!1,this.hasRotationControls=!0,this.shadowImage.underlyingEl.setAttribute("crop-blured",!1),this.el.removeAttribute("element-under-crop",!0),this.shadowImage.destroy(),this.shadowImage=null,this.overlay&&this.overlay.removeAttribute("data-crop-element"),n.i(y.a)("workspace").setAttribute("crop-blured",!1)}},{key:"onShadowImageResize",value:function e(t){if(t.ratio<.8||t.ratio>1.2)return!1;var r=n.i(u.p)(this.imagePosition),i=n.i(u.p)(this.imagePosition);if(i.width*=t.ratio,i.height*=t.ratio,["nw","sw"].includes(t.handle)){var o=i.width-this.imagePosition.width;i.x-=o}if(["nw","ne"].includes(t.handle)){var a=i.height-this.imagePosition.height;i.y-=a}var s=n.i(c.j)(this.imagePosition,this.getContainerPositionRect());if(t.ratio<1){if(["nw","sw"].includes(t.handle)&&n.i(u.n)(s.left,0))return!1;if(["nw","ne"].includes(t.handle)&&n.i(u.n)(s.top,0))return!1;if(["ne","se"].includes(t.handle)&&n.i(u.n)(s.right,0))return!1;if(["sw","se"].includes(t.handle)&&n.i(u.n)(s.bottom,0))return!1}return i=n.i(c.k)(i,this.imagePosition,this.getContainerPositionRect(),t.handle),this.setImagePosition(i),{imagePosition:i,oldImagePosition:r}}},{key:"onShadowSetAngle",value:function e(t,n){var r=this.width/2+Math.abs(this.shadowImage.position.left),i=this.height/2+Math.abs(this.shadowImage.position.top);this.setAngleStateful({angle:this.angle-n});var o={x:r,y:i};this.shadowImage.setAngle(0),this.shadowImage.transformOrigin=o,v.a.setAngle(this.shadowImage,this.angle,o),this.shadowImage.drag({x:0,y:0}),this.shadowImage.originalAngle=this.angle}},{key:"onShadowSetCrop",value:function e(){if(!this.cropping)throw new Error("Currently NOT cropping");o.a.dispatch(i.a.ELEMENT_SET_CROP,this)}},{key:"getRatio",value:function e(){var t;return this.getContainerPositionRect().width/this.width}},{key:"serialize",value:function e(){var n=k(R(t.prototype),"serialize",this).call(this);return delete n.stasheeData,n}},{key:"reload",value:function(){var e=A(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.setMaskedImage());case 1:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"stick",value:function e(t,r){var i=n.i(u.p)(this.stickedImageData);return this.temporaryData=null,r?(this.temporaryData=null,this.dphId=t.dphId,this.isFreeItem=t.isFreeItem||!1,this.__previewMode=!1,this.resetFilters()):(this.temporaryData=i,this.temporaryData.imagePosition=n.i(u.p)(this.imagePosition),this.__previewMode=!0),this.stickedImageData=t,this.setMaskedImage(t)}},{key:"unsetTemporaryData",value:function e(){var t=this;this.__previewMode=!1;var r=n.i(u.p)(this.temporaryData);if(this.stickedImageData=r,null===r)return this.unsetBackground();this.setMaskedImage(r).then(function(){t.setImagePosition(r.imagePosition),t.temporaryData=null})}},{key:"clearImage",value:function e(){var t=this.getImage();t&&s.a.removeElement(t)}},{key:"defineSrc",value:function e(t){var r;return t.mediaAsset?r=this.shallow?n.i(u.u)(t.mediaId||t.id,{viewMode:a.a.VIEW_MODES.download}):this.__previewMode?n.i(u.H)(t.src):this.presetPic?n.i(u.u)(t.mediaId||t.id,{viewMode:a.a.VIEW_MODES.thumb}):n.i(u.u)(t.mediaId||t.id,{viewMode:a.a.VIEW_MODES.screen,session:!0}):(r=t.src,(this.__previewMode||this.presetPic)&&(r=n.i(h.e)(t.src,a.a.DEFAULT_IMAGE_WIDTH))),r}},{key:"setMaskedImage",value:function e(t){var r=this;return new Promise(function(e){var i=!1;if(t||(t=r.stickedImageData,i=!0),!t)return r.unsetBackground(),e();r.hasBackground=!0;var o=r.getClipPath(),a={x:0,y:0};if(t.naturalDimensions&&!i){var s=r.getContainerPositionRect(),l={width:t.naturalDimensions.width,height:t.naturalDimensions.height};a=n.i(u.I)(s,l)}var f=r.defineSrc(t);r.stickedImageData.src=f,n.i(h.f)(f,{crossOrigin:!0}).then(function(t){r.clearImage();var s=r.getContainerPositionRect(),u=r.width/s.width,l=t.naturalWidth*u,p=t.naturalHeight*u,d={"xlink:href":r.shallow?n.i(h.g)(t):f,clipPath:"url('#".concat(o.getAttribute("id"),"')"),preserveAspectRatio:"none",width:l,height:p,crossOrigin:n.i(h.h)(f)},g=n.i(c.g)("image",Object.assign(d,a)),v=r.getComposeContainer();v.insertBefore(g,v.childNodes[0]),r.postCorrect(i),r.resolveClippingShadow(),e()})})}},{key:"setCanvasFilters",value:function e(t){var r=this.getImage(),i=this.getFilterFor("canvas-filters");this.filtersIntensityEnabled=!(!this.filtersPreset||JSON.stringify(h.d[this.filtersPreset])!==JSON.stringify(this.filters)),r.setAttribute("filter","url(#".concat(i.getAttribute("id"),")")),(0===t.crossProcess||t.crossProcess)&&(this.filters.crossProcess=t.crossProcess,n.i(f.b)(i,t.crossProcess)),(t.vignette||0===t.vignette)&&(this.filters.vignette=t.vignette,n.i(f.c)(this.el.querySelector("[vignette-filter]"),t.vignette))}},{key:"getClipPath",value:function e(){return this.el.querySelector("clipPath")}},{key:"getFilterFor",value:function e(t){return!0===window.jsdom?this.el.querySelector("[".concat(t,"]")):this.el.querySelector("filter,linearGradient[".concat(t,"]"))}},{key:"getContainerFor",value:function e(t){return this.el.querySelector("rect[".concat(t,"]"))}},{key:"getImage",value:function e(){return this.el.querySelector("image")}},{key:"getComposeContainer",value:function e(){return n.i(u.x)(this.el.querySelectorAll("g"))}},{key:"getComposeDefs",value:function e(){return this.el.querySelector("defs")}},{key:"getShadowFilterEl",value:function e(){return n.i(u.x)(this.el.querySelectorAll("[data-shadow-filter]"))}},{key:"getSvg",value:function e(){return this.el.querySelector("svg")}},{key:"getImagePositionRect",value:function e(){var t=this.getImage();return{left:parseFloat(t.getAttribute("x")),top:parseFloat(t.getAttribute("y")),width:parseFloat(t.getAttribute("width")),height:parseFloat(t.getAttribute("height"))}}},{key:"getContainerPositionRect",value:function e(){return n.i(c.b)(this.getSvg())}},{key:"getImageBounds",value:function e(){var t=this.getImage();return!0===window.jsdom?{width:100,height:100}:t.getBBox()}},{key:"postCorrect",value:function e(t){var r=this.imagePosition;if(!t||!this.imagePosition){var i=this.getContainerPositionRect(),o=this.getImageBounds();r=n.i(u.I)(i,o)}this.setImagePosition(r)}},{key:"destroy",value:function e(){this.shadowImage&&this.shadowImage.destroy(),k(R(t.prototype),"destroy",this).call(this)}},{key:"setImagePosition",value:function e(t){var n=t.x,r=t.y,i=t.width,o=t.height;this.imagePosition=t;var a=this.getImage();a.setAttribute("x",n),a.setAttribute("y",r),a.setAttribute("width","".concat(i,"px")),a.setAttribute("height","".concat(o,"px"))}},{key:"unsetBackground",value:function e(){if(this.hasBackground){if(this.stickedImageData)return void this.setMaskedImage(this.stickedImageData);var t=n.i(u.x)(this.el.querySelectorAll("g")),r=this.el.querySelector("image");t.removeChild(r),this.hasBackground=!1}}},{key:"compose",value:function e(){var t=this.getComposeDefs(),r=this.getComposeContainer(),i=n.i(f.d)(),o=n.i(f.e)(),a=n.i(f.f)(),s=a.getAttribute("id"),u=n.i(f.g)("tint-mask",this.el),l=n.i(f.g)("vignette-mask",this.el);l.setAttribute("fill","url(#".concat(s,")")),t.appendChild(i),t.appendChild(o),t.appendChild(a),r.appendChild(u),r.appendChild(l),"text"===this.maskType&&this.addShadowFilter()}},{key:"addShadowFilter",value:function e(){var t=this.getComposeDefs(),r=n.i(f.h)();t.appendChild(r),this.resolveClippingShadow()}},{key:"resolveClippingShadow",value:function e(){var t=this.getComposeContainer(),n=!this.hasStickedImage(),r=this.getShadowFilterEl();if(n&&r){var i=r.getAttribute("id");return t.setAttribute("filter","url(#".concat(i,")"))}t.removeAttribute("filter")}},{key:"tintElementChange",value:function e(t,n){var r=this.getContainerFor("tint-mask");if(0===this.filters.tint)return r.setAttribute("fill","none"),void(r.style.display="none");r.style.display="block";var i=this.getFilterFor("tint-mask");Array.from(i.querySelectorAll("stop")).forEach(function(e){e.setAttribute("stop-color",t.hex),e.setAttribute("stop-opacity",n)});var o=i.getAttribute("id");r.setAttribute("fill","url(#".concat(o,")"))}},{key:"template",value:function e(){return"".concat(this.stasheeData||"")}},{key:"serialize",value:function e(r){var i=k(R(t.prototype),"serialize",this).call(this,r);return i.maskData&&delete i.maskData.mappedContent,i.stickedImageData&&(delete i.stickedImageData.naturalDimensions,i.stickedImageData.mediaAsset&&delete i.stickedImageData.src),this.filtersPreset&&!this.filtersIntensityEnabled&&(this.filtersPreset=!1),this.mediaAsset&&delete i.url,n.i(u.F)(i,["temporaryData","shadowImage","initialCropState","sticked","hasBackground","__previewMode"])}},{key:"export",value:function(){var e=A(regeneratorRuntime.mark(function e(){var r,i,o,a;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,k(R(t.prototype),"export",this).call(this);case 2:if(r=s.sent,i=this.getSvg(),"text"!==this.maskType){s.next=10;break}return o=n.i(u.z)(this),s.next=8,n.i(l.z)(o);case 8:a=s.sent,i.querySelector("defs").innerHTML=a+i.querySelector("defs").innerHTML;case 10:return r.filters.tint=0,r.src="data:image/svg+xml;utf8,".concat(encodeURIComponent(i.outerHTML)),r.url=r.src,delete r.flipped,this.hasStickedImage()||(delete r.src,r.opacity=0),r.type="imageElement",s.abrupt("return",r);case 17:case"end":return s.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}()}]),t}(r.a))||_)||_);L.flippable=!0,t.a=L},function(e,t,n){"use strict";t.a={LEFT:0,MIDDLE:1,RIGHT:2}},function(e,t,n){"use strict";var r=n(3),i=n(4),o=n(6),a=n(0),s=n(5),u="1px",l="dotted";function c(e){var t=[e.x+window.pageXOffset,e.y+window.pageYOffset],n=t[0],r=t[1],i=document.createElement("div");i.data={initX:n,initY:r},i.style.borderWidth=u,i.style.borderStyle=l,i.style.position="absolute";var o=["".concat(n,"px"),"".concat(r,"px")];return i.style.left=o[0],i.style.top=o[1],document.body.appendChild(i),i}function f(e,t){var n=[e.data.initX,e.data.initY],r=n[0],i=n[1],o=[parseFloat(e.style.left.replace("px","")),parseFloat(e.style.top.replace("px",""))],a=o[0],s=o[1],u=[t.x+window.pageXOffset,t.y+window.pageYOffset],l=u[0],c=u[1];if(l<=r){var f=[l,r];a=f[0],l=f[1]}if(c<=i){var h=[c,i];s=h[0],c=h[1]}var p=["".concat(a,"px"),"".concat(s,"px")];e.style.left=p[0],e.style.top=p[1];var d=["".concat(l-a,"px"),"".concat(c-s,"px")];e.style.width=d[0],e.style.height=d[1]}function h(e){var t;s.a.log("MultiSelectable: dispatch multiselect event");var u=function e(o){f(t,o),i.a.dispatch(r.a.MULTISELECT_AREA_CHANGED,n.i(a.c)(t))},l=function e(){window.SELECTION_LOCK=!1,i.a.dispatch(r.a.MULTISELECT_STOPED,{}),o.a.detachEvent("mousemove",u,window),o.a.detachEvent("mouseup",e,window),o.a.removeElement(t)};function h(e){window.SELECTION_LOCK||(i.a.dispatch(r.a.MULTISELECT_STARTED,{}),window.SELECTION_LOCK=!0,t=c(e),o.a.attachEvent(window,"mousemove",u,!1,!0,!0),o.a.attachEvent(window,"mouseup",l,!1,!0,!0))}var p=!1,d=setTimeout(function(){p=!0,s.a.log("multiselectable - lock timeout"),h(e)},200),g=function e(){p||clearTimeout(d)};o.a.attachEvent(window,"mouseup",g,!0)}function p(e){o.a.attachEvent(e,"mousedown",h,!1,!0,!0)}t.a=p},function(e,t,n){"use strict";var r=n(39),i=n(17);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=h(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var v=function(e){function t(e){var n;return a(this,t),(n=l(this,p(t).call(this,e))).type="persistGroupElement",n.templateType=e.templateType||"",n.children.forEach(function(e){e.partOfPersistGroup=!0,e.position.left-=n.position.left,e.position.top-=n.position.top}),n.setRelativeChildrenPositions(),n}return d(t,e),u(t,[{key:"setEl",value:function e(n){var r=this;f(p(t.prototype),"setEl",this).call(this,n),this.children.forEach(function(e){r.el.insertBefore(e.el,r.underlyingEl),e.setPosition({left:e.position.left,top:e.position.top})}),this.bindEvents()}},{key:"setLock",value:function e(n){f(p(t.prototype),"setLock",this).call(this,n),this.children.forEach(function(e){e.setLock(n)})}},{key:"scale",value:function e(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(p(t.prototype),"scale",this).call(this,n),this.children.forEach(function(e){"textElement"===e.type&&r&&e.setFontSize({size:e.fontSize*n}),e.scale(n,r)})}},{key:"scalePosition",value:function e(n){f(p(t.prototype),"scalePosition",this).call(this,n),this.scaleChildrenPositions(n)}},{key:"scaleChildrenPositions",value:function e(t){var n=this;this.children.forEach(function(e){var r=n.width,i=n.height;e.scalePosition(t,{groupDims:{width:r,height:i}})})}},{key:"serialize",value:function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=f(p(t.prototype),"serialize",this).call(this,n);return r.children=this.children.map(function(e){var t="persistGroupElement"===e.type?Object.assign({},n,{parentGroupOffset:{left:r.position.left+((n.parentGroupOffset||{}).left||0),top:r.position.top+((n.parentGroupOffset||{}).top||0)}}):n,i=e.serialize(t);return i.position.left+=r.position.left,i.position.top+=r.position.top,n.parentGroupOffset&&(i.position.left+=n.parentGroupOffset.left,i.position.top+=n.parentGroupOffset.top),i}),r.templateType=this.templateType,r}},{key:"setRelativeChildrenPositions",value:function e(){var t=this;this.children.forEach(function(e){e.relativeChildPosition={left:e.position.left/t.width,top:e.position.top/t.height}})}},{key:"ungroup",value:function e(){var r=this;f(p(t.prototype),"ungroup",this).call(this);var o=n.i(i.e)(this);this.children.forEach(function(e,t){var n=o[t];delete e.partOfPersistGroup,e.setPosition(n,!1),e.setAngle(e.angle+r.angle)}),f(p(t.prototype),"destroy",this).call(this)}},{key:"destroy",value:function e(){this.children.forEach(function(e){e.destroy()}),f(p(t.prototype),"destroy",this).call(this)}}]),t}(r.a);t.a=v},function(e,t,n){"use strict";var r=n(7),i=n(12),o=n.n(i),a=n(1),s=n(0);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=g(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var E=function(e){function t(e){var r;return l(this,t),(r=h(this,v(t).call(this,e))).mediaAsset=e.mediaAsset||!1,r.src=r.mediaAsset?n.i(s.u)(r.id,{viewMode:a.a.VIEW_MODES.screen,session:!0}):e.src,r.type="shadowImageElement",r.originalAngle=e.originalAngle,r.useOriginalAngleForOverlay=!0,r.hasRotationControls=!1,r}return m(t,e),f(t,[{key:"getControlsFilter",value:function e(){return["ne","nw","se","sw"]}},{key:"resize",value:function e(t){var n=this.onResize(t);if(!1!==n){var r=n.imagePosition.width/n.oldImagePosition.width,i=this.width*r,a=this.height*r,s=0,u=0;["ne","nw"].includes(t.handle)&&(u=a-this.height),["nw","sw"].includes(t.handle)&&(s=i-this.width),this.setWidth(i),this.setHeight(a),this.setPosition({left:this.position.left-s,top:this.position.top-u}),o.a.setAngle(this,this.originalAngle)}}},{key:"setAngleStateful",value:function e(n){var r=this.angle;d(v(t.prototype),"setAngleStateful",this).call(this,n),this.onSetAngle(n,r-this.angle)}},{key:"drag",value:function e(n,r){var i=this.onDrag(n);this.overlay&&(this.overlay.style.transformOrigin="".concat(this.width/2,"px ").concat(this.height/2,"px")),d(v(t.prototype),"drag",this).call(this,i,r)}},{key:"shift",value:function e(n){d(v(t.prototype),"drag",this).call(this,n)}},{key:"template",value:function e(){return'<div style="position: relative">\n\t\t\t<img image="true" src="'.concat(this.src,'" style="filter: brightness(30%);width: 100%; height: 100%; user-select:none"/>\n\t\t</div>')}}]),t}(r.a);E.flippable=!0,t.a=E},function(e,t,n){"use strict";var r=n(32),i=n(10),o=n(0),a=n(2),s=n(14),u=n.n(s),l=n(23),c=n(24),f=n(42),h=n(1),p=n(50);function d(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)})}}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){e.forEach(function(e){return e.play()})}function E(e){e.forEach(function(e){return e.stop()})}var b={clear:function e(){n.i(a.c)(),u.a.clearAll()},render:function e(t,s){var h=t.pageWidth,d=t.pageHeight,g=t.pageClassName,m=t.pageMargin,b=t.renderMode,w=t.thumbnailMode,_=t.watermarkPath,P=t.pagePrefixClass,S=t.shouldShowLogoLabel,A=t.logoLabelClass;p.a.normalizeTextElements(t.pages);var O=c.a.some(t.pages,function(e){return e.isAnimatedElement});if(w&&Object.keys(l.a).every(function(e){return l.a[e]!==w}))throw new Error("No such render mode");var C=v({},f.a,t.features||{});n.i(a.b)("features",C),n.i(a.b)("renderMode",w||l.a.FULL),n.i(a.b)("defaultMaskImagePath",t.defaultMaskImagePath),n.i(a.b)("mediaSource",t.mediaSource||""),n.i(a.b)("scaleRatio",100),n.i(a.b)("authToken",t.token),n.i(a.b)("shallow",!0),n.i(a.b)("pageWidth",h),n.i(a.b)("pageHeight",d),n.i(a.b)("pageClassName",g),n.i(a.b)("actualPageMargin",m),n.i(a.b)("pagePrefixClass",P),n.i(a.b)("clientRender",t.client),(b||s)&&(n.i(a.b)("watermarkPath",_),t.pages.forEach(function(e){e.elements.forEach(function(e){e.renderMode=!0,e.isSharedProject=s})}));var x=t.pages.map(function(e){return n.i(r.a)(e,{shallow:!0,shouldCompletelyLoad:!0})});return new Promise(function(e,r){return Promise.all(x).then(function(r){var l=[];return r.forEach(function(e){t.el.appendChild(e.el),e.elements.forEach(function(e){l.push(e.mounted())});var r=e.el.querySelectorAll("img");n.i(i.a)(r,function(e){l.push(n.i(o.b)(e.getAttribute("src")))})}),Promise.all(l).then(function(){var i="undefined"!=typeof rasterizeHTML&&window&&!window.jsdom&&window.isPDF,l=[],c=[];return n.i(a.b)("scaleRatio",t.ratio||100),r.forEach(function(e){if(e.ungroupAll(),e.afterRender(),e.scale(t.ratio/100),e.elements.forEach(function e(t){["videoElement","gifElement"].includes(t.type)&&l.push(t),(t.children||[]).forEach(e)}),i&&(c=c.concat(e.elements.map(o._2))),S&&O){var n=document.createElement("div");n.classList.add(A),e.el.appendChild(n)}}),Promise.all(c).then(function(){window&&(window.pages=r),t.client||y(l),s&&u.a.clearAll(),e({play:function e(){y(l)},stop:function e(){E(l)},pages:r})})})}).catch(r)})},clientRender:function(){var e=g(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return t.client=!0,l.next=3,b.render(t,n);case 3:return r=l.sent,i=r.pages,o=t.pageWidth,a=t.pageHeight,s={pageWidth:o,pageHeight:a,pages:[]},u=i.map(function(e){return new Promise(function(){var t=g(regeneratorRuntime.mark(function t(n){var r,i,o,a,u;return regeneratorRuntime.wrap(function t(l){for(;;)switch(l.prev=l.next){case 0:return r=e.elements.map(function(e){return"function"==typeof e.exportV2?e.exportV2():e.export()}),l.next=3,Promise.all(r);case 3:i=l.sent,o=e.uuid,a=e.templateLikeElements,u=e.templateId,s.pages.push({elements:i,templateLikeElements:a,uuid:o,templateId:u}),n();case 7:case"end":return l.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}),l.next=10,Promise.all(u);case 10:return l.abrupt("return",s);case 11:case"end":return l.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),parallelClientRender:function(){var e=g(regeneratorRuntime.mark(function e(t,n,r,i,o,a){var s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:if(n.v2){l.next=6;break}return l.next=3,b.clientRender(n,r);case 3:s=l.sent,l.next=7;break;case 6:s=n;case 7:return l.next=9,b.createShallowPool(t,s,i,o,a);case 9:return u=l.sent,l.abrupt("return",u);case 11:case"end":return l.stop()}},e,this)}));function t(t,n,r,i,o,a){return e.apply(this,arguments)}return t}(),createShallowPool:function(){var e=g(regeneratorRuntime.mark(function e(t,n,r,i,o){var a,s;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return i=i||h.a.CONCURRENCY,u.next=3,b.initWorkers(t,n,r,i,o);case 3:return a=u.sent,s={workers:a,renderFrame:function(){var e=g(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:if(n=a.filter(function(e){return e.isFree})[0]){s.next=3;break}throw new Error("Concurrency of queue greater than current shallowPoll concurrency (".concat(i,")"));case 3:return n.isFree=!1,s.prev=4,o={},Object.keys(t).forEach(function(e){var r=n.index+1;o[e+"_"+r]=t[e]}),s.next=9,n.shallow.renderFrame(o);case 9:r=s.sent,s.next=16;break;case 12:throw s.prev=12,s.t0=s.catch(4),n.isFree=!0,s.t0;case 16:return n.isFree=!0,s.abrupt("return",r);case 18:case"end":return s.stop()}},e,this,[[4,12]])}));function t(t){return e.apply(this,arguments)}return t}()},u.abrupt("return",s);case 6:case"end":return u.stop()}},e,this)}));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}(),initWorkers:function(){var e=g(regeneratorRuntime.mark(function e(t,n,r,i,o){var a,s,u,l;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:if(a=document.getElementById(r)){c.next=3;break}throw new Error('Pool container element with id: "'.concat(r,'" not found'));case 3:return s=new Array(i).fill(""),u=s.map(function(e,i){i+=1;var s=JSON.parse(JSON.stringify(n));s.pages.forEach(function(e){e.elements.forEach(function(e){e.uuid="".concat(e.uuid,"_").concat(i)})});var u=document.createElement("div");return a.appendChild(u),u.setAttribute("id","".concat(r,"_").concat(i)),new t(s,u,o)}),l=u.map(function(e){return e.renderV1()}),c.next=8,Promise.all(l);case 8:return c.abrupt("return",u.map(function(e,t){return{index:t,shallow:e,isFree:!0}}));case 9:case"end":return c.stop()}},e,this)}));function t(t,n,r,i,o){return e.apply(this,arguments)}return t}()};t.a=b},function(e,t,n){"use strict";var r=n(7),i=n(0),o=n(1),a=n(22),s=n(2),u=n(47),l=n(33),c=n(26),f=n(20),h,p,d;function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function v(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){v(o,r,i,a,s,"next",e)}function s(e){v(o,r,i,a,s,"throw",e)}a(void 0)})}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=S(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return D});var x=/\#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/gi,T=/fill: {0,1}\#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/gi,I=/\..*{.*}/gi;function k(e,t){var r=e.getElementsByTagName("style");r.length&&function(){for(var o=[],a=0;a<r.length;a++){var s,u;(r[a].innerHTML.match(I)||[]).forEach(function(n){if(T.test(n)){var r=n.split("{")[0].trim();r=r.substr(0,r.length);var i=e.querySelectorAll(r),a=!0,s=!1,u=void 0;try{for(var l=i[Symbol.iterator](),c;!(a=(c=l.next()).done);a=!0){var f;c.value.setAttribute("data-color-id",t.id)}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}-1===o.indexOf(r)&&o.push(r)}})}o.forEach(function(t){var r=new RegExp(t.substr(1,t.length),"g");e.innerHTML=e.innerHTML.replace(r,n.i(i.a)(16).replace(/^\d*/,""))})}();var o=e.querySelectorAll('[fill="'.concat(t.color,'"]')),a=!0,s=!1,u=void 0;try{for(var l=o[Symbol.iterator](),c;!(a=(c=l.next()).done);a=!0){var f;c.value.setAttribute("data-color-id",t.id)}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return{styleTagsLength:r.length,inlinesLength:o.length}}var D=(h=n.i(f.a)("frameable"))(d=(p=n.i(f.a)("maskType","svg"))(d=function(e){function t(e){var n;return y(this,t),(n=w(this,A(t).call(this,e))).stasheeData=e.stasheeData,n.style.backgroundImage=null,n.colors=[],n.newColors=e.colors||[],n.special=e.special||!1,n.vectorType=e.vectorType,n.url=e.url,n}return O(t,e),b(t,[{key:"getControlsFilter",value:function e(){var t=["nw","ne","sw","se"];return this.special&&(t=["nw","ne","sw","se","n","s","w","e"]),t}},{key:"getClippingData",value:function e(){var t=u.a.extractClippingContentsFromSvg(this.stasheeData);return this.special&&(t.special=!0),t.url=this.url,t}},{key:"indexColors",value:function e(){var t=this,n=this.stasheeData.match(x),r=(n=n||["#000"]).reduce(function(e,t){return e[t]=1,e},{}),i=Object.keys(r);if(i.length>o.a.MAX_SVG_COLORS)return this.colors=[];this.colors=i.map(function(e,n){var r={id:n,color:e},i=k(t.el,r);return 0===i.inlinesLength&&0===i.styleTagsLength?null:r}).filter(function(e){return null!==e})}},{key:"refreshColors",value:function e(){var t=this;this.newColors.length<this.colors.length&&(this.newColors.length=this.colors.length),this.newColors.forEach(function(e,n){var r=t.colors[n];t.setColor({color:e.color,id:r.id})})}},{key:"setColor",value:function e(t){var r=t.color,o=t.id,a=this.colors.filter(function(e){return e.id===o})[0];if(!a)throw new Error("No such color with id ".concat(o));var s=n.i(i.p)(a);a.color=r;var u=this.el.querySelectorAll('[data-color-id="'.concat(o,'"]')),l=!0,c=!1,f=void 0;try{for(var h=u[Symbol.iterator](),p;!(l=(p=h.next()).done);l=!0){var d;p.value.setAttribute("style","fill:".concat(r))}}catch(e){c=!0,f=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw f}}return s}},{key:"getSvg",value:function e(){return this.el.querySelector("svg")}},{key:"reload",value:function(){var e=m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return this.hasPermission=!0,c.a.modifyPermission(this.id,!0),t.abrupt("return",this.mounted());case 3:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"mounting",value:function(){var e=m(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if(this.stasheeData){o.next=6;break}return o.next=3,n.i(l.a)(this);case 3:if(this.el){o.next=5;break}return o.abrupt("return");case 5:this.updateContent();case 6:if(r=this.getSvg(),this.pathsCount=this.el.querySelectorAll("path").length,!(n.i(i.v)(this.url)&&!this.isSharedProject||this.isFreeItem&&!n.i(i.v)(this.url)||this.templateAsset||this.hasPermission)){o.next=11;break}return n.i(a.c)(r),o.abrupt("return",P(A(t.prototype),"mounting",this).call(this));case 11:return o.abrupt("return",n.i(a.d)(r,n.i(s.a)("watermarkPath")));case 12:case"end":return o.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"setEl",value:function e(n){P(A(t.prototype),"setEl",this).call(this,n),this.stasheeData&&this.updateContent(),this.bindEvents()}},{key:"serialize",value:function e(n){var r=P(A(t.prototype),"serialize",this).call(this,n);return delete r.stasheeData,delete r.pathsCount,this.mediaAsset&&delete r.url,r}},{key:"escapeExport",value:function e(){var t=this.getSvg().outerHTML,n,r=function e(t){return"".concat(t,'=\\"\\<[\\w\\s]*\\>\\"')},i=/\bxlink:(?=href)/,o="&lt;",a="&gt;",s=["data-name"].filter(function(e){return t.includes(e)});return s.length&&(t=t.replace(new RegExp(s.map(r).join("|"),"g"),function(e){return e.replace("<",o).replace(">",a)})),i.test(t)&&(t=t.replace(i,"")),t}},{key:"export",value:function(){var e=m(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P(A(t.prototype),"export",this).call(this);case 2:return(n=r.sent).src="data:image/svg+xml;utf8,".concat(this.escapeExport()),n.url=n.src,delete n.flipped,r.abrupt("return",n);case 7:case"end":return r.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},{key:"updateContent",value:function e(){if(!this.stasheeData)throw new Error("You can't update content without prepared stasheeData");this.stasheeData=n.i(a.e)(this.stasheeData,this.uuid),this.underlyingEl.innerHTML=this.stasheeData,n.i(a.f)(this),this.indexColors(),this.refreshColors(),this.el.style.backgroundImage=null;var t=this.getSvg();t&&(t.removeAttribute("preserveAspectRatio"),t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.left=0,t.style.top=0,t&&this.special&&t.setAttribute("preserveAspectRatio","none"),this.setFlipInner(this.flipped))}}]),t}(r.a))||d)||d;D.flippable=!0,D.background=!0},function(e,t,n){"use strict";var r=n(7),i=n(6),o=n(3),a=n(13),s=n(2),u=n(4),l=n(1),c=n(20),f=n(0),h=n(111),p=n(10),d,g,v;function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)})}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function P(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=O(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return(T=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(){}var k=(d=n.i(c.a)("frameable"))(v=(g=n.i(c.a)("maskType","text"))(v=function(e){function t(e){var n;return b(this,t),(n=P(this,C(t).call(this,e))).style.backgroundImage=null,n.style.width=null,n.text=e.text,n.locked=e.locked||!1,n.fontSize=e.fontSize,n.font=e.font||"Times New Roman",n.lineHeight=e.lineHeight||1,n.wordBreak=e.wordBreak||"breakAll",n.colorMap=e.colorMap||n.getDefaultMap("000000"),n.boldMap=e.boldMap||n.getDefaultMap(!1),n.italicMap=e.italicMap||n.getDefaultMap(!1),n.textAlign=e.textAlign||"left",n.lineMap=e.lineMap||[],n.capitalize=e.capitalize||!1,n.underline=e.underline||!1,n.letterSpacing=e.letterSpacing||0,n.onSelectText=e.onSelectText||I,n.onSelectEmpty=e.onSelectEmpty||I,n.cursor="",n.context={initialState:{text:n.text}},n.selection={startIndex:0,endIndex:0},n.stickedImageData=e.stickedImageData,n.heightBias=e.heightBias,n.lineHeightShift=e.lineHeightShift,n.stickedImageFilters=e.stickedImageFilters,n.stickedFiltersPreset=e.stickedFiltersPreset,n}return x(t,e),_(t,[{key:"setFilledMaps",value:function e(t){var n=this,r=Object.assign({boldMap:!1,italicMap:!1,colorMap:"000001"},t);Object.keys(r).forEach(function(e){n[e]=n.getDefaultMap(r[e])})}},{key:"setDefaultMaps",value:function e(){this.setFilledMaps({colorMap:"000001",boldMap:!1,italicMap:!1})}},{key:"getDefaultMap",value:function e(t){return[{startIndex:0,endIndex:n.i(f.w)(this.text),value:t}]}},{key:"getCalculatedHeight",value:function e(t){var n=this,r=this.fontSize;return t.reduce(function(e,t,i){var o=0===i?0:1;return e+r-r*(1-n.lineHeight)*o},0)}},{key:"getClippingData",value:function e(){var t=this.serialize(),r=t.boldMap,i=t.colorMap,o=t.angle,a=t.italicMap,s=t.height,u=t.text,l=t.font,c=t.fontSize,f=t.letterSpacing,h=t.lineHeight,d=t.textAlign,g=t.capitalize,v=t.underline,m=t.opacity;this.enableContentEditable();var y=this.getLineMap(),E;return{width:this.getEditableBlockWidth(),height:this.lineHeight<1?this.getCalculatedHeight(y):s,text:n.i(p.g)(u),font:l,fontSize:c,letterSpacing:f,lineHeight:h,textAlign:d,capitalize:g,underline:v,colorMap:i,angle:o,opacity:m,boldMap:r,italicMap:a,lineMap:y}}},{key:"getSpanifiedHTML",value:function e(t){return n.i(p.h)(t,{shouldSetInlineStyle:this.shallow})}},{key:"insertHTML",value:function e(t){t=t||n.i(p.i)([this.colorMap,this.boldMap,this.italicMap],this.text).join(""),this.editableBlock.innerHTML=this.getSpanifiedHTML(t),!window.jsdom&&this.startSpellCheckingDelay()}},{key:"startSpellCheckingDelay",value:function e(){var t=this;this.editableBlock.setAttribute("spellcheck","false"),clearTimeout(this._spellCheckDelay),this._spellCheckDelay=setTimeout(function(){t.editableBlock.removeAttribute("spellcheck")},700)}},{key:"setWordBreak",value:function e(t){var n=l.a.TEXT_ELEMENT.WORD_BREAK_MODES,r=Object.keys(n);if(!r.includes(t))throw new Error('"'.concat(t,'" - is impossible value to setWordBreak, use one of next values: ').concat(r.join(", ")));t===n.breakWord?(this.editableBlock.style.wordBreak="normal",this.editableBlock.style.wordWrap="break-word"):(this.editableBlock.style.wordBreak="break-all",this.editableBlock.style.wordWrap="normal"),this.wordBreak!==t&&this.checkDimensions(!1,!0),this.wordBreak=t}},{key:"change",value:function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.locked&&!l.a.ACTIONS_APPLIED_FOR_LOCKED_TEXT.includes(n))throw new Error("Locked text cannot be changed");var o=A(C(t.prototype),"change",this).call(this,n,r,i);return i&&!["setFontColor","setLock"].includes(n)&&this.onCalculateLinemap(),o}},{key:"replaceRange",value:function e(t,r,i){var o,a;if(r)o=Object.assign(r);else if(!this.selection||this.selection.empty||this.selection.isCollapsed)o=[0,n.i(f.w)(this.text)+1];else{var s=n.i(p.j)(this.selection,this.text);o=[s.startIndex,s.endIndex+1]}var u=n.i(p.k)(this[t],o[0]);return this[t]=n.i(p.l)(this[t],o,i),{value:u,range:o,defaultStateFields:["range"]}}},{key:"getRealEditableBlockWidth",value:function e(){var t=this.angle;this.setAngle(0),this.editableBlock.style.display="inline-block";var r=n.i(f.c)(this.editableBlock).width;return this.editableBlock.style.display="block",this.setAngle(t),r}},{key:"getEditableBlockWidth",value:function e(){var t=n.i(s.a)("scaleRatio")/100,r=this.getRealEditableBlockWidth();return r>this.width&&(r=this.width),r/t}},{key:"changeMap",value:function e(t,n){this.handleSelection();var r=this.selection,i=this.replaceRange(t,n.range,n.value);return this.regenerate(),this.checkDimensions(),r&&!1!==n.reselect&&(this.selectAt(r.startIndex,r.endIndex),this.setSelection(r,!1)),this.emitSelectTextCallback(this.getSelectionProperties(r)),i}},{key:"getFontSelectedProperties",value:function e(){return this.getSelectionProperties(this.selection)}},{key:"setFontColor",value:function e(t){return this.changeMap("colorMap",t)}},{key:"setBold",value:function e(t){return this.changeMap("boldMap",t)}},{key:"setItalic",value:function e(t){return this.changeMap("italicMap",t)}},{key:"setPositionChange",value:function e(){throw new Error("You cant change position of textElement with arrow keys")}},{key:"regenerate",value:function e(){var t=this;["bold","italic"].forEach(function(e){0===t[e+"Map"][0].startIndex&&0===t[e+"Map"][0].endIndex&&1===t[e+"Map"][0].length&&(t[e+"Map"]=[{startIndex:0,endIndex:t.text.length,type:e,value:!1}])}),this.insertHTML()}},{key:"getControlsFilter",value:function e(){return["w","e","nw","ne","se","sw"]}},{key:"onPaste",value:function e(t){t.preventDefault();var n=t.clipboardData.getData("Text");this.pasteTextViaSelection(n)}},{key:"setPositionChange",value:function e(){throw new Error("You can't set position of textElement with arrow keys")}},{key:"onDragStart",value:function e(){this.trackTextChange()}},{key:"stopPropagation",value:function e(t){this.selected&&t.stopPropagation()}},{key:"bindEvents",value:function e(){var n=this;A(C(t.prototype),"bindEvents",this).call(this),i.a.attachEvent(this.editableBlock,"focus",this.onFocus.bind(this)),i.a.attachEvent(this.editableBlock,"click",this.stopPropagation.bind(this),!1,!0,!0),i.a.attachEvent(this.el,"keydown",this.onKeyDown.bind(this),!1,!0,!0),i.a.attachEvent(this.el,"selectstart",this.onSelectStart.bind(this)),i.a.attachEvent(this.editableBlock,"paste",this.onPaste.bind(this)),i.a.attachEvent(this.editableBlock,"input",this.onTextChange.bind(this)),i.a.attachEvent(this.editableBlock,"mousedown",function(e){return n.selected?e.stopPropagation():e.preventDefault(),n.__disableUnlockSelection=!0,i.a.attachEvent(null,"mouseup",function(){n.__disableUnlockSelection&&(n.__disableUnlockSelection=!1,window.SELECTION_LOCK=!1)},!0),!0},!1,!0,!0),i.a.attachEvent(this.el,"mouseup",function(e){var t;return n.selected&&!n._resizing&&!n.__dragging&&!n.__selectionInProgress&&e.stopPropagation(),!0},!1,!0,!0)}},{key:"resizeAsPartOfGroup",value:function e(n){A(C(t.prototype),"resizeAsPartOfGroup",this).call(this,n),this.setTextViewSize({size:this.fontSize*n.ratio})}},{key:"resize",value:function e(n){var r=A(C(t.prototype),"resize",this).call(this,n);return-1!==["nw","se","ne","sw"].indexOf(n.handle)&&this.setTextViewSize({size:this.fontSize*n.ratio}),this.resized=!0,this.checkDimensions(),this.checkHeight(),r}},{key:"emitSelectTextCallback",value:function e(t){this.isSelectionUnderCurrentElement()&&!this._lockOnselectCall&&this.onSelectText(t)}},{key:"onBlur",value:function e(){0!==this.text.trim().length?this.drag_lock=!1:this._removeMark=!0}},{key:"onFocus",value:function e(){this.selected&&(this.setSelectionFlow(),this.drag_lock=!0)}},{key:"handleSelection",value:function e(){if(window.getSelection&&!this._lockSelectionHandle){var t=window.getSelection();if(t.focusNode){var r=t.getRangeAt(0),i=n.i(p.m)(window.getSelection(),this.editableBlock),o={startIndex:i,endIndex:i+r.toString().length-1,node:r.anchorNode,isCollapsed:t.isCollapsed,empty:t.anchorOffset===t.focusOffset};this.setSelection(o)}else window.SELECTION_LOCK=!1}else window.SELECTION_LOCK=!1}},{key:"onSelectStart",value:function e(){window.SELECTION_LOCK=!0,this.__selectionInProgress=!0}},{key:"onSelectionChange",value:function e(t){var n=this;clearTimeout(this.__selectionTimer),this.__selectionTimer=setTimeout(function(){n.onSelectionEnd(t)},l.a.TEXT_ELEMENT.SELECTION_TIMEOUT)}},{key:"onSelectionEnd",value:function e(t){this.__disableUnlockSelection||(window.SELECTION_LOCK=!1),this.__selectionInProgress=!1,this.handleSelection(t)}},{key:"isSelectionUnderCurrentElement",value:function e(){if(window.getSelection){var t=window.getSelection().getRangeAt(0);return i.a.childOfElement(this.editableBlock,t.startContainer)&&i.a.childOfElement(this.editableBlock,t.endContainer)}}},{key:"setSelectionFlow",value:function e(){this.handleSelectionChange||(this.handleSelectionChange=this.onSelectionChange.bind(this),i.a.attachEvent(document,"selectionchange",this.handleSelectionChange))}},{key:"clearSelectionFlow",value:function e(){clearTimeout(this.__selectionTimer),this.handleSelectionChange&&i.a.detachEvent("selectionchange",this.handleSelectionChange,document),delete this.__selectionTimer,delete this.handleSelectionChange}},{key:"onResizeStart",value:function e(n,r){A(C(t.prototype),"onResizeStart",this).call(this,n,r)}},{key:"onResizeEnd",value:function e(n,r){A(C(t.prototype),"onResizeEnd",this).call(this,n,r),this.checkDimensions(),"ro"!==n&&this.onCalculateLinemap()}},{key:"onCalculateLinemap",value:function e(){this.selected||this.enableContentEditable(),this.lineMap=this.getLineMap(),this.selected||this.cancelContentEditable()}},{key:"setSelection",value:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error("Wrong selection");this.selection=t,n&&this.emitSelectTextCallback(this.getSelectionProperties(t))}},{key:"setEditableWidth",value:function e(t){var r=t||n.i(s.a)("scaleRatio")/100;this.editableBlock.style.width="".concat(this.width/r,"px"),this.editableBlock.style.transformOrigin="0px 0px",this.setTransform("scale","".concat(r,", ").concat(r),this.editableBlock)}},{key:"setEditableHeight",value:function e(){var t=n.i(s.a)(NaN);this.editableBlock.style.height="".concat(this.height/t,"px")}},{key:"scale",value:function e(n){A(C(t.prototype),"scale",this).call(this,n),this.setEditableWidth()}},{key:"getSelectionProperties",value:function e(t){var r=n.i(p.j)(t,this.text),i=this.selection,o=i.startIndex,a=i.endIndex;return{isItalic:n.i(p.n)(this.italicMap,r,!0),isBold:n.i(p.n)(this.boldMap,r,!0),colors:n.i(p.o)(this.colorMap,r),selection:{startIndex:o,endIndex:a}}}},{key:"insertSymbolToPosition",value:function e(t,n){this.insertSymbolToText(t,n),this.recalculateMapsOnInsert(t,n),this.insertHTML()}},{key:"insertSymbolAfter",value:function e(t,r){var i=n.i(p.g)(this.text),o=n.i(p.p)(i,t,r);this.text=n.i(p.q)(o),this.recalculateMapsOnInsert(t,r),this.insertHTML()}},{key:"insertSymbolToText",value:function e(t,r){var i=n.i(p.g)(this.text),o=n.i(p.r)(i,t,r);this.text=n.i(p.q)(o)}},{key:"recalculateMapsOnInsert",value:function e(t,r){var i=this,o=n.i(p.s)(this.text,t);["boldMap","italicMap","colorMap"].forEach(function(e){i[e].forEach(function(n,a){n.startIndex>t+o&&n.startIndex++,a===i[e].length-1&&n.endIndex<=t+o&&"\n"===r?n.endIndex+=2:n.endIndex>=t+o&&n.endIndex++})})}},{key:"selectAt",value:function e(t,r){var i=this;this.editableBlock.focus(),n.i(p.t)(t,this.editableBlock,"",function(e,o){return!r&&0!==r||-1===r||r<t?n.i(p.u)(o,e):r===t||r<t?n.i(p.u)(o,e,o+1,e):void n.i(p.t)(r,i.editableBlock,"",function(t,r){n.i(p.u)(o-1,e,r+1,t)})})}},{key:"getStateData",value:function e(){return{boldMap:this.boldMap,italicMap:this.italicMap,colorMap:this.colorMap,text:this.text,selection:this.selection}}},{key:"onKeyDown",value:function e(t){var n=(t.metaKey||t.ctrlKey)&&t.keyCode===h.a.Z,r=(t.metaKey||t.ctrlKey)&&t.keyCode===h.a.Y;if(!n&&!r)if(!h.b.includes(t.keyCode)&&t.stopPropagation&&t.stopPropagation(),t.keyCode!==h.a.ESC){if(t.keyCode===h.a.ENTER){t.preventDefault(),this.handleSelection();var i=this.selection.startIndex;this.insertSymbolToPosition(i,"\n"),this.selectAt(i+1,i),this.onTextChange()}}else u.a.dispatch(o.a.ELEMENT_SELECTED,{designElement:null})}},{key:"getClonedTextNodeContent",value:function e(){var t=this.el.cloneNode(!0),r;if(!t.querySelector("div[editable]"))return"";t.querySelector("div[editable]").style.textTransform="none";var i=t.innerText||t.textContent;return i=i.normalize(l.a.TEXT_NORMALIZATION_FORM),n.i(p.q)(i)}},{key:"onTextChange",value:function e(){window.SELECTION_LOCK=!1,this.handleSelection();var t=this.selection.startIndex;this.insertHTML(this.editableBlock.innerHTML),this.selectAt(t,t-1),this.text=this.getClonedTextNodeContent(),this.reconstructMaps(),this.checkDimensions(),this.checkHeight(),this.trackingTimeout()}},{key:"trackingTimeout",value:function e(){var t=this;clearTimeout(this._saveTimeout),this._saveTimeout=setTimeout(function(){t.trackTextChange()},1e3)}},{key:"trackTextChange",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.context.initialState.text===this.text||(""!==this.text.trim()&&this.onCalculateLinemap(),this.checkHeight(),n&&u.a.dispatch(o.a.SAVE_STATE,{type:o.a.TEXT_CHANGE,meta:{uuid:this.uuid}}),this.context.initialState.text=this.text)}},{key:"changeText",value:function e(t){this.boldMap=t.boldMap,this.italicMap=t.italicMap,this.colorMap=t.colorMap,this.text=t.text,this.regenerate(),this.setSelection({startIndex:t.startIndex,endIndex:t.endIndex}),this.selectAt(this.selection.startIndex),this.checkDimensions()}},{key:"getSnaps",value:function e(){var n;return A(C(t.prototype),"getSnaps",this).call(this).filter(function(e){return"center"!==e.type})}},{key:"normalizeEmptyEditableBlockExpectations",value:function e(){var t=this,n=this.editableBlock.childNodes,r=this.editableBlock.innerText||this.editableBlock.textContent,i=r.length;"\n"!==r&&i&&n[0]&&"FONT"!==n[0].tagName&&(["boldMap","italicMap","colorMap"].forEach(function(e){t[e][0].endIndex=i}),this.insertHTML(),this.selectAt(i,i-1))}},{key:"reconstructMaps",value:function e(){var t=this;this.normalizeEmptyEditableBlockExpectations();var r=n.i(p.v)(this.editableBlock);["boldMap","italicMap","colorMap"].forEach(function(e){r[e][0].value||!1===r[e][0].value||(r[e][0].value=t[e][0].value)}),this.boldMap=r.boldMap,this.italicMap=r.italicMap,this.colorMap=r.colorMap}},{key:"setColor",value:function e(t){var r=t.id,i=this.colorMap[r];if(!i)throw new Error("No such chunk with index: ".concat(r));if(!t.color)throw new Error('Missed option "color" in textElement.setColor');var o=t.color.replace("#",""),a=n.i(f.p)(this.colorMap);return i.value=o,this.regenerate(),a}},{key:"checkHeight",value:function e(){var t=n.i(s.a)("scaleRatio")/100;this.setHeight(this.editableBlock.clientHeight*t)}},{key:"checkDimensions",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.shallow&&this.lineMap.length;if(this.overlay||t||r){var o=this.angle;this.setAngle(0);var s=this.getBounds(this.underlyingEl);this.editableBlock.style.display="inline";var u=this.getBounds(this.editableBlock);if(this.editableBlock.style.display="block",this.setHeight(s.height),!t||this.resized||this.selectedOnce||i||this.setWidth(u.width+10),this.overlay){var l=this.getOverlayPosition();this.overlay.style.left="".concat(l.left,"px"),this.overlay.style.top="".concat(l.top,"px"),n.i(a.a)(this)}this.setAngle(o),this.checkHeight(),this.setEditableWidth()}}},{key:"setEl",value:function e(r){A(C(t.prototype),"setEl",this).call(this,r),this.el.setAttribute("non-user-select",!0),this.editableBlock=r.querySelector("div[editable]"),this.el.style.height="auto",delete this.style.width,this.el.style.overflow="auto !important",this.editableBlock.setAttribute("tab-index","0"),this.el.style.backgroundImage=null,this.el.style.display="inline-block",this.editableBlock.setAttribute("data-gramm","false"),this.editableBlock.style.whiteSpace="pre-wrap",this.setWordBreak(this.wordBreak),this.editableBlock.style.outline="none",this.setFont({},!1),this.regenerate(),this.setTextAlign({align:this.textAlign}),this.setFontSize({size:this.fontSize}),this.setCapitalize({capitalize:this.capitalize}),this.setUnderline({underline:this.underline}),this.setLetterSpacing({spacing:this.letterSpacing}),this.setLineHeight({lineHeight:this.lineHeight}),this.checkDimensions(),this.setWidth(this.width),this.setHeight(this.height),this.bindEvents();var i=n.i(p.q)(n.i(p.g)(this.text));i.length===n.i(f.x)(this.boldMap).endIndex-1&&i.length===n.i(f.x)(this.boldMap).endIndex||(this.text=this.getClonedTextNodeContent(),this.reconstructMaps())}},{key:"mounting",value:function(){var e=E(regeneratorRuntime.mark(function e(){var t,r=arguments;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},i.next=3,n.i(f.y)(this.font);case 3:this.enableContentEditable(),this.partOfPersistGroup||t.hasTrustedDimensions||this.checkDimensions(!1,!0),this.checkHeight();case 6:case"end":return i.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"afterRender",value:function e(){var t=this.getEdgesCoords(),n=this.lineMap.length>1;this.shallow&&(n&&this.insertLineBreaks(),this.lineMap.length&&this.adjustShallowPosition(t))}},{key:"adjustShallowPosition",value:function e(t){var n=this.width,r=this.width/2;this.setWidth(n+r),this.checkHeight(),this.setEditableWidth(1);var i=this.getEdgesCoords(),o;switch(this.textAlign){case"left":o="nw";break;case"right":o="ne";break;case"center":o="n"}var a=this.position,s=a.left,u=a.top,l,c;s-=i[o].x-t[o].x,u-=i[o].y-t[o].y,this.setPosition({left:s,top:u})}},{key:"insertLineBreaks",value:function e(){var t=this,r=0;this.text=this.text.replace(/\n/g,"\r"),this.lineMap.forEach(function(e){var i=e.endIndex+r,o=n.i(p.g)(t.text),a;"\r"===o[i]||"\r"===o[i+1]||(t.insertSymbolAfter(i,"\n"),r++)}),this.text=this.text.replace(/\r/g,"\n"),this.regenerate()}},{key:"changeFontStyle",value:function e(t){if(t){this.handleSelection();var r=this.selection,i={boldMap:this.boldMap,italicMap:this.italicMap},o=n.i(p.w)(t,i);this.boldMap=o.boldMap,this.italicMap=o.italicMap,this.regenerate(),this.selectAt(r.startIndex,r.endIndex)}}},{key:"setFont",value:function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o={font:this.font,url:this.url};this.changeFontStyle(r.fontData);var a=this.font;r.font&&(this.font=r.font);var s='"'.concat(this.font,'"');return this.style.fontFamily=s,this.setStyle({fontFamily:s}),this.editableBlock&&a!==s&&!this.shallow&&n.i(p.x)(this.editableBlock).then(function(){t.checkDimensions(i,!0)}),o}},{key:"setTextViewSize",value:function e(t){t.notRedimension=!0;var n=t.size/this.fontSize,r=this.letterSpacing*n;this.setFontSize(t),this.setLetterSpacing({spacing:r})}},{key:"setFontSize",value:function e(t){var n={size:this.fontSize},r=t.size;return this.fontSize=r,this.style.fontSize="".concat(r,"px"),this.setStyle(this.style,this.el),!t.notRedimension&&this.checkDimensions(),n}},{key:"setLetterSpacing",value:function e(t){if(t.spacing<-100)throw new Error("Letter spacing cannot be less than -100");var n={spacing:this.letterSpacing},r=t.spacing,i="".concat(r,"px");return 0===r&&(i="normal"),this.letterSpacing=r,this.el.style.letterSpacing=i,this.checkDimensions(),n}},{key:"setLineHeight",value:function e(t){if(t.lineHeight<.1)throw new Error("Line height cannot be less than 0.1");var n={lineHeight:this.lineHeight},r=t.lineHeight;return this.lineHeight=r,this.el.style.lineHeight=r,this.checkDimensions(),n}},{key:"setTextAlign",value:function e(t){var n={align:this.textAlign},r=t.align;return this.textAlign=r,this.el.style.textAlign=r,n}},{key:"setWidth",value:function e(n){A(C(t.prototype),"setWidth",this).call(this,n),this.editableBlock&&this.setEditableWidth()}},{key:"setCapitalize",value:function e(t){var n=t.capitalize,r={capitalize:this.capitalize};this.capitalize=n;var i=this.capitalize?"uppercase":"none";return this.setStyle({textTransform:i},this.editableBlock),this.checkDimensions(),r}},{key:"setUnderline",value:function e(t){var n=t.underline,r={underline:this.underline};this.underline=n;var i=this.underline?"underline":"none";return this.setStyle({textDecoration:i},this.editableBlock),this.checkDimensions(),r}},{key:"cancelContentEditable",value:function e(){this.el.setAttribute("non-user-select",!0),i.a.cancelSelection(),this.selection={startIndex:0,endIndex:0,nothingSelected:!0}}},{key:"enableContentEditable",value:function e(){this.el.removeAttribute("non-user-select"),this.editableBlock.contentEditable=!0}},{key:"getWorkspacePageDiff",value:function e(t,n,r){var i=n.center.x-t.left-this.width/2,o=n.center.y-t.top-this.height/2;return r&&(i-=1,o-=1),{leftDiff:i,topDiff:o}}},{key:"getPageOffset",value:function e(){if(!this.pageEl)return n.i(f.p)(this.position);var t=n.i(s.a)("workspace"),r=t.getBoundingClientRect(),i=t.scrollTop,o=t.scrollLeft,a=n.i(f.c)(this.pageEl),u=a.left-r.left,l=a.top-r.top;return{left:this.position.left-u-o,top:this.position.top-l-i}}},{key:"adjustPosition",value:function e(t,n,r){0===this.height&&(this.height=this.fontSize);var i=this.getWorkspacePageDiff(t,n,r),o=i.leftDiff,a=i.topDiff;this.setPosition({left:o,top:a},!1)}},{key:"blur",value:function e(){return this.cursor="",A(C(t.prototype),"blur",this).call(this),this.drag_lock=!1,this.text=this.getClonedTextNodeContent(),this.returnToPage(),this.clearSelectionFlow(),this.onBlur()}},{key:"returnToPage",value:function e(){if(!this.el.parentNode.hasAttribute("data-page")&&(this.setInnerId(this.innerId),this.el.style.zIndex=0,this.cancelContentEditable(),this.pageEl)){var t=this.getBounds();this.sibling?this.pageEl.insertBefore(this.el,this.sibling):this.pageEl.appendChild(this.el);var r=n.i(f.c)(this.pageEl);this.adjustPosition(r,t),this.pageEl=null}}},{key:"select",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.i(s.a)("arbiterKeyMode"),o=i.CMD||i.SHIFT;if(!this.shouldBeAPartOfGroup&&!o||r.single){if(this.editableBlock.style.userSelect="auto",this.cursor="text",A(C(t.prototype),"select",this).call(this),this.locked?this.cancelContentEditable():this.enableContentEditable(),this.el.parentNode.hasAttribute("data-page")){this.pageEl=this.el.parentNode,this.pageIndex=Array.from(this.pageEl.children).indexOf(this.el),this.sibling=this.el.parentNode.children[this.pageIndex+1];var a=this.getBounds(this.editableBlock),u=n.i(s.a)("overlaysNode");u.appendChild(this.el),this.el.style.pointerEvents="auto",this.adjustPosition(n.i(f.c)(u),a)}this.setWordBreak("breakWord"),this.checkDimensions(),this.selectedOnce=!0,r.preventFocus||(this.editableBlock.focus(),this.onFocus()),this.el.style.zIndex=12}}},{key:"caretInElement",value:function e(){return this.editableBlock.contentEditable}},{key:"selectAllText",value:function e(){n.i(p.y)(this.editableBlock,this.handleSelection.bind(this))}},{key:"normalizeMaps",value:function e(){var t=this,r=this.colorMap,i=this.boldMap,o=this.italicMap,a=n.i(f.p)({colorMap:r,boldMap:i,italicMap:o});return["colorMap","boldMap","italicMap"].forEach(function(e){var r=t.text;a[e].forEach(function(t,i){var o=r.substr(t.startIndex,t.endIndex-t.startIndex+1),s=n.i(p.g)(o),u=o.length-s.length;if(u>0){t.endIndex-=u;var l=r.split("");l.splice(t.startIndex,o.length);var c=l.join("");if(r=n.i(p.p)(c,t.startIndex,s),a[e][i+1])for(var f=i+1;f<a[e].length;f++)a[e][f].startIndex-=u,a[e][f].endIndex-=u}})}),a}},{key:"export",value:function(){var e=E(regeneratorRuntime.mark(function e(){var r,i,o,a,s,u,l,c,h,d,g;return regeneratorRuntime.wrap(function e(v){for(;;)switch(v.prev=v.next){case 0:return this.lineMap&&this.lineMap.length||(this.enableContentEditable(),this.lineMap=this.getLineMap(),this.afterRender(),this.cancelContentEditable()),v.next=3,A(C(t.prototype),"export",this).call(this);case 3:return r=v.sent,i=this.width,o=this.height,r.originalDims||(r.originalDims={width:i,height:o}),a=n.i(f.z)(this),v.next=9,n.i(p.z)(a);case 9:return s=v.sent,u=this.position,l=u.left,c=u.top,this.originalPosition={left:l,top:c},r.originalDims={width:i,height:2*o},h=this.el.cloneNode(!0),["opacity","position","left","top","transform"].forEach(function(e){return h.style.removeProperty(e)}),h.style.transformOrigin="0 0",d=n.i(f.A)(this,h),g=encodeURIComponent('<svg version="1.1" viewBox="0 '.concat(.5*-o," ").concat(i," ").concat(2*o,'" xmlns="http://www.w3.org/2000/svg"><defs>').concat(s,'</defs><foreignObject x="0" y="0" width="').concat(i,'" height="').concat(2*o,'" style="overflow: visible">').concat(d,"</foreignObject></svg>")),r.src="data:image/svg+xml;utf8,".concat(g),r.position.top-=.5*o,v.abrupt("return",r);case 21:case"end":return v.stop()}},e,this)}));function r(){return e.apply(this,arguments)}return r}()},{key:"exportV2",value:function(){var e=E(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.export();case 2:return(t=n.sent).height=t.originalDims.height,t.type="imageElement",n.abrupt("return",t);case 6:case"end":return n.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"serialize",value:function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.el){clearTimeout(this._saveTimeout);var i=A(C(t.prototype),"serialize",this).call(this,r),o=this.getPageOffset(),a=n.i(s.a)("scaleRatio")/100;return i.position.left=o.left/a,i.position.top=o.top/a,r.stateSave||(delete i.stickedImageData,delete i.stickedImageFilters,delete i.heightBias,delete i.lineHeightShift,delete i.stickedFiltersPreset,delete i.scaleFactor,delete i.drag_lock,delete i.__selectionInProgress),delete i.selection,delete i.onSelectText,delete i.editableBlock,delete i.url,delete i.context,delete i.pageEl,delete i.pageIndex,delete i.resized,delete i.selectedOnce,delete i._saveTimeout,delete i.__selectionTimer,delete i._spellCheckDelay,delete i.handleSelectionChange,delete i.sibling,delete i._lockSelectionHandle,delete i._lockOnselectCall,delete i.__disableUnlockSelectionOnUp,i}}},{key:"template",value:function e(){return"<div editable></div>"}},{key:"getMapsSlice",value:function e(){var t=this.selection;t.empty&&(t={startIndex:0,endIndex:this.text.length-1});var r=n.i(p.j)(t,this.text);return{italicMap:n.i(p.A)(this.italicMap,r),boldMap:n.i(p.A)(this.boldMap,r),colorMap:n.i(p.A)(this.colorMap,r)}}},{key:"getLineMap",value:function e(){if(!0===window.jsdom)return[];function t(){return window.getSelection().getRangeAt(0).getBoundingClientRect().height}this._lockOnselectCall=!0,this.handleSelection();var r=this.angle,i=n.i(p.B)();this.setAngle(0),this.selectAt(0,0);var o=t(),a=n.i(p.g)(this.text),s=n.i(p.C)(this.editableBlock,a,o),u=s.reduce(function(e,t,n){var r=s[n-1];return r?(e.push({startIndex:r+1,endIndex:t}),e):(e.push({startIndex:0,endIndex:t}),e)},[]);return i?n.i(p.D)(i):n.i(p.E)(),this.setAngle(r),this._lockOnselectCall=!1,u}},{key:"cutTextFrom",value:function e(t,r){var i=this;this.text=n.i(f.B)(this.text,t,r-t),["boldMap","italicMap","colorMap"].forEach(function(e){i[e]=n.i(p.F)(i[e],[t,r])})}},{key:"insertTextTo",value:function e(t,r){var i=this;this.text=n.i(f.B)(this.text,r,0,t);var o=r+t.length;["boldMap","italicMap","colorMap"].forEach(function(e){var t=0===r?0:r-1,a=n.i(p.k)(i[e],t);i[e]=n.i(p.G)(i[e],[r,o],a)})}},{key:"pasteTextViaSelection",value:function e(t){this.handleSelection();var n=this.selection,r=n.startIndex,i=n.endIndex;t=t.normalize(l.a.TEXT_NORMALIZATION_FORM),this.pasteText(t,r,i+1),this.selectAt(r+t.length,r+t.length-1),this.onTextChange()}},{key:"pasteText",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=n.i(p.q)(t),a=n.i(p.H)(this.text,r),s=n.i(p.H)(this.text,i);this.cutTextFrom(a,s),this.insertTextTo(o,a),this.insertHTML()}},{key:"typeCharacter",value:function e(t){this.pasteTextViaSelection(t)}},{key:"destroy",value:function e(n){A(C(t.prototype),"destroy",this).call(this,n),this.clearSelectionFlow(),clearTimeout(this._saveTimeout)}}]),t}(r.a))||v)||v;t.a=k},function(e,t,n){"use strict";var r=n(0),i=n(5);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=function(){function e(){o(this,e),this.history=[],this.state=-1}return s(e,[{key:"zeroPoint",value:function e(t){this.history=[],this.history.push({zero:!0,type:"zeroPoint",arbiterState:t}),this.state=0}},{key:"track",value:function e(t,o){var a=Object.assign(t,{arbiterState:o}),s;this.state<n.i(r.w)(this.history)&&(i.a.log("Tracker: slicing"),this.state<0&&(this.state=0),this.history=this.history.slice(0,this.state+1),this.state=n.i(r.w)(this.history)),this.history.push(a),this.state++}},{key:"getLastItem",value:function e(){return n.i(r.x)(this.history)}},{key:"getState",value:function e(){return{active:this.state,length:this.history.length}}},{key:"perform",value:function e(){if(window.LOCK_UNDO||this.locked)return i.a.log("Undo/Redo locked, will not do anything"),null;var t=this.history[this.state+1],n=this.history[this.state];return t?(i.a.log("Performing ".concat(t.type)),this.state++,{nextState:t,curState:n}):null}},{key:"rollback",value:function e(){if(window.LOCK_UNDO||this.locked)return i.a.log("Undo/Redo locked, will not do anything"),null;var t=this.history[this.state-1],n=this.history[this.state];return i.a.log("State index: ".concat(this.state)),t?(i.a.log("Rollbacking ".concat(t.type)),this.state--,{nextState:t,curState:n}):(i.a.log("No action. Returning"),null)}},{key:"_getIndex",value:function e(t){var n=t+this.state;if(!this.history[n])throw new Error("Tracker: no history chunk found for state round: "+t);return n}},{key:"getHistoryState",value:function e(t){return t=this._getIndex(t),{state:this.state,chunk:Object.assign({},this.history[t].arbiterState)}}},{key:"replaceHistoryState",value:function e(t){var o;this.state<n.i(r.w)(this.history)&&(i.a.log("Tracker: slicing"),this.state<0&&(this.state=0),this.history=this.history.slice(0,this.state+1),this.state=n.i(r.w)(this.history)),this.history[this.state].arbiterState=t}},{key:"destroy",value:function e(){this.history=[],this.state=-1}}]),e}();t.a=new u},function(e,t,n){"use strict";var r=n(1),i=n(37),o=n(0),a=n(8),s=n(2),u=n(23),l=n(6),c=n(4),f=n(3);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)})}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function y(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=w(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}n.d(t,"a",function(){return A});var A=function(e){function t(e){var r;return g(this,t),(r=y(this,_(t).call(this,e))).previewMediaId=e.previewMediaId,r.isInPreviewMode=n.i(s.a)("renderMode")===u.a.PREVIEW,r.fallback=e.fallback,r.loop=e.loop,r.isPlaying=!1,r.mediaAsset&&r.defineSrc(),r}return P(t,e),m(t,[{key:"defineSrc",value:function e(){var t={viewMode:r.a.VIEW_MODES.screen,fallback:this.fallback,session:!this.isInPreviewMode,shouldWatermark:n.i(s.a)("shouldShowLogoLabel")};this.previewMediaId&&(this.previewPath=n.i(o.u)(this.previewMediaId,Object.assign({},t,{isVideoStaticPreview:!0}))),this.src=n.i(o.u)(this.mediaId,t)}},{key:"getVideo",value:function e(){return this.el.querySelector("video")}},{key:"reload",value:function(){var e=d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return this.src=this.defineSrc(),t.abrupt("return",this.mounted());case 2:case"end":return t.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"mounting",value:function e(){var r=this,i=n.i(s.a)("clientRender");return n.i(a.f)(this.previewPath).then(function(){var e=r.loop,a=r.getVideo();if(!r.isInPreviewMode&&!i){var s=function e(t){window.jsdom||(a.src=t)};r.preload=e?{promise:Promise.resolve().then(function(){return s(r.src)})}:n.i(o.K)(r.src,s)}return!r.shallow||r.isInPreviewMode?b(_(t.prototype),"mounting",r).call(r):r.preload.promise})}},{key:"play",value:function e(){if(!this.isInPreviewMode){this.updateTime();var t=this.getVideo();t.load(),this.isPlaying=!0,t.play().catch(function(){})}}},{key:"stop",value:function e(){var t=this.loop,n=this.getVideo();n.pause(),this.isPlaying=!1,n.currentTime=t?t.cutStart:0,this.loop||n.load()}},{key:"export",value:function(){var e=d(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b(_(t.prototype),"export",this).call(this);case 2:return(n=r.sent).videoElement=this.getVideo(),r.abrupt("return",n);case 5:case"end":return r.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},{key:"updateTime",value:function e(){var t=this.getVideo(),r=this.loop,i=this.isPlaying;if(n.i(o.L)(t.currentTime,r)){var a=this.userUpload&&t.currentTime&&t.currentTime!==t.duration,s=n.i(o.M)(r.cutStart);if(t.pause(),t.currentTime=s,i){if(a)return this.userVideoEnded();t.play().catch(function(){})}}}},{key:"template",value:function e(){return'<div holder style="position: relative; width: 100%; height: 100%">\n\t\t\t<video style="width: 100%; height: 100%;" playsinline="" loop="" muted="" src="" poster="'.concat(this.previewPath,'"/>\n\t\t</div>')}},{key:"userVideoEnded",value:function e(){c.a.dispatch(f.a.USER_VIDEO_ENDED)}},{key:"serialize",value:function e(n){var r=b(_(t.prototype),"serialize",this).call(this,n);return delete r.fallback,delete r.isPlaying,this.mediaAsset&&(delete r.src,this.previewMediaId&&delete r.previewPath),r}},{key:"bindEvents",value:function e(){var n;if(this.loop){b(_(t.prototype),"bindEvents",this).call(this);var r=this.getVideo();if(l.a.attachEvent(r,"timeupdate",this.updateTime.bind(this)),this.userUpload)return r.loop=!1,l.a.attachEvent(r,"ended",this.userVideoEnded)}}},{key:"setLoop",value:function e(t){this.loop=t;var r=this.getVideo(),i=n.i(o.M)(t.cutStart);r.currentTime=i}}]),t}(i.a)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)})}}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}var c="initial",f="pending",h="done",p=3,d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.concurrency=t.concurrency||p,this.onFulfilled=t.onFulfilled||new Function,this.items=[]}return l(e,[{key:"push",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i,a=o({action:t,priority:n,status:c},r);this.items.push(a),this.next()}},{key:"clean",value:function e(){this.items=[]}},{key:"processItem",value:function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return t.status=f,n.prev=1,n.next=4,t.action();case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:t.status=h,this.next();case 10:case"end":return n.stop()}},e,this,[[1,6]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getItemsByStatus",value:function e(t){return this.items.filter(function(e){return e.status===t})}},{key:"next",value:function e(){var t=this.getItemsByStatus(f),n=this.getItemsByStatus(c);if(n.length||t.length){if(!(t.length>=this.concurrency)&&n.length){var r=n.sort(function(e,t){return t.priority-e.priority});this.processItem(r[0])}}else this.onFulfilled()}}]),e}();t.a=d},function(e,t,n){"use strict";var r=n(40),i=n(16),o=n(0);function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0,s;a||(a=n.i(o.p)(e.cropOpts)),!e.isCropped()&&t?(s={left:e.width/4,top:e.height/4},a.width=e.width/2,a.height=e.height/2):s=a;var u={width:a.width||e.width/2,height:a.height||e.height/2,position:s,originalImageSrc:e.src,originalAngle:e.angle,parentImageWidth:e.originalImageWidth,parentImageHeight:e.originalImageHeight,flipped:e.flipped},l=new r.a(u),c=document.createElement("div"),f=l.template();return c.innerHTML=f,l.setEl(c),n.i(i.a)(l),l}t.a=a},function(e,t,n){"use strict";var r=n(11),i=n(1),o=n(18),a=n(2),s=n(4),u=n(3);function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)})}}function f(e){var t=e.previewPath,r=document.createElement("div");n.i(o.a)(r,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1});var i=document.createElement("div");return n.i(o.a)(i,{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"url(".concat(t,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"left top"}),r.appendChild(i),r.classList.add(n.i(a.a)("dummyHolderClassName")),i.classList.add(n.i(a.a)("dummyImageHolderClassName")),r}function h(e,t){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark(function e(t,o){var a,l,c;return regeneratorRuntime.wrap(function e(h){for(;;)switch(h.prev=h.next){case 0:return a=o.previewPath||o.src,"illustrationElement"===t&&(o._blured=!1),h.next=4,n.i(r.a)(t,o);case 4:if(l=h.sent,i.a.DUMMYABLE_ELEMENT_TYPES.includes(l.type)){h.next=7;break}return h.abrupt("return",l);case 7:return l.dummyHolder=f({previewPath:a}),l.el.appendChild(l.dummyHolder),c=function e(){var t,n;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).designElement===l&&l.dummyHolder&&l.el&&(l.el.removeChild(l.dummyHolder),l.dummyHolder=null,s.a.unsubscribe(u.a.ELEMENT_MOUNTED,e))},s.a.subscribe(u.a.ELEMENT_MOUNTED,c),h.abrupt("return",l);case 12:case"end":return h.stop()}},e,this)}))).apply(this,arguments)}t.a=h},function(e,t,n){"use strict";var r=n(0),i=n(33);function o(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,u,"next",e)}function u(e){o(a,r,i,s,u,"throw",e)}s(void 0)})}}t.a=u;var s={maskElement:function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:if("text"===t.maskType){r.next=4;break}return r.next=3,n.i(i.a)(t);case 3:t=r.sent;case 4:return t.maskType&&!t.maskData&&(t.maskData={dimensions:{width:t.width,height:t.height}}),r.abrupt("return",t);case 6:case"end":return r.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),textElement:function(){var e=a(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.i(r.y)(t.font);case 2:return i.abrupt("return",t);case 3:case"end":return i.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()};function u(e,t){return l.apply(this,arguments)}function l(){return(l=a(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:if(s[t]){r.next=2;break}return r.abrupt("return",n);case 2:return r.abrupt("return",s[t](n));case 3:case"end":return r.stop()}},e,this)}))).apply(this,arguments)}},function(e,t,n){"use strict";t.a=function e(){function t(e,t,n){return Math.max(e,Math.min(t,n))}function n(e){return{_:e,loadContentsOf:function e(t){z=this._.gl,this._.loadContentsOf(t)},destroy:function e(){z=this._.gl,this._.destroy()}}}function r(e){return n(U.fromElement(e))}function i(e,t){var n=z.UNSIGNED_BYTE;if(z.getExtension("OES_texture_float")&&z.getExtension("OES_texture_float_linear")){var r=new U(100,100,z.RGBA,z.FLOAT);try{r.drawTo(function(){n=z.FLOAT})}catch(e){}r.destroy()}this._.texture&&this._.texture.destroy(),this._.spareTexture&&this._.spareTexture.destroy(),this.width=e,this.height=t,this._.texture=new U(e,t,z.RGBA,n),this._.spareTexture=new U(e,t,z.RGBA,n),this._.extraTexture=this._.extraTexture||new U(0,0,z.RGBA,n),this._.flippedShader=this._.flippedShader||new H(null,"uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));}"),this._.isInitialized=!0}function o(e,t,n){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||i.call(this,t||e._.width,n||e._.height),e._.use(),this._.texture.drawTo(function(){H.getDefaultShader().drawRect()}),this}function a(){return this._.texture.use(),this._.flippedShader.drawRect(),this}function s(e,t,n,r){(n||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(r||this._.texture)}function u(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function l(){var e=new U(this._.texture.width,this._.texture.height,z.RGBA,z.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){H.getDefaultShader().drawRect()}),n(e)}function c(){var e=this._.texture.width,t=this._.texture.height,n=new Uint8Array(4*e*t);return this._.texture.drawTo(function(){z.readPixels(0,0,e,t,z.RGBA,z.UNSIGNED_BYTE,n)}),n}function f(e){return function(){return z=this._.gl,e.apply(this,arguments)}}function h(e,t,n,r,i,o,a,s){var u,l=r-o,c,f=s-o,h=(u=n-i)*f-(c=a-i)*l,c,u;return[n-e+(c=((i=e-n+i-a)*f-c*(o=t-r+o-s))/h)*n,r-t+c*r,c,a-e+(u=(u*o-i*l)/h)*a,s-t+u*s,u,e,t,1]}function p(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=t*o*(e=e[8])-t*a*u-n*i*e+n*a*s+r*i*u-r*o*s;return[(o*e-a*u)/l,(r*u-n*e)/l,(n*a-r*o)/l,(a*s-i*e)/l,(t*e-r*s)/l,(r*i-t*a)/l,(i*u-o*s)/l,(n*s-t*u)/l,(t*o-n*i)/l]}function d(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var n=0;n<t;n++)this.xa.push(e[n][0]),this.ya.push(e[n][1]);for(this.u[0]=0,this.y2[0]=0,n=1;n<t-1;++n){e=this.xa[n+1]-this.xa[n-1];var r=(this.xa[n]-this.xa[n-1])/e,i=r*this.y2[n-1]+2;this.y2[n]=(r-1)/i,this.u[n]=(6*((this.ya[n+1]-this.ya[n])/(this.xa[n+1]-this.xa[n])-(this.ya[n]-this.ya[n-1])/(this.xa[n]-this.xa[n-1]))/e-r*this.u[n-1])/i}for(this.y2[t-1]=0,n=t-2;0<=n;--n)this.y2[n]=this.y2[n]*this.y2[n+1]+this.u[n]}function g(e,t){return new H(null,e+"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;"+t+"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if(coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}")}function v(e,n){return z.brightnessContrast=z.brightnessContrast||new H(null,"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if(contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}"),s.call(this,z.brightnessContrast,{brightness:t(-1,e,1),contrast:t(-1,n,1)}),this}function m(e){e=new d(e);for(var n=[],r=0;256>r;r++)n.push(t(0,Math.floor(256*e.interpolate(r/255)),255));return n}function y(e,t,n){e=m(e),1==arguments.length?t=n=e:(t=m(t),n=m(n));for(var r=[],i=0;256>i;i++)r.splice(r.length,0,e[i],t[i],n[i],255);return this._.extraTexture.initFromBytes(256,1,r),this._.extraTexture.use(1),z.curves=z.curves||new H(null,"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}"),z.curves.textures({map:1}),s.call(this,z.curves,{}),this}function E(e){z.denoise=z.denoise||new H(null,"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}");for(var t=0;2>t;t++)s.call(this,z.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function b(e,n){return z.hueSaturation=z.hueSaturation||new H(null,"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if(saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}"),s.call(this,z.hueSaturation,{hue:t(-1,e,1),saturation:t(-1,n,1)}),this}function w(e){return z.noise=z.noise||new H(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}"),s.call(this,z.noise,{amount:t(0,e,1)}),this}function _(e){return z.sepia=z.sepia||new H(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}"),s.call(this,z.sepia,{amount:t(0,e,1)}),this}function P(e,t){return z.unsharpMask=z.unsharpMask||new H(null,"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}"),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){H.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),z.unsharpMask.textures({originalTexture:1}),s.call(this,z.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function S(e){return z.vibrance=z.vibrance||new H(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}"),s.call(this,z.vibrance,{amount:t(-1,e,1)}),this}function A(e,n){return z.vignette=z.vignette||new H(null,"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}"),s.call(this,z.vignette,{size:t(0,e,1),amount:t(0,n,1)}),this}function O(e,n,r){z.lensBlurPrePass=z.lensBlurPrePass||new H(null,"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}");var i="uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;"+W+"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}";z.lensBlur0=z.lensBlur0||new H(null,i+"void main(){gl_FragColor=sample(delta0);}"),z.lensBlur1=z.lensBlur1||new H(null,i+"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}"),z.lensBlur2=z.lensBlur2||new H(null,i+"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}").textures({texture1:1});for(var i=[],o=0;3>o;o++){var a=r+2*o*Math.PI/3;i.push([e*Math.sin(a)/this.width,e*Math.cos(a)/this.height])}return e=Math.pow(10,t(-1,n,1)),s.call(this,z.lensBlurPrePass,{power:e}),this._.extraTexture.ensureFormat(this._.texture),s.call(this,z.lensBlur0,{delta0:i[0]},this._.texture,this._.extraTexture),s.call(this,z.lensBlur1,{delta0:i[1],delta1:i[2]},this._.extraTexture,this._.extraTexture),s.call(this,z.lensBlur0,{delta0:i[1]}),this._.extraTexture.use(1),s.call(this,z.lensBlur2,{power:1/e,delta0:i[2]}),this}function C(e,t,n,r,i,o){z.tiltShift=z.tiltShift||new H(null,"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;"+W+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}");var a=n-e,u=r-t,l=Math.sqrt(a*a+u*u);return s.call(this,z.tiltShift,{blurRadius:i,gradientRadius:o,start:[e,t],end:[n,r],delta:[a/l,u/l],texSize:[this.width,this.height]}),s.call(this,z.tiltShift,{blurRadius:i,gradientRadius:o,start:[e,t],end:[n,r],delta:[-u/l,a/l],texSize:[this.width,this.height]}),this}function x(e){return z.triangleBlur=z.triangleBlur||new H(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+W+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),s.call(this,z.triangleBlur,{delta:[e/this.width,0]}),s.call(this,z.triangleBlur,{delta:[0,e/this.height]}),this}function T(e,t,n){return z.zoomBlur=z.zoomBlur||new H(null,"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;"+W+"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),s.call(this,z.zoomBlur,{center:[e,t],strength:n,texSize:[this.width,this.height]}),this}function I(e,t,n,r){return z.colorHalftone=z.colorHalftone||new H(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}"),s.call(this,z.colorHalftone,{center:[e,t],angle:n,scale:Math.PI/r,texSize:[this.width,this.height]}),this}function k(e,t,n,r){return z.dotScreen=z.dotScreen||new H(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}"),s.call(this,z.dotScreen,{center:[e,t],angle:n,scale:Math.PI/r,texSize:[this.width,this.height]}),this}function D(e){return z.edgeWork1=z.edgeWork1||new H(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+W+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}"),z.edgeWork2=z.edgeWork2||new H(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+W+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if(abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}"),s.call(this,z.edgeWork1,{delta:[e/this.width,0]}),s.call(this,z.edgeWork2,{delta:[0,e/this.height]}),this}function R(e,t,n){return z.hexagonalPixelate=z.hexagonalPixelate||new H(null,"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if(tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if(alen<blen){if(alen<clen)choice=a;else choice=c;}else{if(blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}"),s.call(this,z.hexagonalPixelate,{center:[e,t],scale:n,texSize:[this.width,this.height]}),this}function M(e){return z.ink=z.ink||new H(null,"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if(abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}"),s.call(this,z.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function F(e,n,r,i){return z.bulgePinch=z.bulgePinch||g("uniform float radius;uniform float strength;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=distance/radius;if(strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;"),s.call(this,z.bulgePinch,{radius:r,strength:t(-1,i,1),center:[e,n],texSize:[this.width,this.height]}),this}function L(e,t,n){if(z.matrixWarp=z.matrixWarp||g("uniform mat3 matrix;uniform bool useTextureSpace;","if(useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if(useTextureSpace)coord=(coord*0.5+0.5)*texSize;"),4==(e=Array.prototype.concat.apply([],e)).length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return s.call(this,z.matrixWarp,{matrix:t?p(e):e,texSize:[this.width,this.height],useTextureSpace:0|n}),this}function N(e,t){var n=h.apply(null,t),r=h.apply(null,e),n=p(n);return this.matrixWarp([n[0]*r[0]+n[1]*r[3]+n[2]*r[6],n[0]*r[1]+n[1]*r[4]+n[2]*r[7],n[0]*r[2]+n[1]*r[5]+n[2]*r[8],n[3]*r[0]+n[4]*r[3]+n[5]*r[6],n[3]*r[1]+n[4]*r[4]+n[5]*r[7],n[3]*r[2]+n[4]*r[5]+n[5]*r[8],n[6]*r[0]+n[7]*r[3]+n[8]*r[6],n[6]*r[1]+n[7]*r[4]+n[8]*r[7],n[6]*r[2]+n[7]*r[5]+n[8]*r[8]])}function j(e,t,n,r){return z.swirl=z.swirl||g("uniform float radius;uniform float angle;uniform vec2 center;","coord-=center;float distance=length(coord);if(distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;"),s.call(this,z.swirl,{radius:n,center:[e,t],angle:r,texSize:[this.width,this.height]}),this}var B={},z;!function(){function e(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var n=e.createProgram(),r=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(r,"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}"),e.shaderSource(i,"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}"),e.compileShader(r),e.compileShader(i),e.attachShader(n,r),e.attachShader(n,i),e.linkProgram(n),r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),r=new Uint8Array(4),e.useProgram(n),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),127===r[0]||128===r[0]}function t(){}function n(e){return"OES_texture_float_linear"===e?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new t}),e=this.$OES_texture_float_linear$):e=o.call(this,e),e}function r(){var e=a.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}try{var i=document.createElement("canvas").getContext("experimental-webgl")}catch(e){}if(i&&-1===i.getSupportedExtensions().indexOf("OES_texture_float_linear")&&e(i)){var o=WebGLRenderingContext.prototype.getExtension,a=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=n,WebGLRenderingContext.prototype.getSupportedExtensions=r}}(),B.canvas=function(){var e=document.createElement("canvas");try{z=e.getContext("experimental-webgl",{premultipliedAlpha:1})}catch(e){z=null}if(!z)throw"This browser does not support WebGL";return e._={gl:z,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null},e.texture=f(r),e.draw=f(o),e.update=f(a),e.replace=f(u),e.contents=f(l),e.getPixelArray=f(c),e.brightnessContrast=f(v),e.hexagonalPixelate=f(R),e.hueSaturation=f(b),e.colorHalftone=f(I),e.triangleBlur=f(x),e.unsharpMask=f(P),e.perspective=f(N),e.matrixWarp=f(L),e.bulgePinch=f(F),e.tiltShift=f(C),e.dotScreen=f(k),e.edgeWork=f(D),e.lensBlur=f(O),e.zoomBlur=f(T),e.noise=f(w),e.denoise=f(E),e.curves=f(y),e.swirl=f(j),e.ink=f(M),e.vignette=f(A),e.vibrance=f(S),e.sepia=f(_),e},B.splineInterpolate=m;var H=function(){function e(e,t){var n=z.createShader(e);if(z.shaderSource(n,t),z.compileShader(n),!z.getShaderParameter(n,z.COMPILE_STATUS))throw"compile error: "+z.getShaderInfoLog(n);return n}function t(t,i){if(this.texCoordAttribute=this.vertexAttribute=null,this.program=z.createProgram(),t=t||n,i="precision highp float;"+(i=i||r),z.attachShader(this.program,e(z.VERTEX_SHADER,t)),z.attachShader(this.program,e(z.FRAGMENT_SHADER,i)),z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw"link error: "+z.getProgramInfoLog(this.program)}var n="attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}",r="uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}";return t.prototype.destroy=function(){z.deleteProgram(this.program),this.program=null},t.prototype.uniforms=function(e){for(var t in z.useProgram(this.program),e)if(e.hasOwnProperty(t)){var n=z.getUniformLocation(this.program,t);if(null!==n){var r=e[t];if("[object Array]"==Object.prototype.toString.call(r))switch(r.length){case 1:z.uniform1fv(n,new Float32Array(r));break;case 2:z.uniform2fv(n,new Float32Array(r));break;case 3:z.uniform3fv(n,new Float32Array(r));break;case 4:z.uniform4fv(n,new Float32Array(r));break;case 9:z.uniformMatrix3fv(n,!1,new Float32Array(r));break;case 16:z.uniformMatrix4fv(n,!1,new Float32Array(r));break;default:throw"dont't know how to load uniform \""+t+'" of length '+r.length}else{if("[object Number]"!=Object.prototype.toString.call(r))throw'attempted to set uniform "'+t+'" to invalid value '+(r||"undefined").toString();z.uniform1f(n,r)}}}return this},t.prototype.textures=function(e){for(var t in z.useProgram(this.program),e)e.hasOwnProperty(t)&&z.uniform1i(z.getUniformLocation(this.program,t),e[t]);return this},t.prototype.drawRect=function(e,t,n,r){var i=z.getParameter(z.VIEWPORT);t=void 0!==t?(t-i[1])/i[3]:0,e=void 0!==e?(e-i[0])/i[2]:0,n=void 0!==n?(n-i[0])/i[2]:1,r=void 0!==r?(r-i[1])/i[3]:1,null==z.vertexBuffer&&(z.vertexBuffer=z.createBuffer()),z.bindBuffer(z.ARRAY_BUFFER,z.vertexBuffer),z.bufferData(z.ARRAY_BUFFER,new Float32Array([e,t,e,r,n,t,n,r]),z.STATIC_DRAW),null==z.texCoordBuffer&&(z.texCoordBuffer=z.createBuffer(),z.bindBuffer(z.ARRAY_BUFFER,z.texCoordBuffer),z.bufferData(z.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),z.STATIC_DRAW)),null==this.vertexAttribute&&(this.vertexAttribute=z.getAttribLocation(this.program,"vertex"),z.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=z.getAttribLocation(this.program,"_texCoord"),z.enableVertexAttribArray(this.texCoordAttribute)),z.useProgram(this.program),z.bindBuffer(z.ARRAY_BUFFER,z.vertexBuffer),z.vertexAttribPointer(this.vertexAttribute,2,z.FLOAT,!1,0,0),z.bindBuffer(z.ARRAY_BUFFER,z.texCoordBuffer),z.vertexAttribPointer(this.texCoordAttribute,2,z.FLOAT,!1,0,0),z.drawArrays(z.TRIANGLE_STRIP,0,4)},t.getDefaultShader=function(){return z.defaultShader=z.defaultShader||new t,z.defaultShader},t}();d.prototype.interpolate=function(e){for(var t=0,n=this.ya.length-1;1<n-t;){var r=n+t>>1;this.xa[r]>e?n=r:t=r}var r=this.xa[n]-this.xa[t],i=(this.xa[n]-e)/r;return e=(e-this.xa[t])/r,i*this.ya[t]+e*this.ya[n]+((i*i*i-i)*this.y2[t]+(e*e*e-e)*this.y2[n])*r*r/6};var U=function(){function e(e,t,n,r){this.gl=z,this.id=z.createTexture(),this.width=e,this.height=t,this.format=n,this.type=r,z.bindTexture(z.TEXTURE_2D,this.id),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.CLAMP_TO_EDGE),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.CLAMP_TO_EDGE),e&&t&&z.texImage2D(z.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null)}function t(e){return null==n&&(n=document.createElement("canvas")),n.width=e.width,n.height=e.height,(e=n.getContext("2d")).clearRect(0,0,n.width,n.height),e}e.fromElement=function(t){var n=new e(0,0,z.RGBA,z.UNSIGNED_BYTE);return n.loadContentsOf(t),n},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,z.bindTexture(z.TEXTURE_2D,this.id),z.texImage2D(z.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.initFromBytes=function(e,t,n){this.width=e,this.height=t,this.format=z.RGBA,this.type=z.UNSIGNED_BYTE,z.bindTexture(z.TEXTURE_2D,this.id),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,e,t,0,z.RGBA,this.type,new Uint8Array(n))},e.prototype.destroy=function(){z.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){z.activeTexture(z.TEXTURE0+(e||0)),z.bindTexture(z.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){z.activeTexture(z.TEXTURE0+(e||0)),z.bindTexture(z.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,n,r){if(1==arguments.length){var i=arguments[0];e=i.width,t=i.height,n=i.format,r=i.type}e==this.width&&t==this.height&&n==this.format&&r==this.type||(this.width=e,this.height=t,this.format=n,this.type=r,z.bindTexture(z.TEXTURE_2D,this.id),z.texImage2D(z.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(z.framebuffer=z.framebuffer||z.createFramebuffer(),z.bindFramebuffer(z.FRAMEBUFFER,z.framebuffer),z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_2D,this.id,0),z.checkFramebufferStatus(z.FRAMEBUFFER)!==z.FRAMEBUFFER_COMPLETE)throw Error("incomplete framebuffer");z.viewport(0,0,this.width,this.height),e(),z.bindFramebuffer(z.FRAMEBUFFER,null)};var n=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=z.RGBA,this.type=z.UNSIGNED_BYTE,z.bindTexture(z.TEXTURE_2D,this.id),z.texImage2D(z.TEXTURE_2D,0,z.RGBA,z.RGBA,z.UNSIGNED_BYTE,n),this},e.prototype.toImage=function(e){this.use(),H.getDefaultShader().drawRect();var r=4*this.width*this.height,i=new Uint8Array(r),o=t(this),a=o.createImageData(this.width,this.height);z.readPixels(0,0,this.width,this.height,z.RGBA,z.UNSIGNED_BYTE,i);for(var s=0;s<r;s++)a.data[s]=i[s];o.putImageData(a,0,0),e.src=n.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),W="float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}";return B}()},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(1),a=n(46),s=n(9),u=n(0),l=n(2),c=n(24);function f(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){f(o,r,i,a,s,"next",e)}function s(e){f(o,r,i,a,s,"throw",e)}a(void 0)})}}function p(e){Object.assign(e.prototype,{copyElement:function e(){var t=this;i.a.log("Arbiter: copying element");var n=this.selectedElement;if(!n)throw new Error("No element selected to copy");var o=this.getParentPage(n),a=this.clipboard.copy({designElement:n,page:o},{dontUseBuffer:!0});return this.clearSelected({ignoreKeyMode:!0}),this.clipboard.paste(this.selectedPage,a).then(function(e){return t.saveState({type:r.a.ELEMENT_COPY,meta:{}}),e})},flipElement:function e(t){i.a.log("Arbiter: flip element"),this.changeElementState("setFlip",{direction:t},!1,!0)},lockElement:function e(t){var n=this.selectedElement;if(i.a.log("Arbiter: ".concat(t?"lock":"unlock"," element")),!n)throw new Error("No element selected to lock/unlock");if(o.a.NON_LOCKABLE_ELEMENTS.includes(n.type))throw new Error("".concat(n.type," can't be locked"));this.changeElementState("setLock",{locked:t},!1,!0)},checkForLocked:function e(t){if(t.locked)throw new Error("Element is locked")},convertToFrame:function(){var e=h(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if((t=this.selectedElement)&&t.constructor.frameable){o.next=3;break}throw new Error("No clippable element to create frame from");case 3:if(this.checkForLocked(t),n=this.getParentPage(t),window.SELECTION_LOCK=!0,window.MULTISELECTION_LOCK=!0,this.getDropPage(t.getBounds())){o.next=9;break}return o.abrupt("return");case 9:return this.clearSelected(),o.next=12,a.a.createFrameFrom(t,n);case 12:i=o.sent,this.afterFrameConversion(i,r.a.CREATE_MASK);case 14:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),unframe:function(){var e=h(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if("maskElement"===(t=this.selectedElement).type&&"text"===t.maskType){o.next=3;break}throw new Error("Cannot unframe. Not text frame");case 3:return this.checkForLocked(t),n=this.getParentPage(t),window.SELECTION_LOCK=!0,window.MULTISELECTION_LOCK=!0,this.clearSelected(),o.next=10,a.a.unframe(t,n);case 10:i=o.sent,this.afterFrameConversion(i,r.a.UNFRAME);case 12:case"end":return o.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),afterFrameConversion:function e(t,n){window.SELECTION_LOCK=!1,window.MULTISELECTION_LOCK=!1,this.selectElement({designElement:t}),this.saveState({type:n,meta:t.serialize()})},removeElement:function e(){i.a.log("Arbiter: removing element");var t=this.selectedElement;if(!t.locked){var n=t.serialize();s.a.removeElement(this.getParentPage(t).uuid,n.uuid),this.clearSelection(),this.saveState({type:r.a.ELEMENT_REMOVE,meta:n})}},setElementOpacity:function e(t,n){i.a.log("Arbiter: set element opacity"),this.changeElementState("setOpacity",{opacity:t},!0,n)},pushElement:function e(){i.a.log("Arbiter: push element");var t=this.selectedElement;if(t.locked)throw new Error("Locked element cannot be rearranged");if(t.isBackgroundElement())throw new Error("Cannot push background");"textElement"===t.type&&t.returnToPage();var n=this.getParentPage(t),o=n.getElementsIntersection(t),a=n.pushElement(o);return this.saveState({type:r.a.ELEMENT_PUSH,meta:t.serialize(),pageUuid:n.uuid}),a},pullElement:function e(){i.a.log("Arbiter: pull element");var t=this.selectedElement;if(t.locked)throw new Error("Locked element cannot be rearranged");if(t.isBackgroundElement())throw new Error("Cannot pull background");"textElement"===t.type&&t.returnToPage();var n=this.getParentPage(t),o=n.getElementsIntersection(t),a=n.pullElement(o);return this.saveState({type:r.a.ELEMENT_PUSH,meta:t.serialize(),pageUuid:n.uuid}),a},reloadVideos:function e(){var t;c.a.findAll(this.pages,function(e){return e.isAnimatedElement}).forEach(function(e){return e.reload()})},reloadPurchasedAssets:function e(t){n.i(l.b)("sessionToken",n.i(u.a)(64));var r=[];this.pages.forEach(function(e){e.elements.forEach(function e(n){t.includes((n.dphId||"").toString())&&r.push(n),n.children&&n.children.forEach(e)})});var i=r.map(function(e){return e.reload()});return Promise.all(i)},setPositionChange:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.changeElementState("setPositionChange",t,!1,n)}})}t.a=p},function(e,t,n){"use strict";var r=n(11),i=n(5),o=n(8),a=n(1);function s(e){Object.assign(e.prototype,{setImageSettings:function e(t,n,r){i.a.log("Arbiter: set image settings");var o=this.selectedElement,a;if(!o)throw new Error("No element selected to filter");if(!o.constructor.imageEffects)throw new Error("Only images can be filtered");var s={};switch(t){case"blur":case"brightness":case"contrast":case"saturate":a="setCssFilters";break;case"vignette":case"crossProcess":a="setCanvasFilters";break;case"tint":a="setTintFilter"}s[t]=n,(s.crossProcess||0===s.crossProcess||s.vignette||0===s.vignette||s.finalize)&&r&&Object.assign(s,{finalize:!0}),this.changeElementState(a,s,!0,r||null),this.onFilterRangesChange({filters:o.filters,filtersPresetIntensity:o.filtersPresetIntensity})},setFiltersPreset:function e(t,n,r){i.a.log("Arbiter: set filters preset");var o=this.selectedElement;if(!o)throw new Error("No element selected to filter");if("imageElement"!==o.type&&"maskElement"!==o.type)throw new Error("Only images can be filtered");var a={filtersPreset:t,finalize:n};r&&(a.filtersPresetIntensity=r),this.changeElementState("setFiltersPreset",a,!0,n||null),this.onFilterRangesChange({filters:o.filters,filtersPresetIntensity:o.filtersPresetIntensity})},getImagePresets:function e(){var t=this;i.a.log("Arbiter: get image of preset");var s=this.selectedElement;if(null!==s){var u=s.serialize();delete u.uuid,u.src=u.previewPath||n.i(o.j)(u.src,a.a.DEFAULT_IMAGE_WIDTH);var l,c=Object.keys(o.d).map(function(e){return u.filtersPreset=e,u.filtersPresetIntensity=50,u.presetPic=!0,u.shouldIgnoreMountingStash=!0,n.i(r.a)(t.selectedElement.type,u).then(function(e){return"maskElement"===e.type?e.mounted().then(function(){return e}):e})});return Promise.all(c)}}})}t.a=s},function(e,t,n){"use strict";var r=n(28),i=n(2),o=n(5),a=n(3),s=n(1),u=n(24);function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)})}}function f(e){Object.assign(e.prototype,{insertPageAt:function(){var e=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function e(i){for(;;)switch(i.prev=i.next){case 0:if(!(t<0||t>this.pages.length)){i.next=2;break}throw new Error("Wrong index to insert new page");case 2:return o.a.log("Arbiter: create new page..."),i.next=5,this.insertPage({},t);case 5:return n=i.sent,r=n.serialize(),this.saveState({type:a.a.PAGE_INSERTED,pageEvent:{pageData:r,index:t}}),this.selectPage({page:n}),o.a.log("Arbiter: page added successfully"),i.abrupt("return",n);case 11:case"end":return i.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),removePageAt:function e(t){if(this.saveScrollState(),o.a.log("Arbiter: remove page..."),!this.pages[t])throw new Error("Wrong index to remove page");if(this.pages[t].isReady()||this.pages[t].isFailed()){this.selectedElement&&this.getParentPage(this.selectedElement)&&this.clearSelected();var n=this.removePage(t);this.restoreScrollState(),this.saveState({type:a.a.PAGE_REMOVED,pageEvent:{pageData:n,index:t}}),o.a.log("Arbiter: page removed successfully")}},selectPage:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.a.log("Arbiter: select page...");var s=t.page;s&&this.selectedPage!==s&&(this.selectedElement&&this.getParentPage(this.selectedElement)!==s&&this.clearSelected({ignoreKeyMode:!0}),this.selectedPage=s,this.pages.forEach(function(e){var t=e===s;e.setActive(t),e.selected=t,r.a.pageStateChange(e)}),t.shouldPreventScroll||(n.i(i.b)("preventPageSelectionViaScroll",!0),this.scrollToPage(s)),a&&this.onSelectPage(this.selectedPage),o.a.log("Arbiter: page selected"))},selectPageAt:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.page=this.pages[t],this.selectPage(n)},copyPageAt:function(){var e=c(regeneratorRuntime.mark(function e(t){var n,r,i,s,u,l;return regeneratorRuntime.wrap(function e(c){for(;;)switch(c.prev=c.next){case 0:if(n=this.pages[t]){c.next=3;break}throw new Error("Wrong index for page to copy");case 3:if(n.isReady()){c.next=5;break}return c.abrupt("return");case 5:return(r=this.selectedElement)&&r.cropping&&this.cancelCrop(),o.a.log("Arbiter: copying page..."),(i=r&&"textElement"===r.type)&&r.returnToPage(),s=n.serialize({additionalPropsToDelete:["uuid","innerId"]}),c.next=13,this.insertPage(s,t+1);case 13:return u=c.sent,i&&this.reselectElement(),this.repositionOverlays(),this.setPixelPerfect(),this.selectPage({page:u}),l=u.serialize(),this.saveState({type:a.a.PAGE_COPIED,pageEvent:{pageData:l,index:t+1}}),o.a.log("Arbiter: page copied successfully."),c.abrupt("return",u);case 22:case"end":return c.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getPageClone:function e(t){var n=this.selectedElement,r=this.selectedPage,i=this.el,o=this.pages[t].el.cloneNode(!0),a=r&&this.pages[t]===r,s=n&&"textElement"===n.type;if(a&&s){var u=i.children[t],l=u.offsetTop,c=u.offsetLeft,f=n.el.cloneNode(!0);f.style.top="".concat(parseInt(f.style.top,10)-l,"px"),f.style.left="".concat(parseInt(f.style.left,10)-c,"px"),o.appendChild(f)}return{el:o}},getPageClones:function e(){var t=this;return this.pages.map(function(e,n){return t.getPageClone(n)})},movePageFromTo:function e(t,n){return this.saveScrollState(),this.movePage(t,n),this.restoreScrollState(),this.saveState({type:a.a.PAGE_MOVED,pageEvent:{from:t,to:n}}),{prevPageIndex:t,currentPageIndex:n}},startPageAfterLoading:function(){var e=c(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:if(n=void 0!==n?n:s.a.PAGE_AFTERLOADING_PRIORITY.normal,!(r=this.pages[t]).isReady()&&!r.isFailed()){o.next=5;break}return this.onPageStatusChange(r.uuid,r.loadStatus),o.abrupt("return");case 5:(i=u.a.getAll([{elements:r.pendingElementsData}])).forEach(function(e){e.shouldIgnoreMountingStash=!0}),this.afterloadingQueue.push(this.pageAfterloadingAction(r),n,r);case 8:case"end":return o.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()})}t.a=f},function(e,t,n){"use strict";var r=n(28),i=n(2),o=n(1);function a(e){Object.assign(e.prototype,{switchLogoLabels:function e(t){this.logoLabelsVisibility=!t,!t&&this.toggleLogoLabels(t),n.i(i.b)("shouldShowLogoLabel",t),t&&this.handleAnimationState()},toggleLogoLabels:function e(t){var a=t!==this.logoLabelsVisibility;n.i(i.a)("shouldShowLogoLabel")&&(r.a.toggleChildActivity(o.a.PAGE_OVERLAY_CHILD_TYPES.LOGO_LABEL,t,this.pages),a&&this.onLogoLabelVisibilityChange(t),this.logoLabelsVisibility=t)},setLogoLabelsScale:function e(t){n.i(i.b)("logoLabelsScale",t)},toggleGrids:function e(t){r.a.toggleChildActivity(o.a.PAGE_OVERLAY_CHILD_TYPES.GRID_OVERLAY,t,this.pages)}})}t.a=a},function(e,t,n){"use strict";function r(e){Object.assign(e.prototype,{setPixelPerfect:function e(){var t=this;this.pixelPerfectMasks.length&&this.pages.forEach(function(e,n){var r=e.getBounds(),i;t.pixelPerfectMaskElements[n]?i=t.pixelPerfectMaskElements[n]:(i=document.createElement("img"),t.pixelPerfectMaskElements.push(i),document.body.appendChild(i)),i.style.position="absolute",i.setAttribute("src",t.pixelPerfectMasks[n]),i.style.left="".concat(r.left,"px"),i.style.top="".concat(r.top,"px"),t.showPixelPerfectMasks||(i.style.display="none"),i.style.width="".concat(r.width,"px"),i.style.height="".concat(r.height,"px"),i.style.pointerEvents="none",i.style.opacity=.5})},showHidePixelPerfectMasks:function e(t){var n=this;this.setPixelPerfect(),t||!1===t||(t=this.showPixelPerfectMasks),this.showPixelPerfectMasks=!t,this.pixelPerfectMaskElements.forEach(function(e){e.style.display=n.showPixelPerfectMasks?"block":"none"})},setPixelPerfectMasksFilter:function e(t){this.pixelPerfectMaskElements.forEach(function(e){t||(e.style.filter="none"),e.style.filter="".concat(t,"(100%)")})}})}t.a=r},function(e,t,n){"use strict";var r=n(32),i=n(6),o=n(0),a=n(52),s=n(124),u=n(2),l=n(5),c=n(1),f=n(9),h=n(28);function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)})}}function g(e){Object.assign(e.prototype,{insertPage:function(){var e=d(regeneratorRuntime.mark(function e(t,i){var o,a;return regeneratorRuntime.wrap(function e(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,n.i(r.a)(t);case 2:return o=s.sent,a=this.el.childNodes[i],this.el.insertBefore(o.el,a),h.a.addOverlay(o),this.pages.splice(i,0,o),s.next=9,f.a.changePageContent(o,o.pendingElementsData);case 9:return this.adjustOverlayLayerToWorkspace(),s.abrupt("return",o);case 11:case"end":return s.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),removePage:function e(t){var n=this.pages[t];if(!n)throw new Error("Wrong index to remove page");if(1===this.pages.length)throw new Error("Cannot remove last page");var r=n===this.selectedPage,o=n.serialize();return i.a.detachPageEvents(n),h.a.removeOverlay(n),n.destroy(),this.pages.splice(t,1),this.adjustOverlayLayerToWorkspace(),r&&this.selectPageAfterRemoving(t),o},selectPageWithoutScroll:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.selectPage({page:t,shouldPreventScroll:!0},n)},scrollToPage:function e(t){var r=n.i(u.a)("scrollableNode"),a=t.el,s=n.i(o.c)(r),l,c=n.i(o.c)(a).center.y-s.center.y,f,h=r.scrollTop+c;i.a.scrollTop(r,h),setTimeout(function(){n.i(u.b)("preventPageSelectionViaScroll",!1)},0)},selectPageAfterRemoving:function e(t){var n=this.pages.length,r=t;t===n&&(r=n-1);var i=this.pages[r];this.selectPageWithoutScroll(i)},selectPageOnScroll:function e(){var t;if(!(this.selectedElement&&s.a.getPageVisibilityArea(this.selectedPage)>0)&&!n.i(u.a)("preventPageSelectionViaScroll")){var r=s.a.getPageToSelectOnScroll(this.pages,this.selectedPage),i;r!==this.selectedPage&&this.selectPageWithoutScroll(r)}},movePage:function e(t,n){if(t!==n){if(n<0||n>=this.pages.length)throw new Error('Incorrect value for "nextPositionIndex" parameter');var r=this.pages[t];if(!r)throw new Error("Where is no page to move");this.clearSelected(),s.a.swapPagePosition(this.pages,t,n);var i=(this.pages[n+1]||{}).el;i?this.el.insertBefore(r.el,i):this.el.append(r.el)}},adjustOverlayLayerToWorkspace:function e(){var t=n.i(o.X)(this.pages);this.adjustContentPosition(t)},centerOnSelected:function e(){var t=this.selectedPage,r=this.selectedElement;this.scrollToPage(t);var l=s.a.isPageFullyVisible(t),c=!!r&&!n.i(o.R)(r.getBounds(),t.getBounds());if(r&&!l&&!c){var f=n.i(u.a)("scrollableNode"),h=n.i(o.c)(f),p=n.i(o.c)(r.el),d=n.i(o.c)(t.el),g=a.a.getCoordsIntersection(p,d),v=g.center.y-h.center.y+f.scrollTop,m=g.center.x-h.center.x+f.scrollLeft;i.a.scrollTop(f,v),i.a.scrollLeft(f,m)}},pageAfterloadingAction:function e(t){var n=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function e(r){for(;;)switch(r.prev=r.next){case 0:if(!t.isReady()&&!t.isFailed()){r.next=3;break}return l.a.log("Page is already loaded. skipping"),r.abrupt("return");case 3:return l.a.log("Page: start content afterloading..."),r.prev=4,r.next=7,f.a.changePageContent(t,t.pendingElementsData);case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(4),t.loadStatus=c.a.PAGE_LOAD_STATUS.failed,r.abrupt("return",n.onError(r.t0));case 13:l.a.log("Page: content afterloaded successfully...");case 14:case"end":return r.stop()}},e,this,[[4,9]])}))},initPageAfterloading:function(){var e=d(regeneratorRuntime.mark(function e(t){var r,i,a;return regeneratorRuntime.wrap(function e(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,n.i(o.Y)(c.a.PAGE_VISIBILITY_TIME_BEFORE_AFTERLOADING);case 2:if(r=this.pages[t],i=r.loadStatus===c.a.PAGE_LOAD_STATUS.initial,(a=s.a.isPageInViewportArea(this.pages[t]))&&i){u.next=7;break}return u.abrupt("return");case 7:return u.abrupt("return",this.startPageAfterLoading(t,c.a.PAGE_AFTERLOADING_PRIORITY.high));case 8:case"end":return u.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),initPagesAfterloading:function e(){var t=this,n,r;this.shouldCompletelyLoad||this.pages.map(function(e,t){return t}).filter(function(e){var n=t.pages[e],r;return n.loadStatus===c.a.PAGE_LOAD_STATUS.initial&&s.a.isPageInViewportArea(n)}).forEach(function(e){t.initPageAfterloading(e)})},emitOnPageStatusChange:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.page,r=t.status,i;this.pages.every(function(e){return e.loadStatus===c.a.PAGE_LOAD_STATUS.ready})&&(this.handlePagesOverlays(),this.handleAnimationState(),this.onCompletelyReady()),this.onPageStatusChange(n.uuid,r)}})}t.a=g},function(e,t,n){"use strict";var r=n(0),i=n(122);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){Object.assign(e.prototype,{setFontColor:function e(t,n){this.changeElementState("setFontColor",t,!0,n)},setFontSize:function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t.size;a*=n.i(i.a)(),this.changeElementState("setFontSize",o({},t,{size:a}),!1,r)},setTextAlign:function e(t){this.changeElementState("setTextAlign",t,!1,!0)},setCapitalize:function e(t){this.changeElementState("setCapitalize",t,!1,!0)},setUnderline:function e(t){this.changeElementState("setUnderline",t,!1,!0)},setLetterSpacing:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.changeElementState("setLetterSpacing",t,!1,n)},setLineHeight:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.changeElementState("setLineHeight",t,!1,n)},setFont:function e(t){var i=this;n.i(r.y)(t.font).then(function(){i.changeElementState("setFont",t,!1,!0)})},setBold:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.changeElementState("setBold",t,!1,n)},setItalic:function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.changeElementState("setItalic",t,!1,n)},getFontSize:function e(){return Math.round(this.selectedElement.fontSize/n.i(i.a)())},getFontSelectedProperties:function e(){if(!this.selectedElement||"textElement"!==this.selectedElement.type)throw new Error("Can only retrieve selection properties for text element");return this.selectedElement.getFontSelectedProperties()},typeCharacter:function e(t){if(!this.selectedElement||"textElement"!==this.selectedElement.type)throw new Error("Can only type into text element");return this.selectedElement.typeCharacter(t)}})}t.a=s},function(e,t,n){"use strict";var r=n(24);function i(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,u,"next",e)}function u(e){i(a,r,o,s,u,"throw",e)}s(void 0)})}}function a(e){Object.assign(e.prototype,{playAll:function e(){var t=r.a.findAll(this.pages,function(e){return e.isAnimatedElement});this.isPlayingNow=!0,this.selectElement({designElement:null}),t.forEach(function(e){e.play()})},stopAll:function e(){var t=r.a.findAll(this.pages,function(e){return e.isAnimatedElement});this.isPlayingNow=!1,t.forEach(function(e){e.stop()})},preloadAll:function e(){var t,n=r.a.findAll(this.pages,function(e){return e.isAnimatedElement}).reduce(function(e,t){var n=t.preload.promise;return n&&e.push(n),e},[]);return n.length?Promise.all(n):Promise.reject("Where are no elements to play")},handleAnimationState:function(){var e=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(n){for(;;)switch(n.prev=n.next){case 0:return t=r.a.some(this.pages,function(e){return e.isAnimatedElement}),this.toggleLogoLabels(t),n.prev=2,n.next=5,this.preloadAll();case 5:this.onPlayabilityChange(!0),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),this.onPlayabilityChange(!1);case 11:case"end":return n.stop()}},e,this,[[2,8]])}));function t(){return e.apply(this,arguments)}return t}()})}t.a=a},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var r={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27,BACKSPACE:8,DELETE:46,COMMAND:91,SHIFT:16,CTRL:17,Z:90,Y:89},i=[r.COMMAND,r.SHIFT,r.CTRL]},function(e,t,n){"use strict";var r=n(5),i=n(25),o=n(1),a=n(2),s=n(3),u=n(44),l=n(11),c=n(100),f=n(21),h=n(31),p=n(4),d=n(9),g=n(16),v=n(46),m=n(33);function y(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)})}}function b(e){var t=e.inventoryData,n=e.page;if(t.isBackground2&&n.getBackground()&&n.getBackground().locked)throw p.a.dispatch(s.a.ELEMENT_SELECTED,{designElement:n.getBackground()}),new Error(u.a.REPLACE_LOCKED_BACKGROUND)}function w(e){return _.apply(this,arguments)}function _(){return(_=E(regeneratorRuntime.mark(function e(t){var r,i,o,a,s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return r=t.page,i=t.previewPath,o=t.position,a=t.width,s=t.height,l.next=3,n.i(c.a)("dummyElement",{position:o,width:a,height:s,previewPath:i});case 3:return u=l.sent,d.a.addPageElements(r,[u]),l.abrupt("return",u);case 6:case"end":return l.stop()}},e,this)}))).apply(this,arguments)}function P(e){var t=e.page,n=e.dummyElement;n&&d.a.removeElement(t.uuid,n.uuid)}function S(e){return"templateElement"===e.type?o.a.ITEM_LIKE_TEMPLATE_TYPES.includes(e.templateType)?"itemLikeTemplateElement":"templateElement":"textElement"===e.type&&e.stickedImageData?"textElementMask":"regularElement"}var A={templateElement:function(){var e=E(regeneratorRuntime.mark(function e(t){var r,i,o,u,c,f,h,g;return regeneratorRuntime.wrap(function e(v){for(;;)switch(v.prev=v.next){case 0:return r=t.inventoryData,i=t.page,d.a.clearPage(i),v.next=4,w({page:i,previewPath:r.src||r.previewPath,position:{top:0,left:0},width:i.width,height:i.height});case 4:return v.next=6,n.i(l.a)(r.type,r);case 6:return o=v.sent,window.SELECTION_LOCK=!0,u=o.realPageRatio,c=o.elements,d.a.setPageElements(i,c),f=n.i(a.a)("scaleRatio"),i.elements.filter(function(e){return!e.isBackgroundElement()}).forEach(function(e){var t=f*u/100;e.scale(t),e.scalePosition(t),"textElement"===e.type&&e.setFontSize({size:e.fontSize*u})}),p.a.dispatch(s.a.SET_SCALE,f),v.next=15,w({page:i,previewPath:r.src||r.previewPath,position:{top:0,left:0},width:i.width,height:i.height});case 15:return h=v.sent,i.templateId=o.id,g=c.map(function(e){return e.mounted()}),v.next=20,Promise.all(g);case 20:return P({page:i,dummyElement:h}),window.SELECTION_LOCK=!1,p.a.dispatch(s.a.SAVE_STATE,{type:s.a.PAGE_REPLACE_ELEMENTS,meta:{id:o.id},pageUuid:i.uuid}),v.abrupt("return",null);case 24:case"end":return v.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),itemLikeTemplateElement:function(){var e=E(regeneratorRuntime.mark(function e(t){var r,i,o,s,u,c,p,g,v,y,E,b,_,S,A,O;return regeneratorRuntime.wrap(function e(C){for(;;)switch(C.prev=C.next){case 0:return r=t.inventoryData,i=t.page,o=t.position,window.SELECTION_LOCK=!0,r.elements.forEach(function(e){return e.isSelectable=!1}),s=n.i(a.a)("scaleRatio"),u=o.width/r.pixelWidth,(c=i.getDropPosition(o)).left*=i.width,c.top*=i.height,C.next=10,w({page:i,previewPath:r.src,position:c,width:r.width*u,height:r.height*u});case 10:return p=C.sent,C.next=13,n.i(l.a)(r.type,r);case 13:return g=C.sent,v=g.elements,y=g.id,E=n.i(a.a)("scaleRatio"),_=u*(b=E/s),v.forEach(function(e){if(e.isBackground2=!1,e.scale(_),"textElement"===e.type){var t=e.fontSize;e.setFontSize({size:t*u/(s/100)})}e.scalePosition(_),e.setPosition({left:e.position.left+c.left*b,top:e.position.top+c.top*b})}),d.a.addPageElements(i,v),S=v.map(function(e){return e.mounted({hasTrustedDimensions:!0})}),C.next=24,Promise.all(S);case 24:return(A=v.every(m.b))&&v.forEach(function(e){return n.i(m.c)({page:i,designElement:e})}),P({page:i,dummyElement:p}),window.SELECTION_LOCK=!1,v.forEach(function(e){return e.isSelectable=!0}),i.addTemplateLikeElement(y),C.next=32,n.i(f.a)(v);case 32:return O=C.sent,d.a.dropGroupElement(O,i),C.abrupt("return",h.a.makePersistGroup(O,i,{stateless:!0,templateType:r.templateType}));case 35:case"end":return C.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),textElementMask:function(){var e=E(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function e(o){for(;;)switch(o.prev=o.next){case 0:return n=t.inventoryData,r=t.page,o.next=3,A.regularElement(t);case 3:return(i=o.sent).el.style.opacity=0,o.next=7,i.mounted();case 7:return i.select(),i.blur(),i.stickedImageData=n.stickedImageData,o.abrupt("return",v.a.createFrameFrom(i,r));case 11:case"end":return o.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),regularElement:function(){var e=E(regeneratorRuntime.mark(function e(t){var i,o,u,l,f,h,v;return regeneratorRuntime.wrap(function e(y){for(;;)switch(y.prev=y.next){case 0:return i=t.inventoryData,o=t.page,u=t.position,y.next=3,n.i(c.a)(i.type,i);case 3:return l=y.sent,n.i(m.c)({page:o,designElement:l}),r.a.log("Arbiter: "+l.type+" created"),f=o.getDropPosition(u),(h=o.getBackground())&&n.i(g.c)(h,!0,o),d.a.dropElementTo(o,l,f,null),l.isBackgroundElement()||l.scale(1/(n.i(a.a)("scaleRatio")/100)),"textElement"===l.type&&l.selectAllText(),"svgElement"===l.type&&(v=function e(){var t;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).designElement===l&&(l.el&&(n.i(m.c)({page:o,designElement:l}),p.a.dispatch(s.a.ELEMENT_SELECTED,{designElement:l})),p.a.unsubscribe(s.a.ELEMENT_MOUNTED,e))},p.a.subscribe(s.a.ELEMENT_MOUNTED,v)),y.abrupt("return",l);case 14:case"end":return y.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()};function O(e){var t=e.inventoryData,n=e.dimensions,r;return"templateElement"===t.type&&t.templateType&&(t.allowToIgnoreTemplateScaleRatio=!0),"templateElement"!==t.type?(t.width=n.width,t.height=n.height,t.fontSize=n.fontSize,t.lowQualitySrc=n.lowQualitySrc):(t.pixelWidth&&(t.width=t.pixelWidth),t.pixelHeight&&(t.height=t.pixelHeight)),t}var C=function(){var e=E(regeneratorRuntime.mark(function e(){var t,n,o,a,s,u,l,c,f=arguments;return regeneratorRuntime.wrap(function e(h){for(;;)switch(h.prev=h.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},n=t.inventoryId,o=t.dimensions,a=t.position,s=t.page,u=t.pageNumber,r.a.log("Arbiter: inventory data"),b({inventoryData:l=O({inventoryData:l=i.a.getOne({id:n,pageNumber:u}),dimensions:o,page:s}),page:s}),c=S(l),h.abrupt("return",A[c]({inventoryData:l,page:s,position:a}));case 8:case"end":return h.stop()}},e,this)}));return function t(){return e.apply(this,arguments)}}();t.a={dropElement:C}},function(e,t,n){"use strict";var r=n(49),i=n(0),o=n(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=p(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var m=o.a.PAGE_OVERLAY_CHILD_TYPES.GRID_OVERLAY,y=o.a.GRID_OVERLAY_COLUMNS,E=o.a.GRID_OVERLAY_ROWS,b=function(e){function t(e){var n;return s(this,t),(n=c(this,d(t).call(this,e))).type=m,n}return g(t,e),l(t,[{key:"getTableContent",value:function e(){var t=n.i(i.V)(E).map(function(){var e=n.i(i.V)(y,"<td></td>");return"<tr>".concat(e.join(""),"</tr>")});return"<table>".concat(t.join(""),"</table>")}},{key:"getElement",value:function e(){var n=h(d(t.prototype),"getElement",this).call(this);return n.innerHTML=this.getTableContent(),n}}],[{key:"shouldShowOnPage",value:function e(n){var r=h(d(t),"shouldShowOnPage",this).call(this,n),i=n.elements.some(function(e){return e.cropping});return n.selected&&!i&&r}}]),t}(r.a);t.a=b},function(e,t,n){"use strict";var r=n(49),i=n(6),o=n(18),a=n(2),s=n(4),u=n(3),l=n(1);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,n,r){var i=m(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(r):o.value}})(e,t,n||e)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var w=l.a.PAGE_OVERLAY_CHILD_TYPES.LOGO_LABEL,_=l.a.PAGE_OVERLAY_CHILD_MAX_Z_INDEX,P=function(e){function t(e){var r;return f(this,t),(r=d(this,y(t).call(this,e))).type=w,r.zIndex=_,r.clickable=!0,r.scale=n.i(a.a)("logoLabelsScale"),r}return E(t,e),p(t,[{key:"onLogoLabelClick",value:function e(t){s.a.dispatch(u.a.LOGO_LABEL_CLICK,{eventData:t})}},{key:"getElement",value:function e(){var r=n.i(a.a)("logoLabelClassName"),i=n.i(a.a)("logoLabelsScale"),s=v(y(t.prototype),"getElement",this).call(this);return s.classList.add(r),n.i(o.a)(s,{transform:"scale(".concat(i,")")}),s}},{key:"mount",value:function e(n){v(y(t.prototype),"mount",this).call(this,n),i.a.attachEvent(this.el,"click",this.onLogoLabelClick,!1,!0,!1,null,{useCapture:!0})}},{key:"update",value:function e(r){v(y(t.prototype),"update",this).call(this,r);var i=n.i(a.a)("logoLabelsScale");this.scale!==i&&(n.i(o.a)(this.el,{transform:"scale(".concat(i,")")}),this.scale=i)}},{key:"destroy",value:function e(){i.a.detachEvent("click",this.onLogoLabelClick,this.el,null,{useCapture:!0}),v(y(t.prototype),"destroy",this).call(this)}}]),t}(r.a);t.a=P},function(e,t,n){"use strict";var r=n(18),i=n(0),o=n(2),a="data-page-overlay",s="data-page-overlay-content",u={createPageOverlayWrapperNode:function e(t){var i=document.createElement("div");return i.setAttribute("data-page-overlay",!0),i.setAttribute("uuid",t),n.i(r.a)(i,{position:"absolute",zIndex:1e4,pointerEvents:"none"}),i},createPageOverlayContentNode:function e(t){var i=document.createElement("div");return i.setAttribute("data-page-overlay-content",!0),i.setAttribute("uuid",t),n.i(r.a)(i,{position:"relative",height:"100%"}),i},appendPageOverlayNode:function e(t,r){var i=n.i(o.a)("overlaysNode");t.appendChild(r),i.appendChild(t)},repositionPageOverlay:function e(t){var a=t.overlayData,s=t.el,u=n.i(o.a)("overlaysNode"),l=n.i(i.c)(u),c=n.i(i.c)(s);n.i(r.a)(a.overlayNode,{width:"".concat(c.width,"px"),height:"".concat(c.height,"px"),left:"".concat(c.left-l.left,"px"),top:"".concat(c.top-l.top,"px")})}};t.a=u},function(e,t,n){"use strict";function r(e,t,n){var r=t.width,i=t.height,o=t.x,a=t.y,s=r/i,u=e.width,l=e.height,c=e.x,f=e.y;return r+Math.abs(o)>u&&["ne","se"].includes(n.handle)?i=(r=u+c)/s:o>0&&["nw","sw"].includes(n.handle)?i=(r-=o)/s:i+Math.abs(a)>l&&["se","sw"].includes(n.handle)?r=(i=l+f)*s:a>0&&["nw","ne"].includes(n.handle)&&(r=(i-=a)*s),{x:o,y:a,width:r,height:i}}t.a=r},function(e,t,n){"use strict";var r=n(8);t.a={getCssFilterStyleString:function e(t){var n=[];return t.brightness&&n.push("brightness(".concat(t.brightness+100,"%)")),t.contrast&&n.push("contrast(".concat(t.contrast+100,"%)")),t.saturate&&n.push("saturate(".concat(t.saturate+100,"%)")),t.blur&&n.push("blur(".concat(t.blur/10,"px)")),n.join(" ")},getTintStyleString:function e(t,n){var r=t.rgb;return"linear-gradient(rgba(".concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(n,"), rgba(").concat(r.r,", ").concat(r.g,", ").concat(r.b,", ").concat(n,"))")},getTintConfig:function e(t){var i=r.b[t.tint+100];return{hex:i,rgb:n.i(r.c)(i)}}}},function(e,t,n){"use strict";var r=n(53),i=n(3);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){switch(e.type){case i.a.PAGE_MOVED:var t=[e.to,e.from];e.from=t[0],e.to=t[1];break;case i.a.PAGE_INSERTED:e.type=i.a.PAGE_REMOVED;break;case i.a.PAGE_REMOVED:e.type=i.a.PAGE_INSERTED}return e}function u(e,t,a){var u=a?e.curState:e.nextState,l=u.type,c=u.pageEvent,f=u.meta;if(c){l===i.a.PAGE_COPIED&&(l=i.a.PAGE_INSERTED);var h=o({type:l=l!==i.a.PAGE_COPIED?l:i.a.PAGE_INSERTED,meta:f},c);return a&&s(h),h}var p=t,d=e.nextState.arbiterState,g,v=n.i(r.a)(p,d).map(function(e){return{pageData:d.pages[e],index:e}});return{type:i.a.PAGE_EDITED,pages:v}}t.a={getInstruction:u,makeInstructionReverse:s}},function(e,t,n){"use strict";var r=n(21),i=n(31),o=n(125);function a(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}}function u(e){var t=e.getCoverElements(),n=t.map(function(e){return e.uuid}),r=[];if(!e.elements.length)return r;var i=e.elements.filter(function(e){return!n.includes(e.uuid)}).map(function(e){return e.serialize()});return r.push(i),t.reverse().forEach(function(t){var n=t.isBackgroundElement();if(t.width>e.width&&t.height>e.heigth&&!n)return r.unshift([t]);t.isCover=!0,t.isBackground=n,r.unshift([t.serialize()])}),r}t.a={resizeProject:function(){var e=s(regeneratorRuntime.mark(function e(t){var a,l,c,f,h,p=arguments;return regeneratorRuntime.wrap(function e(d){for(;;)switch(d.prev=d.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:{},l=t[0],c=l.width,f=l.height,h=t.map(function(e){return new Promise(function(){var t=s(regeneratorRuntime.mark(function t(s){var l,h,p,d,g,v;return regeneratorRuntime.wrap(function t(m){for(;;)switch(m.prev=m.next){case 0:return l=u(e),h=[],p=[],d=l.filter(function(e){return!!e.length}).map(function(e){var t=e[0].isCover,i=e[0].isBackground;return n.i(r.a)(e,"persistGroupElement",!1).then(function(e){return i?p.push(e.uuid):t&&h.push(e.uuid),e})}),m.next=6,Promise.all(d);case 6:g=m.sent,e.elements=g,e.redraw(),v=e.getRelativeCenterPositions(),e.setWidth(a.width),e.setHeight(a.height),e.elements.forEach(function(t){if(t.isGroup){n.i(o.a)({width:c,height:f},t,h.includes(t.uuid),p.includes(t.uuid),e);var r=v[t.uuid];e.setPositionRelativeToCenter(t,r.position),i.a.ungroupPersist(t,e,!1)}}),s();case 14:case"end":return m.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}),d.abrupt("return",Promise.all(h));case 4:case"end":return d.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},function(e,t,n){"use strict";var r=n(92);function i(e){if("maskElement"!==e.type)throw new Error("For now, shadow image supported only for masks");var t=e.getRatio(),n=e.getContainerPositionRect(),i=new r.a({id:e.stickedImageData.mediaId||e.stickedImageData.id,mediaAsset:e.stickedImageData.mediaAsset,width:e.imagePosition.width/t,height:e.imagePosition.height/t,position:{left:(e.imagePosition.x-n.left)/t,top:(e.imagePosition.y-n.top)/t},originalAngle:e.angle,src:e.stickedImageData.src}),o=document.createElement("div"),a=i.template();return o.innerHTML=a,i.setEl(o),i}t.a=i},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(1),a=n(14),s=n.n(a);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return Object.keys(e).some(function(e){return Math.abs(e-t)<o.a.SNAP_DUP_TRESHOLD})}function h(e){var t={},n={};return e.filter(function(e){return e.snaps=e.snaps.filter(function(e){if(e.x){var r=parseInt(e.x,10);f(t,r)?delete e.x:t[r]=e.x}if(e.y){var i=parseInt(e.y,10);f(n,e.y)?delete e.y:n[i]=e.y}return e.x||e.y}),e.snaps.length})}function p(e,t){return e.filter(function(e){var i=n.i(r.n)(t.center.x,e.x,o.a.SNAP_DISTANCE)||n.i(r.n)(t.center.y,e.y,o.a.SNAP_DISTANCE);return"center"===e.type?i:i||n.i(r.n)(t.left,e.x,o.a.SNAP_DISTANCE)||n.i(r.n)(t.right,e.x,o.a.SNAP_DISTANCE)||n.i(r.n)(t.top,e.y,o.a.SNAP_DISTANCE)||n.i(r.n)(t.bottom,e.y,o.a.SNAP_DISTANCE)||n.i(r.n)(t.center.x,e.x,o.a.SNAP_DISTANCE)||n.i(r.n)(t.center.y,e.y,o.a.SNAP_DISTANCE)})}var d=function(){function e(){u(this,e),this.snap=null}return c(e,[{key:"resolveSnap",value:function e(t,n,r,a){var u=[],l=[t].concat(t.elements),c=r.querySelectorAll("[uuid]"),f=c[c.length-1],d;if(f){var g=f.getAttribute("uuid");if(g){var v=[];d=s.a.get(g),(v=(d.children||[]).map(function(e){return e.uuid})).push(g),l=l.filter(function(e){return-1===v.indexOf(e.uuid)})}}if(l.forEach(function(e){e.toggleHighlight&&!e.cropping&&e.toggleHighlight(!1,!1);var t=p(e.getSnaps(),n);t.length&&u.push({element:e,coords:e.getBounds(),snaps:t,label:e.uuid})}),d&&d._dragMode===o.a.AXIS_ATTACHED_DRAG_MODE){var m=d.getSnapsFromCoords(d.oldBounds);(m=m.filter(function(e){var t;return void 0!==e[d.ignoredDragAxis]&&"center"!==e.type})).length&&u.unshift({coords:d.oldBounds,snaps:m,label:"self"})}u=h(u),i.a.clearSnaps(),u.forEach(function(e){var t={label:e.label};i.a.showSnapFor(e.coords,e.snaps,n,t)});var y=r;if(a&&(y=a),y.removeAttribute("data-snapped-x"),y.removeAttribute("data-snapped-y"),u.length&&"self"!==u[0].label){var E=u[0].snaps[0];E.x?y.setAttribute("data-snapped-x",n.left):E.y&&y.setAttribute("data-snapped-y",n.top),u[0].element&&u[0].element.toggleHighlight&&!u[0].element.cropping&&u[0].element.toggleHighlight(!0,!1,!1)}}}]),e}();t.a=new d},function(e,t,n){"use strict";var r=n(2),i=495616;t.a=function(){var e=100/n.i(r.a)("scaleRatio"),t=n.i(r.a)("pageHeight")*e,i,o=n.i(r.a)("pageWidth")*e*t/495616;return o<1?1:o}},function(e,t,n){"use strict";var r=n(8),i=n(0),o=n(1);function a(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,u,"next",e)}function u(e){a(o,r,i,s,u,"throw",e)}s(void 0)})}}function u(e){return l.apply(this,arguments)}function l(){return(l=s(regeneratorRuntime.mark(function e(t){var a,s,u;return regeneratorRuntime.wrap(function e(l){for(;;)switch(l.prev=l.next){case 0:return a=[],t.mediaAsset?a=[o.a.VIEW_MODES.thumb,o.a.VIEW_MODES.screen].map(function(e){return n.i(i.u)(t.mediaId||t.dphId||t.id,{viewMode:e,session:!0})}):(s=n.i(r.e)(t.src,o.a.IMAGE_WIDTH),a=[s]),u=a.map(r.f),l.abrupt("return",Promise.all(u));case 4:case"end":return l.stop()}},e,this)}))).apply(this,arguments)}t.a=u},function(e,t,n){"use strict";var r=n(2),i=n(52),o=n(0);function a(e){var t=n.i(o.c)(e.el),r=s(e),a=i.a.getCoordsArea(t);return parseInt(r)===parseInt(a)}function s(e){var t=n.i(r.a)("scrollableNode"),a=n.i(o.c)(t),s=n.i(o.c)(e.el);return i.a.getAreaOfCoordsIntersection(s,a)}function u(e){var t=n.i(r.a)("scrollableNode"),i=n.i(o.c)(t),a=n.i(o.c)(e.el);return n.i(o.W)([i.top,i.bottom],[a.top,a.bottom])}function l(e,t){if(1===e.length)return e[0];var i=n.i(r.a)("scrollableNode"),a=n.i(o.c)(i),l=s(t),c,f=e.filter(u).filter(function(e){var t;return s(e)>l});if(!f.length)return t;var h,p=n.i(o.c)(t.el).top<a.top,d=f[0];return p||(d=f.pop()),d}function c(e,t){var n=e.indexOf(t);if(-1===n)throw new Error("Cant find index of page");return n}function f(e,t,n){return e.splice(n,0,e.splice(t,1)[0]),e}t.a={getPageVisibilityArea:s,isPageInViewportArea:u,getPageToSelectOnScroll:l,getPageIndex:c,swapPagePosition:f,isPageFullyVisible:a}},function(e,t,n){"use strict";var r=n(0);function i(e,t,n,r,i){var u=e.width,l=e.height,c=i.width>=i.height?"width":"height",f=t.width/u,h=t.height/l,p=t.width/t.height,d=n?a:s;if(r)return o(t,i);var g=d(c,p,f,h,i),v=g/p;g>i.width&&"width"===c?g=d(c="height",p,f,h,i):v>i.height&&"height"===c&&(g=d(c="width",p,f,h,i));var m=g/t.width;t.scale(m,!0),t.scaleChildrenPositions(m)}function o(e,t){var i=t.width,o=t.height,a=n.i(r.U)(e,{left:0,top:0,width:i,height:o}),s=a.width/e.width;return e.scale(s),e.setPosition(a)}function a(e,t,n,r,i){var o=i.width,a=i.height,s;return"height"===e||t>1.1?t*(a*r):o*n}function s(e,t,n,r,i){var o=i.width,a=i.height,s;return"height"===e?o*n:t*(a*r)}t.a=i},function(e,t,n){"use strict";var r=n(68),i=n.n(r),o={path:"path",circle:"circle",ellipse:"ellipse"},a=["m","h","v","h","z"],s=["g","title"];function u(e){var t=Array.from(e.querySelectorAll("*")).filter(function(e){return!s.includes(e.tagName)});return 1===t.length&&t[0]}function l(e){var t;return e.length===a.length&&a.every(function(t,n){var r;return((e[n]||{}).code||"").toLowerCase()===t})}function c(e){var t=e.getAttribute("stroke"),n=e.getAttribute("fill");return!!t&&t!==n}function f(e){var t=e.getAttribute("d");if(!t||e.tagName!==o.path)return!1;var n=i()(t);return!c(e)&&l(n)}function h(e){var t;return[o.circle,o.ellipse].includes(e.tagName)&&!c(e)}function p(e){if(e){var t=u(e);return!!t&&(f(t)||h(t))}}t.a={isShape:p}},function(e,t,n){"use strict";var r=n(1),i=Math.PI/180,o=r.a.SNAP_DEGREE*i;t.a=function(e){var t=Math.round(e/o),n=t*o-e,r;return n>=-i&&n<=i&&(e=t*o),e}},function(e,t,n){"use strict";var r=n(8),i=n(22),o=n(0),a=n(57),s=n.n(a),u=n(70),l=n.n(u);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.e=v,t.f=m,t.b=y,t.c=E,t.d=b,t.g=w,t.a=_,t.h=P;var f=s.a.prepare(4),h="#0353a3",p=.5;function d(e){return e.reduce(function(e,t){return e.push(t[1]),e},[])}function g(e){for(var t=[],n=0;n<1;n+=.05)t.push(f(e,n));return t}function v(){var e,t='<feFuncG type="table" tableValues=""></feFuncG>',r='<feFuncB type="table" tableValues=""></feFuncB>',a='\n\t\t<feComponentTransfer result="crossProcess" color-interpolation-filters="sRGB">\n\t\t\t'.concat('<feFuncR type="table" tableValues=""></feFuncR>',"\n\t\t\t").concat(t,"\n\t\t\t").concat(r,"\n\t\t</feComponentTransfer>\n\t"),s=n.i(o.a)(19),u=n.i(i.g)("filter",{id:s,"canvas-filters":!0});return u.innerHTML=a,u}function m(){var e=n.i(o.a)(19),t=n.i(i.g)("radialGradient",{id:e,"vignette-filter":!0,cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"});return t.innerHTML='\n\t\t<stop offset="0.53" stop-opacity="0"></stop>\n\t\t<stop offset="1" stop-color="#000000" stop-opacity="0" mutable-stop="true"></stop>\n\t',t}function y(e,t){if(0!==t){var i=n.i(r.a)(t),o=d(i.red),a=d(i.green),s=d(i.blue);e.querySelector("feFuncR").setAttribute("tableValues",g(o).join(" ")),e.querySelector("feFuncG").setAttribute("tableValues",g(a).join(" ")),e.querySelector("feFuncB").setAttribute("tableValues",g(s).join(" "))}else Array.from(e.querySelectorAll("feFuncR,feFuncG,feFuncB")).forEach(function(e){e.removeAttribute("tableValues")})}function E(e,t){var n=.7,r=.7*t/100;e.querySelector("[mutable-stop]").setAttribute("stop-opacity",r)}function b(){var e=n.i(o.a)(19),t=n.i(i.g)("linearGradient",{id:e,"tint-mask":!0});return t.innerHTML='\n\t\t<stop offset="5%" stop-color="" stop-opacity=""></stop>\n\t\t<stop offset="95%" stop-color="" stop-opacity=""></stop>\n\t',t}function w(e,t){var r=t.querySelector("clipPath");return n.i(i.g)("rect",c({width:"100%",height:"100%",fill:"none",clipPath:"url('#".concat(r.getAttribute("id"),"')")},e,!0))}function _(e,t){var r;switch(e.tagName){case"path":var o=l()(e.getAttribute("d")).scale(t.x,t.y).toString();e.setAttribute("d",o),r=e;break;case"circle":var a=parseFloat(e.getAttribute("cx")),s=parseFloat(e.getAttribute("cy")),u=parseFloat(e.getAttribute("r")),c=u*t.x,f=u*t.y,h;r=n.i(i.g)("ellipse",{cx:a+(c-u),cy:s+(f-u),rx:c,ry:f});break;case"rect":var p=parseFloat(e.getAttribute("width")),d=parseFloat(e.getAttribute("height"));e.setAttribute("width",p*t.x),e.setAttribute("height",d*t.y),r=e}return r}function P(){var e='<feGaussianBlur in="SourceAlpha" stdDeviation="3"></feGaussianBlur>\n\t\t<feOffset dy="2" dx="3"></feOffset>\n\t\t<feComposite in2="SourceAlpha" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>\n\t\t<feFlood flood-color="'.concat(h,'" flood-opacity="').concat(p,'"></feFlood>\n\t\t<feComposite in2="shadowDiff" operator="in"></feComposite>\n\t\t<feComposite in2="SourceGraphic" operator="over" result="firstfilter"></feComposite>'),t='<feGaussianBlur in="firstfilter" stdDeviation="3"></feGaussianBlur>\n\t\t<feOffset dy="-2" dx="-3"></feOffset>\n\t\t<feComposite in2="firstfilter" operator="arithmetic" k2="-1" k3="1" result="shadowDiff"></feComposite>\n\t\t<feFlood flood-color="'.concat(h,'" flood-opacity="').concat(p,'"></feFlood>\n\t\t<feComposite in2="shadowDiff" operator="in"></feComposite>\n\t\t<feComposite in2="firstfilter" operator="over"></feComposite>'),r=n.i(o.a)(19),a=n.i(i.g)("filter",{id:r,x0:"-50%",y0:"-50%",width:"200%",height:"200%","data-shadowFilter":!0});return a.innerHTML="".concat(e).concat(t),a}},function(e,t,n){"use strict";t.a=function(e,t,n){var r=[e[n],e[t]];return e[t]=r[0],e[n]=r[1],e}},function(e,t,n){"use strict";t.a=function(e){return e.map(function(e,t){return e.innerId=t,e})}},function(e,t,n){n(55),e.exports=n(56)}])})},199:function(e,t,n){e.exports=n(1785)},207:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(920)),o="UserAction";t.userActionCreator=i.default("UserAction")},255:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(319),o=n(320),a=n(508),s=n(91),u=n(1646),l=n(765);function c(e){return"templateElement"===e.type}function f(e){return p(e.project)>0&&h(e.pageLoadingStatus)}function h(e){return Object.values(e).every(function(e){return e===o.LoadingStatus.Loaded})}function p(e){return e.pages.reduce(function(e,t){return e+t.animationDuration},0)}function d(e){return e.project.pages.find(function(t){return t.uuid===e.currentPageID})}function g(e){var t,n=E(e,!0).selectionFrameModel.selectedElement;return n?n.serialize():void 0}function v(e){return{project:e.project,currentPageID:e.currentPageID,width:e.width,height:e.height,containerWidth:e.containerWidth,containerHeight:e.containerHeight,pageMargin:e.pageMargin,backgroundColor:e.backgroundColor,selectionFrame:{selectedUUIDs:e.selectedUUIDs?e.selectedUUIDs:[]},snaps:[],timeline:{currentFrame:void 0,isPlaying:!1},multiSelectionProps:{isVisible:!1,width:0,height:0,top:0,left:0},highlightedIDs:[],hoveredElementUuid:"",elementState:e.elementState,pageLoadingStatus:{},zoom:1,scroll:{x:0,y:0},hasPageShadow:!0,placeholderImageSrc:e.placeholderImageSrc,tryOnElementUuid:e.tryOnElementUuid,mode:i.WorkspaceMode.Initial}}function m(e){return e.pageMargin}function y(e){return{project:e.project,width:e.width,height:e.height,containerWidth:e.containerWidth,containerHeight:e.containerHeight,pageMargin:e.pageMargin,backgroundColor:e.backgroundColor,selectedUUIDs:e.selectionFrame.selectedUUIDs,currentPageID:e.currentPageID,pageLoadingStatus:e.pageLoadingStatus,elementState:e.elementState,selectionFrame:e.selectionFrame,version:2,zoom:e.zoom,scroll:e.scroll,placeholderImageSrc:e.placeholderImageSrc,tryOnElementUuid:e.tryOnElementUuid}}function E(e,t){return new a.Workspace(v(e),t)}function b(e,t){return void 0===t&&(t=1),{width:Math.max(e.el.parentElement.clientWidth,e.pageWidth*t+2*e.pageMargin),height:Math.max(e.el.parentElement.clientHeight,e.pageWidth*t+2*e.pageMargin)}}function w(e){var t=s.generateUuid(),n=e.pageWidth,i=e.pageHeight,o=e.pageMargin,a=e.el,u=b(e);return E(r({project:{pageWidth:n,pageHeight:i,pages:[{elements:[],uuid:t}],v2:!0},currentPageID:t,backgroundColor:null,selectedUUIDs:[],zoom:1,scroll:{x:0,y:0},selectionFrame:null,containerWidth:a.parentElement.clientWidth,containerHeight:a.parentElement.clientHeight,pageMargin:o,placeholderImageSrc:e.placeholderImageSrc,tryOnElementUuid:null},u))}function _(e){var t=e;if(!t.v2)return u.convertProjectToV2(t);if(l.SchemaValidator.isProjectValid(t))return t;throw new Error("Attempt to load invalid project")}t.isProtoTemplateElementProps=c,t.canPlay=f,t.areAllPagesLoaded=h,t.getProjectDuration=p,t.currentPage=d,t.selectedElement=g,t.mapWorkspacePropsToData=v,t.getPageOffset=m,t.mapWorkspaceDataToProps=y,t.createWorkspace=E,t.calcWorkspaceSize=b,t.createInitialState=w,t.convertToValidProject=_},298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(401),i=n(91);function o(e,n){return t.reduceProject(e,function(e,t){return n(t)?e.concat(t):e},[])}function a(e,n){return t.reduceElement(e,function(e,t){return n(t)?e.concat(t):e},[])}t.traverseProject=function(e,n){e.pages.forEach(function(e){t.traversePage(e,n)})},t.traversePage=function(e,t){function n(e,r){t(e,r),(e.elements||[]).forEach(function(t){return n(t,e.uuid)})}e&&e.elements.forEach(function(t){return n(t,e.uuid)})},t.traverseElement=function(e,t){function n(e,r){t(e,r),(e.elements||[]).forEach(function(t){return n(t,e.uuid)})}n(e,null)},t.reduceProject=function(e,n,r){var i=r;return t.traverseProject(e,function(e){i=n(i,e)}),i},t.filterProject=o,t.flattenProject=function(e){return o(e,i.not(r.isGroupElement))},t.findInProject=function(e,t){return o(e,t)[0]},t.reducePage=function(e,n,r){var i=r;return t.traversePage(e,function(e){i=n(i,e)}),i},t.filterPage=function(e,n){return t.reducePage(e,function(e,t){return n(t)?e.concat(t):e},[])},t.flattenPage=function(e){return t.filterPage(e,i.not(r.isGroupElement))},t.reduceElement=function(e,n,r){var i=r;return t.traverseElement(e,function(e){i=n(i,e)}),i},t.filterElement=a,t.flattenElement=function(e){return a(e,i.not(r.isGroupElement))}},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91);function i(e){return e.width<1||e.height<1}t.hasZeroDimensions=i,t.closestAnimationValue=function(e,n){var i=r.first(e),o=i.frameTo,a=i.valueFrom,s=i.valueTo;return n>o?s:1===e.length?a:t.closestAnimationValue(e.slice(1),n)},t.isActionActive=function(e){return function(t){var n=t.frameFrom,r=t.frameTo;return n<=e&&e<=r}}},301:function(e,t,n){"use strict";function r(e){var t=e.left,n=e.top,r,i;return{x:t+e.width/2,y:n+e.height/2}}function i(e){var t,n;return{x:e.width/2,y:e.height/2}}function o(e){var t=e.flipVertical,n;return{scaleX:e.flipHorizontal,scaleY:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getKonvaPosition=r,t.getKonvaOffset=i,t.getKonvaFlip=o},319:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Initial=0]="Initial",e[e.Rotating=1]="Rotating",e[e.Resizing=2]="Resizing",e[e.Moving=3]="Moving"}(r=t.WorkspaceMode||(t.WorkspaceMode={}))},320:function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Initial="initial",e.Pending="pending",e.Loading="loading",e.Loaded="loaded"}(i=t.LoadingStatus||(t.LoadingStatus={})),t.PageLoadingStatusPriority=((r={})[i.Initial]=1,r[i.Pending]=2,r[i.Loading]=3,r[i.Loaded]=4,r)},321:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),s=n(76),u=n(379),l=n(378),c=n(623),f=n(1095);function h(e){var t=e.uuid,n=e.hitRegionEnabled,i=e.hitRegionPosition,o=e.hitRegionSize,a=i||{x:0,y:0},u=a.x,l=a.y;return{attrs:r({x:u,y:l,key:"hitRegion",id:t,visible:n},o),className:s.KonvaTypes.Rect}}function p(e,t){var n=e.attrs,i=n.width,o=n.height,a=n.x,s=void 0===a?0:a,u=n.y,l=void 0===u?0:u;return r({},e,{attrs:r({},e.attrs,{x:s-t.x,y:l-t.y,width:i+2*t.x,height:o+2*t.y})})}function d(e){var t=e.highlighted,n=e.highlightPosition,i=e.highlightSize,h=e.locked,p=e.selected,d=e.isBackground,m=n||{x:0,y:0},y=m.x,E=m.y,b=i.width,w=i.height,_=[u.SelectionFrameControlName.NE,u.SelectionFrameControlName.NW,u.SelectionFrameControlName.SE,u.SelectionFrameControlName.SW],P=new l.Rect({x:0,y:0},b,w,0),S=h&&!p,A=[];S&&(A=_.map(function(e){var t;return g({point:c.rectPointFromControlName(P,e),id:e})}));var O=[];S&&(O=_.map(function(e){var t;return v({point:c.rectPointFromControlName(P,e),id:e})}));var C,x=[];return d&&!p&&(x=[f.backgroundLabelToKonva(e,.2)]),{attrs:{key:"highlight-group",id:"highlight-group",visible:t},className:s.KonvaTypes.Group,children:o([{attrs:r({key:"highlight"},i,{dash:a.HIGHLIGHT_DASH,fill:a.HIGHLIGHT_FILL_COLOR,stroke:a.HIGHLIGHT_STROKE_COLOR,strokeWidth:a.HIGHLIGHT_STROKE_WIDTH,visible:t,opacity:.5,listening:!1,image:null,y:E,x:y}),className:s.KonvaTypes.Rect}],A,O,x)}}function g(e){var t=e.point,n=e.id;return{attrs:r({key:"hovered_locked_circle_"+n,id:n,name:n,x:t.x,y:t.y,radius:a.LOCKED_SELECTION_CONTROL_SIZE/2,fill:"transparent",stroke:a.LOCKED_SELECTION_CONTROL_LOCK_ICON_FILL,strokeWidth:a.LOCKED_SELECTION_CONTROL_STROKE_WIDTH,opacity:.2},a.SELECTION_CONTROL_SHADOW_PARAMS),className:s.KonvaTypes.Circle}}function v(e){var t=e.point,n=e.id;return{attrs:{key:"hovered_locked_lock_"+n,id:n,name:n,x:t.x-5,y:t.y-7,data:a.LOCKED_SELECTION_CONTROL_LOCK_ICON_PATH,fill:a.LOCKED_SELECTION_CONTROL_LOCK_ICON_FILL,opacity:.2,scale:{x:1.4,y:1.4}},className:s.KonvaTypes.Path}}function m(e){return e+"-image"}function y(e){return e+"-video"}function E(e,t){void 0===t&&(t={});var n=e.width,r=e.height,i=e.opacity,o=e.visible;return{attrs:{name:a.IMAGE_NAME,key:"image",height:r,width:n,opacity:i,visible:o,listening:!1,image:null},className:s.KonvaTypes.Image}}function b(e){var t=e.selectionBorderPosition,n=e.selectionBorderSize,i=e.inGroupSelected,o=t||{x:0,y:0},u=o.x,l=o.y;return{attrs:r({x:u,y:l,key:"border"},n,{dash:a.HIGHLIGHT_DASH,stroke:a.SELECTION_CONTROL_ACCENT_COLOR,strokeWidth:a.HIGHLIGHT_STROKE_WIDTH,visible:i,opacity:.5,listening:!1}),className:s.KonvaTypes.Rect}}function w(e){return{hitRegionPosition:{x:e.hitRegionPosition.x-a.SELECTION_FRAME_HIT_REGION_MARGIN,y:e.hitRegionPosition.y-a.SELECTION_FRAME_HIT_REGION_MARGIN},hitRegionSize:{width:e.hitRegionSize.width+2*a.SELECTION_FRAME_HIT_REGION_MARGIN,height:e.hitRegionSize.height+=2*a.SELECTION_FRAME_HIT_REGION_MARGIN}}}function _(e,t){var n=e.uuid,r;return t.selectionFrame.selectedUUIDs.includes(n)}t.serializeHitRegionToKonva=h,t.addKonvaPadding=p,t.serializeHighlightToKonva=d,t.serializeLockedCircleControl=g,t.serializeLockedLockControl=v,t.imageUUID=m,t.videoUUID=y,t.serializeImageToKonva=E,t.serializeSelectionBorderToKonva=b,t.getMarginForHitRegion=w,t.isElementSelected=_},345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91);function i(e){var t=e.position,n=e.flipped,i=e.width,o=e.height,a=e.type,s=e.angle,u=e.originalAngle,l=e.id,c=e.uuid,f=e.innerId,h=e.templateAsset,p=e.mediaAsset,d=e.mediaId,g=e.opacity,v=e.isFreeItem,m=e.isBackground,y=e.isBackground2,E=e.locked,b=e.selected,w=e.isSharedProject,_=e.dphId,P=e.hasPermission;return{top:t?t.top:0,left:t?t.left:0,width:i||0,height:o||0,angle:s||0,originalAngle:u,id:l,uuid:c||r.generateUuid(),innerId:f,templateAsset:h,mediaAsset:p,mediaId:d,opacity:g||1,isFreeItem:v,flipHorizontal:n?n.horizontal:1,flipVertical:n?n.vertical:1,isBackground:y,type:a,locked:!!E,selected:!!b,isSharedProject:w,dphId:_,hasPermission:P,animations:[]}}t.mapElementBasePropsToDomain=i},347:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1093),o=n(752),a=n(321),s=n(552);function u(e,t){var n=e.uuid,r=t.selectionFrame,o,a=t.multiSelectionProps.isVisible,s;return!(i.hasTemporaryGroupSelector(r)&&r.selectedUUIDs.includes(n))&&!a}function l(e,t){var n=t.highlightedIDs,r=t.selectionFrame,i=t.zoom,o=e.uuid,a=e.width,u=e.height,l=e.locked,c=e.isBackground,f=e.left,h=e.top,p=r.selectedUUIDs.includes(o),d=s.getCurrentPagePosition(t),g=d.left,v=d.top;return{highlighted:n.includes(o),highlightSize:{width:a,height:u},locked:l,selected:p,isBackground:c,pageX:g,pageY:v,elementX:g+f,elementY:v+h,zoom:i}}function c(e,t){var n={uuid:e.uuid,hitRegionSize:{width:e.width,height:e.height},hitRegionEnabled:u(e,t),hitRegionPosition:{x:0,y:0}};return a.isElementSelected(e,t)?r({},n,a.getMarginForHitRegion(n)):n}function f(e,t){return{selectionBorderSize:{width:e.width,height:e.height}}}function h(e,t){var n=e.uuid,r=t.selectionFrame.selectedUUIDs;return r.length>1&&r.includes(n)}t.elementEnabledSelector=u,t.elementHighlightedSelector=l,t.elementHitRegionSelector=c,t.elementSelectionBorderSelector=f,t.elementInGroupSelectedSelector=h,t.elementBaseViewPropsSelector=function(e,t){var n=e.uuid,r=e.flipHorizontal,i=e.flipVertical,a=e.currentFrame,s=e.visible,u=o.propGetterFactory(e,a);return{width:u("width"),height:u("height"),top:u("top"),left:u("left"),angle:u("angle"),opacity:u("opacity"),uuid:n,flipHorizontal:r,flipVertical:i,visible:s}}},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(128),i=function(){function e(e,t,n,i){void 0===i&&(i=0),this.position=e,this.width=t,this.height=n,this.angle=i;var o=r.midpoint(this.position,{x:this.position.x+t,y:this.position.y+n});this.nw=r.rotatePoint(e,i,o),this.ne=r.rotatePoint({x:e.x+t,y:e.y},i,o),this.sw=r.rotatePoint({x:e.x,y:e.y+n},i,o),this.se=r.rotatePoint({x:e.x+t,y:e.y+n},i,o)}return e.prototype.getVertices=function(){return[this.nw,this.sw,this.se,this.ne]},e.prototype.getEdges=function(){var e=this.position,t=e.x,n=e.y;return[[{x:t,y:n},{x:t+this.width,y:n}],[{x:t+this.width,y:n},{x:t+this.width,y:n+this.height}],[{x:t+this.width,y:n+this.height},{x:t,y:n+this.height}],[{x:t,y:n+this.height},{x:t,y:n}]]},e.prototype.getCenter=function(){return r.midpoint(this.nw,this.se)},e}();t.Rect=i},379:function(e,t,n){"use strict";var r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NW="croppingFrameExternalControlNW",e.NE="croppingFrameExternalControlNE",e.SW="croppingFrameExternalControlSW",e.SE="croppingFrameExternalControlSE"}(r=t.CroppingFrameExternalControlName||(t.CroppingFrameExternalControlName={})),function(e){e.NW="croppingFrameInternalControlNW",e.NE="croppingFrameInternalControlNE",e.SW="croppingFrameInternalControlSW",e.SE="croppingFrameInternalControlSE",e.N="croppingFrameInternalControlN",e.S="croppingFrameInternalControlS",e.W="croppingFrameInternalControlW",e.E="croppingFrameInternalControlE"}(i=t.CroppingFrameInternalControlName||(t.CroppingFrameInternalControlName={})),function(e){e.NW="selectionFrameControlNW",e.NE="selectionFrameControlNE",e.SW="selectionFrameControlSW",e.SE="selectionFrameControlSE",e.W="selectionFrameControlW",e.E="selectionFrameControlE",e.N="selectionFrameControlN",e.S="selectionFrameControlS"}(o=t.SelectionFrameControlName||(t.SelectionFrameControlName={}))},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85),i=n(895),o=n(896),a=["#ff0000","#ff0800","#ff0f00","#ff1700","#ff1f00","#ff2600","#ff2e00","#ff3600","#ff3d00","#ff4500","#ff4d00","#ff5400","#ff5c00","#ff6300","#ff6b00","#ff7300","#ff7a00","#ff8200","#ff8a00","#ff9100","#ff9900","#ffa100","#ffa800","#ffb000","#ffb800","#ffbf00","#ffc700","#ffcf00","#ffd600","#ffde00","#ffe500","#ffed00","#fff500","#fffc00","#faff00","#f2ff00","#ebff00","#e3ff00","#dbff00","#d4ff00","#ccff00","#c4ff00","#bdff00","#b5ff00","#adff00","#a6ff00","#9eff00","#96ff00","#8fff00","#87ff00","#80ff00","#78ff00","#70ff00","#69ff00","#61ff00","#59ff00","#52ff00","#4aff00","#42ff00","#3bff00","#33ff00","#2bff00","#24ff00","#1cff00","#14ff00","#0dff00","#05ff00","#00ff03","#00ff0a","#00ff12","#00ff19","#00ff21","#00ff29","#00ff30","#00ff38","#00ff40","#00ff47","#00ff4f","#00ff57","#00ff5e","#00ff66","#00ff6e","#00ff75","#00ff7d","#00ff85","#00ff8c","#00ff94","#00ff9c","#00ffa3","#00ffab","#00ffb3","#00ffba","#00ffc2","#00ffc9","#00ffd1","#00ffd9","#00ffe0","#00ffe8","#00fff0","#00fff7","#00ffff","#00f7ff","#00f0ff","#00e8ff","#00e0ff","#00d9ff","#00d1ff","#00c9ff","#00c2ff","#00baff","#00b2ff","#00abff","#00a3ff","#009cff","#0094ff","#008cff","#0085ff","#007dff","#0075ff","#006eff","#0066ff","#005eff","#0057ff","#004fff","#0047ff","#0040ff","#0038ff","#0030ff","#0029ff","#0021ff","#0019ff","#0012ff","#000aff","#0003ff","#0500ff","#0d00ff","#1400ff","#1c00ff","#2400ff","#2b00ff","#3300ff","#3b00ff","#4200ff","#4a00ff","#5200ff","#5900ff","#6100ff","#6900ff","#7000ff","#7800ff","#8000ff","#8700ff","#8f00ff","#9600ff","#9e00ff","#a600ff","#ad00ff","#b500ff","#bd00ff","#c400ff","#cc00ff","#d400ff","#db00ff","#e300ff","#eb00ff","#f200ff","#fa00ff","#ff00fc","#ff00f5","#ff00ed","#ff00e6","#ff00de","#ff00d6","#ff00cf","#ff00c7","#ff00bf","#ff00b8","#ff00b0","#ff00a8","#ff00a1","#ff0099","#ff0091","#ff008a","#ff0082","#ff007a","#ff0073","#ff006b","#ff0063","#ff005c","#ff0054","#ff004d","#ff0045","#ff003d","#ff0036","#ff002e","#ff0026","#ff001f","#ff0017","#ff000f","#ff0008","#ff0008"];function s(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function u(e,t){var n=e.width,r=e.height,i=t.width,o=t.height;return n/r>i/o?{x:(n-i*r/o)/2,y:0,width:i*r/o,height:r}:{x:0,y:(r-o*n/i)/2,width:n,height:o*n/i}}function l(e,t){var n=e.width,r=e.height,i=t.width,o=t.height;return n/r>i/o?{left:(n*o/r-i)/2,top:0,width:i,height:o}:{left:0,top:(r*i/n-o)/2,width:i,height:o}}function c(e,t,n){void 0===n&&(n=o.FitImageMode.Cover);var r=e.width,i=e.height,a=t.width,s=t.height,u;return(n===o.FitImageMode.Cover?r/i>a/s:r/i<a/s)?{width:r*s/i,height:s}:{width:a,height:i*a/r}}function f(e,t,n){return void 0===n&&(n=o.FitImageMode.Cover),c(e,t,n).width/e.width}function h(e){if(/^https?:\/\//.test(e)){var t=document.createElement("a");return t.href=e,t.hostname+":"+t.port}return window.location.hostname}function p(e){return!/^\//.test(e)&&window.location.hostname+":"+window.location.port!==h(e);var t,n}function d(e,t){var n;if("string"==typeof e&&(n=e,e=new Image),void 0===e)throw new i.ResourceLoadingError("Image with undefined src can not be loaded");return e.id=t,n||(n=e.getAttribute("src")),p(n)&&(e.crossOrigin=r.CROSS_ORIGIN),new Promise(function(t,o){return e.onload=function(){t(e)},n&&(e.src=n),e.onerror=function(){return o(new i.ResourceLoadingError("Cannot load image "+n))},e.complete&&0!==e.naturalHeight?t(e):e.getAttribute("src")?void setTimeout(function(){return t(e)},r.IMG_LOADING_TIMEOUT):t(e)})}function g(e){var t=document.createElement("video");return e?new Promise(function(n,i){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(){if(200===o.status){var a=o.response,s=URL.createObjectURL(a);p(e)&&(t.crossOrigin=r.CROSS_ORIGIN),t.src=s,t.setAttribute("data-string-src",e),n(t)}else i(new Error("Video load failed"))},o.onerror=function(e){i(e)},o.send()}):Promise.resolve(t)}function v(e){var t=a[e+100];return{hex:t,rgb:s(t)}}t.fitImageKonvaCropOptions=u,t.fitImageCropOptions=l,t.fitImageDimensions=c,t.fitImageDimensionsRatio=f,t.loadImage=d,t.loadVideo=g,t.getTintConfig=v},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(931);t.mouseOutAction=r.mouseOutAction,t.mouseOverAction=r.mouseOverAction,t.clickAction=r.clickAction,t.mouseUpAction=r.mouseUpAction,t.mouseDownAction=r.mouseDownAction,t.mouseMoveAction=r.mouseMoveAction;var i=n(1708);t.createKonvaEventSource=i.createKonvaEventSource},401:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(76),o=n(320);function a(e){return e.type===i.DesignElementType.VideoElement}function s(e){return e.type===i.DesignElementType.GroupElement}function u(e){return e.type===i.DesignElementType.MaskElement}function l(e){return e.originalType===i.DesignElementType.VideoElement}function c(e){return e.type===i.DesignElementType.ImageElement}function f(e){return e.type===i.DesignElementType.TextElement}function h(e){return void 0!==e.src}t.isVideoElement=a,t.isGroupElement=s,t.isMaskElement=u,t.isImageElementFromVideo=l,t.isImageElement=c,t.isTextElement=f,t.isPartialSourceableElement=h,t.mapProject=function(e){return function(t){return r({},t,{project:e(t.project)})}},t.mapPage=function(e){return function(t){return r({},t,{pages:t.pages.map(e)})}},t.mapDesignElement=function(e){return function(t){return r({},t,{elements:t.elements.map(e)})}},t.mapGroupElements=function(e){return function(t){return r({},t,{elements:t.elements.map(e)})}},t.isLoaded=function(e){return e.loadingStatus===o.LoadingStatus.Loaded},t.isInMask=function(e,t,n){return n.filter(u).some(function(t){return t.elements.some(function(t){var n=t.uuid;return e.uuid===n})})}},402:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1481),a=n(893),s=n(91),u=n(509),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.add=function(e){throw new o.NotImplementedError},t.prototype.find=function(e){if(this.props.uuid===e)return this},t.prototype.clone=function(){var e=s.deepCopy(this.props);return e.uuid=s.generateUuid(),e.isBackground=!1,u.createDesignElement(e)},t}(a.DesignElement);t.SingleElement=l},405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1148);t.combineEpics=r.combineEpics,t.combineMutators=r.combineMutators},414:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(1471);var i=n(1472);t.Shallow=i.OldShallow;var o=n(1742);t.Designer=o.Designer;var a=n(255);t.canPlay=a.canPlay,t.currentPage=a.currentPage,t.selectedElement=a.selectedElement;var s=n(1134);t.shouldMigrateData=s.shouldMigrateData,t.migrateData=s.migrateData;var u=n(1108);t.indexColors=u.indexColors;var l=n(765);t.schemaById=l.schemaById,r(n(1109))},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.preloadPage=r.userActionCreator("PRELOAD_PAGE"),t.preloadElement=r.userActionCreator("PRELOAD_ELEMENT"),t.preloadStatusChange=r.userActionCreator("PRELOAD_STATUS_CHANGE"),t.elementLoadLocally=r.userActionCreator("ELEMENT_LOCALLY_LOAD"),t.elementLoadedLocally=r.userActionCreator("ELEMENT_LOCALLY_LOADED")},508:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1474),o=n(319),a=n(741),s=n(1072),u=n(899),l=n(128),c=n(1502),f=n(1503),h=n(85),p=function(){function e(e,t){this.mode=o.WorkspaceMode.Initial,this.cursor="default",this.snaps=[],this.zoom=1,this.scroll={x:0,y:0},this.clipboard={pastedCountByPage:{},buffer:[]};var n=e.hasPageShadow,r=void 0===n||n;this.project=s.createProject(e.project,{shallow:t}),this.width=e.width,this.height=e.height,this.containerWidth=e.containerWidth,this.containerHeight=e.containerHeight,this.pageMargin=e.pageMargin,this.backgroundColor=e.backgroundColor,this.selectionFrameModel=new i.SelectionFrame,this.currentPageID=e.currentPageID,this.placeholderImageSrc=e.placeholderImageSrc,this.hasPageShadow=r,this.multiSelectionProps=e.multiSelectionProps,this.highlightedIDs=e.highlightedIDs,this.timeline=new c.Timeline(e.timeline),e.elementState&&this.project.traverse(function(t){t.props.uuid in e.elementState&&(t.state=e.elementState[t.props.uuid])}),this.select(e.selectionFrame.selectedUUIDs)}return e.prototype.getPlayingPage=function(e,t,n){void 0===t&&(t=this.project.elements),void 0===n&&(n=0);var r=t[0],i=n,o=n+r.props.animationDuration;return i<=e&&e<o?r:this.getPlayingPage(e,t.slice(1),o)},e.prototype.getCurrentPage=function(){var e=this;return this.project.elements.find(function(t){var n;return t.props.uuid===e.currentPageID})},e.prototype.find=function(e){var t=this.selectionFrameModel.selectedElement;return t&&t.props.uuid===e?t:this.project.find(e)},e.prototype.select=function(e){var t=this;if(this.selectionFrameModel.select(e),0===this.selectionFrameModel.selectedUUIDs.length)this.selectionFrameModel.selectedElement=null;else{var n=this.selectionFrameModel.selectedUUIDs.map(function(e){return t.project.find(e)});this.selectionFrameModel.selectedElement=1===n.length?n[0]:f.createTempGroupElement(n,{uuid:h.TEMPORARY_GROUP_UUID})}},e.prototype.getCurrentPagePosition=function(){var e=this.project.props,t=e.pageHeight,n=e.pageWidth;return{left:(this.width-n*this.zoom)/2,top:(this.height-t*this.zoom)/2}},e.prototype.getAbsolutePosition=function(e,t){var n=this.getPositionOfPage(e);return{left:t.left*this.zoom+n.left,top:t.top*this.zoom+n.top}},e.prototype.getRelativePosition=function(e,t){var n=this.getPositionOfPage(e);return{left:t.left-n.left,top:t.top-n.top}},e.prototype.getRelativePoint=function(e,t){return l.positionToPoint(this.getRelativePosition(e,l.pointToPosition(t)))},e.prototype.setProject=function(e){this.project=e,this.highlightedIDs=[]},e.prototype.serialize=function(){return{width:this.width,height:this.height,containerWidth:this.containerWidth,containerHeight:this.containerHeight,pageMargin:this.pageMargin,project:this.project.serialize(),multiSelectionProps:r({},this.multiSelectionProps),selectionFrame:this.selectionFrameModel.serialize(),highlightedIDs:this.highlightedIDs,hoveredElementUuid:this.hoveredElementUuid,currentPageID:this.currentPageID,croppingElementUUID:this.croppingElementUUID,snaps:this.snaps.map(function(e){return a.serializeSnap(e)}),backgroundColor:this.backgroundColor,elementState:this.project.getState(),timeline:this.timeline.serialize(),pageLoadingStatus:this.project.getPageLoadingStatus(),zoom:this.zoom,scroll:this.scroll,hasPageShadow:this.hasPageShadow,placeholderImageSrc:this.placeholderImageSrc,tryOnElementUuid:this.tryOnElementUuid,mode:this.mode}},e.prototype.restoreState=function(e){this.setProject(s.createProject(e.project)),this.select(e.selectedUUIDs)},e.prototype.getTryOnElementUuidAtPosition=function(e,t){var n=this,r=this.getCurrentPage(),i=this.getPositionOfPage(r),o=l.vectorSub(e,{x:i.left,y:i.top}),a=null;return r.traverse(function(e,r){if(l.isPointInRect(l.vectorSub(o,l.scalePoint(r,n.zoom)),e.getBoundingRect(n.zoom))){if(u.isTryOnElement(e)&&e.tryOnAllowed(t))return a=e.props.uuid,!1;a=null}},function(e,t,n){if(t){var r=n||{x:0,y:0},i=r.x,o=r.y;return{x:i+t.props.left,y:o+t.props.top}}return{x:0,y:0}}),a},e.prototype.getCurrentFrameRelativeTo=function(e,t){return t-this.getPageAnimationOffset(e)},e.prototype.getPageAnimationOffset=function(e,t,n){void 0===t&&(t=this.project.elements),void 0===n&&(n=0);var r=t[0];return e.props.uuid===r.props.uuid?n:this.getPageAnimationOffset(e,t.slice(1),n+r.props.animationDuration)},e.prototype.getPageAnimationRange=function(e){var t=this.project.findPage(e),n=this.getPageAnimationOffset(t);return[n,n+t.props.animationDuration-1]},e.prototype.isElementSelected=function(e){return this.selectionFrameModel.selectedUUIDs.includes(e)},e.prototype.getPositionOfPage=function(e){return this.getCurrentPagePosition()},e}();t.Workspace=p},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=n(1480),o=n(1073),a=n(1482),s=n(1484),u=n(743),l=n(1485),c=n(1486),f=n(1487),h=n(1488),p=n(1489),d=n(897),g=n(1076);function v(e,t){switch(void 0===t&&(t={shallow:!1}),e.type){case r.DesignElementType.IllustrationElement:return new i.IllustrationElement(e);case r.DesignElementType.ImageElement:case r.DesignElementType.GifElement:return new o.ImageElement(e);case r.DesignElementType.TextElement:return new a.TextElement(e);case r.DesignElementType.SvgElement:return new s.SvgElement(e);case r.DesignElementType.MaskElement:return g.createMaskElement(e,t);case r.DesignElementType.ColoredBackground:return new l.ColoredBackgroundElement(e);case r.DesignElementType.VideoElement:return new c.VideoElement(e);case r.DesignElementType.RectElement:return new f.RectElement(e);case r.DesignElementType.EllipseElement:return new h.EllipseElement(e);case r.DesignElementType.SimpleLineElement:return new p.SimpleLineElement(e);case r.DesignElementType.GroupElement:return d.createPersistGroupElement(e,t);default:throw new u.ArgumentOutOfRangeError(e.type)}}t.createDesignElement=v},550:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(744),s=n(750),u=n(754),l=n(630),c=n(895),f=n(553),h=n(114),p=n(88),d=n(298),g=function(){function e(e,t,n,r,i,o,a){this.prevProps={},this.loadingSemaphor={},this.prevParentUuid={},this.stage=e,this.resourceRepository=t,this.afterRenderService=n,this.reconciliationService=r,this.assetsDOMReconciler=i,this.logger=o,this.cursorManager=a}return Object.defineProperty(e.prototype,"event$",{get:function(){return this.stage.event$},enumerable:!0,configurable:!0}),e.prototype.render=function(e){try{this.reconciliationService.updateDOM(e),this.assetsDOMReconciler.applyAssetsToDOM(e,this.prevProps),this.cursorManager.updateCursor(e),this.afterRenderService.updateDOM(e,this.prevProps,this.prevParentUuid,this.loadingSemaphor),this.setPrevState(e),this.stage.batchDraw()}catch(e){if(!(e instanceof c.ResourceLoadingError))throw e;this.logger.warn(e.message)}},e.prototype.export=function(e){return this.stage.export(e)},e.prototype.init=function(e){this.stage.init(e)},e.prototype.setPrevState=function(e){var t=this;d.traverseProject(e.project,function(n,r){var i=n.uuid;t.loadingSemaphor[i]=e.elementState[i].loadingStatus,t.prevProps[i]=n,t.prevParentUuid[i]=r})},e=r([h.injectable(),o(0,h.inject(p.DI_TYPES.IAppStage)),o(1,h.inject(p.DI_TYPES.ResourceRepository)),o(2,h.inject(p.DI_TYPES.AfterRenderService)),o(3,h.inject(p.DI_TYPES.ReconciliationService)),o(4,h.inject(p.DI_TYPES.AssetsDOMReconciler)),o(5,h.inject(p.DI_TYPES.Logger)),o(6,h.inject(p.DI_TYPES.ICursorManager)),i("design:paramtypes",[Object,l.ResourceRepository,a.AfterRenderService,s.ReconciliationService,u.AssetsDOMReconciler,f.Logger,Object])],e)}();t.Renderer=g},552:function(e,t,n){"use strict";function r(e){var t=e.project,n=t.pageHeight,r=t.pageWidth,i=e.zoom;return{left:(e.width-r*i)/2,top:(e.height-n*i)/2}}function i(e,t,n){var r=a(e,t);return{left:n.left+r.left,top:n.top+r.top}}function o(e){return e.project.pages.find(function(t){return t.uuid===e.currentPageID})}function a(e,t){return r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentPagePosition=r,t.getAbsolutePosition=i,t.getCurrentPage=o,t.getPositionOfPage=a},553:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),u=function(){function e(e){this.timeBetweenLog=200,this.lastCallTime=Date.now(),this.msgsToLog=[],this.enable=!0,this.prefix=e}return e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enable&&console.warn.apply(console,a([this.prefix],e))},e.prototype.log=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.enable)if(0!==this.timeBetweenLog){var r=Date.now()-this.lastCallTime;(e=this.msgsToLog).push.apply(e,a(t,["\n"])),r>=this.timeBetweenLog?(this.msgsToLog.length?this.flushLog():console.log.apply(console,a([this.prefix],t)),this.lastCallTime=Date.now()):this.addTimer()}else console.log.apply(console,a([this.prefix],t))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enable&&console.error.apply(console,a([this.prefix],e))},e.prototype.addTimer=function(){var e=this;this.timerId>0&&this.resetTimer(),this.timerId=window.setTimeout(function(){return e.flushLog()},2*this.timeBetweenLog)},e.prototype.flushLog=function(){this.resetTimer(),console.log.apply(console,a([this.prefix,"\n"],this.msgsToLog)),this.msgsToLog=[]},e.prototype.resetTimer=function(){clearTimeout(this.timerId),this.timerId=0},e=r([s.injectable(),i("design:paramtypes",[String])],e)}();t.Logger=u},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.loadProject=r.userActionCreator("LOAD_PROJECT"),t.updateProject=r.userActionCreator("UPDATE_PROJECT")},555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1645);t.pageMutator=r.pageMutator;var i=n(1124);t.updatePage=i.updatePage,t.deletePage=i.deletePage,t.addPage=i.addPage,t.selectPage=i.selectPage,t.copyPage=i.copyPage,t.movePageBackward=i.movePageBackward,t.movePageForward=i.movePageForward},557:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n};Object.defineProperty(t,"__esModule",{value:!0});var o=n(85);function a(e,t){var n=t.props.locked;if(e.hasOwnProperty("locked")&&(n=e.locked),n){var o=e.flipHorizontal,a=e.flipVertical,s;return i(e,["flipHorizontal","flipVertical"])}return r({},e)}function s(e){return null!=e&&!e.props.locked}function u(e){return function(t){var n;return s(e.find(t.payload.targetID))}}function l(e){return function(){var t;return s(e.selectionFrameModel.selectedElement)}}function c(e){e.props.uuid===o.TEMPORARY_GROUP_UUID?e.elements.forEach(f):f(e)}function f(e){e.props.isBackground&&(e.props.isBackground=!1)}t.serializeUpdateElementData=a,t.isElementUnlockedByActionFactory=u,t.isSelectedElementUnlockedFactory=l,t.resetIsBackground=c},558:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(348);t.combineEventHandlers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return function(n,r){return o.merge.apply(void 0,i(e.map(function(e){return e(t)(n,r)})))}}}},623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(379),i=n(128);function o(e,t){switch(t){case r.SelectionFrameControlName.NW:return e.nw;case r.SelectionFrameControlName.SE:return e.se;case r.SelectionFrameControlName.NE:return e.ne;case r.SelectionFrameControlName.SW:return e.sw;case r.SelectionFrameControlName.N:return i.midpoint(e.nw,e.ne);case r.SelectionFrameControlName.S:return i.midpoint(e.se,e.sw);case r.SelectionFrameControlName.E:return i.midpoint(e.ne,e.se);case r.SelectionFrameControlName.W:return i.midpoint(e.nw,e.sw)}}function a(e){return e===r.SelectionFrameControlName.N||e===r.SelectionFrameControlName.S||e===r.SelectionFrameControlName.E||e===r.SelectionFrameControlName.W}function s(e){return e===r.SelectionFrameControlName.E||e===r.SelectionFrameControlName.W}function u(e){return e===r.SelectionFrameControlName.N||e===r.SelectionFrameControlName.S}t.rectPointFromControlName=o,t.isEdgeControl=a,t.isHorizontalEdgeControl=s,t.isVerticalEdgeControl=u},624:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NW="selectionFrameRotationControlNW",e.NE="selectionFrameRotationControlNE",e.SW="selectionFrameRotationControlSW",e.SE="selectionFrameRotationControlSE"}(r=t.SelectionFrameRotationControlName||(t.SelectionFrameRotationControlName={}))},625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(76),i=n(1492),o=n(1493),a=n(1494),s=n(1495),u=n(1496),l=n(1497),c=n(743),f=n(1498),h=n(1499),p=n(1500),d=n(1501);function g(e,t){switch(e.type){case r.DesignElementType.TextElement:return t.textElementDataMapper(e);case r.DesignElementType.ImageElement:return i.mapImageElementPropsToDomain(e);case r.DesignElementType.MaskElement:return o.mapMaskElementPropsToDomain(e);case r.DesignElementType.SvgElement:return a.mapSvgElementPropsToDomain(e);case r.DesignElementType.ColoredBackground:return s.mapColoredBackgroundElementPropsToDomain(e);case r.DesignElementType.VideoElement:return u.mapVideoElementPropsToDomain(e);case r.DesignElementType.IllustrationElement:return l.mapIllustrationElementPropsToDomain(e);case r.DesignElementType.GroupElement:return f.mapGroupElementPropsToDomain(e,t);case r.DesignElementType.RectElement:return h.mapRectElementPropsToDomain(e);case r.DesignElementType.EllipseElement:return p.mapEllipseElementPropsToDomain(e);case r.DesignElementType.SimpleLineElement:return d.mapSimpleLineElementPropsToDomain(e);default:throw new c.ArgumentOutOfRangeError(e.type)}}t.mapElementPropsToDomain=g},630:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(908),u=n(909),l=n(910),c=n(756),f=n(114),h=n(88),p=n(911),d=function(){function e(){}return e.prototype.load=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.textRepository.load(e)];case 1:return t.sent(),[4,this.imageRepository.load(e)];case 2:return t.sent(),[4,this.videoRepository.load(e)];case 3:return t.sent(),[4,this.maskRepository.load(e)];case 4:return t.sent(),[4,this.svgRepository.load(e)];case 5:return t.sent(),[2]}})})},e.prototype.loadElement=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.fontRepository.loadElement(e)];case 1:return t.sent(),[4,this.textRepository.loadElement(e)];case 2:return t.sent(),[4,this.imageRepository.loadElement(e)];case 3:return t.sent(),[4,this.videoRepository.loadElement(e)];case 4:return t.sent(),[4,this.maskRepository.loadElement(e)];case 5:return t.sent(),[4,this.svgRepository.loadElement(e)];case 6:return t.sent(),[2]}})})},e.prototype.getMask=function(e){return this.maskRepository.get(e)},e.prototype.getImage=function(e){return this.imageRepository.get(e)},e.prototype.getSvg=function(e){return this.svgRepository.get(e)},e.prototype.getVideo=function(e){return this.videoRepository.get(e)},e.prototype.replaceImage=function(e,t){return o(this,void 0,void 0,function(){return a(this,function(n){return[2,this.imageRepository.replaceImage(e,t)]})})},r([f.inject(h.DI_TYPES.ImageRepository),i("design:type",s.ImageRepository)],e.prototype,"imageRepository",void 0),r([f.inject(h.DI_TYPES.SvgRepository),i("design:type",c.SvgRepository)],e.prototype,"svgRepository",void 0),r([f.inject(h.DI_TYPES.VideoRepository),i("design:type",u.VideoRepository)],e.prototype,"videoRepository",void 0),r([f.inject(h.DI_TYPES.MaskRepository),i("design:type",l.MaskRepository)],e.prototype,"maskRepository",void 0),r([f.inject(h.DI_TYPES.FontRepository),i("design:type",Object)],e.prototype,"fontRepository",void 0),r([f.inject(h.DI_TYPES.TextRepository),i("design:type",p.TextRepository)],e.prototype,"textRepository",void 0),e=r([f.injectable()],e)}();t.ResourceRepository=d},633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.addElement=r.userActionCreator("ADD_ELEMENT"),t.updateElement=r.userActionCreator("UPDATE_ELEMENT"),t.updateElements=r.userActionCreator("UPDATE_ELEMENTS"),t.addTemplateElement=r.userActionCreator("ADD_TEMPLATE_ELEMENT"),t.cloneElement=r.userActionCreator("CLONE_ELEMENT"),t.copyElement=r.userActionCreator("COPY_ELEMENT"),t.pasteElement=r.userActionCreator("PASTE_ELEMENT")},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.workspace=e}return e.prototype.getFullPageSize=function(){var e=this.workspace.project.props,t=e.pageHeight,n;return{width:e.pageWidth,height:t}},e.prototype.getHalfPageSize=function(e){var t,n,r=this.workspace.project.props.pageWidth/2;return{width:r,height:r*(e.height/e.width)}},e.prototype.getCenterPosition=function(e){var t=this.workspace.project.props,n=t.pageWidth,r;return{top:t.pageHeight/2-e.height/2,left:n/2-e.width/2}},e}();t.AddElementPropsFactory=r},635:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.tryOnTry=r.userActionCreator("TRY_ON_TRY"),t.tryOnCancel=r.userActionCreator("TRY_ON_CANCEL"),t.tryOnFinish=r.userActionCreator("TRY_ON_FINISH")},636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.undo=r.userActionCreator("UNDO"),t.redo=r.userActionCreator("REDO")},637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i="RESIZE_ELEMENT",o="RESIZE_START",a="RESIZE_END";t.resizeStart=r.userActionCreator(o),t.resize=r.userActionCreator(i),t.resizeEnd=r.userActionCreator(a),t.resizeControlHover=r.userActionCreator("RESIZE_CONTROL_OVER")},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.rotateStart=r.userActionCreator("ROTATE_START"),t.rotate=r.userActionCreator("ROTATE"),t.rotateEnd=r.userActionCreator("ROTATE_END"),t.rotateControlHover=r.userActionCreator("ROTATE_CONTROL_HOVER")},741:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(128),s=n(85),u=n(91);function l(e,t,n,r,o){var u=t.snaps.filter(function(e){return r(e,n,s.SNAP_DISTANCE)});o(e,u);var l=e.getBoundingBox(),h=a.midpoint(l.nw,l.se),d=s.SNAP_PRECISION/t.zoom,g,v=i(p(i(l.getVertices(),[h]),t.project.getPageGuides(),d),p(l.getVertices(),c(t,e),d),p([h],f(t,e),d)).filter(function(e){return u.every(function(t){return!a.segmentsEqual(t.guide.segment,e.segment)})}).map(function(t){return{guide:t,point:n,element:e}});return i(u,v)}function c(e,t){return h(e,t).reduce(function(e,t){return e.push.apply(e,i(t.getBoundingBox().getEdges().map(function(e){return{segment:e,element:t}}))),e},[])}function f(e,t){return h(e,t).reduce(function(e,t){var n=t.getBoundingBox();return e.push({segment:[a.midpoint(n.nw,n.sw),a.midpoint(n.ne,n.se)],element:t},{segment:[a.midpoint(n.nw,n.ne),a.midpoint(n.sw,n.se)],element:t}),e},[])}function h(e,t){return e.getCurrentPage().elements.filter(function(n){return!(t===n||e.isElementSelected(n.props.uuid))})}function p(e,t,n){var r,i,s,u,l=[];try{for(var c=o(t),f=c.next();!f.done;f=c.next()){var h=f.value,p=h.segment,d=a.isHorizontalSegment(p);try{for(var g=o(e),v=g.next();!v.done;v=g.next()){var m=v.value;if(d){if(Math.abs(p[0].y-m.y)<n){l.push(h);break}}else if(Math.abs(p[0].x-m.x)<n){l.push(h);break}}}catch(e){s={error:e}}finally{try{v&&!v.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return l}function d(e,t,n){var r=e.point,i=e.guide;return a.isHorizontalSegment(i.segment)?Math.abs(r.y-t.y)<n:Math.abs(r.x-t.x)<n}function g(e,t,n){var r=e.point;return a.distance(r,t)<Math.sqrt(2)*n}t.applyWithSnapping=l,t.getActiveGuides=p,t.snapAxisProximity=d,t.snapDistanceProximity=g;var v=Math.PI/180,m=s.SNAP_DEGREE*v;function y(e){var t=Math.round(e/m),n=t*m-e,r;return n>=-v&&n<=v&&(e=t*m),e}function E(e){return{point:u.deepCopy(e.point),guide:b(e.guide),element:e.element.serialize()}}function b(e){var t=e.segment,n=e.element;return{segment:u.deepCopy(t),element:n?n.serialize():null}}t.snapRotate=y,t.serializeSnap=E,t.serializeGuide=b},742:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o,a,s;Object.defineProperty(t,"__esModule",{value:!0});var u=n(623),l=n(76),c=n(624),f=n(379),h=n(85),p=((o={})[f.SelectionFrameControlName.NW]=f.SelectionFrameControlName.SE,o[f.SelectionFrameControlName.SE]=f.SelectionFrameControlName.NW,o[f.SelectionFrameControlName.NE]=f.SelectionFrameControlName.SW,o[f.SelectionFrameControlName.SW]=f.SelectionFrameControlName.NE,o[f.SelectionFrameControlName.N]=f.SelectionFrameControlName.S,o[f.SelectionFrameControlName.S]=f.SelectionFrameControlName.N,o[f.SelectionFrameControlName.E]=f.SelectionFrameControlName.W,o[f.SelectionFrameControlName.W]=f.SelectionFrameControlName.E,o),d=((a={})[f.SelectionFrameControlName.NW]=h.HALF_CIRCLE,a[f.SelectionFrameControlName.SE]=0,a[f.SelectionFrameControlName.NE]=h.QUARTER_CIRCLE,a[f.SelectionFrameControlName.SW]=3*h.QUARTER_CIRCLE,a[f.SelectionFrameControlName.N]=h.QUARTER_CIRCLE,a[f.SelectionFrameControlName.S]=3*h.QUARTER_CIRCLE,a[f.SelectionFrameControlName.E]=0,a[f.SelectionFrameControlName.W]=h.HALF_CIRCLE,a);function g(e,t){return u.rectPointFromControlName(e,p[t])}t.rotationControlAngle=((s={})[c.SelectionFrameRotationControlName.NW]=h.HALF_CIRCLE,s[c.SelectionFrameRotationControlName.SE]=0,s[c.SelectionFrameRotationControlName.NE]=h.QUARTER_CIRCLE,s[c.SelectionFrameRotationControlName.SW]=3*h.QUARTER_CIRCLE,s),t.oppositeRectPointFromControlName=g;var v=[f.SelectionFrameControlName.NW,f.SelectionFrameControlName.NE,f.SelectionFrameControlName.SW,f.SelectionFrameControlName.SE],m=[f.SelectionFrameControlName.W,f.SelectionFrameControlName.E],y,E=i(m,[f.SelectionFrameControlName.N,f.SelectionFrameControlName.S]),b=i(v,E),w=i(v,m);function _(e){switch(e.type){case l.DesignElementType.GroupElement:case l.DesignElementType.IllustrationElement:case l.DesignElementType.MaskElement:case l.DesignElementType.ColoredBackground:case l.DesignElementType.VideoElement:return v;case l.DesignElementType.ImageElement:case l.DesignElementType.RectElement:case l.DesignElementType.EllipseElement:case l.DesignElementType.SimpleLineElement:return b;case l.DesignElementType.TextElement:return w;case l.DesignElementType.SvgElement:return e.special?b:v;default:return[]}}t.resizeControlsForElementProps=_},743:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,'"'+t+'" is out of range')||this;return n.name="ArgumentOutOfRangeError",n}return r(t,e),t}(Error);t.ArgumentOutOfRangeError=o},744:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(298),u=n(299),l=n(745),c=n(320),f=n(114),h=n(749),p=n(401),d=a(n(903)),g=n(88),v=function(){function e(e,t,n,r){this.stage=e,this.filtersService=n,this.cropService=r,this.videoRenderer=t}return e.prototype.updateDOM=function(e,t,n,r){var i=this;s.traverseProject(e.project,function(o,a){var s=o.uuid,u=e.elementState[s].loadingStatus;if(u===c.LoadingStatus.Loaded){var l=r[s]!==c.LoadingStatus.Loaded&&u===c.LoadingStatus.Loaded,f=d.default(t[s],o),h=n[s]===a;f&&h&&!l||i.process(o)}}),this.videoRenderer.process(e)},e.prototype.process=function(e){p.isImageElement(e)&&!u.hasZeroDimensions(e)&&(this.cropService.process(e),this.filtersService.process(e))},e=r([f.injectable(),o(0,f.inject(g.DI_TYPES.IAppStage)),o(1,f.inject(g.DI_TYPES.VideoRenderer)),o(2,f.inject(g.DI_TYPES.FilterService)),o(3,f.inject(g.DI_TYPES.CropService)),i("design:paramtypes",[Object,Object,l.FilterService,h.CropService])],e)}();t.AfterRenderService=v},745:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(746)),l=n(114),c=n(88),f=function(){function e(e){this.stage=e}return e.prototype.process=function(e){var t,n,r=e.filters,i=0===r.vignette&&0===r.crossProcess&&0===r.contrast&&0===r.brightness&&0===r.blur&&0===r.tint&&0===r.saturate,o=this.stage.find("."+e.uuid);try{for(var s=a(o),u=s.next();!u.done;u=s.next()){var l=u.value;i?this.removeFilters(l):this.addFilters(l,r)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.addFilters=function(e,t){e.cache(null);var n=(t.brightness+100)/100,r=t.contrast,i=t.blur/4,o=Math.log2((t.saturate+100)/100);e.filters([u.default.Filters.Brighten,u.default.Filters.Contrast,u.default.Filters.Blur,u.default.Filters.HSL]),e.brightness(n),e.contrast(r),e.blurRadius(i),e.saturation(o)},e.prototype.removeFilters=function(e){e.clearCache()},e=r([l.injectable(),o(0,l.inject(c.DI_TYPES.IAppStage)),i("design:paramtypes",[Object])],e)}();t.FilterService=f},749:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),s=n(114),u=n(88),l=function(){function e(e){this.stage=e}return e.prototype.process=function(e){if(e.cropOpts){var t,n=this.stage.findOne("."+e.uuid).findOne("."+a.IMAGE_NAME);this.cropImage(n,e)}},e.prototype.cropImage=function(e,t){var n=e.image().width,r=this.calcCropOptions(t,n);e.crop(r)},e.prototype.calcCropOptions=function(e,t){var n=e.originalImageWidth,r=e.originalImageHeight,i=e.cropOpts,o=e.flipHorizontal,a=e.flipVertical,s,u,l,c,f=n/t,h={x:i.left/f,y:i.top/f,width:i.width/f,height:i.height/f};return-1===o&&(h.x=n/f-(h.x+h.width)),-1===a&&(h.y=r/f-(h.y+h.height)),h},e=r([s.injectable(),o(0,s.inject(u.DI_TYPES.IAppStage)),i("design:paramtypes",[Object])],e)}();t.CropService=l},750:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1569),u=n(1570),l=n(114),c=a(n(903)),f=a(n(746)),h=n(88),p=function(){function e(e){this.stage=e,this.cache={}}return e.prototype.updateDOM=function(e){var t=u.workspaceView(e);this.updateNode(this.stage.el,t,this.cache),this.cache=t},e.prototype.updateNode=function(e,t,n){if(void 0===n&&(n={attrs:{}}),c.default(t.attrs,n.attrs)||e.setAttrs(t.attrs),e instanceof f.default.Container){var r=t,i=n;if(!c.default(r.children,i.children)){var o=e.getChildren().toArray();o[0]&&"Array"===o[0].constructor.name&&(o=o[0]);var a=r.children.map(function(e){var t;return e.attrs.key});a.forEach(function(e,t){if(!e){var n="No key defined for element: "+JSON.stringify(r.children[t],null,2);throw new Error(n)}});var u=s.findDuplicates(a);if(u.hasDuplicates){var l=JSON.stringify(r.children[u.duplicates[0]],null,2),h=JSON.stringify(r.children[u.duplicates[1]],null,2),p;throw new Error("Duplicated keys for element "+l+"\n and "+h)}o=this.removeNodes(o,r.children),o=this.updateAndAddNodes(o,r.children,i.children),e.removeChildren(),o.length>0&&o.forEach(function(t){return e.add(t)})}}return e},e.prototype.removeNodes=function(e,t){var n=t.map(function(e){var t;return e.attrs.key});return e.reduce(function(e,t){var r;return-1===n.indexOf((t.attrs||{}).key)?t.destroy():e.push(t),e},[])},e.prototype.updateAndAddNodes=function(e,t,n){var r=this;return void 0===n&&(n=[]),t.reduce(function(t,i,o){var a=e.find(function(e){return(e.attrs||{}).key===i.attrs.key});return a?t.push(r.updateNode(a,i,n[o])):t.push(f.default.Node.create(i,null)),t},[])},e=r([l.injectable(),o(0,l.inject(h.DI_TYPES.IAppStage)),i("design:paramtypes",[Object])],e)}();t.ReconciliationService=p},751:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ArgumentError",n}return r(t,e),t}(Error);t.ArgumentError=o},752:function(e,t,n){"use strict";var r=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1584),o=n(85),a=n(1594),s=n(174),u=n(299),l=n(91);function c(e,t,n){var i;return r(this,function(r){switch(r.label){case 0:i=e,r.label=1;case 1:return i<=t?[4,i]:[3,3];case 2:return r.sent(),i===t&&n?i=e:i++,[3,1];case 3:return[2]}})}t.generateFramesSequence=function(e,t,n){var r=c(e,t,n);return i.interval(o.FRAME_INTERVAL).pipe(s.map(function(){return r.next()}),s.takeWhile(function(e){var t;return!e.done}),s.map(function(e){var t;return e.value}))},t.framesGenerator=c,t.propGetterFactory=function(e,t){return Number.isInteger(t)?f(e,t):l.createPropGetter(e)};var f=function(e,t){return function(n){var r=e.animations.filter(function(e){var t;return e.field===n});if(0===r.length)return e[n];var i=r.find(u.isActionActive(t));if(i){var s=(t-i.frameFrom)*o.FRAME_INTERVAL,l=(i.frameTo-i.frameFrom)*o.FRAME_INTERVAL,c;return(0,a.animationEasings[i.easingType])(s,i.valueFrom,i.valueTo-i.valueFrom,l)}return u.closestAnimationValue(r.reverse(),t)}};function h(e,t){var n=t.timeline,r=t.project;if(void 0!==n.currentFrame)return n.currentFrame-p(e,r.pages)}function p(e,t,n){void 0===n&&(n=0);var r=t[0];return e.uuid===r.uuid?n:p(e,t.slice(1),n+r.animationDuration)}t.currentFrameRelativeTo=h},754:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(298),s=n(299),u=n(85),l=n(114),c=n(88),f=n(630),h=n(756),p=n(895),d=n(320),g=n(76),v=n(763),m=function(){function e(e,t,n){this.stage=e,this.resourceRepository=t,this.comparator=n}return e.prototype.applyAssetsToDOM=function(e,t){var n=this;a.traverseProject(e.project,function(r){var i=n.comparator.useContext(e).shouldReloadImageInKonva(r,t[r.uuid]),o=e.elementState[r.uuid].loadingStatus!==d.LoadingStatus.Loaded;if(!s.hasZeroDimensions(r)&&!o)switch(r.type){case g.DesignElementType.MaskElement:return void n.applyMaskToDOM(r.uuid);case g.DesignElementType.VideoElement:var a;n.stage.findVideo(r.uuid).image()&&!i||n.applyVideoToDOM(r.uuid);case g.DesignElementType.TextElement:case g.DesignElementType.ImageElement:var u;return void(n.stage.findImage(r.uuid).image()&&!i||n.applyImageToDOM(r.uuid));case g.DesignElementType.SvgElement:var l=r,c=h.getCacheKeyFor(l.mediaId,l.colors),f=n.resourceRepository.getSvg(c);return f?n.setImage(l.uuid,f):n.resourceRepository.loadElement(l).then(function(){n.setImage(l.uuid,n.resourceRepository.getSvg(c)),n.stage.draw()});case g.DesignElementType.IllustrationElement:var p;return void(n.getIllustrationElement(r.uuid).image()&&!i||n.applyIllustrationToDOM(r.uuid))}})},e.prototype.applyMaskToDOM=function(e){var t=this.resourceRepository.getMask(e).path,n,r;this.stage.findOne("."+e).findOne("."+u.MASK_CLIP_GROUP_NAME).clipPath=t},e.prototype.applyImageToDOM=function(e){var t=this.resourceRepository.getImage(e);this.setImage(e,t)},e.prototype.applyIllustrationToDOM=function(e){var t=this.resourceRepository.getImage(e),n;if(!t)throw new p.ResourceLoadingError(e+" illustration is not loaded");this.getIllustrationElement(e).image(t)},e.prototype.applyVideoToDOM=function(e){var t=this.stage.findVideo(e),n=this.resourceRepository.getVideo(e);if(!n)throw new p.ResourceLoadingError(e+" video is not loaded");t.image(n)},e.prototype.setImage=function(e,t){var n=this.stage.findImage(e);if(!t)throw new p.ResourceLoadingError(e+" is not loaded");n.image(t)},e.prototype.getIllustrationElement=function(e){return this.stage.findOne("#"+e)},e=r([l.injectable(),o(0,l.inject(c.DI_TYPES.IAppStage)),o(1,l.inject(c.DI_TYPES.ResourceRepository)),o(2,l.inject(c.DI_TYPES.DesignElementsComparator)),i("design:paramtypes",[Object,f.ResourceRepository,v.DesignElementsComparator])],e)}();t.AssetsDOMReconciler=m},755:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),u=n(298),l=function(){function e(){this.items={}}return e.prototype.get=function(e){return this.items[e]},e.prototype.set=function(e,t){this.items[e]=t},e.prototype.load=function(e){return this.loadWithTraverser(e,u.traverseProject)},e.prototype.loadElement=function(e){return this.loadWithTraverser(e,u.traverseElement)},e.prototype.loadAsset=function(e,t){return o(this,void 0,void 0,function(){var n,r,i;return a(this,function(o){switch(o.label){case 0:return(n=this.get(t))&&this.skipLoad(n,e)?[2]:(r=this.set,i=[t],[4,this.loadSingleAsset(e)]);case 1:return r.apply(this,i.concat([o.sent()])),[2]}})})},e=r([s.injectable(),i("design:paramtypes",[])],e)}();t.AssetRepository=l},756:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var f=n(755),h=n(1107),p=n(76),d=n(414),g=n(1108),v=n(380),m=n(114),y=n(88),E=n(508);function b(e,t){return e+"|"+JSON.stringify(t)}t.getCacheKeyFor=b;var w=function(e){function t(t,n){var r=e.call(this)||this;return r.cache={},r.parser=new DOMParser,r.serializer=new XMLSerializer,r.getMediaUrl=t.getMediaUrl,r.workspace=n,r}return r(t,e),t.prototype.loadWithTraverser=function(e,t){return u(this,void 0,void 0,function(){var n,r=this;return l(this,function(i){switch(i.label){case 0:return n=[],t(e,function(e){if(e.type===p.DesignElementType.SvgElement){var t=e,i=t.mediaId,o=void 0;t.src?o=t.src:t.mediaId&&r.getMediaUrl&&(o=r.getMediaUrl(t.mediaId,h.MediaType.Screen));var a=b(i,t.colors);n.push(r.loadSvgAsset(o,i,t.uuid,a,t.colors))}}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},t.prototype.loadSingleAsset=function(e){return Promise.resolve({})},t.prototype.loadAsset=function(e,t){return Promise.resolve()},t.prototype.loadSingleSvgAsset=function(e,t){return u(this,void 0,void 0,function(){var n,r,i,o,a,s,u,f,h,p,m,y,E,b,w,_,P,S;return l(this,function(l){switch(l.label){case 0:return o=t,a="data:image/svg+xml;utf8,",s=/^data:image\/svg\+xml;utf8,/,/\<svg/.test(e)?(u=e.replace(s,""),i=a+encodeURIComponent(u),[3,6]):[3,1];case 1:return f=void 0,this.cache[e]?(f=this.cache[e],[3,5]):[3,2];case 2:return[4,fetch(e)];case 3:return[4,(h=l.sent()).text()];case 4:f=l.sent(),o=d.indexColors(f),p=this.parseAsset(f);try{for(m=c(o),y=m.next();!y.done;y=m.next())E=y.value,b=E.id,w=E.color,g.indexElementsWithColor(p,{id:b,color:w})}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}this.cacheAsset(e,p.outerHTML),f=p.outerHTML,l.label=5;case 5:_=this.parseAsset(f),P=this.applyColors(_,o,t),i=a+encodeURIComponent(P),l.label=6;case 6:return[4,v.loadImage(i)];case 7:return[2,{image:S=l.sent(),colors:t.length?t:o}]}})})},t.prototype.loadSvgAsset=function(e,t,n,r,i){return u(this,void 0,void 0,function(){var o,a,s,u;return l(this,function(l){switch(l.label){case 0:return(o=this.get(r))?[2]:[4,this.loadSingleSvgAsset(e,i)];case 1:return a=l.sent(),(s=this.workspace.project.find(n))?s.props.colors=a.colors:a.colors=i,u=b(t,a.colors),this.set(u,a.image),[2]}})})},t.prototype.skipLoad=function(){return!1},t.prototype.cacheAsset=function(e,t){this.cache[e]=t},t.prototype.parseAsset=function(e){return this.parser.parseFromString(e,"image/svg+xml").querySelector("svg")},t.prototype.applyColors=function(e,t,n){var r,i,o=function(t,n){var r;Array.from(e.querySelectorAll('[data-color-id="'+t+'"]')).forEach(function(e){return e.setAttribute("fill",n)})};try{for(var a=c(n),s=a.next();!s.done;s=a.next()){var u=s.value,l,f;o(u.id,u.color)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return e.outerHTML},t=o([m.injectable(),s(0,m.inject(y.DI_TYPES.DesignerProps)),s(1,m.inject(y.DI_TYPES.Workspace)),a("design:paramtypes",[Object,E.Workspace])],t)}(f.AssetRepository);t.SvgRepository=w},757:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var u=n(114),l=n(88),c=n(912),f=n(1109),h=n(918),p=n(319),d=n(552),g=n(1123),v=n(508),m=n(1643),y=n(1644),E=function(){function e(){this.MODES_TO_REMOVE_POINTER_EVENTS=[p.WorkspaceMode.Resizing,p.WorkspaceMode.Moving,p.WorkspaceMode.Rotating]}return Object.defineProperty(e.prototype,"editableBlockAPI",{get:function(){var e=this;return{getEditableBlockSerializedData:function(){return e.editableBlock.serialize()},getFontSelectedProperties:this.editableBlock.getFontSelectedProperties.bind(this.editableBlock),setLetterSpacing:this.editableBlock.setLetterSpacing.bind(this.editableBlock),setBold:this.editableBlock.setBold.bind(this.editableBlock),setItalic:this.editableBlock.setItalic.bind(this.editableBlock),setCapitalize:this.editableBlock.setCapitalize.bind(this.editableBlock),setUnderline:this.editableBlock.setUnderline.bind(this.editableBlock),setFont:function(t){return a(e,void 0,void 0,function(){var e,n,r,i,o;return s(this,function(a){switch(a.label){case 0:e=t.fontData,n=void 0===e?{regular:!0}:e,r=t.font,i=Object.keys(n).filter(function(e){return n[e]}).map(function(e){return{name:r,style:e}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fontRepository.loadFontWithStyles(r,i)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),console.warn("Font: "+r+" is not loaded from meta"),[3,4];case 4:return this.editableBlock.setFont(t),[2]}})})},setFontSize:this.editableBlock.setFontSize.bind(this.editableBlock),setLineHeight:this.editableBlock.setLineHeight.bind(this.editableBlock),setFontColor:this.editableBlock.setFontColor.bind(this.editableBlock),setTextAlign:this.editableBlock.setTextAlign.bind(this.editableBlock),typeCharacter:this.editableBlock.typeCharacter.bind(this.editableBlock)}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.update$=new c.Subject,this.selectText$=new c.Subject,this.editableBlockDOMContainer=new m.EditableBlockDOMContainer,this.editableBlockTmpDOMContainer=new y.EditableBlockTmpDOMContainer,this.editableBlock=new f.EditableBlock({el:this.editableBlockDOMContainer.el,text:"",colorMap:[],boldMap:[],italicMap:[]}),this.tmpEditableBlock=new f.EditableBlock({el:this.editableBlockTmpDOMContainer.el,text:"",colorMap:[],boldMap:[],italicMap:[]}),this.editableBlockDOMContainer.hideContainerElement(),this.isEditing=!1},e.prototype.getTextElementPayload=function(e){this.editableBlockTmpDOMContainer.update(e),this.tmpEditableBlock.update(r({},this.mapElementPropsToBlockProps(e,!1),{el:this.editableBlockTmpDOMContainer.el}));var t=this.editableBlockTmpDOMContainer.containerSize,n=t.width,i=t.height,o=g.getFontInlineStyle(this.fontRepository.getInlineFontContent(e.font)),a=this.tmpEditableBlock.getSVG(o),s=r({},e,this.tmpEditableBlock.serialize(),{width:n+1,height:i,src:a});return this.tmpEditableBlock.teardown(),s},e.prototype.updateMode=function(e){this.MODES_TO_REMOVE_POINTER_EVENTS.includes(e)?this.editableBlockDOMContainer.stopListenMouseEvents():this.editableBlockDOMContainer.listenMouseEvents()},e.prototype.updateDimensions=function(e,t,n,r){void 0===n&&(n=p.WorkspaceMode.Initial);var i=e.props,o=n===p.WorkspaceMode.Resizing,a=d.getCurrentPagePosition(t);if(o){if(!r)throw new Error("resizeState should be passed on resize action");this.resize(i,t,r,a)}else this.editableBlockDOMContainer.update(i,a,t.zoom)},e.prototype.startEdit=function(e,t){this.isEditing=!0,this.editUUID=e.props.uuid,this.updateBlockProps(e.props,!0),this.editableBlockDOMContainer.showContainerElement(e.props,d.getCurrentPagePosition(t),t.zoom)},e.prototype.stopEdit=function(){this.isEditing=!1,this.editUUID=null,this.editableBlockDOMContainer.hideContainerElement(),this.editableBlock.teardown()},e.prototype.serialize=function(){var e=this.editableBlock.serialize(),t=this.editableBlockDOMContainer.containerSize,n=t.width,i=t.height;e=r({},e,{width:n,height:i});var o=g.getFontInlineStyle(this.fontRepository.getInlineFontContent(e.font)),a=this.editableBlock.getSVG(o);return r({src:a},e)},e.prototype.onFontLoaded=function(){this.onContentChange()},e.prototype.calcDimensions=function(){var e=this.workspace.project.find(this.editUUID),t=this.editableBlockDOMContainer.containerSize,n;return 0===t.width?{left:e.props.left,top:e.props.top,width:e.props.width,height:e.props.height}:g.resizeTextElement(e,t)},e.prototype.mapElementPropsToBlockProps=function(e,t){return{el:this.editableBlockDOMContainer.el,text:e.text,colorMap:e.colorMap,boldMap:e.boldMap,italicMap:e.italicMap,wordBreak:e.wordBreak,lineMap:e.lineMap,fontSize:e.fontSize,letterSpacing:e.letterSpacing,lineHeight:e.lineHeight,textAlign:e.textAlign,font:e.font,capitalize:e.capitalize,underline:e.underline,onContentChange:t?this.onContentChange.bind(this):function(){},onSelectText:t?this.onSelectText.bind(this):function(){}}},e.prototype.updateBlockProps=function(e,t){this.editableBlock.update(this.mapElementPropsToBlockProps(e,t))},e.prototype.resize=function(e,t,n,r){var i=this.editableBlockAPI.getEditableBlockSerializedData(),o=i.fontSize,a=i.letterSpacing,s=i.lineHeight;o===n.fontSize&&a===n.letterSpacing||(this.editableBlockAPI.setFontSize({size:n.fontSize}),this.editableBlockAPI.setLetterSpacing({spacing:n.letterSpacing})),this.editableBlockDOMContainer.update(e,r,t.zoom);var u=this.calcDimensions(),l=2,c,f;if(Math.abs(u.height-e.height)+2>=o*s){var h={uuid:this.editUUID,height:u.height};this.update$.next(h)}},e.prototype.onContentChange=function(){if(this.isEditing&&this.editUUID){var e=this.workspace.project.find(this.editUUID),t=this.serialize();if(t.height!==e.props.height){var n=g.resizeTextElement(e,{width:t.width,height:t.height});t=r({},t,n)}t=r({},t,{uuid:this.editUUID}),this.update$.next(t)}},e.prototype.onSelectText=function(e){this.isEditing&&this.editUUID&&(this.selectionProperties=e,this.selectText$.next(e))},i([u.inject(l.DI_TYPES.FontRepository),o("design:type",h.FontRepository)],e.prototype,"fontRepository",void 0),i([u.inject(l.DI_TYPES.Workspace),o("design:type",v.Workspace)],e.prototype,"workspace",void 0),e=i([u.injectable()],e)}();t.EditableBlockMediator=E},76:function(e,t,n){"use strict";var r,i,o,a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SimpleLineElement="simpleLineElement",e.EllipseElement="ellipseElement",e.RectElement="rectElement",e.ImageElement="imageElement",e.GifElement="gifElement",e.SvgElement="svgElement",e.VideoElement="videoElement",e.IllustrationElement="illustrationElement",e.TextElement="textElement",e.MaskElement="maskElement",e.ColoredBackground="coloredBackground",e.GroupElement="persistGroupElement"}(r=t.DesignElementType||(t.DesignElementType={})),function(e){e.Text="text",e.Svg="svg"}(i=t.MaskTypes||(t.MaskTypes={})),function(e){e.Stage="Stage",e.Image="Image",e.Text="Text",e.Layer="Layer",e.Rect="Rect",e.Circle="Circle",e.Ellipse="Ellipse",e.Group="Group",e.Line="Line",e.Path="Path"}(o=t.KonvaTypes||(t.KonvaTypes={})),function(e){e.Png="png",e.Jpeg="jpeg"}(a=t.ExportType||(t.ExportType={})),t.LocalImgTypes=[r.SvgElement,r.TextElement]},761:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),u=n(88),l=n(919),c="fontFamilyMeta_",f=function(){function e(){}return e.prototype.getMetaFor=function(e){return o(this,void 0,void 0,function(){var t,n,r;return a(this,function(i){switch(i.label){case 0:return t="fontFamilyMeta_"+e,(n=this.resourceCache.get(t))?[3,2]:[4,this.loadMetadatas([e])];case 1:return[2,(r=i.sent())[0]];case 2:return[2,n]}})})},e.prototype.loadMetadatas=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:return[4,this.designerProps.getFontData(e)];case 1:return(t=r.sent()).forEach(function(e){var t="fontFamilyMeta_"+e._id;n.resourceCache.set(t,e)}),[2,t]}})})},r([s.inject(u.DI_TYPES.ResourceCache),i("design:type",l.ResourceCache)],e.prototype,"resourceCache",void 0),r([s.inject(u.DI_TYPES.DesignerProps),i("design:type",Object)],e.prototype,"designerProps",void 0),e=r([s.injectable()],e)}();t.FontMetaLoader=f},763:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(114),o=n(76),a=n(319),s=function(){function e(){}return e.prototype.useContext=function(e){return this.workspaceContext=e,this},e.prototype.shouldReloadImageInKonva=function(e,t){if(!t)return!0;var n=!1;switch(t.type){case o.DesignElementType.MaskElement:return!1;case o.DesignElementType.ImageElement:case o.DesignElementType.IllustrationElement:case o.DesignElementType.VideoElement:case o.DesignElementType.TextElement:n=this.workspaceContext.mode===a.WorkspaceMode.Resizing;case o.DesignElementType.SvgElement:var r,i=e,s;return t.src!==i.src&&!n;default:return!1}},e=r([i.injectable()],e)}();t.DesignElementsComparator=s},764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i="START_ANIMATION",o="STOP_ANIMATION";t.startAnimation=r.userActionCreator(i),t.stopAnimation=r.userActionCreator(o),t.seek=r.userActionCreator("SEEK"),t.playProject=r.userActionCreator("PLAY_PROJECT"),t.playPage=r.userActionCreator("PLAY_PAGE")},765:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1647)),a=n(91),s=i(n(1680)),u=r(n(1681)),l=r(n(1682)),c=r(n(1683)),f=r(n(1684)),h=r(n(1685)),p=r(n(1686)),d=r(n(1687)),g=r(n(1688)),v=r(n(1689)),m=r(n(1690)),y=r(n(1691)),E=r(n(1692)),b=r(n(1693)),w=[u.default,l.default,s.all([c.default,b.default,E.default,f.default]),s.all([c.default,b.default,p.default]),s.all([c.default,b.default,E.default,g.default]),s.all([c.default,d.default]),s.all([c.default,b.default,v.default]),s.all([c.default,m.default]),s.all([c.default,b.default,h.default]),s.all([c.default,y.default])],_;t.schemaById=w.reduce(function(e,t){return e[t.$id]=t,e},{});var P=function(){return _||(_=new o.default).addSchema(w),_},S,A=function(){return S||(S=new o.default({removeAdditional:!0})).addSchema(w),S},O=function(){function e(){}return e.isProjectValid=function(e){var t=e,n=P(),r=n.validate("v2.project",t),i={isValid:r};return r||(i.errors=n.errors),i},e.sanitizeProject=function(e){var t=e,n=A(),r=a.deepCopy(t),i;if(n.validate("v2.project",r))return r;throw new Error("Can not sanitize project: "+JSON.stringify(n.errors,null,2))},e}();t.SchemaValidator=O},766:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(508),s=n(1694),u=n(767),l=n(174),c=n(1696),f=n(114),h=n(88),p=n(255),d=function(){function e(e,t,n){var r=this;this.currentState$=new s.BehaviorSubject(e),this.userAction$=new u.Subject,this.epicActions$=new u.Subject;var i=n(this.epicActions$.pipe(l.observeOn(c.queue)),function(){return r.currentState$.getValue()});this.subscription=[this.userAction$.pipe(l.map(function(e){return t(e,r.currentState$.getValue())})).subscribe(this.currentState$),i.pipe(l.subscribeOn(c.queue),l.observeOn(c.queue)).subscribe(function(e){return r.dispatch(e)})]}return Object.defineProperty(e.prototype,"state$",{get:function(){return this.currentState$.asObservable()},enumerable:!0,configurable:!0}),e.prototype.dispatch=function(e){this.userAction$.next(e),this.epicActions$.next(e)},e.prototype.dispose=function(){this.subscription.forEach(function(e){return e.unsubscribe()})},e.prototype.getState=function(){return this.currentState$.getValue()},e.prototype.getRestorableState=function(){return p.mapWorkspaceDataToProps(this.getState().serialize())},e=r([f.injectable(),o(0,f.inject(h.DI_TYPES.Workspace)),o(1,f.inject(h.DI_TYPES.RootMutator)),o(2,f.inject(h.DI_TYPES.RootEpic)),i("design:paramtypes",[a.Workspace,Function,Function])],e)}();t.StateManager=d},769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1728);t.elementMutator=r.elementMutator;var i=n(1736);t.elementEpic=i.elementEpic;var o=n(633);t.addElement=o.addElement,t.addTemplateElement=o.addTemplateElement,t.updateElement=o.updateElement,t.copyElement=o.copyElement,t.updateElements=o.updateElements},770:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i;!function(e){e.Select="SELECT",e.SelectAll="SELECT_ALL"}(i||(i={})),t.select=r.userActionCreator(i.Select),t.selectAll=r.userActionCreator(i.SelectAll)},771:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i="MOVE",o="MOVE_START",a="MOVE_END";t.moveStart=r.userActionCreator(o),t.move=r.userActionCreator(i),t.moveEnd=r.userActionCreator(a)},772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i="HOVER",o="SET_DRAGGING_ITEM";t.hover=r.userActionCreator(i),t.setDraggingItem=r.userActionCreator(o)},773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.deleteElement=r.userActionCreator("DELETE_ELEMENT"),t.deleteElementByUUID=r.userActionCreator("DELETE_ELEMENT_BY_UUID")},774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.setZoom=r.userActionCreator("SET_ZOOM"),t.setScroll=r.userActionCreator("SET_SCROLL")},85:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.White="white",e.Black="black",e.AccentBlue="#3d95ff",e.AccentMagenta="#FF4AFF"}(r=t.Color||(t.Color={}));var i=[5,2];t.SELECTION_CONTROL_BASE_COLOR=r.White,t.SELECTION_CONTROL_ACCENT_COLOR=r.AccentBlue,t.SELECTION_CONTROL_SIZE=12,t.SELECTION_ROTATION_CONTROL_SIZE=48,t.SELECTION_ROTATION_CONTROL_OPACITY=.25,t.SELECTION_ROTATION_ARROW_PATH="M18.51,29.5,15,27.06V28.9c-10.78-.19-11.89-10.13-12-12H4.87L2.44,13.39,0,16.87H1.87C2,18.77,3.25,29.87,15,30.06v1.86Z",t.SELECTION_ROTATION_SEGMENT_PATH="M16.91,0a15,15,0,1,0,15,15h-15Z",t.SELECTION_ROTATION_SCALE=1.5,t.SELECTION_CONTROL_BORDER_WIDTH=2,t.SELECTION_CONTROL_SHADOW_PARAMS={shadowBlur:2,shadowColor:r.Black,shadowOpacity:.51},t.SELECTION_CONTROL_STROKE_WIDTH=2,t.SELECTION_FRAME_HIT_REGION_MARGIN=5,t.SELECTION_FRAME_WIDTH=1,t.SELECTION_FRAME_DASH=i,t.SELECTION_CONTROL_KEY="selectionFrame",t.SELECTION_FRAME_NAME="selectionFrame",t.SELECTION_FRAME_RECT_NAME="selectionFrameRect",t.SELECTION_FRAME_ROTATION_CONTROL_NAME="selectionFrameRotationControl",t.TEXT_ELEMENT_CLICKABLE_INNER_PADDING=3,t.HIGHLIGHT_STROKE_COLOR="lightgray",t.HIGHLIGHT_STROKE_WIDTH=1,t.HIGHLIGHT_FILL_COLOR="rgb(67, 91, 88, 0.2)",t.HIGHLIGHT_DASH=i,t.CROPPING_CONTROL_BASE_COLOR=r.White,t.CROPPING_CONTROL_ACCENT_COLOR=r.Black,t.CROPPING_PAGE_MASK_COLOR=r.Black,t.CROPPING_PAGE_MASK_OPACITY=.4,t.CROPPING_ELEMENT_MASK_COLOR=r.White,t.CROPPING_ELEMENT_MASK_OPACITY=.4,t.CROPPING_CORNER_CONTROL_SIZE=21,t.CROPPING_CORNER_CONTROL_WIDTH=5,t.CROPPING_FRAME_KEY="CROPPING_FRAME",t.TEMPORARY_GROUP_UUID="selectedElementsGroup",t.HALF_CIRCLE=Math.PI,t.QUARTER_CIRCLE=Math.PI/2,t.COPY_SHIFT=10,t.SNAP_DISTANCE=5,t.SNAP_DEGREE=15,t.SNAP_COLOR=r.AccentMagenta,t.SNAP_PRECISION=.5,t.CROSS_ORIGIN="anonymous",t.FONT_LOADING_TIMEOUT=5e3,t.IMG_LOADING_TIMEOUT=3e4,t.FRAME_RATE=60,t.DEFAULT_TINT_INTENSITY=.15,t.TINT_BASE_INTENSITY=.3,t.OVERLAYS_KEY="OVERLAYS",t.PROJECT_ID="PROJECT",t.PLACEHOLDER_IMAGE_SRC="images/mask_placeholder.png",t.MASK_PLACEHOLDER_IMAGE_WIDTH=650,t.MASK_PLACEHOLDER_IMAGE_HEIGHT=650,t.MASK_CLIP_GROUP_NAME="maskClipGroup",t.MASK_STICKED_UUID="-sticked",t.FPS=30,t.FRAME_INTERVAL=1e3/t.FPS,t.UPDATE_STATE_INTERVAL=50,t.SIMPLE_LINE_PADDING={x:20,y:20},t.MAX_CONCURRENT_ASSETS_LOADING=2,t.PRELOAD_DEFAULT_PRIORITY=1,t.PRELOAD_CURRENT_PAGE_PRIORITY=10,t.PAGE_MARGIN=100,t.IMAGE_NAME="IMAGE",t.VIDEO_NAME="VIDEO",t.PREVIEW_WIDTH=103,t.PREVIEW_HEIGHT=87,t.EDITABLE_BLOCK_CLASSNAME="editable-block-area",t.keycodes={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27,BACKSPACE:8,DELETE:46,COMMAND:91,SHIFT:16,CTRL:17,Z:90,Y:89},t.MODE_KEY_CODES=[t.keycodes.COMMAND,t.keycodes.SHIFT,t.keycodes.CTRL],t.FALLBACK_IMG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAJYCAQAAAAUb1BXAAAAB3RJTUUH2wQLBAYLUC2xXwAAAAJiS0dEAP+Hj8y/AABDy0lEQVR42u2deXxV1bn3D6PVV1vba29rHapVP/e2n/beTrfVa219bd+AIqAoTqAo1So4VqVYpQqOHbx1otroVRQQsp+dEEIgDCEJQxjDEIKIEggJCYGQETIQSHKe9w9Qz9577ensvc/Zw++7/4HknLXX3mutX9Z61vM8KxYDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBUyRxE59AP6Sp5lDSeHpWflV6nmUS0lIpoE1XQHjpALSevXuKTV+/nPztAe6iCNlERLSGimdLr8rP0qDReHkVX0Q/nfitzEN4wACApSgbOPU+6XL6FJsmvURatoB3U9LkIeXU10Q5aIc2VX5Mel2+RLp97XslAtAQAQMCcs7IulcbSNHkWraG6hDlSOq9eqqM18iz5GWls1qVzzkIrARBZaABdLI+U/yjPos3U5guBMrtaqUyeRU/QCLp4an+0IADhl6mvyb+WHqcPaQsdDYRI6V1dtEWeJT8m/5q+hlYFIFwydQ6NoKdpHtUEWqT0rr00j56WhtM5aGkAAkveGfKV9ATNp/pQypToqqdcabJ8JZ2O1gcgIOR8h+6U36ZtPjGdp8dcX06Z0ji6EL0BAJ+S9V35Xmk21UZWpkTXPnmWdE/2v6N3AOAT5p4njZfm0kHIk8F1UJ5Dd+aci94CQJqg06Xh9AbtTM2Qz+Z8XsYreA2XcTnv4Equ5lo+yA3cwm3cwUf52Mkrzp8R//xnR7mD27iFG/gA13I1V/IOLucyXsMreBnnc3aqhOtj+TX5Wti4AEilVF0sP0LL6ZhXw1rmhVzM63gb7+J9fIgP8zH2mmN8mA/xPt7F23gdF/NClr2TrWO0THoo5zvoSQB4KVQDpF/SX+lj94dwHhfxBt7B1dzEXQlzpHQS5y5u4mr+iDdwEed5IVw7pL/IV9AA9CwA3JWqwfLV0jvU6OYsqoBLuYKruYWPcxA4zi1czRVcygXuzr4apXfkq2kwehkAzqXqVOk6eRa1ujM45/MK3sY13Mq9HGR6uZWruZxX8HzXAn/kWfLIGV9CjwMgKTIH0TBpNrU7H4y5vJK3cx13chjp4Drezis41w3ZOiLPkq9GnggAbMD96BfSP5wvAJfyJq7iwz6xSXlv82rjKt7ES53L1iF5uvzf3A89EQATsi6Sn6VqZ9apQi7n/SnY2fMrx7iOt3KhU0vXXvnZrIvQIwEQW6tOpztpJcWTH2LLeBvXB8SEnhozfT1v42VORCtOK+lO+G0BoEC+gmYkb63K541cw91QKB2Ocg1v5PzkZaudZtAv0EsBiNFX6AHakezir4Q/4cNQJIu08SdckvxC8SN5In0FPRZE1171Y+kd6kjOPWE910TYSuXMwlXD65J1h2iX387+EXouiNq8ajDdThuSW/5t4UMR2ffzdk+xgbcku0xcL4+BoymIilh9XZ6STFK9RbyNm6A0LstWE5fzouSSBT6FgzFAyMn+D/ld+9nUF/I2boW6eEgLb0tmtnVUeod+gF4NQon0Gyq0b6vazI1YAKZotnWINyVj21pKV6F3gxAxtb88mjbZzT+1luu5DzqSYvp4P6+1n59ro3QDjh4DIaDgFPodVdrr/oVciR3ANO8kVnKhXdH6VL674BT0eBBc8/qp0kNUZy8vVTm3QS9847dVbjcPVy09gIwPIJBiRQ/TfjudfQXvwxLQh0vEfVxiT7Tq5AchWiBA5J8m/Z4O2En/shX+6r7mMG+1l75mPz1Mp2IkAP/PrAZL99vxsirkqoAn04sKvVxlL5B6v3xv5iCMCOBbpvaXxtIe65GAa/kQdCBgHOI1dqIRK+k27B4CXyINpwrri8By7sDoDygdXG5ngVguX4vRAXxF1qW01rrf+i7uwagPOD28ixdaF62VWZdilABfMPcCeY7VtHtLuRo7gSHaQazmJZZTAcpz6HyMFpBWcs+UXrZ6oGkx12OMh5D9XGxVtLro+dwzMWpAWigZKE+0elDESm7EyA4xjbzC+imI98EMD1KOfAVttdZFVyEpTEREa6VV0doCixZIITln04fWrFaruBkjOUI08SqrFq33c87GSAKeQ4Olx60dF7ESYhVR0bK4PGyjR3FkK/BWrn5B2610xuXcgJEbYQ5azfVQQZdhVAFP+PCr8ttWFoJLuA4jFnAtL7YiWX3yW9g5BK4jjaUGK0dEVCE/KDhJnKt4gRXROiDfghEG3FsIXmglufE8/hhhzEBFD+/geVZEa3HOtzHSgGOm9qcHzM8OlLmMj2J0AiFHucxKwPQReSL3w4gDDsi+hFZZcV5ANitgTKu1NIAlWRdh1IFk51aPUpf5aYEwsQOrZngL4dKd8iPwhAf27Vb/Zp5/IYd3wGoFbNDL2znHXLTWZF+CEQgsw/3kR8znVmu4EyMQ2KadSy2ESUsPwZ4FLDH3PCoyXwgewMgDSVPPi8xFa1nOuRiNwARpLLWZHXFagYUgcOzusM1857BFuhUjEugy5yySzbNa4dxA4NbO4XLzeVbWh1/FyAQC5F+bnXaTy3vgxw5cJM67zbPD19KvMDqBgpKB0ovUZ9xxVnMXRhhwnU7zlDS9NA15HcAXZvYLzFwY5nM1RhbwjL0830y0ViMjPDhhZr+JWs0cGBB2A7zlqLmzQ4s8CqM14hScQm+a2a32YjSBlFBlbs96o+AUjNrIQhdSmXEHKYFzKEghHeYn8KzD0jCqcjWMmowDbz7FniBI+b7hJ5xtLFlNNBSjN2piNUB+wTh76BL4W4E00WqWq7RPfpYGYBRHhnn/QsuNJ96b4MsO0kgvl5km/KOvYSRHguz/oD3GZvZajBiQdvaZmeB3Z30fozkKTgyG+UOLYGYHvjHBFxlLVrt0A0Z0iJnaX3rR2HJVATM78JUJvtzkQFbpOaT7Cyl5Z9BC46XgfowQ4DvqzJaGeXlnYHSHjrkXUIVRsy/jDowN4EvaeZnZcazwzQqZG8NlxqcKYlcQ+HvXcKPJyYb0M4zy0CDfQkeNHET3YkQA31Nl7FDaJY/GSA8B3I+mGRna87kZYwEEgibONzbA/wnjPeBkDpLfN3ZiQB4GEBy6zBwd/hd5s4JsuTqdlhhbrvowBkCg6DPzgV808/9g5AdTrr5Jm40Ol9+N3g8CSaXx8RUb53wDoz94cvVvVGWUQfQg+j0ILAeNfbN24yDWoMnVz4xSxxTwEfR5EGgOG59seIh+AhUIjlxdRUeMDurqRn8HgafbONnfYflKKEEwvK5GUrd+Q26EoR2ExgC/wfi4++FQA98jjaNe/Ub8CL0chIrtRpLVI4+BIvh7MfiwvpOozFXo3yB07DbaM4xL90MV/Du7mqz/12Ye16Nvg1Cyn3OM5lmToAz+tF1N0W+0PATggBDTxHkGkiU9CXXw3+zqOf0GW8Tt6NMg1BzhhUazrGlQCH/Nrv5sdP5NF/ozCD1dhmftSC9CJfwzu3pZv6GW8zH0ZRAJurnQQLLkv0EpfD+7WsE96McgMhznEsyyfO7IME2/gdbASRREjF4uNZKsqVCM9MrV0/qNsw4n4IAI0sdrjczvT0E10idXT+g3zAbIFYgocV5vZMt6DMqRLq92g4hByBWIsmQZRRnC+z0dpvY79INwNqHHgshL1iaDgB3EGKZ6djVCP8R5M3orAMy8WV+yjtMIqEjq5OoqOqbXFGXopwCcxCD/e6f0f6EkKSH75/rp+TaijwKQsDA0OIC1LfunUBPvZ1cX0yHsDAJgVbLWGyVSvhiK4q1cfZ0q4XcFgB3JMvDLqqSvQ1W8k6uvUJneqy+FXAEgpM/I+319/mlQFm/kajAV6ccMIggHAD16eYW+ZOXRAKiL63A/abZ+RgaEOANgxHFeri9Zb0Jf3J9f6QY5L8WxXQCY0s1L9CXrCSiMu37tY/T82hchPR8AlujSz0oal26CyrjpeXVUL1c7kh8DYJV2/dzvndk/h9K4Qs639TyvcnC0BAC2aNY/YedAzrlQGzdcGSr0zhncj/4HgE32659jWJF3BhTHmVwNoIV6hsLd6HsAJMFuAxcH7gfVcWJsf0Hv1Vag3wGQJBX66f2eheokL1ej9fYG16PPAeCA9fq5skZBeZLbG/wP6hS/1BL4tQPgiD4u0pOs9qzvQ31sM+cs2iN+oQVwFAXAMd1coBsSnXsmFMiusb1Q/DJz+Qj6GgAu0Ma5epK1BPGFrhjbZW5APwPAJQ7qujjgBEM786thesZ2uDIA4CaVenOsPmkIlMgScy+gZpyGA0Bq0M373kjnQ43MZ1eD9ZL0FWFvEADX6dNPPLOOBkORzATrTfHLy+ej6FsAeEAXL9CzZL0ORTJEukn84rIR5gyAZzRxtt4s63qokpH1qlX82vaiTwHgIXv0BKsZliwdSgbSWhjbAUgPuicYroZPlng5+KL4hRVyL3oTAB7Ty8v0JGsa1ElrbL+K+sSe7R3oSwCkgHY9z/de+hUUSsG8f6F6sbojSR8AqaJWb45V++FXoVKJ8ysZWa8ASD/leg4Oc6FSX8jV7XquojjNGYBUou9GKt8CpTrhzHCe2JlhPnei/wCQYjr0LFktdA7UKsb99A6gr0XfASAN1OhZspYh43tMfgS+VwD4C72AaPnBqFuv/o26RC9mCXyvAEgbPbxY77jVS6IsVwPEvu053IY+A0AaadWLLlw9tX90BetR8cTzU/QXANLMJ3qWrIcjKlfZl4iXgyVwZgAg7cS5WCxYHVkXRVCupvan1eJQHDgzAOAHOnieWLJWRHC3UH4QiWQA8DdVeruF90bNenUhtYtexBr0EQB8RKlYso5ELEsWLRP7tiMNMgB+oovniyWrIErLwTHiiWY1+gcAPmOv3m7hzVGZXX2NGkQvoBR9AwAfskosWPX0lWjMr94WLwe70DMA8CGdOruF0j8iIFfS5eJTnfegXwDgU3TOh+7LujTkcpU5iD4SZ74CAPiVuF6WrPKSgeFeDj4mPnUQsYMA+JlWlsXLwofCbG4/h44gETIAQUQneXLrvH8Nr2B9KHrkRUglA4Dv6eGFYq/398O6HLxCbG4/gL4AQADYL55jxUNpeqcBtBXBOAAEmdViySoLYY4smiBO1YdjUgEICu06af3ku0MmV7lnUqPoQXegDwAQICrEc6yDeWeEa371V5jbAQg+vTqmd3o+RHI19wLqFj1kHdofgIChc5x919zzwjO/yhI94kq0PQABpEQsWTNDIldZl4rcGWR4twMQSFrEXu9x+kk45ldrcFAqAGFio3iOVRIGuRoherR5yC0KQGDp4hyxZA0NuFxN7U/b4c4AQNj4SCxYWwJ+ng7dLnqsfLgzABBoenhB+BInZw6iKhzlBUAY2SMWrF0BzpAlDsdZgpOdAQg8cS4IV5gOnUr1cBcFIKzsE8+x9s34UjCzt/9e9DjL0c4AhIRl4iyk9wdzfnVA9DANaGUAQsIB8RyrtuCU4AnWwwjHASDs6ITpTAje/Gq/6EGa0cIAhIhGnTkWDQ5WOuQHRY+xGu0LQMhYEfw5VsEpVIf5FQARnmPVBGiOJd0jeoRVaFsAIjPHku8KTvxgpegBmtCyAISQQ+I51o6AHE0hj8b+IABRQrxXKI8Mxg7hJlHlG9GqAISUBvEca10Q7Fe/EVW9GG0KQIgpEkvWr/w/vyoUVbweLQpAiKkTC1aBz+Uq+0eiai9FewIQauK8RJzn/Xv+XhC+IxKsarQnACGnSmx4f9vHcjXnLOrSVnkh8l8BEHr6OF94XuGcs/zr0DBFpLGVaEsAIsAn4jnWFL+a2weLEvblcg9aEoAIcJzniSSr3qdBOvIdIn3dhnYEICJsEe8V3ubPGdYG0fnOnWhFACJCu/hM6LU+lKusH4u0dQ3aEIAIUSqcY2X9Z0AcGg6hBQGIEOJAaOmfPpOr3DOpXVvNZWg/ACKG8GCK9rwz/GW/ekCkq1VoPQAiRlUQMpDSDpFDAw6kByBq9HCuSLC2+cmh4QqRpm5F2wEQQXScGy7zz/xqhqiCh9FyAESQw/6OKqTTRQb3FWg3ACJKsUiyDuef5g/BulOkp/vQagBElBrxHOsOfwjWam3V8rgPrQZAROnj+SLJKvFDyr5LKK6tWjnaDIAIs0Wczu/C9O8QviCa/LWhxQCIMK3iReGzaZYr7kfV2moVor0AiDhCj/c93C+99qtfiHR0N1oLgIhT6UdvLHpTW6UcPobWAiDiHONskWC9kUa5yhxEjdoqrUNbAQB4rUiwGkoGpm9+NQxnEAIAxOicVTg0fYL1obY68+GBBQBg5j5xGPTMdMnVqaKQnE1oJwAAMzOXCUN0Ck5Jj2BdjxyjAAB9GsT5R4enx2V0Fg5NBQDoExcfrjojPacQtuFQLwCAEeUiwWrJHJT6+dXVosleC1oIAPA5zeIQnYzUC9a72mosQvsAABQsFElWZqoXhANELqNYEAIAlGwVuo/SAB9kcW9C6wAAFDSK3Ud/kdpjU1/WViEfbQMAUBHnBSLBeim1S8Kd2ipsQdsAADRsFglWRQrlKusiuIwCAKwhdh+l81O3IHxIFEMIl1EAgBZxTKE8MXULwiLt7dejXQAAQoSJZpamSK7yzqDj2tvXoFUAAEL2igSrO0XnFErDBdM7ZBkFAOjQzbJoUXh1ahaEb+CcZwCAHYRnQf9PagTrY+2tP0WLAAB02Zku14a554m2KA+jRQAAurQJD1bNOdt7C9Z4+LgDAOwi8neXxnovWHO1t92I1gAAGLI+PfndqQEuDQAAu1SLBKvO66Cc74osWN1oDUfUcyH/g6fw3XwTj+AhPIJv4vH8JE/npbwfr8c3NHIpz+AX+REeyzfycB7C1/IoHssP8TR+lwu5GtEeBnQJA3SyLvJ2fvU77S2XBfYVZmiuW2yKr/Lb9tnHM3icoB6J1+38Llen+F3Ye2sZfGdS97xHWFZyVGrK+djFt7OdM03bKYMzeBQ/w0u4zUEPtHsFiSUiX6y7Un4S4bYQCVYGz02ZYH3Cz/AQyx1ziqsD0G3ByuDttu/4qatDcLqmnFdceS/HeRH/zqaIDOWnea2l2Va0BEuUyk9+31vB2qe95YFQCdb1fCQFgnWYX06ic/7Nxt/uVAvW323f8XUXh+AxHqUpZ6QLpoqVfEfSUjKel3AvBCuB/aJFYZWHcpXzHVFQzvFQCVYGZ3ouWOV8U5LdczSX+1SwrrMpD8cFEpP8ECwWluTMWNHKTzmWk7tNdtCjJVjHhAE6c8/zbn51p/Z2hQE2A4q7wLU2Mnsl03lyeaiDDjqUc30pWBm83Nb9Vrg6BCcLS3rUkdXqZhfkJNl3GU7BYl4qWhSO8c4H6x3t7cpDJ1gZ/LKHgjVHx1j7POdzBTdyF/dxFzfxdl7EL/GNLtjZUiVYf7B1vyddHIINurbAZPdY1/C1OjPc5ziL13Elt3AX9/FxbucG3s5F/L88mUdCsEzYIhKs6d7NsMq1t9sfQsEaanlXzm7nyRbc7V4u0c110cOl/IDgOzm+EazRn/9rCDdYvltjgsSMdjwEZ+q25HtJvYu1gjnwCH6VPzYxpPfwVn5Ls9z3atMmiNSKrFibvJKr06k3XGll9P9uPeOJYG3UzASu5yUWdpOKNTOtIVzmE8F6M+Hfsy3fLXGe+ZbDYRvnsQnfnsgTE/53K/fZLm8nD1fV6Bp+y8ZWTC+v5UchWEK6RYLV41FeLLpKe7OlgX596mVZ4v92uC5YjRoz872W5yTNmnnWKG70hWDtTvj3OMuOk+MTvrXH4bDdrPj2PJ6n+P8Gm6Ud4Vs1u327k7KBPQLBErBYFFH4S28E6wntrTaFSLCkJAy2djrcFI1JuMvW3ya1YflPvhAs5gkJ/6uwdK+PFDMip8P2BcVcqI3b+JqEn0yzWdpzqto8bquV1DPjmyFYmlWGwIr1B28Ea572VlUhEqxuvk3x/3WuDvOVmtlVh83advH9qjJW+UKw5tnervh7wjdyHQ7bIzws4btPMzPzMyoJs856zR8VZyaPw/w8BEvBHtGicJ43gnUgbHmw1N2lQPH/31lY4FjtcH2KRVAGX5fUZsUB1aLybhdj15IXrMQZzUg+amGuODJBTg47HLbzFd9dzczMpYqfZVsuq08VLDTWQ0fdqApWa6pCoOd+S3uj3IAHe6q7Sx//1qbjodUOt1z1yYIka7xUVU6xDwSLeZqtd7Zcs2BzMmwnKOx6PczM3MM3JPz0HhtLOGVNNqW8B4afOM8TSJYHifxER0+sDPjL03aXUtVf2OMudbiHFZ97IGmhj6tK+r0vBGudwuZjxqSET693OGyVIc+vf/5zZWThToul/V7xrefS0gPDzwrRHGuY64IlP6O9zfbQCRbzQ7aWE9Y6XI3qcxsc1HmjqqwaHwhWb4JX+BCT2NKDCa4dN5+MtUt+2E7Xyc+gDKx+1VJZ1SrHkSoIlidsF5ndp7hvwcrV3qYuhIK1TfGzG7nThQ43U2V5cobSzjLbB4LFnJnwk5mG3058F287HLbKkOfxit/dbTvOcZYDv30IlnXqRDOsHPcFq1p7m84QCharQl5nuNDhlD5UWQ5rrXS/eNgXgpU4O7nDYMEbV2Q/qHE4bJU2pzkGb8lKnOMDLgZOQ7D06RAJ1h6X5Wrev2hvMj/wr07cXfYo/NFHcIvDDndE5d9e77DWB1RLl3YfCJZyuOvHl5YrLHlOh+1kxXtQOuE2Kt66uWWtXfH5ISna/46iYDHnCs7PyT3TXQvWr8N4eKped/mL4uevOexwWxSfucOFet+uKHGrLwRrQcLP/qr73cQ3m+9w2CpDnidpfv9HhQCZ/ZlQttLENPfAcFMismJd6e4e4eNhyjRq1l0OKHylrzaw1VnpcMrFyV9dqPdfFSXKvhCs9gQHzhE63uFdCVF61ybMDJMbtjNNlnDFNpb26lZ6HYLlIcLMo4+4K1izw3hWjn53eVPxm+cddbiXk3Rj1IeSTIbjpWAxP5/wU3GM6eKET7zgcNgqQ55FEtnN1yV84jYTVxJlKy2AYHnIXu9TJdNW7S1aQyxYbYrcRkP4UwcdThkD6MYZjhsUJT7hE8EqM43ETPRzKnM4bJUhz38RfubvNt68spU2p6UHhj0b1me0iMzuZW7K1QDq0iaW6Q2xYDHPVvxusoNhrgzKccO7Z7erbhJuCVZfQp4Dkc2oTne+k8wgfEHxnS3Cz2y34QiqbKVqCJaH9IgEq4P7uSdYF2tvUMAcasHqUiVi25z0MFcmqHNjXtqiKPFmnwgW87sJP/9A8733dBPr2R+EypBnveVeXHE0l3EYtLK12yBYnrJIlNv9AvcEa4S2+NKQCxZznmrfKJ7kMFcmzj3qQr27VIHUfhGsWkVYU1wlHom5MGodCpYy5Pld3c/NUuXK0ie5VnIqK1EVrNXehueIMmFVhF6welRHZ5YkOcyV6Xb7XKh3jyofpl8ESxkzqVymJVq4HnFsep6g+MY+3c8dULg+3GtQ4tVJtRIEKzm2iQRrEvYIHQ5S5cb4uJO5ANIvWH2KEq/2kWAV6BrCXzDIVWF3EFaqQsmNeEzx2U91PzcUgpVCRPuENMO9GdYmbfEtERCsuCI/eAbn+XJJONJHgtWZ4Gk1PCF0K9FLa7gmpMvuIJxu0iqJLLHoBDxSlcwxHYIVHZpEgrXOPcFq0xZ/PAKCxbxJZd4+6kOj+00+EizmPwtnUvmGLgj2hq0y5PkakyCaLsWREqN0M4iOTsroDsFKjmMiwWp2S66+ri08LxSvzUp3+YNhbgQ/uDX81leCtUWYresBQxcEe8NWuVA3z9n+Z8Xniyy1Ug0Ey2ME8YTsUjwhXaYtuigygvWpakeuzaHkue84OtlXgqX0QD8R1FRtsHtof9gqXTzXmH5e6WI6yVIrbUnR24yuYC0XCFbWf7ljch+rLXpDZARLfY7KW7ZL+JvroTmyL0NzPuMDTQRfpqF/lr1hqwx5Hi3YCNFK6G2KqIUDFlopH4LlMetFx33d6o5gTdUWvSNCglWr2PK+hg/aLEEZVvs3F+qtDH4mnwlWfYKkjOG4Kh9pvcNhqwx5nm7p2d5VfOcD4WfmKj7zBgTLY0R5R+kpODW40q1e041bs1LCJpVzhHPucHX54rZgKV0JNlvI+G793soFZ3LXGKELcJkNVwkIlnM8DICmNdqimyIlWM2KnabEbN9WSjjscgK/g75M4JdI4tk+LynO1Fnq8N6bHcuVOvD6M9pcfasQLDMaRTOsVe4IVq226K5ICRbzDMUnp9gs4X7VCdPOUC4xH0z5uzD/ZBePSMh7ZX5qofV7v+CKYInTBU2wnVQZgpU8nSLBqnZBrkoGUq82U0M8YoLVoTjp7osj2a2V8IGr2RV+pyhtlg8FS51dymx7wOq9lSHPyV/D+IhpKz0BwfKUPpa1gnWcBjifX52vVcKFIXlpdrpLtvDoB2slVLl4zFeZqqxqXwrWNqFQVDi893xX5CqDMzhXUPpu1aKwBoLlKfmiOdY5zk3ul2uLLY6gYB3jMYpPl9oq4UHVMs6tg1QfScO7sPLJuCpw/MR2Q9zhvSe4Jlj3WWillyBYnlIkEqzLnB8/cYu22HURFCz1MfF3c5+NEtRHzC9OssbLVOUs96lgqRMgGp+gaK3ESlWOCns5q44rAnoyeJfp2x3i4NQCCJY5a0X7hKOdLwknhfH4iWS6S1x1hOliGyX0qmYc1yW1V3hQNejGu5L7wRvBalDtjaqP4bJfojLk+WnbT/iaqadVL9+lmhO2Q7A8o1wkWI85F6xXtcXuiqRgMa9VfP42PmajhGLVZ+/lDpu17VLtNmbwyrS8C6ufnGw5gMhKicdUYr3K9hPuUHxfHAa9SlWXP1jwpIdgJccuka/7K84Fi7TF1kZUsJTHKGSoHAzMSpis+vSjtpxDujXffypN78L9QWalxGKV3CSTLeRORRliS+wUVW2etJxqBoJljxrRDGuOc8Eq1hbbEFnB2q4aNnZKOKjKuZTB9/EhizVtVh2knsHXWf5uOARrsuXDbdmiXU0852vhGzVz4RoIlgc0iIzuy50L1k5tsUciK1jMTzvI/7hGZdfJ4FG81MKOYYlmEA1xPfzc34KltoglF8t6QHUcvfgP71bFMbonnF/f0yQd1KfTxsw7yoLVJhKs7c4Fq1FbbHeEBWuvRnTslDBXuMVeorvA6eFSzdzKvYDn4AiWMuT5rqTv9KiinJk6n1ouaOPr+E1T222cd/I7fD3yYVk0cggEq8GhXGUO0haaHZpXllx3edlRhu0PhN8cxS/yQt7OTXyU49zNzbyDC/gvqjyY5g4C4RQsdchz8s9foChnrO7stlB1KMUXGy0vcTaX8V5u426O8zFu4wau5JU8m1/Uaa0hlp88Wnnd4yJf9z6Hvu50jlaw8iMuWA26ASLWIIM5mvk11KM/GH4WrM0qATiY9J06+FqLJzxv0Fgok7tu53IIlg4LBHOsOd9wJFhZP9YWWRhxwVImpEumhM0am5TV60bPDlH3s2ApQ54fc3Sv5xVlvWj4h+n3jmMW3zbZCY62YC0VZR39vrMZ1lXaIldEXrCOCOwU9kpo5b8k0TX/7OGJxP4VLHXI82JH99qgkpR2w0XLItWJ0Nava/hlC7vp0RasEpEn1i+dBeaM0ha5JvKCxTzHha6zQ+PzY3Q9yR/55F2kWrCUIc/DbezXiUjMf2p+SBhzFxPfblNCbuP3LGaMi7ZglYo8sUY6C30ery2yDILF3XyLK12nmt81HQ5j+R1XztoJqmBNsLyIs8ZbivImWjIPl/ErKqETX7/lf3C5jdD2aAvWRtEMa5yzJeGj2iLLGbhLHS/l6fwkj+fRPJyH8HAezeP5j/wGLw5NVEHwiXMtL+dMnsYT+Va+nq/hITycb+Bx/Bj/mefwem7GS7LFVpFjw8POloTPhvUACgBAevlItCR8xtmS8HVtkZV40wAAx4jCn+lVZ0vCmdoiq/GmAQCO8eDkHMoOb64GAEA62ScSLMmZYC3UFlmPNw0AcEy9aEm40JlgrdIW2Yg3DQBwzCGRYJU4E6wN2iKxeQsAcE6TSLDWOhOsCm2RbXjTAADHCDNiVTgTrL3aIjvwpgEAjmkXCValM8HaH9Zj6gEA6UV4XH2NM8Fq0xZ5HG8aAOCYYyLBaoZgAQB8yHGRYLVBsAAAECwAAPCXYB3VFtmLNw0AcEyPSLA6nAmWoEgAAHADkb5AsAAAECwAAIBgAQAgWDC6AwD8gxdGd7g1AAA8AX5YAAAIFgQLAADBAgBEFi+Cn5FeBgDgCV6kl6lCAj8AgBd4kcAPKZIBAJ7gRYpkHEIBAPAE4SEUa3DMFwDAh3hxzBcOUgUAeIIXB6niqHoAgCd4cVT9TG2R1XjTAADH7BUJ1vuOBEt6XVtkJd40AMAxuwSCJb3iSLDkZ7VF7sCbBgA45iPRDOsZZ0vCR7VFluNNAwAcs1VkdH/Y2ZJwvLbIMrxpAIBjNoqWhOOcLQlHaYtcgzcNAHBMqWiGNcLZkvAqbZErQvfiKjlDdX1s8o0Jik+/5rgGbyrKm+h6fcUoy3Dnk+lpDyu1Fl/X8A18O9/Lz/AHXMpNnr1B92psfAWJEtEM65eOBCvrx9oiC0MnWNM1zf6KyTfmKz59PXc7un8P36goL8/1+gZLsLx5PivXEH6cF9vIRwLBcsJSgWBlfd+RYOWcrS1yQcjk6hiP0jT7SBMJOsLDFJ8vdlSD1YqyhnG76/UNkmB59XzWr5t5OQQrBSwQCNacbzgSrMxB2iKzQyZYxcKGX2byrRcUn57sqAZTFGW96El9gyNYXj2fvWuSpawkEKzkibOsFaw+GhBzBjVqJas7VII1Wdjwj5p8a7NqKdGQ9P2beaiirM2e1Dc4guXV89m9xnMLBMtDukUm94aYU2inttgjIZKrBh6i0/T7Tf4+jFV8enbSNZAU5YzluCf1DYpgefd89q+HTY+0g2AljzAb1nbnglWsLbYhRII1U7fp37P1zXEmQqPPbxXlzPSsvsEQrFQ/31Fu4d1cxNP5VsE9pbQKVrhpEAnWcseCJUvaYveF5qUp50kTeWLC/27lPltzgW1J1eBjW0tLJ/UNgmCl6/lO3LuYb1N9Z5SJ+QOClTw1osCcOc5nWK9qi90VmpemtETN43mK/2+wZW35W1I1eMWW8d5Zff0vWOl6vs9o4XtV31oOwfIID0KfY7FYjCZpi90Wmpf2gsKFsI3b+JqEn0wz+bZyP2tEEucJdfN1ttwjnNXX/4KVruf7gnoervjWXyBYHlEummE95nxJeIu22HUheWVKb6qnmZn5GdWQMULtMbTEdg2WqxYgxzytr98FK33Pl8hbim/9DoLlEWtFgjXasWBJl2uLLQ7JK1P6q69mZuZSxc/MfM6mO9x6n6T4/hue19ffgpW+50tkmyqKAYLlDUUiP/dLnS8Jz9cWuzAkr2yCYnbTw8zMPXxDwk/vMSlBHfVWZ+v+B1Vm+12e19ffgpW+51PasRK/dTUEyyPyRbuE5zgWrJKB1KuZuCW9he8nlGLzus6saaeNQZbBM2zVQLmFf19K6utfwUrn8yXSowoKgmB5QZ/Iz/341P4x51BtOI+rn66TD+BTxc9ftbWMuc2GlKtdT3NTUl//ClY6n09/hjUGguUJHaL51d6YG9AabdFNgX9hSoP5eMXv7k74zXU2w6Ctpzfcokpzcjgl9fWrYKX3+RKpsOFoAsFKlkaRYK1yRbCk2dqiawL/wpQuCXMUv5NseOKow6BfsFyDPyu+93zK6utPwUrv8yWSqfjWuxAsTxCdmEMzXBEs+Rlt0R8F/oVNNvAvb1QYwx83KWmzreQwn9Gp8vcpS1l9/SlY6X2+L2jgEYpvfQrB8oTtIsF6yh3BGqMten3AX5cyrGaS5vd/VAyfelu2KGv5whaqLCXxlNXXj4KV7uf7jDa+X/Gd+1MsMNERrHUiL6xb3LFhXaYtuijgr2umSa6lYlt7f8rSHrBUg4cU3/kgpfX1n2Cl+/lOsJrvUEV2fgzB8ohCgWBl/9QVwZpzlrbovEC/LOWcSBRSowyZuc1mype9pjWoUQ2MAymtr98EK53P182tvIeL+S3VPDmDM1hOucBER7ByBYKVe2bMHahVW/jxAL+szRaixf6u+MxGGxaYDM40rcE7quyWqa6vvwQrNc9n77rW0h9lv+XDCgrHRBas5phb0CZt8S0BFizlvt4WHaNg4meeMylRuWS5ySTxWx/frPh8Ucrr6y/BSs3zWb+u4RcsplCCYCVHk0iw1romWPIsbfHVgZUrpeeU3vIizuMchEGvNTE42jlzx4v6+kmwUvV81q67eImNP8YQrOTw0KkhFovF6Alt8RWBFaz5Fv1sZqlyMxmj9NN+xvCz02ydauhNff0jWKl6PqvXcJ7G2yFYnrJNJFiT3BOsEdriSwMrWMroP/2p/wGFKf1ek1IrVSGzrbqfVOZ4MvP08aq+/hGsVD2fvesxroVgecZqUfK+a9wTrIu1xRcEVK4qbbggPOZAWPQToSizaN6btvr6Q7BS93x2r5EWnHcgWMmxUCBYOd92TbCm9qcubcaG3kAK1nQbZywvcbB000/8dq+Dpaab9fWHYKX7+eLcyY1cyUsFx1AMMT0NEW4NydAjWhC2c7+Ye9AW7S1aA/iqlMZxs4DjLkX4jL18oHozgF2q/ai2tNXXD4Lll+c7QR+v5zsV3xmqs2cJwXJCs0iwNsbcJCz7hEr3A/Mc4X924H7whoUZxXNprW/6Bcsvz5cooS+pzok8CsFyGY/3CGOxWEx+THuL8gC+KqWD5xrTz2924OA5SuBce1zl/rAxrfVNv2D55fkS6VVELhqHTUGwkmGrKI7wEXcF69faW6wI3ItShtCMPpmE14i44qQ6eyE0GYI3tNJWuj+v65tuwfLP8ynZr9jHvdmgXhCsZCgRzbB+5apg0de0t5gfuBelDLGdbuk77zoIUn5S8/snHQRVu1/fdAuWf55PzYsW3YAhWMkgiCOM01di7kJ7tZLVEajXFBeEt9q97KWBGcKNit82qn5bn+b6plew/PR8apYpvvk2BMtFhMmR98TchnK1t6kL1Iva7Hh42E20p86cOUfxu8fTXt/0Cpafnk9NjcXj2yBY9qkVCVa2+4L1tPY22wP1ol5wZYDYS2V8l+J3dzlIvexFfdMrWH56PjVtqp1CCJZ7VIhM7lNcFyxpeLDN7movqWSvYXzE8D7qMOgvRF2Zb8Du4RZe1DedguWv51PTo2orCJZ7rBDNsIa5LlhzvyVIuBWg8wnnuzI87B/H9fLnP3/ZwfFh3tQ3nYLlr+cznmENhWC5aEmeJwrLOTvmPnRAe6PDgXlRE1wbIPYOPB150vHwKI90cECrN/VNp2D56/mMbVgjIViu0SqaX9XGvIDmaW9VFZDXVGkrIEaN2t1zl63BuJSZmZcqfnaPL+qbPsHy2/OpWWxgiYRgOWGPSLBkTwRL/oP2VmUBeU3KZdrTtr//moWgG73lzmPMrM40kO2L+qZPsPz2fGqeU3xzCgTLNTaKTO5/8GaGdZX2VksD8ZLUhvBVtkvYoQq6sRMGPYTruV7hgWU3f6lX9U2XYPnv+dQLwqEGzikQLCcsFmXC+qU3gnU69WpvdiwAL6nYNMbPHGUUf7HJp5Vb9u/zDFtBvqmqb7oEy3/Pl0gPP6765m4IlkscFS0Ie/JPi3kDlQfTeXSyzTxKImYryphs8unNKn/sMYr/b/BJfdMlWP57vi/oViWwzuAJKRSYsAvWPpFgbYp5hfTPIOZsUJ8auCOpUg6owmoaDD9tFHZyK/f5pL7pESw/Pt8J+niN6ijVDM4wTAYOwbLHFpEFa7p3gjVOe7tC37+kmRZ3fMx4VFHOTFt3Tbze80190yNY/nq+OHdx08mMozcLWutPKRWYsAvWUtEM6zbPBIsuFOijz49UVc91ZiddUoEqXMPeadBfXHW+qW+yguUk23j6ni+Za5zJ9oh778Wt8vwsc8dYFjmNnhvzDqrR3rDe14K1WZWl+2DSJXXwtYqyNtuy1JgH0qa+vukQrPQ9XzJyZda3IVh22J+aPA2KReFs7S23+VqwXhD4RCXL84qyXjT5dLGwOy3zUX3TIVjpez6715MWTi2AYNlhq/epkTWCdY/2lst8/IrUIbaLHZW2QRV2224yAR4lODqq20f1Tb1gpfP57Fy3caGlOFkIlh2WiATrTk8FK/vfBbc0TNOfXuarzvTtdFRar8osm2fy+emazvSKr+qbesFK5/NZu67mJ7jIQrJmCJZdukRyxTnfiXmLKAS6xrcvaYKtRZw5bynKm2jy6UpNZ/rYV/VNvWCl8/n0JWoE38oTeRp/wOtNZs0QrOTZm7qwZ0VE4RztbTcwAAAYsV4UlPOB94J1l/a2+WgNAIAheSLBGuu5YOWcK1qJHkZ7AAB0EebBitM3Y95DO7S3/gQtAgDQZadIsLbFUoH8mvbWxWgRAIAuy0VRhH9LjWBdKwrQOYY2AQAI6RYG5dDQlAgWnU7dQXJtAACkF6FLQxedGksNtFR7+/VoFQCAkLUiwVoYSxXSQ6Ijv/rQLgAADX2cKxKsCSkTrKyLRK4NDWgZAICGg8KgHDo/ljpop7YCW9AyAAANm0VyVRFLJfSSyN89jrYBACiI8wKRYL2UWsH6hWiS14TWAQAoOCRcEMr/nVrBGkCHgnggBQAgtQjT9h2c2j+WWqR3tNVYhNYBACjIFwU9/zOWamioaKLXgvYBAHxOs3BBKP0m5YKVOYhag5bfHQCQWspFgtWUOSiWemimtioLsVMIADhJXLwgfC+WDuSRosneIbQSAICZmRvELqPD0iJYM75ER7SV2YRWAgAwM3OZSK7aCk6JpQfRonA+YgoBAKwbQzgjli7EO4X70VIAAK4TLwj/X9oEq2QgNWgrtA4tBQAQJ5U5QANi6YPe0FYpG9lHAYg83ZwtEqxXY+mELhNN+irRWgBEnF3iBeHP0ipY3I+qtJUqRGsBEHGWieSqMpZupOdEOtqK9gIgwrSK51fT0i5YWRdRXFuxrWgxACLMFpFc9dGFsfRDK7VVy4M3FgCRpY/niwSrKOYH6E7R5G8fWg2AiFIjztEw1h+CdbooRKcErQZARCkWCdbh/NNi/oD+V6Snh9FuAESQNvH86p8xvyDO8A7DOwBRRGhw5+yfx/wDbRcdrdqLtgMgYvSIQ57LY35Cul+kqVVoPQAixh7xgvA+XwnW7C9Tu7aSy9B6AEQMoYd7O50e8xeUifyjAEQdnVMI34r5jewfiSpaihYEIEKUCgUr6z9j/oPWC5SV29GGAESEdpZFgrUm5kfkO0TaioO/AIgKYocG6SZfChYNpnqRc0MP2hGACHCc54kEq6ZkYMyfyFNE+roLLQlABPhEnFLmqZhfmXMWdYkOV0XmBgDCTh8vEMlV15yzYv5FfluksdVoTQBCTpXYoeHtmJ+h74nS+S1BawIQauK8WCRYcfpezN/QEpxVCEDU0DmDcGHM79BVoooXoUUBCDHLxQvCK2L+hzaKqt6INgUgpDSI51drYkFAukFU+ZVoVQBCSolYsEYEQrCm9qdPMccCICqIA55pB/eLBQP5bsyxAIj2/Eq+IxYUaDDVih6hCW0LQDTmV3tpcCw4iDOQrkLrAhAyVojnV/fGgsSML1Ed5lgARHR+VR2o+VUsFovJD4oeZAVaGIAQURyEDO6W7Fin0n7RoxxEGwMQEurF86t9gZtfxWKxGD0sephCtDIAoSAuPnCCaUIsiNCpYjtWLVoagBBQExb71ed7hfeJHmgxx9HWAAR+flUgFqzfxoJK5iDajQNWAQgj4gNTaadvEyJbWhbeJnqofOR5ByDQHBfnF2W6MRZkpvanctFj7UCLAxBgtovlqiww8YO6c6xhogebx11ocwACSifniP3bM2LBh1aJHq0MrQ5AQNkgnl8VxcJA1n+J8rzL3Ip2ByCANIvlqi/7R7FwQB8iTAeAsCAOx6EZsbBA59NRuJACEAZ03EU76ZxYeKCXRA+5kHvR/gAEiB7OF4c7T42FidlfpkOix/wIPQCAAFEhnl/V0+mxcCEO08nhDvQBAAJCO2eL51fjYmGDBtAm0aOWohcAEBBWiedX6wLvLip0b7hU5N5AXI9+AEAAqNNzZ/hpLJzI74seeBEiCwHwPbrm9ndiYYW+SYdFj7wNvQEAn7NVPL9qpa/Hwov8mDACCV7vAPiaFpbF86uHYmEmcxBtEz32ciT1A8C3xLlQPL/aQgNi4Ub+b+oTPfpu9AoAfMousVz1Zv1XLPzIb4kePhcJZwDwJR08T7wcfD0WBXLPpAM4FxqAoLBSPL+qm/3lWDSQbxG+AN6LvgGAz6gSyxVLN8SiAy0WvYL5WBYC4Cu6OFcsWAtiUYLOpyMI1AHA76wWy1VbzrmxaCHdL55o4ggwAPzCHr3l4D2xqMH9aIX4eArkbwDAD7Tr7A7S8lAGO5sGQ19EHaLXUQwnUgDSTpyLxHLVThfGogk9LJ5wfoLeAkCa+VhnOUgPxKLK1P5UKnol2YgtBCCttOik6qPVU/vHokv2JdQlei2LkXIGgLTRwwViuerIuigWbaSHxBNPHLQKQLrYoLc7eH8s6nA/KhS/nH3oNwCkgRo969WSSO4Oqsk5l1rE4dBwcAAg1eg6MzTnnA21OrEsvFWs6EXch/4DQArp08t8xfJoKNUXDg5Z4pdUjh4EQArZqrccnAmVShSsr1Gt+EXVoQ8BkCJq9eSqOvdMqJQy5cyV1Cu2ZLWjHwGQAo7oZWbolS6HQmkl61mxui/jXvQlADyml5fqOTP8CeokWhYOoNXwyQIgPej5XlFJ6A+aSNrB4dtiBwcknQHAW3bryVVT5DJf2VoWjhK/tmxuQp8CwCMa9SIH4/JIqJLxwvANsWTlI30yAJ7QxQv0rFevQJHMBGswrYcbKQCpopeX6y0HS2kwFMlcss6nRhjfAUgNG/Xk6hCsV1Yla6j4dGjiSvQvAFxkl55c9Uq/gRJZl6xpOvFMfBB9DACXqGcZvlcu+WQtFb/IXG5DPwPABdr0PNuZFiGRjE0+/CpVil9mAXejrwHgkG5eqCdXu+grUCD7s6wfUDv2CwHwAoO9wbas70J9kkK6geLil7oePQ4AB6zXk6u4dB2Ux/WAaOIK9DkAkqRCT65YmgrVccDU/pSn92p3o98BkAS6cYNMuTC2O2T2l6lCz8VhP/oeADbZr+vKQNvyT4PiOCbnXDoofsE53Iz+B4ANmjlHT65q4dnuEtk/p07xS85DPlIALHOE8/TkqpN+BqVxz8XhZr39woXI4gCAJbo4H3uDKZOsJ/QMhUvgSAqAKd16x88zMT0BhXFfst7Ue93L+Tj6IwAGHOdl+nL1JtTFm/hCXReHFTioAgBderlYX67ykLPdI/JP00vuR1yKcB0AhPTxan25Wg9XBi9nWV/XC4kmXstx9E0AVMR5jb5cVdLXoSreStbFdEjv9a+HZAGgkqt1+nJ1iC6GonjvlfVTatNrgo2QLAAS5GqDvly10Q+hJqmZZV2l50iKvO8AfEGZvlx1yldASVInWSOoR68pNqOfAsDMm/Tl6hgNg4qkFHmMnu878SYsDEHkF4MGs6teug0KknKk+3UbhDdAsgBsV3phOPdBPdIjWY/rSxZ2DEF05cpgZ5Cl30M50mfLekq/YdbClRREkD4jvyuWJkM10jvLmqrfOKUI2AERo9fIq53lZ6AY6ZesF/UbqARh0SBCHOcSA7mi56EW/tgx/Jt+IxUi+QyICEeNMjKw9BcoRSBmWYuR4g9EgE5ebCRXL0Il/GV+n6bfWAv5CPozCDVH9M9xZmJ6Ggrhv4XhH/UbLI+b0KdBaGnk+dgZDOAsa5J+o+XgUDAQUur0T8JhisPvyt/e77oBOzKOXgUhpFL/nEGmPni1+31hOEY/LBoH3IOwsc3IcnVMuhWK4P9Z1nDqMooyhP87CAe9hiE41ImMDEGZZV1Jh/UbsgieWSAEHOUiI7lqRb6rIJnff6KfSJl4ER9GfweBps3YjeFg9o+gAoEi+xLard+guXwQfR4ElgM8z0iudmVdBAUIHPP+lTYahIFyJfo9CCS7jPYFmdbPOQujP5DM/D+00KBhuQwGeBA4Q/tGI7FiysM5gwGmZKD0jlHzFiHOEASILl5uKFfyWzjFOfgG+Kf0nUmJFyBoBwSERl5gJFd99ARGezgk60Yjz6xsrsJYAL5nN2cbyVUHXY+RHh7J+hkdMJpKb0RuUuBry9UGY8vVfvoJRnm4JOt82mbU5Mu4HeMC+JIjvNRYrrbmnIsRHj7JOp3yjJo9l+swNoDvqOVcY7maT6djdIeSqf2l54wM8MTlcHQAPqKPtxqLVVyayv0wssM8z7qe2o26wHLuwDgBvqCdC43l6og8EiM69GR9nyqNl4b7MFZA2qk2Wwp+mvVdjOZI8OFXabFhV+Ay7sGIAWmjx2xXkGlh7pkYyRGyZtE06jPqEIu5FeMGpIUWLjAWq17pT1P7YxRHDDmDmoy6RTbv5DhGD0gpcf7Y2EGU6ZD0G4zeqPpmrTOeeBfDBA9SamYvMlsKrqFzMHIjS+YgesO4g8xD4A5IEXuMs1wxxeW/Zw7CqIWjQ7OxaJUipwPwmC5ebTa3aoITA/hsabjauLPM570YU8AzqsxcGJhWIPwGfE7JQJpGvcZdZhV3YmQB1+nglWZi1SP9CXmugHqe9SuqNe44uVyJfUPg6p7gLjO7FVONdDlGJxDw4VeluSadh5fDPwu4RItZ6A0Ty7PoKxiZQBf5Fmox6UJcDj944JAe3mp8lAQTU7M8GiMSmC0Nz6FlZn/3FvJ+jDmQNHWcbzq3oiU5Z2M0AgtwP/lB6jTrUKuR8g8kQTuvMherTnki0sYAG2RfQqVm3Sqbt2NxCGwtBCvMAm+YmFbhIFRgm6n96WHqMF8cIhkNsEaN8ak3J652egCBzSBJcr5DJaZdjEuwcwhMaOYSc7FiWk4XYtQBR/Ys6T46Yrr5zGVwKwU6dPJ6K2LVJt0DuxVwY571bSow73A5sGgBgdVqO+dYkasFCL0BLiLdRPXm3W4B74EvPDhJnHdbsVox1Uk3YIQBl8k9U/qHcZbSz3KVwgwP4lxjljf05AHz8muzv4zRBbxxdvg5lVvohLyMD2DMRph6XmZFrJi2ZP8Uowp4SMlA+RFqtdIZi7kRIzeCHOJia2LVSg+UDMSIAp4z5xvyu8YHsn52rYBoRUysVlgTqz7pnTlnYSSBlJF1KZVZ6pq8gg9hJEdCrEqsiRXTOiwEQcqZ2l8ab2Xn8IRraQNGdIhpsC5W9fJd8LYCaYJOp+epy1pXXc51cHkI4W5gHS+3KlYd9DydjlED0ita50uzrbg7nHB5qOI+jPKQ0MdVvNiqWPXJ7yJdDPAJ2T+yEnN44srnT/g4RnvAOc6fWMlp9dlVnP0jjBLgK+SrabPVDjyPtyKbVmBp5y3mmdi/uDbJGRgdwIdwP+km+tRqR5a5FPuHATSvl5qnNv7i2kk3wsQOfEzJQOke2me5Q/MyrkLIdCDo4T1W/ddPnnYj3wXHUBAACk6hB8yODFMeH7aFD0MRfEwbbzY/6jTx2kcTaDBGAgiQaMkT7cy0iIu5BjuIPtwJrLEaavPZVS3dB7ECAYQG0wSqsdPZ5/MWboFK+IQW3sLz7YnVXvleiBUItGjJd9HHtjo9F3IlH4NepJFj/CkvtSdVTDukcZmD0ONB4JnaX7qO1tnr/tm8luuwREzDErCO11o52UZ5raER2A0E4Zpr/YoKrOV4SFwilnEDAnpSQpwbuMyeaZ2JKU4L5SvQu0E4Ret7lGl+RKvWN76cm6EoHtLEW+34rX9+3Kn0z+x/R68GoWbOWfIfqc724OCFvJUbMdtyeVbVmJxUMdXSE/Q19GYQCTIH0W12rVqfHXOxmRtg23LBVnWQN1s7IkJ7rZVuhXkdRG+B+EP5LWpPZsjk8jqu5m7oThJ0815ea99WdeI6Ir+V9Z/ouSCy5J1BE6wdbCGKRizindwGDbJIK+/kIjuRgMprq3QfslkBEIvF6DLKpLYkBxIv4PW8l7ugSDp08V5ez3nJChVTG2VmXYpeCkCiaJ0qjaOVdh0fEq8lvJX3w+U0wf1zP2/lJckLFVMfFcpj6FT0TgCEZF0kP0t7HAwxlnkpb+FaPhpZoTrK+3gLL01+8Xfi2i0/m/Md9EgATOB+dJn0OjWQswHHi3kj7+HWiLhCxLmV9/BG60mL9a8D8mvZP0c/BMDOEnGANET6gA47Hn48j0u4gmu5I5RC1c61XMEldnKAGlmrZsgZNAC9D4CkKDiFRsjvUwu5MRw5l0t4K+/lloAnDezhZt7LW7kkWfcE7dUkvUfDCk5BjwPAMZmD5AzKdL5ITLwW8Wrexnu5OSBm+m5u5irexqt4Ebv5Huig/Jb0G+QGBcD9ReLl0otUQez2lcuFvI63815u5E6f+NH3cScf4r28nddxoXszqcRrm/QiXYYFIACeMvcC6X5aQkeJvblkzuciXsflvItruIHbPN9xjPNRbuMGruFdXM7ruIjzne7xGV1HqYAm5HwbPQmAlJF/Gg2l//FiviUWsQW8lEu4lDfyVv6Id/FeruV6PsjN3Mod3MXHTl59CXOkz37WxR3cys18kOu5lvfyLv6It/IGLuUSXsoLvBQnZSqYbdLL0pD809B7AEjXQvGbdDvNTCb/Q4SuWvl9eQx9E70FAL8I18XyXfL7VAV5SnT+pBl0Z9ZF6B0A+JScc6Wx0j9oM/VEVqZ6aJM8XR6Tcy56AwCBsXHJV9AkmhehxWId5UiPy1cg9g+AIM+5zqZh9BRlh3K5GKfdJNNTNAwWKgBCRu6Z8pXyIzSDyqgj0DLVThtphvyIfGXumWhVAEIP95t7AQ2jSTSDNlBzIESqkTbI79Ik+eq5F+BILQAiPfPK/ql8izxFfp9WUTUd94VAHadqWim9J0+Rb8n+KWZSAAAhU/vP/Zb839JN9Ci9Sh9SEW2ng04SC1pKlHeQtlMRfSi9Qo9KN2VdOvdbU/ujJQAASUED6Jv0A+mXNEIaRw/Lz9Cr8vtEtIgKaSNtoT1URy0nr+7PZaj785/V0R7aQhupkBYRye9Lr8jP0MPyHTRC+iX9gL6JeD4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIML8f8KISGrGubIwAAAAAElFTkSuQmCC",t.LOCKED_SELECTION_CONTROL_STROKE_WIDTH=1,t.LOCKED_SELECTION_CONTROL_ACCENT_COLOR=r.AccentMagenta,t.LOCKED_SELECTION_CONTROL_SIZE=18,t.LOCKED_SELECTION_CONTROL_LOCK_ICON_PATH="M6,3.06c0-.23,0-.83,0-1A2.38,2.38,0,0,0,3.5,0,2.32,2.32,0,0,0,1,2.05H1v1H0v6H7v-6ZM4.42,6.92H2.6V5.2H4.42ZM5,3.06H2v-1A1.5,1.5,0,0,1,3.5.92,1.4,1.4,0,0,1,5,2.06C5,2.23,5,2.82,5,3.06Z",t.LOCKED_SELECTION_CONTROL_LOCK_ICON_FILL="#8c94a3"},88:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.StateUpdateNotifier="UpdateNotifier",e.ResourceRepository="ResourceRepository",e.FontLoader="FontLoader",e.Logger="Logger",e.Config="Config",e.FontLoaderFactory="FontLoaderFactory",e.EditableBlockMediator="EditableBlockMediator",e.HistoryManager="HistoryManager",e.DesignerRenderer="DesignerRenderer",e.Workspace="Workspace",e.MountNode="MountNode",e.DesignerProps="DesignerProps",e.RootMutator="RootMutator",e.RootEpic="RootEpic",e.EventHandler="EventHandler",e.AssetsDOMReconciler="AssetsDOMReconciler",e.ReconciliationService="ReconciliationService",e.ICursorManager="ICursorManager",e.AfterRenderService="AfterRenderService",e.IAppStage="IAppStage",e.RotationCursorProvider="RotationCursorProvider",e.ResizingCursorProvider="ResizingCursorProvider",e.MovingCursorProvider="MovingCursorProvider",e.ICursorTemplatesProvider="ICursorTemplatesProvider",e.VideoRepository="VideoRepository",e.ImageRepository="ImageRepository",e.MaskRepository="MaskRepository",e.SvgRepository="SvgRepository",e.TextRepository="TextRepository",e.Renderer="Renderer",e.VideoRenderer="VideoRenderer",e.FilterService="FilterService",e.CropService="CropService",e.StateManager="StateManager",e.FontRepository="FontRepository",e.ResourceCache="ResourceCache",e.FontMetaLoader="FontMetaLoader",e.DesignElementsComparator="DesignElementsComparator"}(r=t.DI_TYPES||(t.DI_TYPES={}))},892:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1478),o=n(509);function a(e,t){var n,a;void 0===t&&(t={shallow:!1});var s=new i.Page(e);try{for(var u=r(e.elements),l=u.next();!l.done;l=u.next()){var c=l.value,f=o.createDesignElement(c,t);s.add(f,t.shallow)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return s}t.createPage=a},893:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(128),s=n(378),u=n(894),l=n(623),c=n(742),f=n(320),h=o(n(1071));t.DESIGN_ELEMENT_DEFAULT_PROPS={top:0,left:0,locked:!1,angle:0,animations:[]};var p=function(){function e(e){this.props=r({},t.DESIGN_ELEMENT_DEFAULT_PROPS,e),this.state={templateAsset:!1,loadingStatus:f.LoadingStatus.Initial}}return e.prototype.intersects=function(e){return a.rectIntersects(this.getBoundingRect(),e.getBoundingRect())},e.prototype.rotate=function(e,t){if(t){var n=this.getBoundingRect().getVertices().map(function(n){return a.rotatePoint(n,e,t)}),r=this.props.angle+e,i=a.rotatePoint(n[0],-r,a.midpoint(n[0],n[2]));this.props.angle=r,this.props.left=i.x,this.props.top=i.y}else this.props.angle+=e},e.prototype.resize=function(e,t,n,r){void 0===r&&(r=!0);var i=this.resizeState.initialRect,o=u.resizeRect(i,t,n,e,{proportional:r});this.props.width=o.width,this.props.height=o.height,this.props.left=o.position.x,this.props.top=o.position.y},e.prototype.move=function(e,t){this.props.left=e,this.props.top=t},e.prototype.getBoundingRect=function(e){void 0===e&&(e=1);var t=this.props,n=t.width,r=t.height,i=t.angle;return new s.Rect(a.scalePoint(a.positionToPoint(this.props),e),n*e,r*e,i)},e.prototype.getBoundingBox=function(){var e=i(a.bbox(this.getBoundingRect().getVertices()),2),t=e[0],n=e[1];return new s.Rect(t,n.x-t.x,n.y-t.y)},e.prototype.handleResizeStart=function(e){this.resizeState={initialRect:this.getBoundingRect(),controlName:e}},e.prototype.handleResizeChange=function(e,t){var n=this.resizeState,r=n.initialRect,i=n.controlName,o=c.oppositeRectPointFromControlName(r,i),s=l.rectPointFromControlName(r,i);return{targetID:this.props.uuid,ratio:u.getResizeRatio(r,i,a.positionToPoint(e),this.getControlPadding(i)),anchorPoint:o,direction:a.vector(o,s),position:t,proportional:!l.isEdgeControl(i)||!this.allowsNonproportionalResize()}},e.prototype.allowsNonproportionalResize=function(){return!1},e.prototype.serialize=function(){return h.default(this.props)},e.prototype.getControlPadding=function(e){return 0},e.prototype.setProps=function(e){this.props=r({},this.props,e)},e.prototype.getState=function(){return h.default(this.state)},e}();t.DesignElement=p},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(623),i=n(128),o=n(378),a=n(742);function s(e,t,n,o){void 0===o&&(o=0);var s=r.rectPointFromControlName(e,t),u=a.oppositeRectPointFromControlName(e,t),l=i.distance(u,s),c=i.distance(u,n)-o;return Math.max(c/l,0)}function u(e,t){var n=t.controlName,o=t.wasEnlarged,a=t.maxCropRatio,s=t.anchorPoint,u=t.direction,f=t.ratio,h,p={x:0,y:0},d=1,g;if(r.isEdgeControl(n)){h=l(e,n,d=o?a:Math.min(a,f),{proportional:!1});var v=i.rotatePoint(e.nw,-e.angle),m=i.rotatePoint(h.nw,-h.angle);p={x:m.x-v.x,y:m.y-v.y},f/=d}var y=h||e;return{rect:g=n?l(y,n,f):c(y,s,u,f),crop:p,cropRatio:d}}function l(e,t,n,o){void 0===o&&(o={});var s=r.rectPointFromControlName(e,t),u=a.oppositeRectPointFromControlName(e,t);return c(e,u,i.vector(u,s),n,o)}function c(e,t,n,r,a){void 0===a&&(a={});var s=void 0===a.proportional||a.proportional,u=i.vectorsAngle({x:0,y:1},n),l=e.getVertices().map(function(e){return i.translatePoint(e,{x:-t.x,y:-t.y})}).map(function(e){return i.rotatePoint(e,u)}).map(function(e){return i.scalePoint(e,r,s?r:1)}).map(function(e){return i.rotatePoint(e,-u)}).map(function(e){return i.translatePoint(e,t)}),c=i.distance(l[1],l[2]),f=i.distance(l[0],l[1]);return new o.Rect(i.rotatePoint(l[0],-e.angle,i.midpoint(l[0],l[2])),c,f,e.angle)}t.getResizeRatio=s,t.resizeAndCropFrame=u,t.resizeFrameRect=l,t.resizeRect=c},895:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i;Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ResourceLoadingError",n}return r(t,e),t}(Error);t.ResourceLoadingError=o},896:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Cover="cover",e.Contain="contain"}(r=t.FitImageMode||(t.FitImageMode={}))},897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1490),i=n(509);function o(e,t){void 0===t&&(t={shallow:!1});var n=new r.PersistGroupElement(e);return e.elements&&e.elements.forEach(function(e){var r=i.createDesignElement(e,t);n.add(r,t.shallow)}),n}t.createPersistGroupElement=o},898:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(345);t.mapTextElementPropsToDomain=function(e){var n=e.colorMap,i=e.boldMap,o=e.italicMap;return r({},t.mapTextElementOldFormatPropsToDomain(e),{colorMap:n,italicMap:o,boldMap:i})},t.mapTextElementOldFormatPropsToDomain=function(e){var t=e.originalDims,n=e.text,o=e.fontSize,a=e.font,s=e.lineHeight,u=e.wordBreak,l=e.colorMap,c=e.boldMap,f=e.italicMap,h=e.lineMap,p=e.textAlign,d=e.capitalize,g=e.underline,v=e.letterSpacing,m=e.heightBias,y=e.lineHeightShift,E=e.stickedImageData,b=e.stickedFiltersPreset,w=e.stickedImageFilters,_=e.src,P=i.mapElementBasePropsToDomain(e);return r({},P,{fontSize:o,font:a,lineHeight:s,wordBreak:u,colorMap:l,boldMap:c,italicMap:f,lineMap:h,textAlign:p,capitalize:d||!1,underline:g,letterSpacing:v,heightBias:m,lineHeightShift:y,stickedImageData:E,stickedFiltersPreset:b,stickedImageFilters:w,originalDims:t,src:_,text:n,width:t?t.width:P.width,height:t?t.height:P.height})}},899:function(e,t,n){"use strict";function r(e){return"tryOnAllowed"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isTryOnElement=r},907:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(91);t.findVideoAnimations=function(e){return e.filter(t.isVideoAnimation)},t.calcVideoTime=function(e,t){var n=e.valueFrom,i=e.frameFrom,o=e.valueTo,a=n+t-i;return r.limitByRange(n,o)(a)},t.shouldPlayVideo=function(e,t,n,r){return t&&n&&e!==n.frameTo&&r!==n.valueTo},t.isVideoAnimation=function(e){return"src"===e.field}},908:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var c=n(755),f=n(1107),h=n(76),p=n(380),d=n(114),g=n(88),v=function(e){function t(t){var n=e.call(this)||this;return n.getMediaUrl=t.getMediaUrl,n.placeholderImageSrc=t.placeholderImageSrc,n}return r(t,e),t.prototype.replaceImage=function(e,t){return u(this,void 0,void 0,function(){var n;return l(this,function(r){switch(r.label){case 0:return[4,p.loadImage(t)];case 1:return n=r.sent(),this.set(e,n),[2]}})})},t.prototype.loadWithTraverser=function(e,t){return u(this,void 0,void 0,function(){var n,r=this;return l(this,function(i){switch(i.label){case 0:return n=[],t(e,function(e){switch(e.type){case h.DesignElementType.TextElement:var t=e,i=t.src?t.src:"";return void n.push(r.loadAsset(i,t.uuid));case h.DesignElementType.ImageElement:case h.DesignElementType.IllustrationElement:var o=e,a=o.mediaId||o.dphId;return void(a&&r.getMediaUrl?n.push(r.loadAsset(r.getMediaUrl(a.toString(),f.MediaType.Screen),o.uuid)):o.src?n.push(r.loadAsset(o.src,o.uuid)):n.push(r.loadAsset(r.placeholderImageSrc,o.uuid)));case h.DesignElementType.VideoElement:var s=e;return void(s.previewMediaId&&r.getMediaUrl?n.push(r.loadAsset(r.getMediaUrl(s.previewMediaId,f.MediaType.Thumb),s.uuid)):s.previewPath&&n.push(r.loadAsset(s.previewPath,s.uuid)))}}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},t.prototype.loadSingleAsset=function(e){return p.loadImage(e)},t.prototype.skipLoad=function(e,t){return-1!==e.src.indexOf(t)},t=o([d.injectable(),s(0,d.inject(g.DI_TYPES.DesignerProps)),a("design:paramtypes",[Object])],t)}(c.AssetRepository);t.ImageRepository=v},909:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(755),c=n(76),f=n(380),h=n(114),p=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.loadWithTraverser=function(e,t){return s(this,void 0,void 0,function(){var n,r=this;return u(this,function(i){switch(i.label){case 0:return n=[],t(e,function(e){if(e.type===c.DesignElementType.VideoElement){var t=e;n.push(r.loadAsset(t.src,t.uuid))}}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},t.prototype.loadSingleAsset=function(e){return f.loadVideo(e)},t.prototype.skipLoad=function(e,t){return e.getAttribute("data-string-src")===t},t=o([h.injectable(),a("design:paramtypes",[])],t)}(l.AssetRepository);t.VideoRepository=p},91:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(85),u=o(n(1071)),l=n(1475),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function f(e){for(var t="",n=0;n<e;n++)t+=c.charAt(Math.floor(Math.random()*c.length));return t}function h(){return f(64)}function p(e,t){var n;return-1!==(e||"").split(/\s/g).indexOf(t)}function d(e){return u.default(e)}function g(e,t){return JSON.stringify(e)===JSON.stringify(t)}function v(e,t){return Object.values(t).includes(e)}function m(e,t){return function(n){return t(e(n))}}t.randomString=f,t.generateUuid=h,t.matchName=p,t.deepCopy=d,t.deepEqual=g,t.isInEnum=v,t.compose=m,t.not=function(e){return function(t){return!e(t)}},t.createPropGetter=function(e){return function(t){return e[t]}},t.first=function(e){return e[0]},t.frameToTime=function(e){return e*s.FRAME_INTERVAL/1e3},t.limitByRange=function(e,t){return function(n){return Math.min(Math.max(e,n),t)}},t.observableToPromise=function(e){return new Promise(function(t){var n=e.subscribe(function(e){n&&n.unsubscribe(),t(e)})})},t.synchronize=function(e,n){return r(a,void 0,void 0,function(){var r;return i(this,function(i){return r=t.observableToPromise(e),n&&n(),[2,r]})})},t.unique=function(e,t,n){return n.indexOf(e)===t},t.startTimeout=function(e,t){var n=setTimeout(e,t);return function(){return clearTimeout(n)}},t.timeout=function(e,n){return new Promise(function(r,i){var o=t.startTimeout(function(){return i(new l.TimeoutError("Timeout exceeded"))},e);n.then(function(e){o(),r(e)},function(e){o(),i(e)})})},t.isInlineImage=function(e){return e.startsWith("data:image")}},910:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var l=n(755),c=n(114),f=n(76);function h(e){var t,n=(new DOMParser).parseFromString(e,"image/svg+xml"),r=n.rootElement;return{path:n.querySelector("path").getAttribute("d"),width:parseFloat(r.getAttribute("width")),height:parseFloat(r.getAttribute("height"))}}var p=function(e){function t(){return e.call(this)||this}return r(t,e),t.prototype.loadWithTraverser=function(e,t){return s(this,void 0,void 0,function(){var n,r=this;return u(this,function(i){switch(i.label){case 0:return n=[],t(e,function(e){if(e.type===f.DesignElementType.MaskElement){var t=e;n.push(r.loadAsset(t.src,t.uuid))}}),[4,Promise.all(n)];case 1:return i.sent(),[2]}})})},t.prototype.loadSingleAsset=function(e){return fetch(e).then(function(e){return e.text()}).then(function(e){return h(e)})},t.prototype.skipLoad=function(e,t){return e.path===t},t=o([c.injectable(),a("design:paramtypes",[])],t)}(l.AssetRepository);t.MaskRepository=p},911:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(114),u=n(298),l=n(88),c=n(757),f=n(76),h=function(){function e(){}return e.prototype.load=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:return t=[],u.traverseProject(e,function(e){e.type===f.DesignElementType.TextElement&&t.push(n.loadImgOfText(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadElement=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:return t=[],u.traverseElement(e,function(e){e.type===f.DesignElementType.TextElement&&t.push(n.loadImgOfText(e))}),[4,Promise.all(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadImgOfText=function(e){if(!e.src||"undefined"===e.src){var t=this.editableBlockMediator.getTextElementPayload(e);Object.assign(e,t)}},r([s.inject(l.DI_TYPES.EditableBlockMediator),i("design:type",c.EditableBlockMediator)],e.prototype,"editableBlockMediator",void 0),e=r([s.injectable()],e)}();t.TextRepository=h},918:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(e){a={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},l=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var c=n(114),f=n(298),h=n(401),p=n(761),d=n(88),g=function(e){return Object.keys(e.fontStyles).map(function(t){return{name:e._id,style:t,path:e.fontStyles[t].path}})},v=function(e){return[].concat.apply([],l(e))},m=function(){function e(e){this.loaders={},this.getFontData=e.getFontData}return e.prototype.has=function(e){var t=this;return Object.keys(this.loaders).some(function(n){return n.startsWith(e+":")&&!!t.loaders[n].inlineContent})},e.prototype.getInlineFontContent=function(e){var t=this;return Object.keys(this.loaders).filter(function(n){return n.startsWith(e+":")&&!!t.loaders[n].inlineContent}).map(function(e){return t.loaders[e].inlineContent})},e.prototype.loadElement=function(e){return a(this,void 0,void 0,function(){var t,n;return s(this,function(r){switch(r.label){case 0:return t=v(f.filterElement(e,h.isTextElement).map(function(e){return e.font})),n=[],this.getFontData?[4,this.getFontData(t)]:[3,2];case 1:n=r.sent(),r.label=2;case 2:return[4,this.loadFonts(v(n.map(g)))];case 3:return r.sent(),[2]}})})},e.prototype.loadFontWithStyles=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.fontMetaLoader.getMetaFor(e)];case 1:return n.sent(),[2,this.loadFonts(t)]}})})},e.prototype.loadFonts=function(e){var t=this;return e.forEach(function(e){var n=e.name+":"+e.style;t.loaders[n]||(t.loaders[n]=t.createLoader(n,e.path))}),Promise.all(Object.values(this.loaders).map(function(e){return e.load()}))},e.prototype.createLoader=function(e,t){var n=this.loaderFactory(),r=u(e.split(":"),2),i=r[0],o=r[1];return n.init(i,o,t),n},r([c.inject(d.DI_TYPES.FontLoaderFactory),i("design:type",Function)],e.prototype,"loaderFactory",void 0),r([c.inject(d.DI_TYPES.FontMetaLoader),i("design:type",p.FontMetaLoader)],e.prototype,"fontMetaLoader",void 0),e=r([c.injectable(),o(0,c.inject(d.DI_TYPES.DesignerProps)),i("design:paramtypes",[Object])],e)}();t.FontRepository=m},919:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o};Object.defineProperty(t,"__esModule",{value:!0});var i=n(114),o=function(){function e(){this.cache=new Map}return e.prototype.get=function(e){return this.cache.get(e)},e.prototype.set=function(e,t){this.cache.set(e,t)},e=r([i.injectable()],e)}();t.ResourceCache=o},921:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(920)),o="ShallowUserAction";t.userActionCreator=i.default("ShallowUserAction"),t.applyPatch=t.userActionCreator("APPLY_PATCH"),t.showOnly=t.userActionCreator("SHOW_ONLY"),t.showAll=t.userActionCreator("SHOW_ALL"),t.updateWorkspace=t.userActionCreator("UPDATE_WORKSPACE")},925:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n(298),u=n(76),l=n(320),c=n(1705),f=n(752),h=n(299),p=n(907),d=n(91),g=n(114),v=n(630),m=n(88),y=function(){function e(e,t){this.stage=e,this.repository=t,this.players={},this.props={timeline:{}}}return e.prototype.process=function(e){var t=this,n,r;if(this.shouldProcess(e)){var i=e.project,o=function(n){s.traversePage(n,function(r){e.elementState[r.uuid].loadingStatus===l.LoadingStatus.Loaded&&r.type===u.DesignElementType.VideoElement&&t.processVideo(r,n,e)})};try{for(var c=a(i.pages),f=c.next();!f.done;f=c.next()){var h;o(f.value)}}catch(e){n={error:e}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.props=e}},e.prototype.shouldProcess=function(e){var t=e.timeline,n=this.props.timeline;return n.currentFrame!==t.currentFrame||n.isPlaying!==t.isPlaying},e.prototype.processVideo=function(e,t,n){var r=n.timeline,i=p.findVideoAnimations(e.animations);if(0!==i.length){var o=f.currentFrameRelativeTo(t,n),a=i.find(h.isActionActive(o)),s=this.getPlayer(e.uuid),u=a?p.calcVideoTime(a,o):h.closestAnimationValue(i.reverse(),o);p.shouldPlayVideo(o,r.isPlaying,a,u)?s.play(d.frameToTime(u)):s.stop(d.frameToTime(u))}},e.prototype.getPlayer=function(e){var t=this.repository.getVideo(e);return this.players[e]?this.players[e].videoSrc!==t.src&&(this.players[e]=new c.VideoPlayer(t,this.stage)):this.players[e]=new c.VideoPlayer(t,this.stage),this.players[e]},e=r([g.injectable(),o(0,g.inject(m.DI_TYPES.IAppStage)),o(1,g.inject(m.DI_TYPES.ResourceRepository)),i("design:paramtypes",[Object,v.ResourceRepository])],e)}();t.VideoRenderer=y},926:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(319),s=n(624),u=n(128),l=n(114),c=n(88),f=function(){function e(e){this.stage=e}return e.prototype.updateCursor=function(e){this.removeStyles(),this.addStyles(e)},e.prototype.addStyles=function(e){var t=e.mode,n=e.selectionFrame;t===a.WorkspaceMode.Rotating&&this.stage.addClass(this.calcStyles(n.rotationControlInUse,n.selectedElement)),t===a.WorkspaceMode.Initial&&n.hoveredRotateControl&&this.stage.addClass(this.calcStyles(n.hoveredRotateControl,n.selectedElement))},e.prototype.removeStyles=function(){this.stage.removeClass("cursor-rotate-ne"),this.stage.removeClass("cursor-rotate-se"),this.stage.removeClass("cursor-rotate-sw"),this.stage.removeClass("cursor-rotate-nw")},e.prototype.calcStyles=function(e,t){var n=u.radiansToDegrees(this.calcControlAngle(e,t));return 0<=n&&n<=90?"cursor-rotate-ne":90<n&&n<=180?"cursor-rotate-se":180<n&&n<=270?"cursor-rotate-sw":270<n&&n<360?"cursor-rotate-nw":void 0},e.prototype.calcControlAngle=function(e,t){var n=this.getControlAngleStrategy(e)(t);return this.normalizeAngle(t.angle+n)},e.prototype.getControlAngleStrategy=function(e){var t=function(e){var t=e.width,n=e.height;return Math.atan(t/n)};switch(e){case s.SelectionFrameRotationControlName.NE:return t;case s.SelectionFrameRotationControlName.NW:return function(e){return 2*Math.PI-t(e)};case s.SelectionFrameRotationControlName.SE:return function(e){return Math.PI-t(e)};case s.SelectionFrameRotationControlName.SW:return function(e){return Math.PI+t(e)}}},e.prototype.normalizeAngle=function(e){return e<0?2*Math.PI+e:e>=2*Math.PI?e-2*Math.PI:e},e=r([l.injectable(),o(0,l.inject(c.DI_TYPES.IAppStage)),i("design:paramtypes",[Object])],e)}();t.RotationCursorProvider=f},927:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(319),s=n(379),u=n(114),l=n(128),c=n(88),f=function(){function e(e,t){this.templateProvider=t,this.stage=e}return e.prototype.updateCursor=function(e){this.removeStyles(),this.addStyles(e)},e.prototype.removeStyles=function(){this.stage.clearStyles()},e.prototype.addStyles=function(e){var t=e.mode,n=e.selectionFrame,r=n.resizingControlInUse,i=n.selectedElement,o=n.hoveredResizingControl;if(!i||!i.locked)return t===a.WorkspaceMode.Resizing?this.stage.appendStyles(this.calcStyles(r,i)):t===a.WorkspaceMode.Initial&&o?this.stage.appendStyles(this.calcStyles(o,i)):void 0},e.prototype.calcStyles=function(e,t){var n=l.radiansToDegrees(t.angle);switch(e){case s.SelectionFrameControlName.N:case s.SelectionFrameControlName.S:return this.template(n+90);case s.SelectionFrameControlName.NE:case s.SelectionFrameControlName.SW:return this.template(n-45);case s.SelectionFrameControlName.NW:case s.SelectionFrameControlName.SE:return this.template(n+45);default:return this.template(n)}},e.prototype.template=function(e){return this.templateProvider.resizingTemplate(e)},e=r([u.injectable(),o(0,u.inject(c.DI_TYPES.IAppStage)),o(1,u.inject(c.DI_TYPES.ICursorTemplatesProvider)),i("design:paramtypes",[Object,Object])],e)}();t.ResizingCursorProvider=f},928:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(319),s=n(114),u=n(88),l=function(){function e(e){this.stage=e}return e.prototype.updateCursor=function(e){this.removeStyles(),this.addStyles(e)},e.prototype.addStyles=function(e){var t=e.mode,n=e.highlightedIDs;t===a.WorkspaceMode.Moving&&this.stage.addClass("cursor-move"),t===a.WorkspaceMode.Initial&&e.hoveredElementUuid&&this.stage.addClass("cursor-move")},e.prototype.removeStyles=function(){this.stage.removeClass("cursor-move")},e=r([s.injectable(),o(0,s.inject(u.DI_TYPES.IAppStage)),i("design:paramtypes",[Object])],e)}();t.MovingCursorProvider=l},929:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(114),a=function(){function e(){this.history=[],this.curStateIndex=-1}return e.prototype.registerState=function(e){this.history.splice(this.curStateIndex+1,this.history.length-this.curStateIndex,e),this.curStateIndex++},e.prototype.replaceSelectionFrameInCurrentState=function(e){this.current?this.current.selectionFrame=e:console.warn("Failed to write selection frame to current history state: there is no current state")},e.prototype.setInitialState=function(e){-1===this.curStateIndex?this.registerState(e):console.warn("Failed to set initial state in history: there are states in the history already")},e.prototype.reset=function(e){this.history=[e],this.curStateIndex=0},e.prototype.undo=function(){return this.curStateIndex=Math.max(this.curStateIndex-1,0),this.current},e.prototype.redo=function(){return this.curStateIndex=Math.min(this.curStateIndex+1,this.history.length-1),this.current},e.prototype.canUndo=function(){return this.curStateIndex>0},e.prototype.canRedo=function(){return this.curStateIndex<this.history.length-1},Object.defineProperty(e.prototype,"current",{get:function(){return this.history[this.curStateIndex]},enumerable:!0,configurable:!0}),e=r([o.injectable(),i("design:paramtypes",[])],e)}();t.HistoryManager=a},930:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r,a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(o=(i<3?a(o):i>3?a(t,n,o):a(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(!(o=(o=n.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){n=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(6===a[0]&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e],i=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(746)),u=n(114),l=n(381),c=n(514),f=n(85),h=function(){function e(){this.event$=new c.Subject,this.styles=[]}return e.prototype.init=function(e){this.el=new s.default.Stage({container:e}),l.createKonvaEventSource(this.el).subscribe(this.event$)},e.prototype.export=function(e){var t=e.format;return i(this,void 0,void 0,function(){var e=this;return o(this,function(n){return[2,new Promise(function(n){e.el.toDataURL({mimeType:"image/"+t,quality:1,callback:n})})]})})},e.prototype.find=function(e){return this.el.find(e).toArray()},e.prototype.findOne=function(e){return this.el.findOne(e)},e.prototype.findImage=function(e){var t;return this.el.findOne("."+e).findOne("."+f.IMAGE_NAME)},e.prototype.findVideo=function(e){var t;return this.el.findOne("."+e).findOne("."+f.VIDEO_NAME)},e.prototype.draw=function(){this.el.draw(),this.applyStyles()},e.prototype.batchDraw=function(){this.applyStyles(),this.el.batchDraw()},e.prototype.destroy=function(){this.el.destroy()},e.prototype.container=function(){return this.el.container()},e.prototype.clearStyles=function(){this.styles=[]},e.prototype.appendStyles=function(e){this.styles.push(e)},e.prototype.addClass=function(e){this.el.container().classList.add(e)},e.prototype.removeClass=function(e){this.el.container().classList.remove(e)},e.prototype.applyStyles=function(){this.el.container().setAttribute("style",this.styles.join(";"))},e=r([u.injectable()],e)}();t.AppStage=h},931:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(920)),o="Canvas",a;!function(e){e.MouseMove="MOUSE_MOVE",e.MouseUp="MOUSE_UP",e.MouseDown="MOUSE_DOWN",e.MouseOver="MOUSE_OVER",e.MouseOut="MOUSE_OUT",e.Click="CLICK"}(a||(a={}));var s=i.default("Canvas");t.mouseOverAction=s(a.MouseOver),t.mouseOutAction=s(a.MouseOut),t.mouseDownAction=s(a.MouseDown),t.mouseUpAction=s(a.MouseUp),t.mouseMoveAction=s(a.MouseMove),t.clickAction=s(a.Click)},932:function(e,t,n){"use strict";var r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i,o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(634),s=n(1149),u=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.create=function(e,t){var n=this.getFullPageSize(),r=this.getCenterPosition(e),i=e.isBackground?s.getBackgroundElementDimensions(e,n):s.getElementDimensions(e,t,r);return o({},e,i)},t}(a.AddElementPropsFactory);t.BackgroundAddElementPropsFactory=u},933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.groupElements=r.userActionCreator("GROUP_ELEMENTS"),t.ungroupElement=r.userActionCreator("UNGROUP_ELEMENT")},934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207);t.moveToFront=r.userActionCreator("MOVE_TO_FRONT"),t.moveToBack=r.userActionCreator("MOVE_TO_BACK")},935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(207),i;!function(e){e.MultiSelectMove="MULTI_SELECT_MOVE",e.MultiSelectStart="MULTI_SELECT_START",e.MultiSelectEnd="MULTI_SELECT_END"}(i||(i={})),t.multiSelectStart=r.userActionCreator(i.MultiSelectStart),t.multiSelectMove=r.userActionCreator(i.MultiSelectMove),t.multiSelectEnd=r.userActionCreator(i.MultiSelectEnd)}}]);